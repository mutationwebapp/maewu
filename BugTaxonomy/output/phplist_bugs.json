[{"subject": "phplist", "link": "/phpList/phplist3/pull/734", "title": "Migrate to GitHub actions", "status": "open", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Move CI from Travis to Github Actions</p>\n<h2>Related Issue</h2>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/733", "title": "Change default value of UNSUBSCRIBE_JUMPOFF", "status": "open", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>The default value of UNSUBSCRIBE_JUMPOFF , when not specified in config.php, is 1, i.e. an unsubscribe confirmation page is <strong>not</strong> displayed. This is different to the explanation in config_extended.php which suggests that the default is 0.</p>\n<p>There have been reports in the user forum and Mantis about unauthorised unsubscriptions possibly due to \"link following\" by anti-malware software. So it seems safer to make the default not to jumpoff.</p>\n<p>Include an explanation of how robots.txt might be used to try to stop \"link following\".</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>This is not simple. It's a very philosophical issue. Do you think people are good but do bad things, or do you think people who are bad, also do good things.</p>\n<p>Anyway, sorry to be possibly too cautious here. I set this to 1 to ensure that \"bad\" people who use phpList for incorrect purposes are hampered, partly expecting that to happen (which I'm not proud of), and hoping that good people would sort it out.</p>\n<p>So, this issue should be handled differently, the issue lies with as you write \"link following\". Technically it would be better to avoid link-following, but realistically how are we reliably going to make that happen.</p>\n<p>So, as it is, I think it's good to do this. I like your addition to the doc files, I doubt anyone will notice, but we can only try. </p>", "<p>I don't really mind too much what the default value is. I was trying to make the documentation match the code. I can resubmit this leaving the default as 1 (in init.php) but change config_extended.php to match that.</p>\n<p>Also, maybe add to the installation guide something about robots.txt\nhttps://www.phplist.org/manual/books/phplist-manual/page/installing-phplist-manually</p>", "<p>Yes, I'd prefer to keep it 1</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/732", "title": "Remove leading https as well as http when shortening a URL", "status": "open", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Currently when a URL is shortened for display, such as to show link clicks, a leading \"http://\" is removed but not a leading \"https://\". </p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p>Current \n<img alt=\"Screenshot from 2021-01-20 10-02-46\" src=\"https://user-images.githubusercontent.com/3147688/105159889-85a4c980-5b07-11eb-9f52-b042dd95b7f4.png\" /></p>\n<p>After this change\n<img alt=\"Screenshot from 2021-01-20 10-03-59\" src=\"https://user-images.githubusercontent.com/3147688/105159975-981f0300-5b07-11eb-85fd-d7d3c5b1c6b4.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/731", "title": "Unable to modify precacheMessage() function in sendemaillib.php", "status": "open", "labels": [], "priority": null, "description": ["<p>Hey, \nI am customizing this phplist Application. \nIn Sendemaillib.php there is function used and I want to pass email variable into it. But unfortunately by passing any third argument in this function. It just stopped working. \nWhat I am doing is : \n ```\nif (!precacheMessage($messageid,$email, $forwardContent)) {\n            unset($cached[$messageid]);\n            logEvent('Error loading message ' . $messageid . '  in cache');</p>\n<pre><code>        return 0;\n</code></pre>\n<p>}\n```</p>\n<p>Then Where it defines\n<code>function precacheMessage($messageid,$email, $forwardContent = 0) { // Stopped working</code></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/730", "title": "Htaccess file causes 500 error", "status": "open", "labels": [], "priority": null, "description": ["<p>The following lines in .htacces\n<code>php\n&lt;IfModule mod_rewrite.c&gt;\n    Options -MultiViews\n    RewriteEngine On\n    RewriteRule api/v2/ api.php [L]\n&lt;/IfModule&gt;</code>\ncause a 500 error on all pages (website.com/lists, website.com/lists/admin etc...)\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/55956895/104579719-01fd5f80-5665-11eb-974a-552325684458.png\" /></p>\n<ul>\n<li>phplist version 3.6.0 (was also present in later versions of 3.5.x, when that snippet was first added)</li>\n<li>php version 7.2</li>\n<li>I am running this on a sftp-only server, so am not sure how much additional information I can provide.</li>\n</ul>\n<p>My workaround for now is commenting them out, then everything works as intended.\nI am not as experienced with php, so if you need any additional information, let me know.</p>", ["<p>The following does not return a 500 error:\n```php\n<IfModule mod_rewrite.c></p>\n<h1>Options -MultiViews</h1>\n<pre><code>RewriteEngine On\nRewriteRule api/v2/ api.php [L]\n</code></pre>\n<p></IfModule>\n```</p>\n<p>So it seems that htaccess does not like <code>Options -MultiViews</code> for some reason</p>", "<p>Thanks. That entry is for the phpList4 based REST API. This may mean we have to update the system requirements. We will need to check if the API continues to work without that line.</p>", "<p>So it should be fine to keep it commented out for now if I don't use the api?</p>", "<p>Yes, that's fine</p>", "<p>@Tc-001 Maybe <code>Options -MultiViews</code> is not allowed by your hosting provider \ud83e\udd14 </p>", "<p>Could very well be.</p>\n<p>I did a quick test that could not be accurate, as I don't have that much experience with htaccess.\nBy making a <code>.htaccess</code> file in an another directory with a single <code>index.html</code> file and writing <code>Options -MultiViews</code> in it, the website presents me with a 500 error (works fine with empty htacess). </p>\n<p>I also sent a message to my provider about this and will update when they respond</p>", "<p>You were right, the provider has disabled this option for \"security reasons\"</p>\n<p>Is there anything that I can do? Probably will have to keep commenting it out for the foreseeable future. \nFor me it's not that big of a deal as I do not plan to use the API anyways.</p>\n<p>(Should this be close this? I am not sure if anything else can be done, but the issue still persists, if only on some small number of hosting providers.)</p>", "<p>We can possibly change it to the below, but we'd need to check if that affects the API</p>\n<p>```\n<IfModule mod_negotiation.c>\n    Options -MultiViews\n</IfModule></p>\n<p>```</p>", "<p>That too caused a 500 error, but the following did not:\n<code>php\n&lt;ifmodule mod_negotiation.c=\"\"&gt;\n    Options -MultiViews\n&lt;/ifmodule&gt;</code>\n<a href=\"https://clewtech.com/2019/03/23/what-exactly-does-the-multiviews-options-in-htaccess/\">Taken from here</a></p>\n<p>That is the only place that I found this snippet, so hopefully it does not always return false or other weirdness like that</p>", "<p>ok, interesting. Thanks</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/729", "title": "change results display to info, so that the content stays on the page", "status": "open", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>When importing the results disappear. This will keep them on the page.</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=20321</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/728", "title": "Upgrading from 3.6.0-RC1 to 3.6.0 did not apply the change to the database schema", "status": "closed", "labels": [], "priority": null, "description": ["<p>I upgraded to 3.6.0-RC1 last week then upgraded to 3.6.0 yesterday. After the database update I checked the definition of the processed column and it had not changed.</p>\n<p>In upgrade.php the database version read from the config table is manipulated by removing \"-RC1\"</p>\n<pre><code>if (preg_match('/(.*?)-/', $dbversion, $regs)) {\n    $dbversion = $regs[1];\n}\n</code></pre>\n<p>This makes the check for applying the scheme change to fail because the database appears to already be the correct version</p>\n<pre><code>if (version_compare($dbversion, '3.6.0','&lt;')) {\n    Sql_Query(\"alter table {$GLOBALS['tables']['message']} change column processed processed integer \");\n}\n</code></pre>\n<p>I'm not sure why the version is being changed in this way.</p>", ["<p>I did not expect this change to go into 3.6.0, because the RC had already been released, so this shouldn't have gone in.\nI made it apply only for higher than 3.6.0</p>\n<p>I guess we need to change the logic for 3.6.1 then. That's slightly tricky. </p>", "<p>Actually, it's not tricky at all. Running the same query again doesn't throw an error, so we can just re-apply this in 3.6.1</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/727", "title": "Fixes for php8", "status": "open", "labels": ["work in progress"], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>A few small fixes to ensure it works on PHP8</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=20318</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/726", "title": "Release 3.6.0", "status": "closed", "labels": [], "priority": null, "description": ["<p>Version 3.6.0 release</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/725", "title": "increase the size of the processed column", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>When the processed counter reached some number over 6 million, it starts failing</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=20317</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/724", "title": "add hook for plugins to determine if an email address should be consi\u2026", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>adds a hook for plugins to allow them to determine if an email address should be blacklisted</p>\n<h2>Related Issue</h2>\n<p>None</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>Yes, I guess I'm trying to be too careful about notices and all that in PHP. I think it's fine to leave it in.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/723", "title": "Release 3.5.9", "status": "closed", "labels": [], "priority": null, "description": ["<p>Release 3.5.9 version of phpList</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/722", "title": "Mantis 18002 Undefined Index when calling via Command-Line", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Avoid php undefined index notice when parsing command line parameters.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=18002</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/721", "title": "Crazy issue which i've lost 5 hours of my life with :/", "status": "closed", "labels": [], "priority": null, "description": ["<p>I've found a very strange issue which drove me crazy...</p>\n<p>The command: phplist -pinitialise - to initialize the db from cmd (saw it from the docker stuff) works ONLY if the following is defined in the config:</p>\n<p>$developer_email = 'some@email.com'</p>\n<p>Why is that? I've had to debug the hell out of everything to find it out...</p>", ["<p>this was recently already reported in #718 </p>", "<p>Damn so much cursing today and it was already reported :)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/720", "title": "Allow links (HTML tags) in attributes", "status": "open", "labels": [], "priority": null, "description": ["<p>This GDPR related issue is a new feature request or maybe a regression. I found <a href=\"https://www.phplist.org/manual/books/phplist-manual/page/gdpr#bkmrk-consent\">in the documentation</a>: \u201cIf your subscribers sign up to phpList directly using subscribe pages, widgets, or custom forms: Consider adding a required consent checkbox which links to your legal policies\u201d. But adding this link is impossible because all HTML tags are stripped from the attribute's name value. Maybe this is a regression, I don't know.</p>\n<p>Motivation: This issues mandatory for GDPR compliance. </p>\n<p>Related topics in the forum:\n- https://discuss.phplist.org/t/link-in-attributes/6780\n- https://discuss.phplist.org/t/link-to-tos-in-attribute/4428 (there is a workaround in <a href=\"https://discuss.phplist.org/t/link-to-tos-in-attribute/4428/6\">comment #6</a>)</p>\n<p>Steps to reproduce:\n- Navigate to Subscribers &gt; Configure attributes\n- Load from Predefined defaults the \"Terms of Service\" option\n- Set the \"Name\" value and insert a HTML link to the text: <code>I agree to &lt;a href=\"some-link\"&gt;the terms of service&lt;/a&gt; of...</code>\n- Save changes\n- Result: HTML tags are stripped.</p>\n<p>Proposal A. (If it is a regression.)\n- Allow HTML tags in attributes as in the linked workaround.</p>\n<p>Proposal B. (If it is a feature request.)\nAdd an optional \"Help\" multiline field to all attributes, and allow HTML tags in this field. This field is optional, user can ignore it. But users can insert a help text here and format is with HTML. Display this help field below the attribute field.</p>\n<p>For example: \n  - Name: <code>Nickname</code>\n  - Type: <code>textline</code>\n  - Help: <code>Please, enter your name as you like when addressed.</code></p>\n<p>Other example:\n  - Name: <code>CV</code>\n  - Type: <code>textline</code>\n  - Help: <code>Please provide a link to your CV or &lt;strong&gt;LinkedIn&lt;/strong&gt;</code></p>\n<p>Example for GDPR compilance:\n  - Name: <code>I agree to the terms of service of...</code>\n  - Type: <code>checkbox</code>\n  - Help: <code>We transfer and store your contact information. We send you emails and track your interactions with these emails for marketing purposes. Blah blah blah... See full &lt;a href=\"link-to-provacy-policy\"&gt;privacy policy&lt;/a&gt;.</code></p>\n<p>Tested version: phpList 3.5.8</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/719", "title": "CLI: config file autodiscovery doesn't work as expected", "status": "open", "labels": [], "priority": null, "description": ["<p>https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/index.php#L68</p>\n<p>I think lines 68 and 70 should be changed from:</p>\n<p><code>$configfile = '../config/config.php';</code></p>\n<p>to:</p>\n<p><code>$configfile = dirname(__FILE__).'../config/config.php';</code></p>", ["<p>Can you explain in what situation that change has made things work better? </p>", "<p>When calling the admin's index.php from command-line, with the change, the location of the config file (if not explicitly specified with <code>-c</code>) does not depend on the current working directory anymore.</p>", "<p>ok, sure, but that's what the -c parameter is for. </p>", "<p>If you want to submit a PR, you're very welcome. Please make sure to sign the <a href=\"https://www.phplist.com/cla\">CLA</a> before you do. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/718", "title": "\"initialise\" is missing in $commandline_pages", "status": "open", "labels": [], "priority": null, "description": ["<p>Because <code>\"initialise\"</code> is missing in <code>$commandline_pages</code> in https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/connect.php#L57, this command is only available from the CLI when <code>$developer_email</code> is set (see https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/index.php#L206). </p>\n<p>As the <code>initialise</code> command is quite important when working with containerization, it would be nice to have this command available out of the box. My currently working workaround for Docker looks as follows:\n<code>RUN echo \"if (!in_array('initialise', \\$commandline_pages, true)) array_push(\\$commandline_pages, 'initialise');\" &gt;&gt; /var/www/phplist/public_html/lists/admin/connect.php</code></p>", ["<p>True. In dev mode all pages can be \"CLI\"-ed. \"initialise\" is one of those things you don't do very often, unless containerising. Feel free to submit a PR to fix that.</p>\n<p>If you are working on Dockerisation, please contribute your work to https://github.com/phpList/phplist-docker if possible. </p>\n<p>(also, please sign the <a href=\"https://www.phplist.com/cla\">CLA</a> if you do, thanks) </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/717", "title": "How to embed uploaded images", "status": "closed", "labels": [], "priority": null, "description": ["<p>There's the config option <code>EMBEDEXTERNALIMAGES</code> to embed external images right into the email. But images uploaded inside the editor, which are stored in <code>UPLOADIMAGES_DIR</code> aren't embedded into the emails. Is there an option to activate embedding for internal images, too?</p>", ["<p>Images uploaded to templates will be embedded. The idea is that you want the template to have the basics to \"look nice\" even off-line, and then the content images are added by downloading when needed.</p>\n<p>In general you'd want to avoid embedding too many images, particularly when they are big. It would slow down sending, and take up more bandwidth than necessary. Embedded images always get transferred. Remote images only get transferred on demand (ie when a subscriber opens the emails). </p>", "<p>Questions like this are better placed in https://discuss.phplist.org/</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/716", "title": "Differences between releases on GitHub and Sourceforge", "status": "closed", "labels": [], "priority": null, "description": ["<p>I just compared the two ZIP files from https://sourceforge.net/projects/phplist/files/latest/download and https://github.com/phpList/phplist3/archive/3.5.8.zip which both seem to provide phplist 3.5.8, but the ZIP files' contents differ. Why? What's the correct ZIP file to use?</p>", ["<p>You need to use the one from https://www.phplist.org/download-phplist/</p>\n<p>See also https://github.com/phpList/phplist3/releases/tag/3.5.8</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/715", "title": "Move updater to system menu", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>The \"Update\" button really belongs in the System menu. But also the Notification on the dashboard about a new version wasn't actually displaying. </p>\n<h2>Related Issue</h2>\n<h2>Screenshots (if appropriate):</h2>", ["<p>@xh3n1  was there a reason you didn't use the VERSION constant to detect the version, but instead parsed it out of the init.php file? That seemed slightly convoluted to me. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/714", "title": "Using PHPMailer6 breaks campaigns with the inline powered image", "status": "closed", "labels": [], "priority": null, "description": ["<p>With PHPMailer6 I got an error in rendering with the Powered By image. </p>\n<p>@bramley can you check if it works for you? </p>\n<p>When I send the phpList.com homepage as a campaign, it renders like this</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/569843/100255137-119cd980-2f3b-11eb-89ad-8e1a6c2ffe90.png\" /></p>\n<p>The only thing I can find at the moment is that in the source of the campaign, there is no spacing between the Body of the HTML section and the inline image</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/569843/100255305-427d0e80-2f3b-11eb-8670-4f2d3c83fb0e.png\" /></p>", ["<p>I have tried both phpmailer 6 and 5, also different values for the html encoding and the email shows the phplist home page correctly\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/100259607-4c554080-2f40-11eb-9719-060858ccab3d.png\" /></p>\n<p>But this is entirely within my desktop, no external mail server is involved. \nYour screenshot seems to show new-line characters (x0A) in the MIME headers being quoted as =0A. Possibly the email is being mangled en route.\nIs the result different using phpmailer 5?</p>", "<p>Do you have the Powered By image enabled? </p>\n<p>Yes, it works fine when I switch to phpmailer5</p>", "<p>Yes, the powered by image is enabled. I have just sent using gmail smtp and the received email was also displayed properly.\nwhat is the value for HTMLEMAIL_ENCODING? I tried  8bit and quoted printable.</p>\n<p>phpmailer 6 seems to have reworked the handling of line breaks but that should have improved the situation rather than making it worse\nhttps://github.com/PHPMailer/PHPMailer/blob/master/changelog.md#version-60-august-28th-2017</p>", "<p>I have just sent a test email to your @phplist.com address to see how that is displayed. It will appear to be from my gmail address.</p>", "<p>Strange, I haven't received it yet. What was the subject?</p>", "<p>When I set encoding to 8bit it works better, but it has the boundary in the content at the top. That may indicate the issue. I'll keep digging. Sounds like it may be something on my local system, but it's working fine when I switch to an older branch. </p>", "<p>Sorry I had not realised that the \"send test\" had not worked. Should be there now with subject \"Test web page\".\nThe google web client seems to make a mess of the layout though, seems to be confused by the rotating images and shows them all (the section with the Raspberry Pi image plus others).</p>", "<p>Yes, got it this time. Thanks. The source has the same no-empty-line between the HTML content and the inline image, so that saves me trying to figure that one out, because it clearly is not the issue. The HTML page renders perfectly. Hmm. I'll keep looking. Must be something on my local system. I still want to know what it is though.</p>", "<p>Ok, ran a test sending via gmail and it works fine. You're right about the rendering in Gmail itself, I guess that could do with looking at. So, the problem must be with Mailhog, which is what I use for my local test setup. I will see if I can file a bug report with them.</p>", "<p>Possibly related to https://github.com/mailhog/MailHog/issues/206</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/713", "title": "make message preview configurable", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Allow a flag to switch the Message Preview on or off.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/712", "title": "Avoid sql error when importing a file with the wrong field delimiter", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>This forum topic  https://discuss.phplist.org/t/attributes-not-working-on-import/6768 showed an sql error when trying to import a comma separated file but not changing the field separator from TAB. This change escapes the column name when trying to match it with an attribute name.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>The build fails on Chrome, but that can be ignored.</p>\n<p>We should also try to detect that there's an invalid delimiter used, and either give a warning or suggestion of a different delimiter, but I guess that's slightly more work.</p>", "<p>I had thought about trying to identify an incorrect field delimiter. I think that the most likely case is someone importing a file with comma or semi-colon separator (i.e. not tab). In this case each line will be treated as just one field. So if the number of columns in the first row of headers is exactly 1 then we could issue a warning when the user is asked to match unidentified column headers.</p>\n<p>If there really is only one field in the file then that has to be the email address, so the header column value should be matched automatically and the warning would not be issued.\nMaybe something like this</p>\n<pre><code>    if (count($headers) == 1) {\n        printf('&lt;p class=\"information\"&gt;%s&lt;/p&gt;', s('The entered field delimiter might not be correct'));\n    }\n</code></pre>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/99589501-f9c9d080-29e3-11eb-8369-99ce77e41f6e.png\" /></p>", "<p>Yes, that's a great idea. Also, we could check on comma and semi-colon, and then add the option to re-submit with the one that was detected. But the suggested change is a good start.</p>", "<p>I have played around a bit and this seems to work reasonably well. The layout seems a bit cluttered though and the message is a bit wordy.</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/99706053-71563900-2a92-11eb-9113-b804602a69f9.png\" /></p>", "<p>That's brilliant. I think that will definitely improve the UX here. I think it's a common issue, and I've bumped into it a few times myself. \nThis will be a great addition.</p>", "<p>I have added validation of the GET parameter, and improved the presentation of the message by displaying it within a \"note\" div.</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/99995858-e5565100-2db2-11eb-8377-ab651c51808d.png\" /></p>", "<p>That's great, thanks. @marianaballa this is ready to merge</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/711", "title": "Release 3.5.8", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/710", "title": "add the option to configure a proxy host and port for outgoing traffic", "status": "open", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>add the option to configure proxy settings for outgoing traffic</p>\n<h2>Related Issue</h2>\n<p>https://github.com/phpList/phplist3/pull/592</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/734", "title": "Migrate to GitHub actions", "status": "open", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Move CI from Travis to Github Actions</p>\n<h2>Related Issue</h2>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/733", "title": "Change default value of UNSUBSCRIBE_JUMPOFF", "status": "open", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>The default value of UNSUBSCRIBE_JUMPOFF , when not specified in config.php, is 1, i.e. an unsubscribe confirmation page is <strong>not</strong> displayed. This is different to the explanation in config_extended.php which suggests that the default is 0.</p>\n<p>There have been reports in the user forum and Mantis about unauthorised unsubscriptions possibly due to \"link following\" by anti-malware software. So it seems safer to make the default not to jumpoff.</p>\n<p>Include an explanation of how robots.txt might be used to try to stop \"link following\".</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>This is not simple. It's a very philosophical issue. Do you think people are good but do bad things, or do you think people who are bad, also do good things.</p>\n<p>Anyway, sorry to be possibly too cautious here. I set this to 1 to ensure that \"bad\" people who use phpList for incorrect purposes are hampered, partly expecting that to happen (which I'm not proud of), and hoping that good people would sort it out.</p>\n<p>So, this issue should be handled differently, the issue lies with as you write \"link following\". Technically it would be better to avoid link-following, but realistically how are we reliably going to make that happen.</p>\n<p>So, as it is, I think it's good to do this. I like your addition to the doc files, I doubt anyone will notice, but we can only try. </p>", "<p>I don't really mind too much what the default value is. I was trying to make the documentation match the code. I can resubmit this leaving the default as 1 (in init.php) but change config_extended.php to match that.</p>\n<p>Also, maybe add to the installation guide something about robots.txt\nhttps://www.phplist.org/manual/books/phplist-manual/page/installing-phplist-manually</p>", "<p>Yes, I'd prefer to keep it 1</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/732", "title": "Remove leading https as well as http when shortening a URL", "status": "open", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Currently when a URL is shortened for display, such as to show link clicks, a leading \"http://\" is removed but not a leading \"https://\". </p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p>Current \n<img alt=\"Screenshot from 2021-01-20 10-02-46\" src=\"https://user-images.githubusercontent.com/3147688/105159889-85a4c980-5b07-11eb-9f52-b042dd95b7f4.png\" /></p>\n<p>After this change\n<img alt=\"Screenshot from 2021-01-20 10-03-59\" src=\"https://user-images.githubusercontent.com/3147688/105159975-981f0300-5b07-11eb-85fd-d7d3c5b1c6b4.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/731", "title": "Unable to modify precacheMessage() function in sendemaillib.php", "status": "open", "labels": [], "priority": null, "description": ["<p>Hey, \nI am customizing this phplist Application. \nIn Sendemaillib.php there is function used and I want to pass email variable into it. But unfortunately by passing any third argument in this function. It just stopped working. \nWhat I am doing is : \n ```\nif (!precacheMessage($messageid,$email, $forwardContent)) {\n            unset($cached[$messageid]);\n            logEvent('Error loading message ' . $messageid . '  in cache');</p>\n<pre><code>        return 0;\n</code></pre>\n<p>}\n```</p>\n<p>Then Where it defines\n<code>function precacheMessage($messageid,$email, $forwardContent = 0) { // Stopped working</code></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/730", "title": "Htaccess file causes 500 error", "status": "open", "labels": [], "priority": null, "description": ["<p>The following lines in .htacces\n<code>php\n&lt;IfModule mod_rewrite.c&gt;\n    Options -MultiViews\n    RewriteEngine On\n    RewriteRule api/v2/ api.php [L]\n&lt;/IfModule&gt;</code>\ncause a 500 error on all pages (website.com/lists, website.com/lists/admin etc...)\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/55956895/104579719-01fd5f80-5665-11eb-974a-552325684458.png\" /></p>\n<ul>\n<li>phplist version 3.6.0 (was also present in later versions of 3.5.x, when that snippet was first added)</li>\n<li>php version 7.2</li>\n<li>I am running this on a sftp-only server, so am not sure how much additional information I can provide.</li>\n</ul>\n<p>My workaround for now is commenting them out, then everything works as intended.\nI am not as experienced with php, so if you need any additional information, let me know.</p>", ["<p>The following does not return a 500 error:\n```php\n<IfModule mod_rewrite.c></p>\n<h1>Options -MultiViews</h1>\n<pre><code>RewriteEngine On\nRewriteRule api/v2/ api.php [L]\n</code></pre>\n<p></IfModule>\n```</p>\n<p>So it seems that htaccess does not like <code>Options -MultiViews</code> for some reason</p>", "<p>Thanks. That entry is for the phpList4 based REST API. This may mean we have to update the system requirements. We will need to check if the API continues to work without that line.</p>", "<p>So it should be fine to keep it commented out for now if I don't use the api?</p>", "<p>Yes, that's fine</p>", "<p>@Tc-001 Maybe <code>Options -MultiViews</code> is not allowed by your hosting provider \ud83e\udd14 </p>", "<p>Could very well be.</p>\n<p>I did a quick test that could not be accurate, as I don't have that much experience with htaccess.\nBy making a <code>.htaccess</code> file in an another directory with a single <code>index.html</code> file and writing <code>Options -MultiViews</code> in it, the website presents me with a 500 error (works fine with empty htacess). </p>\n<p>I also sent a message to my provider about this and will update when they respond</p>", "<p>You were right, the provider has disabled this option for \"security reasons\"</p>\n<p>Is there anything that I can do? Probably will have to keep commenting it out for the foreseeable future. \nFor me it's not that big of a deal as I do not plan to use the API anyways.</p>\n<p>(Should this be close this? I am not sure if anything else can be done, but the issue still persists, if only on some small number of hosting providers.)</p>", "<p>We can possibly change it to the below, but we'd need to check if that affects the API</p>\n<p>```\n<IfModule mod_negotiation.c>\n    Options -MultiViews\n</IfModule></p>\n<p>```</p>", "<p>That too caused a 500 error, but the following did not:\n<code>php\n&lt;ifmodule mod_negotiation.c=\"\"&gt;\n    Options -MultiViews\n&lt;/ifmodule&gt;</code>\n<a href=\"https://clewtech.com/2019/03/23/what-exactly-does-the-multiviews-options-in-htaccess/\">Taken from here</a></p>\n<p>That is the only place that I found this snippet, so hopefully it does not always return false or other weirdness like that</p>", "<p>ok, interesting. Thanks</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/729", "title": "change results display to info, so that the content stays on the page", "status": "open", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>When importing the results disappear. This will keep them on the page.</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=20321</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/728", "title": "Upgrading from 3.6.0-RC1 to 3.6.0 did not apply the change to the database schema", "status": "closed", "labels": [], "priority": null, "description": ["<p>I upgraded to 3.6.0-RC1 last week then upgraded to 3.6.0 yesterday. After the database update I checked the definition of the processed column and it had not changed.</p>\n<p>In upgrade.php the database version read from the config table is manipulated by removing \"-RC1\"</p>\n<pre><code>if (preg_match('/(.*?)-/', $dbversion, $regs)) {\n    $dbversion = $regs[1];\n}\n</code></pre>\n<p>This makes the check for applying the scheme change to fail because the database appears to already be the correct version</p>\n<pre><code>if (version_compare($dbversion, '3.6.0','&lt;')) {\n    Sql_Query(\"alter table {$GLOBALS['tables']['message']} change column processed processed integer \");\n}\n</code></pre>\n<p>I'm not sure why the version is being changed in this way.</p>", ["<p>I did not expect this change to go into 3.6.0, because the RC had already been released, so this shouldn't have gone in.\nI made it apply only for higher than 3.6.0</p>\n<p>I guess we need to change the logic for 3.6.1 then. That's slightly tricky. </p>", "<p>Actually, it's not tricky at all. Running the same query again doesn't throw an error, so we can just re-apply this in 3.6.1</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/727", "title": "Fixes for php8", "status": "open", "labels": ["work in progress"], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>A few small fixes to ensure it works on PHP8</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=20318</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/726", "title": "Release 3.6.0", "status": "closed", "labels": [], "priority": null, "description": ["<p>Version 3.6.0 release</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/725", "title": "increase the size of the processed column", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>When the processed counter reached some number over 6 million, it starts failing</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=20317</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/724", "title": "add hook for plugins to determine if an email address should be consi\u2026", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>adds a hook for plugins to allow them to determine if an email address should be blacklisted</p>\n<h2>Related Issue</h2>\n<p>None</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>Yes, I guess I'm trying to be too careful about notices and all that in PHP. I think it's fine to leave it in.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/723", "title": "Release 3.5.9", "status": "closed", "labels": [], "priority": null, "description": ["<p>Release 3.5.9 version of phpList</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/722", "title": "Mantis 18002 Undefined Index when calling via Command-Line", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Avoid php undefined index notice when parsing command line parameters.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=18002</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/721", "title": "Crazy issue which i've lost 5 hours of my life with :/", "status": "closed", "labels": [], "priority": null, "description": ["<p>I've found a very strange issue which drove me crazy...</p>\n<p>The command: phplist -pinitialise - to initialize the db from cmd (saw it from the docker stuff) works ONLY if the following is defined in the config:</p>\n<p>$developer_email = 'some@email.com'</p>\n<p>Why is that? I've had to debug the hell out of everything to find it out...</p>", ["<p>this was recently already reported in #718 </p>", "<p>Damn so much cursing today and it was already reported :)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/720", "title": "Allow links (HTML tags) in attributes", "status": "open", "labels": [], "priority": null, "description": ["<p>This GDPR related issue is a new feature request or maybe a regression. I found <a href=\"https://www.phplist.org/manual/books/phplist-manual/page/gdpr#bkmrk-consent\">in the documentation</a>: \u201cIf your subscribers sign up to phpList directly using subscribe pages, widgets, or custom forms: Consider adding a required consent checkbox which links to your legal policies\u201d. But adding this link is impossible because all HTML tags are stripped from the attribute's name value. Maybe this is a regression, I don't know.</p>\n<p>Motivation: This issues mandatory for GDPR compliance. </p>\n<p>Related topics in the forum:\n- https://discuss.phplist.org/t/link-in-attributes/6780\n- https://discuss.phplist.org/t/link-to-tos-in-attribute/4428 (there is a workaround in <a href=\"https://discuss.phplist.org/t/link-to-tos-in-attribute/4428/6\">comment #6</a>)</p>\n<p>Steps to reproduce:\n- Navigate to Subscribers &gt; Configure attributes\n- Load from Predefined defaults the \"Terms of Service\" option\n- Set the \"Name\" value and insert a HTML link to the text: <code>I agree to &lt;a href=\"some-link\"&gt;the terms of service&lt;/a&gt; of...</code>\n- Save changes\n- Result: HTML tags are stripped.</p>\n<p>Proposal A. (If it is a regression.)\n- Allow HTML tags in attributes as in the linked workaround.</p>\n<p>Proposal B. (If it is a feature request.)\nAdd an optional \"Help\" multiline field to all attributes, and allow HTML tags in this field. This field is optional, user can ignore it. But users can insert a help text here and format is with HTML. Display this help field below the attribute field.</p>\n<p>For example: \n  - Name: <code>Nickname</code>\n  - Type: <code>textline</code>\n  - Help: <code>Please, enter your name as you like when addressed.</code></p>\n<p>Other example:\n  - Name: <code>CV</code>\n  - Type: <code>textline</code>\n  - Help: <code>Please provide a link to your CV or &lt;strong&gt;LinkedIn&lt;/strong&gt;</code></p>\n<p>Example for GDPR compilance:\n  - Name: <code>I agree to the terms of service of...</code>\n  - Type: <code>checkbox</code>\n  - Help: <code>We transfer and store your contact information. We send you emails and track your interactions with these emails for marketing purposes. Blah blah blah... See full &lt;a href=\"link-to-provacy-policy\"&gt;privacy policy&lt;/a&gt;.</code></p>\n<p>Tested version: phpList 3.5.8</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/719", "title": "CLI: config file autodiscovery doesn't work as expected", "status": "open", "labels": [], "priority": null, "description": ["<p>https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/index.php#L68</p>\n<p>I think lines 68 and 70 should be changed from:</p>\n<p><code>$configfile = '../config/config.php';</code></p>\n<p>to:</p>\n<p><code>$configfile = dirname(__FILE__).'../config/config.php';</code></p>", ["<p>Can you explain in what situation that change has made things work better? </p>", "<p>When calling the admin's index.php from command-line, with the change, the location of the config file (if not explicitly specified with <code>-c</code>) does not depend on the current working directory anymore.</p>", "<p>ok, sure, but that's what the -c parameter is for. </p>", "<p>If you want to submit a PR, you're very welcome. Please make sure to sign the <a href=\"https://www.phplist.com/cla\">CLA</a> before you do. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/718", "title": "\"initialise\" is missing in $commandline_pages", "status": "open", "labels": [], "priority": null, "description": ["<p>Because <code>\"initialise\"</code> is missing in <code>$commandline_pages</code> in https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/connect.php#L57, this command is only available from the CLI when <code>$developer_email</code> is set (see https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/index.php#L206). </p>\n<p>As the <code>initialise</code> command is quite important when working with containerization, it would be nice to have this command available out of the box. My currently working workaround for Docker looks as follows:\n<code>RUN echo \"if (!in_array('initialise', \\$commandline_pages, true)) array_push(\\$commandline_pages, 'initialise');\" &gt;&gt; /var/www/phplist/public_html/lists/admin/connect.php</code></p>", ["<p>True. In dev mode all pages can be \"CLI\"-ed. \"initialise\" is one of those things you don't do very often, unless containerising. Feel free to submit a PR to fix that.</p>\n<p>If you are working on Dockerisation, please contribute your work to https://github.com/phpList/phplist-docker if possible. </p>\n<p>(also, please sign the <a href=\"https://www.phplist.com/cla\">CLA</a> if you do, thanks) </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/717", "title": "How to embed uploaded images", "status": "closed", "labels": [], "priority": null, "description": ["<p>There's the config option <code>EMBEDEXTERNALIMAGES</code> to embed external images right into the email. But images uploaded inside the editor, which are stored in <code>UPLOADIMAGES_DIR</code> aren't embedded into the emails. Is there an option to activate embedding for internal images, too?</p>", ["<p>Images uploaded to templates will be embedded. The idea is that you want the template to have the basics to \"look nice\" even off-line, and then the content images are added by downloading when needed.</p>\n<p>In general you'd want to avoid embedding too many images, particularly when they are big. It would slow down sending, and take up more bandwidth than necessary. Embedded images always get transferred. Remote images only get transferred on demand (ie when a subscriber opens the emails). </p>", "<p>Questions like this are better placed in https://discuss.phplist.org/</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/716", "title": "Differences between releases on GitHub and Sourceforge", "status": "closed", "labels": [], "priority": null, "description": ["<p>I just compared the two ZIP files from https://sourceforge.net/projects/phplist/files/latest/download and https://github.com/phpList/phplist3/archive/3.5.8.zip which both seem to provide phplist 3.5.8, but the ZIP files' contents differ. Why? What's the correct ZIP file to use?</p>", ["<p>You need to use the one from https://www.phplist.org/download-phplist/</p>\n<p>See also https://github.com/phpList/phplist3/releases/tag/3.5.8</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/715", "title": "Move updater to system menu", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>The \"Update\" button really belongs in the System menu. But also the Notification on the dashboard about a new version wasn't actually displaying. </p>\n<h2>Related Issue</h2>\n<h2>Screenshots (if appropriate):</h2>", ["<p>@xh3n1  was there a reason you didn't use the VERSION constant to detect the version, but instead parsed it out of the init.php file? That seemed slightly convoluted to me. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/714", "title": "Using PHPMailer6 breaks campaigns with the inline powered image", "status": "closed", "labels": [], "priority": null, "description": ["<p>With PHPMailer6 I got an error in rendering with the Powered By image. </p>\n<p>@bramley can you check if it works for you? </p>\n<p>When I send the phpList.com homepage as a campaign, it renders like this</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/569843/100255137-119cd980-2f3b-11eb-89ad-8e1a6c2ffe90.png\" /></p>\n<p>The only thing I can find at the moment is that in the source of the campaign, there is no spacing between the Body of the HTML section and the inline image</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/569843/100255305-427d0e80-2f3b-11eb-8670-4f2d3c83fb0e.png\" /></p>", ["<p>I have tried both phpmailer 6 and 5, also different values for the html encoding and the email shows the phplist home page correctly\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/100259607-4c554080-2f40-11eb-9719-060858ccab3d.png\" /></p>\n<p>But this is entirely within my desktop, no external mail server is involved. \nYour screenshot seems to show new-line characters (x0A) in the MIME headers being quoted as =0A. Possibly the email is being mangled en route.\nIs the result different using phpmailer 5?</p>", "<p>Do you have the Powered By image enabled? </p>\n<p>Yes, it works fine when I switch to phpmailer5</p>", "<p>Yes, the powered by image is enabled. I have just sent using gmail smtp and the received email was also displayed properly.\nwhat is the value for HTMLEMAIL_ENCODING? I tried  8bit and quoted printable.</p>\n<p>phpmailer 6 seems to have reworked the handling of line breaks but that should have improved the situation rather than making it worse\nhttps://github.com/PHPMailer/PHPMailer/blob/master/changelog.md#version-60-august-28th-2017</p>", "<p>I have just sent a test email to your @phplist.com address to see how that is displayed. It will appear to be from my gmail address.</p>", "<p>Strange, I haven't received it yet. What was the subject?</p>", "<p>When I set encoding to 8bit it works better, but it has the boundary in the content at the top. That may indicate the issue. I'll keep digging. Sounds like it may be something on my local system, but it's working fine when I switch to an older branch. </p>", "<p>Sorry I had not realised that the \"send test\" had not worked. Should be there now with subject \"Test web page\".\nThe google web client seems to make a mess of the layout though, seems to be confused by the rotating images and shows them all (the section with the Raspberry Pi image plus others).</p>", "<p>Yes, got it this time. Thanks. The source has the same no-empty-line between the HTML content and the inline image, so that saves me trying to figure that one out, because it clearly is not the issue. The HTML page renders perfectly. Hmm. I'll keep looking. Must be something on my local system. I still want to know what it is though.</p>", "<p>Ok, ran a test sending via gmail and it works fine. You're right about the rendering in Gmail itself, I guess that could do with looking at. So, the problem must be with Mailhog, which is what I use for my local test setup. I will see if I can file a bug report with them.</p>", "<p>Possibly related to https://github.com/mailhog/MailHog/issues/206</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/713", "title": "make message preview configurable", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Allow a flag to switch the Message Preview on or off.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/712", "title": "Avoid sql error when importing a file with the wrong field delimiter", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>This forum topic  https://discuss.phplist.org/t/attributes-not-working-on-import/6768 showed an sql error when trying to import a comma separated file but not changing the field separator from TAB. This change escapes the column name when trying to match it with an attribute name.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>The build fails on Chrome, but that can be ignored.</p>\n<p>We should also try to detect that there's an invalid delimiter used, and either give a warning or suggestion of a different delimiter, but I guess that's slightly more work.</p>", "<p>I had thought about trying to identify an incorrect field delimiter. I think that the most likely case is someone importing a file with comma or semi-colon separator (i.e. not tab). In this case each line will be treated as just one field. So if the number of columns in the first row of headers is exactly 1 then we could issue a warning when the user is asked to match unidentified column headers.</p>\n<p>If there really is only one field in the file then that has to be the email address, so the header column value should be matched automatically and the warning would not be issued.\nMaybe something like this</p>\n<pre><code>    if (count($headers) == 1) {\n        printf('&lt;p class=\"information\"&gt;%s&lt;/p&gt;', s('The entered field delimiter might not be correct'));\n    }\n</code></pre>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/99589501-f9c9d080-29e3-11eb-8369-99ce77e41f6e.png\" /></p>", "<p>Yes, that's a great idea. Also, we could check on comma and semi-colon, and then add the option to re-submit with the one that was detected. But the suggested change is a good start.</p>", "<p>I have played around a bit and this seems to work reasonably well. The layout seems a bit cluttered though and the message is a bit wordy.</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/99706053-71563900-2a92-11eb-9113-b804602a69f9.png\" /></p>", "<p>That's brilliant. I think that will definitely improve the UX here. I think it's a common issue, and I've bumped into it a few times myself. \nThis will be a great addition.</p>", "<p>I have added validation of the GET parameter, and improved the presentation of the message by displaying it within a \"note\" div.</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/99995858-e5565100-2db2-11eb-8377-ab651c51808d.png\" /></p>", "<p>That's great, thanks. @marianaballa this is ready to merge</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/711", "title": "Release 3.5.8", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/710", "title": "add the option to configure a proxy host and port for outgoing traffic", "status": "open", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>add the option to configure proxy settings for outgoing traffic</p>\n<h2>Related Issue</h2>\n<p>https://github.com/phpList/phplist3/pull/592</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/709", "title": "Avoid problem with custom PHPMailer 5 path when using PHPMailer 6", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Use PHPMAILER_PATH only when it appears to be valid. For PHPMailer 5 it should be a file and for PHPMailer 6 it should be a directory.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=20286</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/708", "title": "Use PHPMailer 6 by default instead of PHPMailer 5.", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>It is about a year since PHPMailer 6 was included and could be enabled through config.php https://github.com/phpList/phplist3/pull/608</p>\n<p>When installing phplist I have enabled PHPMailer 6 and not seen any problems so it could now be made the default.\nThis will affect all phplist installations, not just new installations, unless the owner explicitly disables using PHPMailer 6 through config.php</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>@marianaballa this is fine to merge. The Travis errors were caused by a parse error in composer.json, which I've fixed in master.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/707", "title": "Upgrade to PHPMailer 6.1.8", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Upgrade to the latest release of PHPMailer. This has several minor changes and fixes, and one security fix concerning attachement file names\nhttps://github.com/PHPMailer/PHPMailer/blob/master/changelog.md</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/706", "title": "Ajax / XMLHttpRequests are still processed - even from unallowed origins", "status": "open", "labels": [], "priority": null, "description": ["<p>When performing an Ajax / XMLHttp request against a subsribe-list from an unallowed origin regarding the Access-Control-Allow-Origin header, it's still being processed and the double-opt-in email will be sent. That's probably an unwanted behaviour, right?</p>", ["<p>Yes, that would be, but that would be a browser issue, as we're telling the browser what should be allowed. What browser did you use to try this?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/705", "title": "Updater: JavaScript error", "status": "closed", "labels": [], "priority": null, "description": ["<p>When calling the updater via https://example.com/lists/updater/ a JavaScript error pops up in the console. There seems to be a mistake with counting the steps, or the server response \"-1\" is not correct. Looking at the current JavaScript code it would have to be 0 to work. But not it returns -1. Rhe first line in executeNextStep() adds 1 to it which results in 0, but since stepActionMap in setCurrentActionItem() counts by beginning at 1 the entire updater doesn't work.</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/864660/97549535-cc839700-19d0-11eb-84b9-fa952ef36bc9.png\" /></p>", ["<p>I there someone who can fix this?</p>", "<p>Please report this to the updater project\nhttps://github.com/phpList/updater</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/704", "title": "Ajax subscription: access-control-allow-origin for multiple websites", "status": "closed", "labels": [], "priority": null, "description": ["<h2>Description</h2>\n<p>I needed my ajax-based PHPList subscription forms to be working on multiple websites, so I added a new config constant called \"ACCESS_CONTROL_ALLOW_ORIGINS\" which is an array where you can put in your different origins you want to allow.\nI also added a new header \"Vary: Origin\" in order to optimize cache control. (https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin#CORS_and_caching)</p>", ["<p>Tests are failing because of some composer issues, but why? Can anyone help? I only made changes to a few php files, but nothing I can relate with a composer error.</p>", "<p>Hi @nepomuc and thanks for submitting this PR. I rerun the tests and now they have all pasted. It was an issue on composer related to the capital L at the phpList naming. </p>\n<p>Check this:\nhttps://github.com/phpList/phplist3/commit/65096e9b98c24b56e4bb14d40f44aa18ca0c6a9b</p>", "<p>Looks like the Vary header only needs adding when you have an array of possible origins. I guess with a static one, we should not use it, so that it helps with caching. A small performance issue, but everything counts.</p>", "<blockquote>\n<p>Looks like the Vary header only needs adding when you have an array of possible origins. I guess with a static one, we should not use it, so that it helps with caching. A small performance issue, but everything counts.</p>\n</blockquote>\n<p>@michield Thanks a lot for your feedback. As far as I know the access-control-allow-origin header doesn't support an array or any kind of list, but only one URL. Also the Mozilla page says:</p>\n<blockquote>\n<p>If the server sends a response with an Access-Control-Allow-Origin value that is an explicit origin (rather than the \"*\" wildcard), then the response should also include a Vary response header with the value Origin \u2014 to indicate to browsers that server responses can differ based on the value of the Origin request header.</p>\n</blockquote>\n<p>The code I added changes the header entry's value dynamically, but always to an explicit value/URL. So it seems to be recommended to set \"Vary\" to \"Origin\", doesn't it?</p>", "<p>Yes, but with the config options you created, there are two options: </p>\n<p>ACCESS_CONTROL_ALLOW_ORIGINS -&gt; array\nACCESS_CONTROL_ALLOW_ORIGIN -&gt; scalar</p>\n<p>When the array option is used, we should add the Vary header, but when the scalar option is used, there's no need for that.</p>\n<p>It's a minor issue, I don't really mind, but it's nice to be precise.</p>", "<p>You're completely right! I going to update the code later. Thanks for the clarification and the review!</p>", "<blockquote>\n<p>I going to update the code later.</p>\n</blockquote>\n<p>Thanks for this. \nCan you also sign the phpList Contributor License Agreement (CLA)? You can do so very quickly via your GitHub account. There CLA is here: https://phplist.com/cla</p>", "<blockquote>\n<p>Can you also sign the phpList Contributor License Agreement (CLA)? You can do so very quickly via your GitHub account. There CLA is here: https://phplist.com/cla</p>\n</blockquote>\n<p>Done! I \"hereby transfer to phpList [my] entire right, title, and interest\" to phpList. Contracts like these always make me feel like I'm signing over my soul. \ud83e\ude78 \ud83d\ude04 \nI wonder if there's a way to make them more open and friendly, so signing them gives you a clear and optimistic feeling. \ud83e\udd14</p>", "<blockquote>\n<p>Done! I \"hereby transfer to phpList [my] entire right, title, and interest\" to phpList. Contracts like these always make me feel like I'm signing over my soul. drop_of_blood smile\nI wonder if there's a way to make them more open and friendly, so signing them gives you a clear and optimistic feeling. thinking</p>\n</blockquote>\n<p>Yes, I totally understand what you mean. But we had to do something like this, because otherwise it becomes impossible to make future changes. We used to be licensed GPLv2, and changing to AGPLv3 was a nightmare, as we had to contact everyone who had contributed, even a single line of code. Even though AGPLv3 is better for the community than GPLv2. That's when we decided it was better to ask for the signing of this agreement. We hope we have gained the trust of 20 years of Open Source history to be the faithful guardians of the Open Source spirit for this application.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/703", "title": "Export on commandline", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Add the option to export subscribers on the commandline. This is useful for very big installations, where the UI version times out.</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=20277</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/702", "title": "Allow ajax request to include the list id", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Allow ajax request to include the list id as discussed in #701</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>This PR looks great! Thank you @bramley! </p>\n<p>Hence an RC was out when this was submitted, I will included it in the next release (version 3.5.8). </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/701", "title": "Ajax subscribe to a specific list", "status": "closed", "labels": [], "priority": null, "description": ["<p>The ajax subscribe process currently subscribes the user to all lists associated with the subscribe page, and sets the email format to html</p>\n<pre><code>            foreach (explode(',', $GLOBALS['pagedata']['lists']) as $listid) {\n                $_POST['list'][$listid] = 'signup';\n            }\n            $_POST['htmlemail'] = 1; //# @@ should actually be taken from the subscribe page data\n</code></pre>\n<p>A problem raised in the forum  https://discuss.phplist.org/t/is-it-possible-to-subscribe-to-specific-list-from-subscription-page-through-ajax/6628 asks whether the ajax request could specify a particular list instead of all lists being used. It looks a simple change to only assign all lists when one has not been included in the request (<code>$_POST['list']</code> not being set)</p>\n<p>Similarly, set the email format to html, or that specified in the subscribe page itself, only when it is not included in the request.</p>\n<p>@michield How do you feel about this? Would it adversely affect people who use ajax with the hosted service? As long as the request does not include list or htmlemail then they should have the same result.</p>", ["<p>If I remember correctly the choice of lists is decided by the subscribe page. So, if you create a subscribe page with just the lists you want them to sign up to, it will sign them up to all lists of that page. That way you can control which lists are used. </p>", "<p>As for html format, doesn't everyone just want html now? Not sure why you would make it a choice. </p>", "<p>I think that the concern is siging up to several lists offered by a subscribe page instead of just one list. The forum topic that I linked to tries to explain the issue.\nSay you have lists for Java, PHP and C++ offered on one subscribe page. The phplist generated subscribe page will show all of the three lists. That's fine, the person can select which list they are interested in. Later, on the preferences page they can signup to another list.</p>\n<p>What happens currently with ajax is that someone is subscribed to all of the lists, whereas he wants to have individual signup forms for each list, e.g. \"sign up to our PHP weekly newsletter\" ajax form, \"signup to our weekly Java newsletter\" form, etc. If someone can do that then they can discover the other lists through the preferences page. The subscriber wouldn't be selecting a list explicitly, the list would be a hidden field in the ajax form.</p>\n<p>If instead there are separate subscribe pages, one for each language, then the preferences page won't show the other languages, so the subscriber won't be aware that there are other lists available.</p>", "<p>Ah, yes, I see what you mean. I guess we can add an option to specify the list in the ajax call. If we make it a new var, it should work with backwards compatibility. Are you happy to sort that out? </p>", "<p>I was thinking of simply using the same $_POST variable so that it remains the same as the subscribe page.\nThe ajax form would include something similar to this to subscribe to list id 2</p>\n<pre><code>&lt;input type=\"hidden\" name=\"list[2]\" value=\"signup\"/&gt;\n</code></pre>\n<p>and amend index.php</p>\n<pre><code>            if (!isset($_POST['list'])) {\n                foreach (explode(',', $GLOBALS['pagedata']['lists']) as $listid) {\n                    $_POST['list'][$listid] = 'signup';\n                }\n            }\n</code></pre>\n<p>If you want to have a new $_POST field</p>\n<pre><code>&lt;input type=\"hidden\" name=\"listid\" value=\"2\"/&gt;\n</code></pre>\n<p>and amend index.php</p>\n<pre><code>            if (isset($_POST['listid'])) {\n                $listid = $_POST['listid'];\n                $_POST['list'][$listid] = 'signup';\n            } else {\n                foreach (explode(',', $GLOBALS['pagedata']['lists']) as $listid) {\n                    $_POST['list'][$listid] = 'signup';\n                }\n            }\n</code></pre>", "<p>Yes, option 1 looks fine. You'd have to hard code the list IDs, but that can be explained in the docs.</p>\n<p>If you do the second one, please make sure to sanitise the post data</p>\n<pre><code>            $listid = sprintf('%d',$_POST['listid']);\n</code></pre>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/700", "title": "Update chromedriver to support chrome85", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/699", "title": "Revise navigation label (ref phpList#698)", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Revise the navigation label on the side nav that points to database structure upgrade.</p>\n<h2>Related Issue</h2>\n<p>phpList#698</p>", ["<p>Hi @hktang! The tests for this have failed due to an outdated Chrome driver. This is fixed now. Can you please rebase to Master?</p>", "<p>Hi @hktang! Can you please sign this Contributor License Agreement (CLA): https://phplist.com/cla ?</p>\n<p>You can sign it with your GitHub account. </p>", "<p>Hi @marianaballa thanks for the link. Just signed!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/698", "title": "Incorrect title on side navigation and page title", "status": "open", "labels": [], "priority": null, "description": ["<p>The page title for database upgrade should read \"Database upgrade\" but not \"Upgrade phpList\":</p>\n<p><img alt=\"Annotation 2020-09-02 110941\" src=\"https://user-images.githubusercontent.com/2219830/91924150-f55b1900-ed0c-11ea-82b5-cec0ac47b367.png\" /></p>\n<p><img alt=\"Annotation 2020-09-02 111014\" src=\"https://user-images.githubusercontent.com/2219830/91924151-f68c4600-ed0c-11ea-94d7-a1421c953250.png\" /></p>\n<p>https://github.com/phpList/phplist3/blob/42b4ae716f25c20af5ad939819665405340a9d23/public_html/lists/admin/locale/en/phplist.po#L9116-L9118</p>", ["<p>Thanks for pointing this out @hktang. This should be pretty straightforward to fix. Are you willing to create a PR with the fix?  </p>", "<p>Hi @marianaballa, of course, happy to do that :) </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/697", "title": "fixed german typo: nciht -> nicht", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>Hi @caigner thank you for your contribution. The problems with string translations currently can only be fixed using the translation system here: translate.phplist.org. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/696", "title": "Release 3.5.6", "status": "closed", "labels": [], "priority": null, "description": ["<p>phpList 3.5.6 Release</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/695", "title": "Mantis 20247 - Do not replace message fields in a user-specific URL", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>When using a web page for the content of a campaign the URL may contain user placeholders. Currently the [ID] placeholder is  replaced by the message id in earlier processing instead of by the user id. This change avoids trying to replace message fields in the URL.</p>\n<p>From the web server log when fetching the remote url\nPrior to change, was using the message id\n<code>127.0.0.1 - - [18/Aug/2020:10:41:53 +0100] \"GET /webpage.html?email=foo567%40bar.com&amp;id=168 HTTP/1.1\" 200 396 \"-\" \"phplist v3.5.6-RC1c (https://www.phplist.com)\"</code></p>\n<p>Now uses the user id\n<code>127.0.0.1 - - [18/Aug/2020:10:44:32 +0100] \"GET /webpage.html?email=foo567%40bar.com&amp;id=3012 HTTP/1.1\" 200 396 \"-\" \"phplist v3.5.5.1-devc (https://www.phplist.com)\"</code></p>\n<p>Additionally, when testing whether the entered URL is valid by fetching it, the URL needs to be encoded when included as a query parameter in a phplist page URL.</p>\n<p>Prior to change the p2 query parameter was being removed\n<code>127.0.0.1 - - [18/Aug/2020:11:21:54 +0100] \"GET /webpage.html?p1=foo HTTP/1.1\" 200 396 \"-\" \"phplist v3.5.5.1-devc (https://www.phplist.com)\"</code></p>\n<p>Now all query parameters are being kept\n<code>127.0.0.1 - - [18/Aug/2020:11:22:27 +0100] \"GET /webpage.html?p1=foo&amp;p2=bar HTTP/1.1\" 200 396 \"-\" \"phplist v3.5.5.1-devc (https://www.phplist.com)\"</code></p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=20247</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/694", "title": "Discrepancy in placeholders", "status": "closed", "labels": [], "priority": null, "description": ["<p>When creating a new campaign, the placeholder for \"First Name\" has different formatting under the help sections. \nThe one mentioned earlier is without space: \"Dear [FirstName%%friend]\". But the true usage seems to be \"First Name\".</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/59264927/89441748-3ca4b880-d713-11ea-9821-fa1413830843.png\" /></p>", ["<p>That is because the top part of the explanation is \"generic\" and only the part that lists your attributes is based on the attributes you have defined. So, the \"FIRSTNAME\" is an example when you have an attribute called \"FirstName\" (without a space). </p>\n<p>I guess that may be slightly confusing, feel free to PR a change to make it more clear.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/693", "title": "Mantis 20239: Sort campaigns in \"statistics overview\" by sent date", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>On the Statistics Overview page order by the sent date.\nChange the column heading from \"date\" to \"Date sent\" to clarify which date is being displayed.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=20239</p>\n<h2>Screenshots (if appropriate):</h2>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/89093117-67a7a900-d3af-11ea-998a-567b2acccddd.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/692", "title": "Add links to requirements, development, installation", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/691", "title": "Use the original From address when forwarding a campaign email", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>When forwarding a campaign email the From address is the subscriber's address not the original From address. This can cause delivery problems when using services such as Amazon SES that require the From address to be verified.</p>\n<p>There are two changes affecting forwarding a campaign email</p>\n<ul>\n<li>Use the original From address instead of the subscriber address for the From address</li>\n<li>Use the subscriber address for the Reply-to address</li>\n</ul>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=18075</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>No, I don't think that's a good idea. The power of the Forward system is that the \"From\" is from the person you know, which makes it more likely to be opened.</p>\n<p>I think a way to do it would be to have the \"From email\" be the system email, and then the \"From name\" be the name of the forwarder. But that may get phishing alarm bells ringing.</p>\n<p>Also, let's not do this across the board. This is, for now, an SES problem. I think what would be good is to set up a special \"forwarder email\" on the system, register that with SES and then use that email address as the forward email with the \"Forwarder Name\" as the name, so that the recipient still gets it from the person who forwarded.</p>", "<p>I suspect that the delivery of forwarded campaigns is wider than just SES. If I send a campaign to my yahoo address, then try to forward that to a gmail address it is rejected (seems to be using SPF with the From address, in addition to the SMTP FROM address which is on my domain).</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/87778152-a9b6e380-c822-11ea-81f3-8fe8a2d39ef8.png\" /></p>\n<p>Regarding this change, the original From address must have been verified for SES and other similar services, and must have passed any SPF and DKIM checks, so using it when forwarding seems ok.\nAlso, subscribers do not have names. I agree that making the name of the forwarding subscriber visible is sensible but that would need adding an extra field to the forwarding form.</p>\n<p>Out of interest I had a look at what Mailchimp does \n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/87780507-c6edb100-c826-11ea-8ee8-3d48e44432fc.png\" /></p>\n<ul>\n<li>The From field includes my name and the From address is a mailchimp address that includes a modified version of my email address</li>\n<li>The Reply-to is my (the forwarding subscriber) email address</li>\n<li>The subject also includes my name \"Duncan Cameron is forwarding an email to you\"</li>\n</ul>\n<p>and this is the Mailchimp forwarding form\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/87780277-49c23c00-c826-11ea-9842-b3e12acfd07a.png\" /></p>", "<p>Ok, so this issue extends beyond the Forward system. Basically with DMARC, the From always needs to be from an \nauthorised IP address. If say someone uses a gmail.com address as the From, the only way to get that to work well would be to use the google servers for sending. </p>\n<p>That means we need to create a new mailbox for sending, similar to the bounces, where the From is pointing to, which then possibly forwards to the actual address. This also means the Reply-To will be more important.</p>\n<p>It would be nice though that the Forward system has the name of the person who forwarded it in the From. I guess we can set that up with a config that points to the \"Name attributes\".</p>\n<p>All in all a little bit more work, but probably worth it. </p>\n<p>It's not necessary to do all that in this PR, but I do think updating it to find some way to have the forwarder as the \"From Name\", would be good. </p>", "<p>I think that adding a mandatory \"name\" field to the forwarding form is simpler than trying to use an attribute if it exists.\nIs this sufficient for the time being?</p>\n<ul>\n<li>From field - original From address with the entered name</li>\n<li>Reply to - the address of the subscriber who is forwarding with the entered name</li>\n</ul>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/89098008-d4389d00-d3db-11ea-971e-8cda7379c6f1.png\" /></p>", "<p>Yes, that makes sense. I don't see the change in the code though?</p>", "<p>It needed a bit more work but is there now. On the Forward form the subscriber has to enter their name, which is used for the From and Reply-To addresses.\nAlso changed the presentation of the Forward form for the mandatory fields to appear similar to other front-end pages.\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/89779642-c257a800-db07-11ea-91d3-cab30bcd77ff.png\" /></p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/690", "title": "Add Reply-To header to campaign emails", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Add Reply-To header to campaign emails controlled by a config file setting.</p>\n<p>I suspect that most people will not need to set a separate reply-to address therefore the default value of the config setting is not to display the reply-to field on the Compose tab to avoid cluttering the user interface. </p>\n<p>The existing code to handle reply-to allows the same variations as the From address (email address with optional name, or just name on its own) so the same help topic is used. That is updated in a separate pull request  https://github.com/phpList/phplist-lan-help/pull/26</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=20230</p>\n<h2>Screenshots (if appropriate):</h2>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/87242903-ef416e00-c428-11ea-97bc-4b273b8ca190.png\" /></p>", ["<p>Hello. I'd like to add this feature to a phpList v3.5.5 I dowloaded from <a href=\"https://sourceforge.net/projects/phplist/files/phplist/3.5.5/phplist-3.5.5.zip/download\">Sourceforge</a>. \nSince the downloaded copy is not versioned (doesn't have a .git directory) and seems to have a lot of differences with the <a href=\"https://github.com/phpList/phplist3/tree/3.5.5\">3.5.5 tagged version</a> from github, i can't do a simple merge.\n(Why is the released version so different from the tagged version?)</p>", "<p>@franbenz this is development copy and the one in Sourceforge is a production version that includes other Github repos, theme, plugins ect. </p>", "<p>Thanks @suelaP, any suggestions on how to add this feature to my copy? Perhaps just a patch, no git command involved?</p>", "<p>@franbenz You can manually make the change to send_core.php, it is only a few lines. Then add the USE_REPLY_TO setting to your config.php file.</p>", "<p>Thanks @bramley. I did a <code>git format-patch -1 HEAD</code> on a clone of your branch and then <code>git apply file.patch</code> on my production working copy.\nI've already tested this and now my list members can reply to a different address than the one sending the campaigns. Thanks for this feature, great timing for me!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/689", "title": "Release 3.5.5", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/688", "title": "Fix Incorrect CLICKTRACK description(Wrong default value).", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n\n<p>The current configuration(<code>config_extend.php</code>) describe the following.\nThis description is incorrect. The correct value is 1.\nI wrote the detail #687</p>\n<blockquote>\n<p>Click track, list detail\nif you enable this, you will get some extra statistics about unique users who have clicked the\nlinks in your messages, and the breakdown between clicks from text or html messages.\nHowever, this will slow down the process to view the statistics, so it is\nrecommended to leave it off, but if you're very curious, you can enable it</p>\n</blockquote>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<p>This change fixes #687 issue.</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>Thank you!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/687", "title": "Incorrect CLICKTRACK description in config_extended.php.", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hello, developers</p>\n<p>I found an incorrect <code>CLICKTRACK</code> description in <code>config_extended.php</code>. \nIt says that <code>CLICKTRACK</code> is zero by default. But It's 1 by default .</p>\n<p>https://github.com/phpList/phplist3/blob/1166e816201156fbf391fc54cb500e58466d1634/public_html/lists/admin/init.php#L418-L420</p>\n<p><code>// Click tracking\n// If you set this to 1, all links in your emails will be converted to links that\n// go via phpList. This will make sure that clicks are tracked. This is experimental and\n// all your findings when using this feature should be reported to mantis\n// for now it's off by default until we think it works correctly\ndefine('CLICKTRACK', 0);</code></p>\n<p>https://github.com/phpList/phplist3/blob/master/public_html/lists/config/config_extended.php#L636-L641</p>\n<p>Source: 1166e816201156fbf391fc54cb500e58466d1634</p>", ["<p>Hi @hiroyuki-sato you are right.   Well spotted!\nThe config_extended.php file is supposed to provide documentation on config additions that can be used with phpList and that information is outdated and not correct. For default values on config settings you can also check here: resources.phplist.com. </p>\n<p>Do you feel like creating a PR for the fix?</p>", "<p>Hello, @suelaP Thank you for your comment. \nI create #688. Please take a look when you get a chance.</p>", "<p>@hiroyuki-sato thank you for your contribution! Merged :)</p>", "<p>Thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/686", "title": "Make the default for \"Reset click statistics\" to be checked", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>It is easy to forget to check the \"Reset click statistics\" check box on the Finish tab when composing a campaign.This change makes it checked by default.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>I'm not sure that's a good idea. Maybe we can make it a preference, and check it depending on the preference, but I would not want to default to it being checked.</p>", "<p>It seems a bit elaborate to have a setting that controls the initial value, so I'll just have to remember to check the field each time.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/685", "title": "Use htmlentities to output the admin name on the edit list page", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>The admin name should be htmlescaped on output.</p>\n<p>To replicate the XSS issue:\nCreate an admin where login name is <script>alert(1)</script> and go to \"edit a list\" page. The javascript will be fired.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/684", "title": "Use htmlentities to output the admin name on subscribe page", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>The admin name should be htmlescaped on output. </p>\n<p>To replicate the XSS issue:<br />\nCreate an admin where login name is<code>&lt;script&gt;alert(1)&lt;/script&gt;</code> and go to edit a subscribe page. The javascript will be fired.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/683", "title": "Fix bug on the lists page", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Fix \"Save changes\" on the lists page. </p>", ["<p>What was this bug? It's not obvious why the form needed to be removed.</p>", "<p>@michield I think that extra form was preventing the users to make save the changes on that page \ud83e\udd37\u200d\u2640\ufe0f  </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/682", "title": "Mantis20221 fix bug", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Fix bug when selecting all lists or all public lists on the exclude element in the list selection</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=20221</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>@michield  the selection of lists on \"list exclude\" isn't working as expected. \nWhen I select a list to exclude and I click \"Save draft\" or \"Save and continue editing\" I should be able to check the lists I selected but that doesn't happen after the changes. </p>", "<p>Yes, I see what you mean. I'll look into it.</p>", "<p>@suelaP this should work correctly now.</p>", "<p>@michield list information is now saved but there is an empty  \"@\"  tab still available. See screenshot:\n<img alt=\"photo_2020-07-03_15-26-37\" src=\"https://user-images.githubusercontent.com/22301998/86473665-9fd0b300-bd41-11ea-8c2c-d1e96a6ecdd3.jpg\" /></p>", "<p>Yes, for now that will have to stay. It's cosmetic, and necessary for it to work. Without it, you can't \"uncheck all\" lists. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/681", "title": "Remove redundant code now that phplist can always retrieve remote URLs", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>The use of the PEAR HTTP_Request2 package as a fall-back when curl is not available means that phplist is always able to retrieve remote URLs. This change tidies-up some code that is now redundant:</p>\n<ul>\n<li>Remove uses of $can_fetchUrl which is now always true.</li>\n<li>Remove function fetchUrlPear() which is not used.</li>\n</ul>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/680", "title": "Avoid possible warning about $pageroot when phplist is installed in the web root", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>When phplist is installed in the web root directory, instead of '/lists', $pageroot should be set to an empty string otherwise there is a warning about it not being correct. Despite being explained in config_extended.php there is still a recurring problem of $pageroot being set to '/'.</p>\n<p>It is probably simplest just to silently change a value of '/' to an empty string.</p>\n<p>Also improve the warning message by including the values that do not match.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/84259320-3679cd80-ab10-11ea-96e3-02075b52e373.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/679", "title": "Cross Site Scripting Vulnerability on \"Send a campaign\" feature in PHPList 3.5.4", "status": "closed", "labels": [], "priority": null, "description": ["<p><strong>Describe the bug</strong>\nAn authenticated malicious user can take advantage of a Stored XSS vulnerability in the \"Send a campaign\" feature.\n<strong>To Reproduce</strong>\nSteps to reproduce the behavior:</p>\n<ol>\n<li>Log into the panel.</li>\n<li>Go to \"/admin/?page=send&amp;id=5&amp;tk=93e3e3e3bbd0bd48b788a384c549813b\"</li>\n<li>Select \"Send a webpage \"</li>\n<li>Insert payload:\n              // # \"&gt;<svg/onload=prompt(/SonGohan22/)>\n             \"&gt;<svg/onload=alert(document.domain)>\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/29293812/83972982-89376780-a90d-11ea-942b-959e62373dce.png\" /></li>\n<li>Click \"Save as draft\"</li>\n<li>Click Draft campaigns  save as draft step 5.</li>\n<li>View the preview to trigger XSS.</li>\n<li>View the preview to get in request and such Stored XSS.</li>\n</ol>\n<p><strong>Expected behavior</strong>\nThe removal of script tags is not sufficient to prevent an XSS attack. You must HTML Entity encode any output that is stored back to the page.</p>\n<p><strong>Impact</strong>\nCommonly include transmitting private data, like cookies or other session information, to the attacker, redirecting the victim to web content controlled by the attacker, or performing other malicious operations on the user\u2019s machine under the guise of the vulnerable site.</p>\n<p><strong>Screenshots</strong>\n<img alt=\"226_php\" src=\"https://user-images.githubusercontent.com/29293812/83973588-bede4f80-a911-11ea-96b9-1a32b6621d42.PNG\" />\n<img alt=\"231_php\" src=\"https://user-images.githubusercontent.com/29293812/83973602-e46b5900-a911-11ea-8a6b-9287f1a9623e.PNG\" />\n<img alt=\"233_php\" src=\"https://user-images.githubusercontent.com/29293812/83973603-e6cdb300-a911-11ea-90e3-e2a44f0f135a.PNG\" />\nTrigger XSS\n<img alt=\"228_php\" src=\"https://user-images.githubusercontent.com/29293812/83973613-f6e59280-a911-11ea-8ad1-9d9b78fbe3e1.PNG\" />\n<img alt=\"229_php\" src=\"https://user-images.githubusercontent.com/29293812/83973617-fa791980-a911-11ea-953b-2ba6279f2492.PNG\" />\n<img alt=\"230_php\" src=\"https://user-images.githubusercontent.com/29293812/83973620-fcdb7380-a911-11ea-92c7-511b98e12fcf.PNG\" /></p>\n<p><strong>Desktop (please complete the following information):</strong>\n- OS: Ubuntu\n- Browser: Firefox\n- Version: 76.0.1</p>", ["<p>Hi @michield @suelaP\nPlease review it! Thanks</p>", "<p>Resolved with https://github.com/phpList/phplist3/commit/a9ee6fde7846238506fd542ec77b8b4287951f13</p>", "<p>Hi Team Security phplist3.</p>\n<p>You can a CVE ID assigned :D</p>\n<p>Thanks you!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/678", "title": "Cross Site Scripting Vulnerability on \"Import subscribers\" feature in PHPList 3.5.4 upload file SVG.", "status": "closed", "labels": [], "priority": null, "description": ["<p><strong>Describe the bug</strong>\nAn authenticated malicious user can take advantage of a Stored XSS vulnerability in the \"Import subscribers\" feature.\n<strong>To Reproduce</strong>\nSteps to reproduce the behavior:</p>\n<ol>\n<li>Log into the panel.</li>\n<li>Go to \"/admin/?page=import2&amp;tk=93e3e3e3bbd0bd48b788a384c549813b\"</li>\n<li>Click \"Browse\"</li>\n<li>Import payload file SVG: \n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/29293812/83971042-440e3800-a903-11ea-9542-7c005adc7d32.png\" /></li>\n<li>Click button \"Import\"</li>\n<li>Click select \"Email\".</li>\n<li>Click button \"CONTINUE\" </li>\n<li>View the preview to trigger XSS.</li>\n<li>View the preview to get in request and such Stored XSS.</li>\n</ol>\n<p><strong>Expected behavior</strong>\nThe removal of script tags is not sufficient to prevent an XSS attack. You must HTML Entity encode any output that is stored back to the page.</p>\n<p><strong>Impact</strong>\nCommonly include transmitting private data, like cookies or other session information, to the attacker, redirecting the victim to web content controlled by the attacker, or performing other malicious operations on the user\u2019s machine under the guise of the vulnerable site.\n<strong>Screenshots</strong>\n<img alt=\"phplist222\" src=\"https://user-images.githubusercontent.com/29293812/83971596-5ccc1d00-a906-11ea-9447-b2abe397c7df.PNG\" />\n<img alt=\"phplist223\" src=\"https://user-images.githubusercontent.com/29293812/83971598-605fa400-a906-11ea-9ef1-7737d178c883.PNG\" />\n<img alt=\"phplist224\" src=\"https://user-images.githubusercontent.com/29293812/83971602-62c1fe00-a906-11ea-87ca-1a4ddd9b5ae2.PNG\" />\nTrigger XSS\n<img alt=\"phplist_final\" src=\"https://user-images.githubusercontent.com/29293812/83971604-66ee1b80-a906-11ea-839f-5bfa0a4c55d0.PNG\" />\n<strong>Desktop (please complete the following information):</strong>\n- OS: Ubuntu\n- Browser: Firefox\n- Version: 76.0.1</p>", ["<p>Hi @michield @suelaP\nPlease review it! Thanks</p>", "<p>This is resolved with https://github.com/phpList/phplist3/commit/bf445db5b0548d09079cf45ed89867fd79e6bf56</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/677", "title": "Cross Site Scripting Vulnerability on \"Setting\" feature in PHPList 3.5.4", "status": "closed", "labels": [], "priority": null, "description": ["<p><strong>Describe the bug</strong>\nAn authenticated malicious user can take advantage of a Stored XSS vulnerability in the \"Setting\" feature.\n<strong>To Reproduce</strong>\nSteps to reproduce the behavior:</p>\n<ol>\n<li>Log into the panel.</li>\n<li>Go to \"http://son.labs.com/admin/?page=configure&amp;tk=5e8163f644e4f4d6c4779e60048e8459\"</li>\n<li>Click Edit \"Name of the organisation\"</li>\n<li>Insert payload:\n           <svg/on\\<script>\\<script>load=alert(/SonGohan22/)//\\</script>\n           \"><svg/onload=alert(document.domain)>\n           // # \"&gt;<svg/onload=prompt(document.cookie)></li>\n<li>Click \"Save changes\"</li>\n<li>Access \"http://son.labs.com\"</li>\n<li>View the preview to trigger XSS.</li>\n<li>View the preview to get in request and such Stored XSS.</li>\n</ol>\n<p><strong>Expected behavior</strong>\nThe removal of script tags is not sufficient to prevent an XSS attack. You must HTML Entity encode any output that is stored back to the page.</p>\n<p><strong>Impact</strong>\nCommonly include transmitting private data, like cookies or other session information, to the attacker, redirecting the victim to web content controlled by the attacker, or performing other malicious operations on the user\u2019s machine under the guise of the vulnerable site.</p>\n<p><strong>Screenshots</strong>\n<img alt=\"phplist1\" src=\"https://user-images.githubusercontent.com/29293812/83897578-f61cf700-a77f-11ea-9764-6c82a0374b27.PNG\" />\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/29293812/83897922-6cb9f480-a780-11ea-9549-667ecf084b23.png\" />\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/29293812/83898092-a25edd80-a780-11ea-8e2c-cb95e00a8001.png\" /></p>\n<p><strong>Desktop (please complete the following information):</strong>\n- OS: Ubuntu\n- Browser: Firefox\n- Version: 76.0.1</p>", ["<p>Hi @michield @suelaP\nPlease review it! Thanks</p>", "<p>Well, this one is slightly contradictory. If we disallow JS in the configuration, we should also disallow it in the subscribe pages, which would counter the whole process of building pages.</p>\n<p>It's a bit like, you can't put any HTML or JS in the content of a CMS. But that's the whole point of having a CMS. </p>\n<p>We can sanitise this particular variable, but then pageheader and pagefooter will need to allow HTML and JS, and therefore would also have this issue.</p>", "<p>This particular situation is resolved with https://github.com/phpList/phplist3/commit/6e1379fbf55b1b4ab9c7d63a5454695419e3ba1c</p>\n<p>However, the same can be achieved on the pageheader and pagefooter config values.</p>", "<p>@michield \n Yep...You work very well\nThank,</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/676", "title": "Cross Site Scripting Vulnerability on \"Send a campaign\" feature in PHPList 3.5.4", "status": "closed", "labels": [], "priority": null, "description": ["<p><strong>Describe the bug</strong>\nAn authenticated malicious user can take advantage of a Stored XSS vulnerability in the \"Send a campaign\" feature.\n<strong>To Reproduce</strong>\nSteps to reproduce the behavior:</p>\n<ol>\n<li>Log into the panel.</li>\n<li>Go to \"/admin/?page=send&amp;id=3&amp;tk=311902f27f63cc4f7466fc56ca0e916b&amp;tab=Finish\"</li>\n<li>Insert payload: \n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/29293812/83870606-bdb5f280-a758-11ea-98f1-cf401ace13f7.png\" />\n// # \"&gt;<svg/onload=prompt(/SonGohan22/)>\n\"&gt;<svg/onload=alert(document.domain)></li>\n<li>Click \"Save and continue editing\"</li>\n<li>View the preview to trigger XSS.</li>\n<li>View the preview to get in request and such Stored XSS.</li>\n</ol>\n<p><strong>Expected behavior</strong>\nThe removal of script tags is not sufficient to prevent an XSS attack. You must HTML Entity encode any output that is stored back to the page.</p>\n<p><strong>Impact</strong>\nCommonly include transmitting private data, like cookies or other session information, to the attacker, redirecting the victim to web content controlled by the attacker, or performing other malicious operations on the user\u2019s machine under the guise of the vulnerable site.</p>\n<p><strong>Screenshots</strong>\n<img alt=\"phplist22\" src=\"https://user-images.githubusercontent.com/29293812/83871779-e7701900-a75a-11ea-8271-c2d4fcb05339.png\" />\n<img alt=\"phplist23\" src=\"https://user-images.githubusercontent.com/29293812/83871874-18e8e480-a75b-11ea-8966-d44cafc05e48.png\" />\nInsert payload\n<img alt=\"phplist24\" src=\"https://user-images.githubusercontent.com/29293812/83872013-5fd6da00-a75b-11ea-83bb-4858515ec09a.png\" />\nTrigger XSS\n<img alt=\"phplist25\" src=\"https://user-images.githubusercontent.com/29293812/83872340-fe633b00-a75b-11ea-935d-99133636f850.png\" />\n<img alt=\"phplist26\" src=\"https://user-images.githubusercontent.com/29293812/83872343-015e2b80-a75c-11ea-8866-49b556faae39.png\" />\n<img alt=\"phplist27\" src=\"https://user-images.githubusercontent.com/29293812/83872350-04591c00-a75c-11ea-8535-65da08a85bd7.png\" /></p>\n<p><strong>Desktop (please complete the following information):</strong>\n- OS: Ubuntu\n- Browser: Firefox\n- Version: 76.0.1</p>", ["<p>Hi @michield @suelaP\nPlease review it! Thanks</p>", "<p>Resolved with https://github.com/phpList/phplist3/commit/5388df4079132b27b158feac39f02a827ce1239a</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/675", "title": "Cross Site Scripting Vulnerability on \"Bounce rules\" feature in PHPList 3.5.4", "status": "closed", "labels": [], "priority": null, "description": ["<p><strong>Describe the bug</strong>\nAn authenticated malicious user can take advantage of a Stored XSS vulnerability in the \"Bounce rules\" feature.</p>\n<p><strong>To Reproduce</strong>\nSteps to reproduce the behavior:\n1. Log into the panel.\n2. Go to \"/admin/?page=bouncerules&amp;type=active&amp;tk=1af246c882c1c6096773c52216860b64\"\n3. Click \"rule1\" edit infomation rule1.\n4. Insert payload:\n'-alert(document.domain)-'\n5. Click \"Save Changes\"\n6. View the preview to trigger XSS.\n7. View the preview to get in request and such Stored XSS.</p>\n<p><strong>Expected behavior</strong>\nThe removal of script tags is not sufficient to prevent an XSS attack. You must HTML Entity encode any output that is stored back to the page.</p>\n<p><strong>Impact</strong>\nCommonly include transmitting private data, like cookies or other session information, to the attacker, redirecting the victim to web content controlled by the attacker, or performing other malicious operations on the user\u2019s machine under the guise of the vulnerable site.</p>\n<p><strong>Screenshots</strong>\n<img alt=\"phplist\" src=\"https://user-images.githubusercontent.com/29293812/83828117-1ad68780-a70a-11ea-86e3-b71dffeff51f.png\" />\nInsert payload\n<img alt=\"phplist2\" src=\"https://user-images.githubusercontent.com/29293812/83828133-2629b300-a70a-11ea-8cb2-17f8ee7f8274.png\" />\nTrigger XSS\n<img alt=\"phplist6\" src=\"https://user-images.githubusercontent.com/29293812/83828137-2c1f9400-a70a-11ea-8efa-689830c02baa.PNG\" />\n<img alt=\"phplist8\" src=\"https://user-images.githubusercontent.com/29293812/83828144-304bb180-a70a-11ea-96ea-4c0567ef6eaf.PNG\" /></p>\n<p><strong>Desktop (please complete the following information):</strong>\n- OS: Ubuntu \n- Browser: Firefox\n- Version: 76.0.1</p>", ["<p>Hi @michield @suelaP\nPlease review it! Thanks</p>", "<p>Resolved with https://github.com/phpList/phplist3/commit/e2b08582260baf06ace30d5e64f5539d7f02c06d</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/674", "title": "Release 3.5.4", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/673", "title": "Missing 3.5.4 release ", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hello, developers.</p>\n<p>As far as I know, The latest version is 3.5.4.\nBut the latest is still 3.5.3 in <a href=\"https://github.com/phpList/phplist3/releases\">this page</a></p>\n<p>Is missing tag update?</p>\n<p><img width=\"1038\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2020-06-01 11 22 28\" src=\"https://user-images.githubusercontent.com/767650/83370461-6fbc8a00-a3fa-11ea-8154-10ee97a49e8d.png\"></p>\n<p>Best regards.</p>", ["<p>@hiroyuki-sato well spotted. It has now been published there too. </p>", "<p>Thank you!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/672", "title": "Bypass Cross Site Scripting Vulnerability on \"IMPORT EMAILS\" feature in php-list-3.5.4", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hi Team phplist3, I found a small bug!\n**Describe the bug\nAn authenticated malicious user can take advantage of a Stored XSS vulnerability in the \"IMPORT EMAILS\" feature. It affects both options SEND A CAMPAIGN feature.</p>\n<p><strong>To Reproduce</strong>\nSteps to reproduce the behavior:</p>\n<ol>\n<li>Login into the panel phplist</li>\n<li>Go to 'phplist3/lists/admin/?page=setup&amp;tk=1c63b88932115188325586eab8221123'</li>\n<li>Chose 'Config' -&gt; Click 'Add some subscribers' -&gt; Chose 1/3 options (Copy and paste list of emails) -&gt; 'Add a list'</li>\n<li>\n<p>Insert Payload XSS:\n <a href=\"j&Tab;a&Tab;v&Tab;asc&NewLine;ri&Tab;pt&colon;&lpar;a&Tab;l&Tab;e&Tab;r&Tab;t&Tab;(/by r0ck3t1973))&rpar;\">X</a>\n<img alt=\"bypass0\" src=\"https://user-images.githubusercontent.com/62001260/83326619-ba75bf00-a29f-11ea-98aa-2f78deab002a.PNG\" /></p>\n</li>\n<li>\n<p>Save</p>\n</li>\n<li>xss alert message</li>\n</ol>\n<p><strong>Screenhost</strong>\n<img alt=\"bypass\" src=\"https://user-images.githubusercontent.com/62001260/83326480-9d8cbc00-a29e-11ea-87cd-5f2a0d0a60e8.PNG\" />\n<img alt=\"bypass1\" src=\"https://user-images.githubusercontent.com/62001260/83326499-c1500200-a29e-11ea-8a7b-8aed2f1b6b5d.PNG\" />\n<img alt=\"bypass2\" src=\"https://user-images.githubusercontent.com/62001260/83326521-ee041980-a29e-11ea-8b4a-4e2f60c7c2bc.PNG\" />\n<img alt=\"bypass3\" src=\"https://user-images.githubusercontent.com/62001260/83326546-0f650580-a29f-11ea-9280-5dd2321a8514.PNG\" /></p>\n<p><strong>Also Video PoC</strong>\nhttps://drive.google.com/file/d/1lm42PDQ2NZW4wajwq5eh4Hx9W69jAyLc/view?usp=sharing</p>\n<p>Expected behavior\nThe removal of script tags is not sufficient to prevent an XSS attack. You must HTML Entity encode any output that is reflected back to the page</p>\n<p>Impact\nCommonly include transmitting private data, like cookies or other session information, to the attacker, redirecting the victim to web content controlled by the attacker, or performing other malicious operations on the user\u2019s machine under the guise of the vulnerable site.</p>\n<p>Desktop (please complete the following information):\nOS: Windows\nBrowser: All\nVersion</p>\n<p>I Hope you fix it ASAP!!!</p>", ["<p>Payload xss\n<a href=\"https://github.com/phpList/phplist3/files/4705526/payload.txt\">payload.txt</a></p>", "<p>Nice...\ud83e\udd23\ud83e\udd23\ud83e\udd23</p>", "<p>I'm not sure this is a valid report. As an admin you are allowed to put HTML in the description of a list. It only fires when you click the link and doesn't fire on the loading of the page.</p>", "<p>I'm going to close this, but feel free to comment and re-open if you disagree.</p>", "<p>Hi @maltfield \nAre you sure it is not a valid report? I tried inserting payload on some other platform and got bounty. I think you should review it!\nTks,</p>", "<p>oh hello. I think you meant to tag @michield :P</p>", "<p>oh, sr @maltfield . :))</p>", "<p>@r0ck3t1973 Yes, that's fine, I will review. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/671", "title": "Cross Site Scripting Vulnerability on \"Manage administrators\" feature in PHPList  3.5.3, 3,5.4", "status": "closed", "labels": [], "priority": null, "description": ["<p><strong>Describe the bug</strong>\nAn authenticated malicious user can take advantage of a Stored XSS vulnerability in the \"Manage administrators\" feature.\n<strong>To Reproduce</strong>\nSteps to reproduce the behavior:</p>\n<ol>\n<li>Log into the panel.</li>\n<li>Go to \"/admin/?page=admins&amp;tk=569e1f6f9e6b3a9abd9046ff57e34aaf\" </li>\n<li>Click \"Manage administrators\"</li>\n<li>Click \"admin\" edit infomation admin.</li>\n<li>Insert payload:\n     \"&gt;<svg/onload=alert(/XSS/)>\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/29293812/83284012-4e934800-a206-11ea-900d-45d9ebefbcd8.png\" />\n      // # \"&gt;<svg/onload=prompt(/SonGohan22/)></li>\n<li>Click \"Save Changes\"</li>\n<li>View the preview to trigger XSS.</li>\n<li>View the preview to get in request and such Stored XSS</li>\n</ol>\n<p><strong>Expected behavior</strong>\nThe removal of script tags is not sufficient to prevent an XSS attack. You must HTML Entity encode any output that is stored back to the page.</p>\n<p><strong>Impact</strong>\nCommonly include transmitting private data, like cookies or other session information, to the attacker, redirecting the victim to web content controlled by the attacker, or performing other malicious operations on the user\u2019s machine under the guise of the vulnerable site.</p>\n<p><strong>Screenshots</strong>\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/29293812/83283300-3111ae80-a205-11ea-8f7d-c6d5b70560fb.png\" />\n Insert payload\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/29293812/83283469-78983a80-a205-11ea-85d0-2bc041a1f1e4.png\" />\nClick \"Save Changes\" -&gt; Click \"List of administrator\" -&gt; View Stored XSS\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/29293812/83283920-2e638900-a206-11ea-818c-9c158ee6ed66.png\" /></p>\n<p><strong>Desktop (please complete the following information):</strong></p>\n<ul>\n<li>OS: Windows</li>\n<li>Browser: Firefox</li>\n<li>Version: 76.0.1</li>\n</ul>", ["<p>Resolved with https://github.com/phpList/phplist3/commit/b2d581fa9d474927f3e85e1d0f020f69b95c3312</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/670", "title": "[manual] Sending your first campaign contains dead link image URL.", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hello, @marianaballa (It seems that you are the maintainer <a href=\"https://www.phplist.org/manual/books/phplist-manual/page/sending-your-first-campaign\">PHPlist manual</a>)</p>\n<p><a href=\"https://www.phplist.org/manual/books/phplist-manual/page/sending-your-first-campaign\">Sending your first campaign</a> contains a dead link image URL.</p>\n<p>Please see this thread in more detail.\nhttps://discuss.phplist.org/t/image-not-found-sending-your-first-campaign-page/6246/6</p>\n<p>I can remove it, but can't fix it. I'm not sure correct URL</p>\n<p>Best regards.</p>", ["<p>Hello @hiroyuki-sato ! Many thanks for reporting this. I responded on the phpList community forum as well. I could not see the image as well when switching to a private tab. </p>\n<p>I'll invastigate this!</p>\n<p>Best,\nMariana</p>", "<p>Hello, @marianaballa. Thank you for your reply. I confirmed that this issue resolved.\n(Martin updated that page). Thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/669", "title": "Cross Site Script Vulnerability on \"Categories Lists\" feature in phplist version 3.5.3", "status": "closed", "labels": [], "priority": null, "description": ["<p><strong>Describe the bug</strong>\nAn authenticated malicious user can take advantage of a Stored XSS vulnerability in the \"Categories Lists\" feature.</p>\n<p><strong>To Reproduce</strong>\nSteps to reproduce the behavior:</p>\n<ol>\n<li>Login into the panel phplist</li>\n<li>Go to 'phplist3/lists/admin/?page=list&amp;tk=dbf5ac23de96b3920307f34621dae3ee'</li>\n<li>Click 'Subscribers Lists' -&gt; 'Categories Lists' -&gt; 'Configure Categories'</li>\n<li>Insert Payload XSS:\n    '&gt;<details/open/ontoggle=confirm(/r0ck3t1973/)></li>\n<li>Save and Back -&gt; click chose 'CATEGORY' new -&gt; Save -&gt; click Subscribers</li>\n<li>xss alert message</li>\n</ol>\n<p><strong>Screenhost</strong>\n<img alt=\"cat1\" src=\"https://user-images.githubusercontent.com/62001260/83045214-7ef4ae00-a06f-11ea-8534-92915f3494fb.png\" />\n<img alt=\"cat2\" src=\"https://user-images.githubusercontent.com/62001260/83045235-874ce900-a06f-11ea-939c-3fa8b885e563.png\" />\n<img alt=\"cat3\" src=\"https://user-images.githubusercontent.com/62001260/83045256-8b790680-a06f-11ea-867a-5fd0e998263e.PNG\" />\n<img alt=\"cat4\" src=\"https://user-images.githubusercontent.com/62001260/83045275-8fa52400-a06f-11ea-86e1-cb60727bfa13.PNG\" />\n<img alt=\"mess_alert1\" src=\"https://user-images.githubusercontent.com/62001260/83045468-d004a200-a06f-11ea-9bf0-02f831c5a8e0.png\" /></p>\n<p><strong>Also Video PoC</strong>\nhttps://drive.google.com/open?id=1ZY7QpWzg9SEkjXQsBCRUs-up8U0Yh1L2</p>\n<p><strong>Expected behavior</strong>\nThe removal of script tags is not sufficient to prevent an XSS attack. You must HTML Entity encode any output that is reflected back to the page</p>\n<p><strong>Impact</strong>\nCommonly include transmitting private data, like cookies or other session information, to the attacker, redirecting the victim to web content controlled by the attacker, or performing other malicious operations on the user\u2019s machine under the guise of the vulnerable site.</p>\n<p>Desktop (please complete the following information):\nOS: Windows\nBrowser: All\nVersion</p>\n<p>I Hope you fix it ASAP!!!</p>", ["<p>Fixed with https://github.com/phpList/phplist3/commit/ba8507fcedbf9927036eb09a49b692b9c8fb1598</p>", "<p>@r0ck3t1973 thank you for your contributions again :). The fixes to all issues you reported have been included in the latest release. You can take a look at the release notes here:  https://www.phplist.org/newslist/phplist-3-5-4-release-notes/</p>", "<p>Hi Team Security phplist3.</p>\n<p>You can a CVE ID assigned and reference change log to \"UraSec Team\"  :D</p>\n<p>Thanks you!</p>\n<p>On Fri, May 29, 2020 at 7:11 PM suelaP <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;\">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>\n<blockquote>\n<p>@r0ck3t1973 <a href=\"https://github.com/r0ck3t1973\">https://github.com/r0ck3t1973</a> thank you for your\ncontributions again :). The fixes to all issues you reported have been\nincluded in the latest release. You can take a look at the release notes\nhere: https://www.phplist.org/newslist/phplist-3-5-4-release-notes/</p>\n<p>\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\n<a href=\"https://github.com/phpList/phplist3/issues/669#issuecomment-635938696\">https://github.com/phpList/phplist3/issues/669#issuecomment-635938696</a>,\nor unsubscribe\n<a href=\"https://github.com/notifications/unsubscribe-auth/AOZBA3FCZB6L5X4QFPCGQDLRT6RAFANCNFSM4NMJCAGQ\">https://github.com/notifications/unsubscribe-auth/AOZBA3FCZB6L5X4QFPCGQDLRT6RAFANCNFSM4NMJCAGQ</a>\n.\n</p>\n</blockquote>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/668", "title": "Bypass authentication through loose comparison", "status": "closed", "labels": [], "priority": null, "description": ["<p>[lists/index.php:145]\nhttps://github.com/phpList/phplist3/blob/d0a010755a9e8aa5f274ffa3b88c5b3c9da01538/public_html/lists/index.php#L145 has the potential of authentication bypass problem through loose comparison. (==). </p>\n<p>Here is another [example].\nhttps://github.com/phpList/phplist3/blob/d0a010755a9e8aa5f274ffa3b88c5b3c9da01538/public_html/lists/index.php#L148</p>\n<p>A similar CVE can be found <a href=\"https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-8547\">CVE-2020-8547</a> and <a href=\"https://www.exploit-db.com/exploits/47989\">here</a> </p>\n<p>In addition, in \nhttps://github.com/phpList/phplist3/blob/d0a010755a9e8aa5f274ffa3b88c5b3c9da01538/public_html/lists/admin/subscribelib2.php#L143\nIt also uses a loose comparison. The functionality might not perform correctly for the password rechecking in the magic strings cases. For example, \"0e11\" and \"0e22\" shall be equal under loose comparison, but actually they are not. </p>", ["<p>Hi @peng-hui , \nThanks for the report, would you be willing to submit a pull request with the fix? </p>", "<p>Resolved with https://github.com/phpList/phplist3/commit/def1cee7f33d3ea4728f3d21c7ddf81901a60b2b</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/667", "title": "Cross Site Scripting Vulnerability on \"Import Mail\" feature in PHP List", "status": "closed", "labels": [], "priority": null, "description": ["<p><strong>Describe the bug</strong>\nAn authenticated malicious user can take advantage of a Stored XSS vulnerability in the \"Import Mail\" feature.\n<strong>To Reproduce</strong>\nSteps to reproduce the behavior:</p>\n<ol>\n<li>Log into the panel.</li>\n<li>Go to \"/admin/?page=import&amp;tk=6adb3efa27ad1baa355bd3b62671c46b\"</li>\n<li>Click \"import by uploading a file with emails\"</li>\n<li>Insert payload:\n&lt;svg/on<script><script>load=alert('XSS')//</script></li>\n<li>Click \"Save \"</li>\n<li>View the preview to trigger XSS.</li>\n<li>View the preview to get in request and such Stored XSS</li>\n</ol>\n<p><strong>Expected behavior</strong>\nThe removal of script tags is not sufficient to prevent an XSS attack. You must HTML Entity encode any output that is stored back to the page.</p>\n<p><strong>Impact</strong>\nCommonly include transmitting private data, like cookies or other session information, to the attacker, redirecting the victim to web content controlled by the attacker, or performing other malicious operations on the user\u2019s machine under the guise of the vulnerable site.</p>\n<p><strong>Screenshots</strong>\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/29293812/82859123-135ff300-9f40-11ea-8de6-61517bfdc695.png\" />\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/29293812/82859195-47d3af00-9f40-11ea-9bfe-80e30160e4c3.png\" />\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/29293812/82859225-591cbb80-9f40-11ea-8fb5-5b1db2a5b926.png\" /></p>\n<p><strong>Desktop (please complete the following information):</strong>\n- OS: Windows\n- Browser: Firefox\n- Version: 76.0.1</p>\n<p><strong>PHP List Version 3.5.5</strong></p>", ["<p>Hi @suaP \nPlease review it! Thanks</p>", "<p>Resolved with https://github.com/phpList/phplist3/commit/9c4515c9be32b6cf13f7da67a27db85877083189</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/666", "title": "Cross Site Script Vulnerability on \"Subscribers Lists\" feature in phplist version 3.5.3", "status": "closed", "labels": [], "priority": null, "description": ["<p><strong>Describe the bug</strong>\nAn authenticated malicious user can take advantage of a Stored XSS vulnerability in the \"Subscribers Lists\" feature.</p>\n<p><strong>To Reproduce</strong>\nSteps to reproduce the behavior:</p>\n<ol>\n<li>Login into the panel phplist</li>\n<li>Go to 'phplist3/lists/admin/?page=list&amp;tk=5346bb7f96da80c4ac675b4fe5b21f60'</li>\n<li>Click 'Subscribers Lists' -&gt; 'Add a lists'</li>\n<li>Insert Payload XSS: 'to email address(es)'\n   '&gt;<details/open/ontoggle=confirm(1337)></li>\n<li>Save -&gt; Click 'Config' -&gt; 'Add some subscribers'</li>\n<li>xss alert message</li>\n</ol>\n<p><strong>Expected behavior</strong>\nThe removal of script tags is not sufficient to prevent an XSS attack. You must HTML Entity encode any output that is reflected back to the page</p>\n<p><strong>Screnhost</strong>\n<img alt=\"poc1\" src=\"https://user-images.githubusercontent.com/62001260/82837234-a96d2c80-9ef2-11ea-9e76-915080fc3efa.png\" />\n<img alt=\"payload1\" src=\"https://user-images.githubusercontent.com/62001260/82837243-b12cd100-9ef2-11ea-9eaf-05330982bc1c.PNG\" />\n<img alt=\"add1\" src=\"https://user-images.githubusercontent.com/62001260/82837260-bb4ecf80-9ef2-11ea-88ca-485c5ffa7614.png\" />\n<img alt=\"click2\" src=\"https://user-images.githubusercontent.com/62001260/82837289-d4f01700-9ef2-11ea-8dfa-811d14db2a2e.png\" />\n<img alt=\"mess_alert\" src=\"https://user-images.githubusercontent.com/62001260/82837294-d7eb0780-9ef2-11ea-9a36-b708cfbc3464.PNG\" /></p>\n<p><strong>Also Video PoC</strong>\nhttps://drive.google.com/open?id=1Oh0-YcP2Kombmgh2USyivptZNe-ywCa4</p>\n<p><strong>Impact</strong>\nCommonly include transmitting private data, like cookies or other session information, to the attacker, redirecting the victim to web content controlled by the attacker, or performing other malicious operations on the user\u2019s machine under the guise of the vulnerable site.</p>\n<p>Desktop (please complete the following information):\nOS: Windows\nBrowser: All\nVersion</p>\n<p>I Hope you fix it ASAP!!!</p>", ["<p>Fixed in https://github.com/phpList/phplist3/commit/9c4515c9be32b6cf13f7da67a27db85877083189</p>", "<p>Hi @michield , I found a small bug \"Subscribers Lists\"!</p>\n<p>Screenhost:\n<img alt=\"poc2\" src=\"https://user-images.githubusercontent.com/62001260/82970380-8e85df80-9ffa-11ea-874c-362b9df03dbb.PNG\" /></p>\n<p>Also Video PoC:\nhttps://drive.google.com/open?id=1ZY7QpWzg9SEkjXQsBCRUs-up8U0Yh1L2</p>", "<p>@r0ck3t1973  thank you for your reports :) This looks like a separate issue related to List categories. Would you mi creating a new one for  this report? </p>", "<p>@suelaP Ok!\nTkanks,</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/665", "title": "Cross Site Script Vulnerability on \"Send a Campaign\" feature in phplist version 3.5.3", "status": "closed", "labels": [], "priority": null, "description": ["<p><strong>Describe the bug</strong>\nAn authenticated malicious user can take advantage of a Stored XSS vulnerability in the \"Send a Campaign\" feature.</p>\n<p><strong>To Reproduce</strong>\nSteps to reproduce the behavior:</p>\n<ol>\n<li>Login into the panel phplist</li>\n<li>Go to 'phplist3/lists/admin/?page=send&amp;delete=5&amp;tk=20a8f65277024ee830090611cb93e35d'</li>\n<li>Click 'Start or continue a campaign' -&gt; 'no title</li>\n<li>\n<p>Insert Payload XSS: 'to email address(es)'\n// # \"&gt;<svg/onload=prompt(1)>\n<img alt=\"payload\" src=\"https://user-images.githubusercontent.com/62001260/82779616-d7b12480-9e7e-11ea-8ebd-ab610adef0a3.PNG\" /></p>\n</li>\n<li>\n<p>Next</p>\n</li>\n<li>xss alert message</li>\n</ol>\n<p><strong>Expected behavior</strong>\nThe removal of script tags is not sufficient to prevent an XSS attack. You must HTML Entity encode any output that is reflected back to the page</p>\n<p><strong>Screnhost</strong>\n<img alt=\"1\" src=\"https://user-images.githubusercontent.com/62001260/82779455-72f5ca00-9e7e-11ea-89bd-1eaf1b0e30e4.png\" />\n<img alt=\"2\" src=\"https://user-images.githubusercontent.com/62001260/82779459-75f0ba80-9e7e-11ea-9c2a-ebb287d7173e.PNG\" />\n<img alt=\"3\" src=\"https://user-images.githubusercontent.com/62001260/82779467-78531480-9e7e-11ea-8653-934aab144a44.PNG\" /></p>\n<p><strong>Impact</strong>\nCommonly include transmitting private data, like cookies or other session information, to the attacker, redirecting the victim to web content controlled by the attacker, or performing other malicious operations on the user\u2019s machine under the guise of the vulnerable site.</p>\n<p>Desktop (please complete the following information):\nOS: Windows\nBrowser: All\nVersion\nI Hope you fix it ASAP</p>", ["<p>@r0ck3t1973 thanks for your report. Unfortunately, I can not replicated the issue following the steps you provided. \nThe script will always be changed to \"// # \"&gt;\" &gt; Not recognized as an address in the system and  recognized as invalid email address when trying to add it from this page. </p>\n<p>Can you please check again and share your findings via email: \"info@phplist.com\". \nThanks</p>", "<p>Hi @suelaP \nAlso Video PoC:\nhttps://drive.google.com/open?id=1Fv5pTPIm_g344EbCybWKYp6YKSv2LRQb</p>", "<p>Thanks @r0ck3t1973 </p>", "<p>resolved with https://github.com/phpList/phplist3/commit/80250d869aaaa5cb228046d5f5aa63e91b896558</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/664", "title": "Cross Site Script Vulnerability on \"Configure Attributes\" feature in phplist version 3.5.3", "status": "closed", "labels": [], "priority": null, "description": ["<p><strong>Describe the bug</strong>\nAn authenticated malicious user can take advantage of a Stored XSS vulnerability in the \"configure attributes\" feature.</p>\n<p><strong>To Reproduce</strong>\nSteps to reproduce the behavior:</p>\n<ol>\n<li>Login into the panel phplist</li>\n<li>Go to 'phplist3/lists/admin/?page=attributes&amp;tk=20a8f65277024ee830090611cb93e35d'</li>\n<li>Click 'Edit Values' -&gt; 'Add new'</li>\n<li>Insert Payload XSS:\n   '&gt;<details/open/ontoggle=confirm(1337)></li>\n<li>Add new Woonplaats</li>\n<li>xss alert message</li>\n</ol>\n<p><strong>Expected behavior</strong>\nThe removal of script tags is not sufficient to prevent an XSS attack. You must HTML Entity encode any output that is reflected back to the page</p>\n<p><strong>Screenhost</strong>\n1. login\n<img alt=\"login\" src=\"https://user-images.githubusercontent.com/62001260/82778023-42139600-9e7a-11ea-9699-d019469872f4.PNG\" />\n2. Add new\n<img alt=\"Addnew\" src=\"https://user-images.githubusercontent.com/62001260/82778039-4f308500-9e7a-11ea-84bc-a5022500b6ee.PNG\" />\n3. Insert payload xss\n<img alt=\"insert_payload\" src=\"https://user-images.githubusercontent.com/62001260/82778045-56f02980-9e7a-11ea-96c2-f850f58c4c32.PNG\" />\n4. xss alert message\n<img alt=\"xss_mess\" src=\"https://user-images.githubusercontent.com/62001260/82778053-5fe0fb00-9e7a-11ea-8b77-b3b1ed415003.PNG\" /></p>\n<p><strong>Desktop (please complete the following information):</strong>\nOS: Windows\nBrowser: All\nVersion</p>\n<hr />\n<p>I Hope you fix it ASAP</p>", ["<p>fixed in https://github.com/phpList/phplist3/commit/e22260083e2ae35ae7d57fa5632a9c49db3ce849</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/663", "title": "update chromedriver to support latest version of chrome", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/662", "title": "Arbitrary File upload in phplist 3.5.3 or lower", "status": "closed", "labels": [], "priority": null, "description": ["<p>Steps to Reproduce:</p>\n<ol>\n<li>Create a repo on GitHub with the format as <a href=\"https://github.com/sarthaksaini9999/shell\">Repo</a></li>\n<li>Copy the zip format and paste in the Plugin package URL </li>\n<li>The files from the repo will be uploaded. </li>\n<li>Navigate to /lists/admin/plugins/ and find the PHP files and execute code.</li>\n</ol>\n<p>Tested Extensions: php7,phtml</p>\n<p>POC: \n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/46784458/82292745-0f285880-99c9-11ea-843f-60f62d00ccc3.png\" /></p>\n<p>Demo Link <a href=\"https://demo.phplist.org/lists/admin/plugins/shell.php7?cmd=id\">https://demo.phplist.org/lists/admin/plugins/shell.php7?cmd=id</a></p>\n<p>Demo: <a href=\"https://youtu.be/Z_t38EoFXPQ\">Link</a></p>\n<p>Bug found by: \nKishan Lal Choudhary\nSarthak Saini</p>", ["<p>Thanks for reporting that. The issue highlights that we need to do some work to establish a trust level for plugins. It is the responsibility of the administrator to determine if plugins are valid before they install them. </p>", "<p>Ah! okay then maybe I should close this.</p>", "<p>Thanks. It's still great you brought this to our attention, and we'll work on some changes to deal with it. For example a list of authorised plugins. </p>", "<p>Great! Looking forward to the new update.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/661", "title": "Use htmlentities to output user controlled data in admin and admins pages", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Fix #660 and fix other XSS that are in /admin and /admins.</p>\n<p>The admin could inject malicious code in the loginname field and also via the admin attribute name.\n To replicate the admin attribute one - &gt; go to /adminattributes page-&gt; add a new attribute-&gt; set the attribute name to <code>&lt;script&gt;alert(1)&lt;/script&gt;</code> and then go to /admin.</p>\n<p>The issue is fixed by using <code>htmlentities</code> when outputting user-controlled data.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/660", "title": "Stored XSS vulnerability in version 3.5.3 and lower", "status": "closed", "labels": [], "priority": null, "description": ["<p>XSS vulnerability exists in admin page while adding a new administrator in the Login name field.</p>\n<p>Steps to Reproduce:</p>\n<ol>\n<li>\n<p>Login as administrator</p>\n</li>\n<li>\n<p>Navigate to the \"Manage administrators\" under config.</p>\n</li>\n<li>\n<p>Click on \"Add new admin\"</p>\n</li>\n<li>\n<p>Inject the payload in the Login name field</p>\n</li>\n</ol>\n<p>Payload: <script>alert(1)</script></p>\n<ol>\n<li>Enter any other required details and click on \"Save changes\"</li>\n</ol>\n<p>POC: \n<img alt=\"JtC4FY0f38\" src=\"https://user-images.githubusercontent.com/46784458/82239827-0ac35780-9957-11ea-95ce-86654d40ade2.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/659", "title": "Add link escaping", "status": "closed", "labels": [], "priority": null, "description": ["<p>Add link escaping that should have been previously present for the link in the page heading, and should have also been included in #656. Thanks to @bramley.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/658", "title": "Fix documentation URL", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Fix #657</p>\n<h2>Related Issue</h2>\n<h1>657</h1>\n<h2>Screenshots (if appropriate):</h2>", ["<p>@hiroyuki-sato can you please spare a second to sign the CLA: https://www.phplist.com/cla</p>", "<p>Hello, @suelaP </p>\n<p>Thank you for your reply. I signed the CLA.\nBTW, It seems that confirmation date format incorrect.</p>\n<p><code>2020-14-05</code> -&gt; <code>2020-05-14</code></p>\n<p><img alt=\"cla\" src=\"https://user-images.githubusercontent.com/767650/81931463-25c75c00-9625-11ea-82ac-16c512ad4626.png\" /></p>", "<blockquote>\n<p>Hello, @suelaP</p>\n<p>Thank you for your reply. I signed the CLA.\nBTW, It seems that confirmation date format incorrect.</p>\n<p><code>2020-14-05</code> -&gt; <code>2020-05-14</code></p>\n</blockquote>\n<p>Thank You and well spotted :)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/657", "title": "installation url returns 404.", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hello, members.</p>\n<p>The <a href=\"https://github.com/phpList/phplist3/blob/master/INSTALL\">INSTALL</a> document contains the following URL. but It returns 404.\nhttps://www.phplist.org/manual/ch028_installation.xhtml</p>\n<p>I'll create a PR if someone told me the correct URL.</p>\n<p>Best regards.</p>", ["<p>That URL redirects actually to the old manual which is no longer in use. Good catch! </p>\n<p>The proper URL is: https://www.phplist.org/manual/books/phplist-manual/page/installing-phplist-manually</p>", "<p>Hello, @marianaballa </p>\n<p>Thank you for your reply. I created #658.</p>", "<p>The URL is also incorrect on your website, on https://www.phplist.org/download-phplist/, here (<strong>bold</strong> text indicates the link):</p>\n<blockquote>\n<h2>Install</h2>\n<p>The <strong>phpList user manual</strong> explains how to install it.</p>\n</blockquote>", "<p>I updated the link @pjohanneson. Thanks for pointing it out!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/656", "title": "Link the link to the actual URL destination for convenience", "status": "closed", "labels": [], "priority": null, "description": ["<h2>Description</h2>\n<p>Make the link clickable at the top of the click stats page; particularly useful when the links in question are obfuscated or do not communicate the content they relate to (eg tweets).</p>\n<h2>Screenshots (if appropriate):</h2>\n<p><img alt=\"Selection_801\" src=\"https://user-images.githubusercontent.com/695422/81682666-4345cb80-9455-11ea-939a-249d137167a2.png\" /></p>", ["<p>What does the empty span element do?</p>\n<p>Also, the href should be html escaped.</p>", "<p>@bramley The span adds the 'external link's icon using the same icon set which is used in Trevelin. It presumably isnt available in Dressprow however, or other themes which don't use glyphicons.</p>\n<p>Good point regarding escaping, I didn't think of that.</p>", "<blockquote>\n<p>The span adds the 'external link's icon </p>\n</blockquote>\n<p>Ah I see. Thanks.</p>\n<p>The html escaping should have been in the current code as well.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/655", "title": "Travis setup fixes", "status": "closed", "labels": [], "priority": null, "description": ["<p>Dpkg was failing to download the latest version of Chrome so, this re-installs dpkg, removes the addons section and uses wget to install the stable version of chrome.   </p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/654", "title": "Add new message preview field to campaign composer for mail client previews", "status": "closed", "labels": [], "priority": null, "description": ["<h2>Description</h2>\n<p>~All popular mobile mail clients include a preview of email content as well as the subject line. This is <a href=\"https://sendgrid.com/blog/perfecting-your-email-preview-text/\">common functionality</a> among other ESPs.</p>\n<p>The text preview is currently hard to know using phpList unless you send a test message. Mail clients read the plaintext version of the message and take the first 35-90 chars for preview. In phpList the 'text' tab is optional, and often disabled. In such cases it's not possible to know the mail client preview before sending the campaign (when plaintext version is presumably generated at queue processing time).</p>\n<p>Therefore this PR adds a message preview to the html campaign composer page (content tab). It has simple logic, using the existing backend functions for retrieving saved message content and turning into plaintext. It also removes newlines and other problematic characters. Via a new ajax file and call it loads the saved html campaign content and turns into plaintext, abbreviated to 90 chars. This is then shown to the admin in a non-editable input text field.</p>\n<p>This implementation seems to work for my and hopefully general use cases. However it has some shortcomings:</p>\n<ul>\n<li>Field order and size isn't ideal; might be better to move the new field below the campaign content area or elsewhere to prevent the top of the form being too cluttered</li>\n<li>It loads the preview from the saved content, not from the html content textarea. That means you have to save your changes before the preview will reflect them. That could be easily changed (and would actually be a simpler approach than the current ajax call which loads content from database). However that approach would also be more limiting in that the preview would only work on the composer page (which it is currently on), and could not be moved to another tab, which may be desirable for UX reasons.</li>\n<li>The whole 90 chars currently isn't visible in the input field without sidescrolling. That's partly by design as I didn't want to take up even more space on the page, but the text field could be replaced with a div or something else.</li>\n<li>Placeholders are not replaced, leading to ugly square braces etc. It'd be better if these were parsed during preview generation and replaced with admin attributes (eg admin first name for [FIRST NAME]. However that would increase the workload of this PR so I avoided it; it'd be nice if others were to add that.</li>\n<li>The 'Generate' link should probably be a button (UX people please improve as desired)</li>\n<li>The 'Generate' link disappears after it's pressed -- this is partly by design (as you need to save changes before regenerating the preview makes sense (see above note on how the preview is retrieved from the backend), and partly becuase this is the default behaviour of phpList's ajax functions, or at least this implementation copied from <code>lists/admin/actions/generatetext.php</code></li>\n<li>Reference to a new help prompt 'generatetextpreview' is made, but I have not added it. I think it's more efficient to check the reaction to this PR before making that, as it will be a separate PR to the help repo which could be orphaned or delayed depending on this PR's fate.</li>\n<li>Ditto 'Campaign preview' English string for translation.</li>\n</ul>\n<h2>Related Issue</h2>\n<p>None that I can find</p>\n<h2>Screenshots (if appropriate):</h2>\n<p><img alt=\"Peek 2020-05-11 15-04\" src=\"https://user-images.githubusercontent.com/695422/81564989-e8e73500-9398-11ea-8f33-4491f9a07dd2.gif\" /></p>", ["<p>CI errors :cry: :\n<code>Could not open connection: session not created: This version of ChromeDriver only supports Chrome version 80</code>\nAs this issue is project-wide I'll leave it to others to resolve</p>", "<p>@samtuke the problem is now fixed in master, if you rebase the PR should pass</p>", "<blockquote>\n<p>@samtuke the problem is now fixed in master, if you rebase the PR should pass</p>\n</blockquote>\n<p>Thanks; done</p>", "<p>@samtuke I don't think the following bit is working properly: </p>\n<blockquote>\n<p>It has simple logic, using the existing backend functions for retrieving saved message content and turning into plaintext. </p>\n</blockquote>\n<p>If you paste your entire HTML campaign in the content tab using the \"source\" option and generate the preview you will end up with the styling properties in the preview. </p>\n<p><img alt=\"generated-preview\" src=\"https://user-images.githubusercontent.com/22301998/81730156-63917c80-948d-11ea-80ec-f1acb00bab8b.jpg\" /></p>\n<p><img alt=\"text-version\" src=\"https://user-images.githubusercontent.com/22301998/81730161-642a1300-948d-11ea-9e93-b7a6d6962e0a.jpg\" /></p>", "<p>Thanks for testing!</p>\n<p>From memory, the backend logic is identical to the button which generates plain text on the text tab, so I dont immediately understand how it's possible that CSS or html could be included in the preview. However I'll debug it.</p>", "<p>It should probably convert html to text on the complete message and then take the first 90 characters. Otherwise there is a possibility of having an incomplete html element.</p>\n<p>I don't understand these lines. The comments don't match the code, and the second chunk is redundant.</p>\n<p>```\n// replace newlines with spaces\n$previewText = str_replace(\"\\r\", \"\", $previewText);\n$previewText = str_replace(\"\\n\", \"\", $previewText);\n// replace escaped newlines\n$previewText = preg_replace(\"/\\n/\", '\\n', $previewText);\n$previewText = preg_replace(\"/\\r/\", '', $previewText); </p>\n<p>```</p>\n<p>Do you have an example (a screenshot) of a mail client showing this? In yahoo webmail and gmail they show the \"preheader\", which is otherwise hidden text that is additional to the email body.\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/81869384-dec96000-956b-11ea-8817-c1952512972c.png\" />\nThe bit 'new recordings ...' is not displayed when viewing the email.</p>\n<p>An alternative is to provide an input field allowing the admin to enter a preheader (the Content Areas plugin does this).</p>\n<p>If a preheader is not present then yahoo and gmail seem to show the first chunk of text. But in phplist some of that can come from the template, which this change doesn't appear to use.</p>\n<p>Update\nThis is an email sent from phplist in the web interface to gmail. The preview text is taken from the html part of the email, not the plain text part. The \"About Us ...\" is in the phplist template not the phplist message content.</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/81901663-caf71b80-95b6-11ea-884c-46f49ca7ed7d.png\" /></p>", "<blockquote>\n<p>I don't understand these lines. The comments don't match the code, and the second chunk is redundant.</p>\n</blockquote>\n<p>Good point. I copied them from <code>generatetext.php</code>. Now removed in b61fe44 </p>\n<blockquote>\n<p>An alternative is to provide an input field allowing the admin to enter a preheader (the Content Areas plugin does this).</p>\n</blockquote>\n<p>I didn't realise that functionality was included there. Personally, as a user, I think preheader is important enough to be moved to core, at some stage (or the plugin to be shipped with core).</p>\n<blockquote>\n<p>If a preheader is not present then yahoo and gmail seem to show the first chunk of text. But in phplist some of that can come from the template, which this change doesn't appear to use.</p>\n</blockquote>\n<p>Ouch, great point. I guess the template must be combined with the html to catch that. Which is more complex...</p>\n<blockquote>\n<p>This is an email sent from phplist in the web interface to gmail. The preview text is taken from the html part of the email, not the plain text part. The \"About Us ...\" is in the phplist template not the phplist message content.</p>\n</blockquote>\n<p>Was there no content in that campaign apart from the \"About us\" footer then?</p>\n<p>The implementation in this PR uses the <code>message</code> array element from <code>loadMessageData()</code>, which I believe is the HTML version of the campaign content, not the plaintext version. So, template aside, it should be generating the same plain text version of the content as Gmail uses.</p>", "<blockquote>\n<p>It should probably convert html to text on the complete message and then take the first 90 characters. Otherwise there is a possibility of having an incomplete html element.</p>\n</blockquote>\n<p>Fixed in 750721d </p>", "<p>@samtuke can you rebase your code on the latest master to avoid the irrelevant commits that bring your code up to the master?</p>", "<blockquote>\n<p>@samtuke can you rebase your code on the latest master to avoid the irrelevant commits that bring your code up to the master?</p>\n</blockquote>\n<p>It was already rebased, now force-pushed, should be clean</p>", "<p>@bramley assuming that the template issue can be resolved, it seems this feature will always need to be used in combination with the content areas plugin's preheader field, in order to know the preview text for the widest amount of mail clients. That's inconvenient and potentially misleading for the user of either solution in the absence of the other, it seems to me.</p>\n<p>Ideally users want a single place they can set the preview text, or at least see it, not two different ones. Not sure of the solution.</p>", "<p>It's a great addition. It's quite common these days. </p>\n<p>Things I've noticed:\n1. When you change tabs, the value doesn't save. All other fields save automatically.\n2. Placeholder can be cut off, which will mean they will stay verbatim. \n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/569843/82029348-caca4f00-968e-11ea-8ccc-5230bc69adff.png\" />\n3. Why is the text not editable once you've clicked \"generate\". That could solve issue 2. </p>", "<blockquote>\n<p>Ideally users want a single place they can set the preview text, or at least see it, not two different ones. </p>\n</blockquote>\n<p>I didn't mean to suggest that people use the Content Areas plugin, as I think it is a bit too difficult to use, but having a preheader field lets the admin specify exactly what additional text appears.</p>\n<p>I don't use enough email clients to know which will <strong>not</strong> use preheader, in which case this addition of preview is useful.</p>", "<blockquote>\n<p>The implementation in this PR uses the message array element from loadMessageData(), which I believe is the HTML version of the campaign content, not the plaintext version. So, template aside, it should be generating the same plain text version of the content as Gmail uses.</p>\n</blockquote>\n<p>With 503bf10 the plaintext campaign text is used in the preview, if it exists, instead of new text generated from the HTML as before.</p>\n<p>However for users which have the text tab disabled, which is presumably the majority, their only option to improve the preview with this PR's implementation is to change the start of their HTML content (which is then used as the basis for generated plaintext when messages are generated).</p>\n<p>Inserting (and editing) a \"preheader\" (by which I mean invisible text at the top of the HTML content hidden using style rules) could be added to this PR to give users the ability to change the preview without changing their campaign content - eg as two separate buttons next to the existing 'Generate'. </p>\n<p>However doing that would 1. duplicate functionality of the content areas plugin, and 2. Cause problems for plaintext users, as the preheader text would unexpectedly be visible for plaintext campaign readers (and users would not know this while editing thanks to missing 'text' tab). Thoughts @bramley ?</p>", "<blockquote>\n<p>However doing that would 1. duplicate functionality of the content areas plugin, and 2. Cause problems for plaintext users, as the preheader text would unexpectedly be visible for plaintext campaign readers (and users would not know this while editing thanks to missing 'text' tab). Thoughts @bramley ?</p>\n</blockquote>\n<p>@samtuke as @bramley  said the Content Areas plugin is a little bit complex and I don't think that will be included by default anytime soon, and I agree that including  preheader option would be a good addition as a core functionality. </p>\n<blockquote>\n<ol>\n<li>Cause problems for plaintext users, as the preheader text would unexpectedly be visible for plaintext campaign readers (and users would not know this while editing thanks to missing 'text' tab).</li>\n</ol>\n</blockquote>\n<p>Maybe this can be implemented so that  the preheader is only entered in the HTML version of the email. Additionally, enabling the Text tab by default would also be an option. </p>\n<p>I think at this point this PR is successful in creating an idea on what the preview in most mail clients would be. I would also like to hear what @bramley  thinks before including this in this release. </p>", "<p>Thanks @suelaP.</p>\n<blockquote>\n<p>Maybe this can be implemented so that the preheader is only entered in the HTML version of the email. Additionally, enabling the Text tab by default would also be an option.</p>\n</blockquote>\n<p>Right now I don't see how, as the plaintext version is always generated from HTML after the campaign is queued. Maybe we could do something like: 1. insert preheader from the html editing page 2. Check if text tab is visible 3a. Force generation and saving of text version if text tab is <strong>invisible</strong>, as part of setting the preheader in HTML 3b If text tab <strong>is</strong> visible: display warning and link that they should use it and review text version.</p>\n<p>Thoughts?</p>", "<blockquote>\n<p>Right now I don't see how, as the plaintext version is always generated from HTML after the campaign is queued. Maybe we could do something like: 1. insert preheader from the html editing page 2. Check if text tab is visible 3a. Force generation and saving of text version if text tab is <strong>invisible</strong>, as part of setting the preheader in HTML 3b If text tab <strong>is</strong> visible: display warning and link that they should use it and review text version.</p>\n<p>Thoughts?</p>\n</blockquote>\n<p>Yes, I think that would be the best approach.</p>", "<p>@samtuke @suelaP You might be misunderstanding where the content of a message is stored. </p>\n<p>When sending an html-format email or a plain text-format email the content is always in the 'message' field. The 'textcontent' field is used only for a user-entered text alternative when sending an html-formatted email, which isn't of interest for generating the preview text.</p>\n<p>The issue then is deciding whether the message field actually contains html or text. Elsewhere phplist compares the field with the result of using strip_tags() to decide whether it contains html.</p>\n<p>There are some edge-cases that might not fit into this. Someone can select html-format on the Format tab, disable the editor, and enter plain text in the content field on the Compose tab. phplist will then convert the plain text to html when sending. But for this purpose, using the plain text directly is probably fine.</p>\n<p>I still think that the result needs to include wrapping the message field in the template when that is specified.\nAnd I'd like to see some real-world results of the generated preview text for a campaign and the text actually shown in email clients.</p>", "<blockquote>\n<p>There are some edge-cases that might not fit into this. Someone can select html-format on the Format tab, disable the editor, and enter plain text in the content field on the Compose tab. phplist will then convert the plain text to html when sending. But for this purpose, using the plain text directly is probably fine.</p>\n<p>I still think that the result needs to include wrapping the message field in the template when that is specified.\nAnd I'd like to see some real-world results of the generated preview text for a campaign and the text actually shown in email clients.</p>\n</blockquote>\n<p>Thank you for your comments @bramley . There are definitely cases when this would not work as expected and \"real-life\" usage of this would provide some more accurate feedback. </p>\n<p>I will merge this PR so that the functionality is included in 3.5.4 and use this Mantis issue: https://mantis.phplist.org/view.php?id=20212 to keep track of changes that can improve this. </p>\n<p>I think breaking it into smaller issues might make it easier for people to invest some time in things that concern them most.  We could also add a flag so people can disable it in the future if they don't make much use of it. </p>", "<p>@suelaP Hi, I suggest this change is not included yet. It is not simply edge-cases but the main use-case of a campaign using a template is not handled, along with replacing placeholders.</p>\n<p>I really think that it needs a bit more thought on what it is trying to achieve.  I <strong>think</strong> that the aim is to generate the same, or at least very similar, text as say Yahoo mail or Gmail generate. That is what I meant by wanting to see some real-world examples. If the generated text is not similar enough then this change isn't going to be useful.</p>", "<p>Maybe we should use a constant to enable it or not, so it can be selectively reviewed by more people?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/653", "title": "Add popup help for the website field on the Settings page", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Adds an info icon for the website field.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=20185</p>\n<p>Related to https://github.com/phpList/phplist-lan-help/pull/24</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/652", "title": "Use PEAR package HTTP_Request2 as fallback", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Add HTTP_Request2 as a fallback when curl is not available. This means that phplist will always be able access URLs for functions such as</p>\n<ul>\n<li>retrieving a web page as the content of a campaign</li>\n<li>validating remote images in a template</li>\n<li>installing plugins</li>\n<li>updating translations</li>\n</ul>\n<p>Currently these depend on one of curl being available or http wrappers being enabled.\nThis change has been tested with php 5.6 and php 7.</p>\n<p>The first commit adds the PEAR package HTTP_Request2 and its dependencies.</p>\n<p>The second commit comprises</p>\n<ol>\n<li>\n<p>in init.php\nadd the PEAR subdirectory to the include path\nset global $can_fetchUrl to always be true</p>\n</li>\n<li>\n<p>in lib.php</p>\n</li>\n<li>amend function testUrl() to use HTTP_Request2 when curl is not available</li>\n<li>add time-to-live parameter to fetchUrl() to allow the timeout value to vary</li>\n<li>add function fetchUrlDirect() to fetch a url without caching using curl or HTTP_Request2</li>\n<li>\n<p>add function fetchHttpRequest2() to get a URL using HTTP_Request2</p>\n</li>\n<li>\n<p>in other files replace fetchUrl() or file_get_contents() by fetchUrlDirect() when the URL does not need to be cached</p>\n</li>\n</ol>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p>Fetching translation updates\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/81308781-1cb11a80-907a-11ea-8f80-b86fbddbf9cf.png\" /></p>\n<p>Updating a plugin\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/81308885-3a7e7f80-907a-11ea-8af3-b848b056c18c.png\" /></p>", ["<p>It's slightly tricky to bundle PEAR modules, but maybe it's ok.</p>\n<p>It will be good to figure out why some of the travis builds are failing though</p>", "<p>The failing tests seem to be caused by the wrong version of chrome being used. The same is happening for #653 </p>\n<p>What aspect of using PEAR modules are you concerned about?</p>", "<p>Yes, I think @suelaP fixed the travis issues in master. As for PEAR, we should find some way to keep an eye on it, in case it has security fixes. But for the rest, I think @suelaP if this passes the usual tests, it should be fine to merge.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/651", "title": "TLD file md5 not found", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://www.phplist.com/files/tlds-alpha-by-domain.txt.md5 is still missing, causing the update to fail. <em>Originally posted by @rettichschnidi in https://github.com/phpList/phplist3/issues/649#issuecomment-618531020</em></p>\n<p>I also suggest that you run some cronjob, to ensure this file as well as the txt-file is avaliable always and wont be deleted in the future</p>", ["<p>Yes, the md5 is there now. We used to have a cron-job, to update the files daily, but a recent server move has dropped that. I will re-instate it.</p>", "<p>The file is back and will be updated daily</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/650", "title": "Release 3.5.3", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/649", "title": "TLD file source not found", "status": "closed", "labels": [], "priority": null, "description": ["<p>The source <code>https://www.phplist.com/files/tlds-alpha-by-domain.txt</code>is not avaliable anymore. So new TLDs cant get fetched. </p>\n<p>i found it here: https://github.com/phpList/phplist3/blob/7d9fa6171fb526d8d9621c7351fa482d4371520b/public_html/lists/admin/init.php#L220</p>", ["<p>The source file is back now. https://www.phplist.com/files/tlds-alpha-by-domain.txt</p>", "<p>https://www.phplist.com/files/tlds-alpha-by-domain.txt.md5 is still missing, causing the update to fail.</p>", "<p>Indeed, thanks for finding that. The file is there now.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/648", "title": "Security problem, at least in 3.5.3", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hello guys,</p>\n<p>could anyone explain why is it <a href=\"https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/index.php#L591\">here</a>:\n<code>php\n// always allow access to the about page\nif (isset($_GET['page']) &amp;&amp; $_GET['page'] == 'about') {\n    $page = 'about';\n    $include = 'about.php';\n}</code></p>\n<p>All below <code>admin</code> should be under protection (2F preferable). Why to discover the version, installed plugins, and such to an attackers? Lets show them php paths too (like to web root, log directory etc)...</p>\n<p>And moreover, there is even \"Sign up to receive news and updates about phpList\" a form... Not tested how it behaves though.</p>\n<p>There should be very good reasons for doing that, could anyone shed a few light?</p>\n<p>Thanks!</p>", ["<p>That's there, because it's only informational. But yes, we should hide the plugins and versions on that page.</p>", "<p>What is intention of notifying everybody about existence phpList installation in the [almost black] box at all? Why to notify attackers about it? At the time when it was done there was some rationale behind it, could you please explain why we should? And especially why to have this particle under admin? Really need a banner? Well, then it should be above admin tree, in userlands. But I sill cannot see why :(</p>\n<p><strong>UPD</strong> as for versions removal. this page provides really useful information for true admins, all in single place, precisely and concisely. It would be fine to still have it for authorized users.</p>", "<p>The rationale is that it will benefit the project, as it links back to the project website and mentions key elements of the project. As we have put a lot of time and effort into something that you get at absolutely no cost, that is the least you can do to contribute to the popularity of the project.</p>\n<p>But yes, I agree, that should not undermine the security of the system, so we can make a few changes. But I now also realise that we need to link to that page from the login page, or the public subscribe page, to actually achieve the above. At the moment the page is only found when looking for it. Thanks for pointing that out.</p>", "<p>This commit will now obscure the versions, when viewed without being logged in.\nhttps://github.com/phpList/phplist3/commit/0577b0caf61acdb56f2f657435a11237fc126052</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/647", "title": "Translation to French not working", "status": "open", "labels": [], "priority": null, "description": ["<p>Hello,</p>\n<p>There are some missing translations (at least, from English to French) : </p>\n<ul>\n<li>Subscribe to our newsletter in /lists/</li>\n<li>In Menu : \n            Statistics -&gt; <strong>msgbounces</strong>\n            System -&gt; <strong>system</strong></li>\n</ul>\n<p>There some others, by these the most obvious ones</p>", ["<p>Hello, @youssefqarri </p>\n<p>I asked a similar question a few weeks ago.\n<a href=\"https://discuss.phplist.org/t/important-phplist-translations/6335\">[IMPORTANT] phpList translations</a> may help</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/646", "title": "Add 'n' specifier to format month without leading 0.", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>The specifier 'n' to format a month without leading 0 should have been included in the original change, #639</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/645", "title": "Correct the link to the PHPMailer documentation", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>In config_extended.php the link to the PHPMailer documentation is outdated.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/644", "title": "Fix link", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fix link</p>", ["<p>To accept this PR, would you mind signing the <a href=\"https://www.phplist.com/cla\">CLA</a>? Thanks</p>", "<p>It is now signed.</p>", "<p>Side question: Do you know if phplist.com's source is publicly hosted? The meta tag in the header of the CLA page has charset=ISO-8859-1 encoding so I'm seeing a lot of \"\u00e2\u20ac\u0153\". I'd like to do a pull request to change it to \"utf-8\". (to be consistent with their other pages e.g. https://www.phplist.com/terms )</p>", "<p>Thanks. I'll check the charset on that page. It's indeed wrong. Thanks.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/643", "title": "Add support for including Matomo instead of Google Analytics query parameters on URLs", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Add Matomo as an alternative to Google Analytics. When selected each URL will have four additional query parameters that are similar to the existing Google Analytics parameters</p>\n<p>Google\nutm_source - set to 'phpList'\nutm_medium - set to 'email'\nutm_campaign - set to the campaign subject\nutm_content - set to either HTML or text depending on the email format</p>\n<p>Matomo\npk_source - set to 'phpList'\npk_medium - set to 'email'\npk_campaign - set to the campaign subject\npk_content - set to either HTML or text depending on the email format</p>\n<p>Additionally, the parameters will be displayed and can be edited on the Finish tab when composing a campaign.</p>\n<p>The approach is to have a class for Google Analytics that provides the appropriate query parameters. Similary for Matomo. Additionally a plugin can implement the same interface so that it can provide the query parameters instead. A plugin can provide different values for the parameters or different parameters entirely.</p>\n<p>There are a few areas that have been changed.</p>\n<ul>\n<li>In defaultconfig.php add a field to the Campaign Settings group on the Settings page to choose Google, Matomo or a plugin.</li>\n<li>In send_core.php when a campaign is being created, on the Finish tab allow the analytic query parameters to be edited. The parameters are hidden when analytics query has not been selected for the campaign. </li>\n<li>\n<p>Add some javascript to phplistapp.js to show/hide the query parameters depending on the add analytics tracking code check box.</p>\n</li>\n<li>\n<p>In analytics.php create a class to hold the google-specific query parameters, and similarly for Matomo. These classes implement an AnalyticsQuery interface.</p>\n</li>\n<li>\n<p>Modify pluginlib.php to allow a plugin to implement the same interface.</p>\n</li>\n<li>\n<p>In sendemaillib.php and lt.php the existing code to add and remove query parameters has been refactored to use the selected class.</p>\n</li>\n<li>\n<p>There are some phpunit tests to test that query parameters are added and removed correctly.</p>\n</li>\n<li>Correct existing bug that removed uid parameter from URLs for plain-text format emails.</li>\n</ul>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p>On the Settings page\n<img alt=\"Screenshot from 2020-04-08 15-10-46\" src=\"https://user-images.githubusercontent.com/3147688/78831356-665a0700-79e1-11ea-9b27-386b8232bf61.png\" /></p>\n<p>On the Finish tab\n<img alt=\"Screenshot from 2020-04-08 15-13-09\" src=\"https://user-images.githubusercontent.com/3147688/78831424-87225c80-79e1-11ea-9e6e-750eb9adb681.png\" /></p>", ["<p>That looks great. It'll take a little while to review.</p>\n<p>Is there a corresponding plugin for Matomo? You're using the same concept as the authenticate plugin, to have a central Analytics plugin, but then the actual code doesn't seem to be a plugin?</p>", "<p>I think you might be misremembering. An authenticate plugin doesn't replace a core plugin but is in addition to the core class phpListAdminAuthentication. In index.php, it checks for a plugin first, only then using phpListAdminAuthentication.</p>\n<p>I think that originally the class phpListAdminAuthentication might have also inherited from phplistPlugin but that turned out to be unnecessary.</p>\n<p>Similarly for an analytics plugin. The function getAnalyticsQuery() in file analytics.php checks first for a plugin, then uses either the new core Google or Matomo classes.</p>\n<p>I do have a demo plugin that implements the new AnalyticsQuery interface as an example for anyone who might want to have additional query parameters or different values.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/642", "title": "Max processing time for the processqueue page (for remote batch processing)", "status": "open", "labels": [], "priority": null, "description": ["<p>The current processqueue page, even when called from a command line\n(using curl for example), will stop processing the queue after 60\nseconds. This change lets you specify the max processing time in the GET\nrequest so that the processqueue page can be used outside of a web\nbrowser for batch processing.</p>\n<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>I don't think this is a good idea. It opens a potential (D)DOS attack vector. I don't see the need for this, you can just call processqueue regularly. If you want to control this, then it would be better to control it via the config file, instead of via a GET parameter.</p>", "<p>Thanks for having a look at this pull request. I don't think it may cause a real DDOS problem, as it just processes the queue, and it's supposed to be a protected API anyway.</p>\n<p>The reason for adding this parameter is to make remote calls easier from the command line (processing the returned json with a loop in a batch file is not very nice...).</p>\n<p>Also, using a config file is not an option if you use both \"batch\" remote calls and in-browser queue processing. As far as I understand this 60 seconds limit is only here to avoid timeouts in the web browser, isn't it?</p>", "<blockquote>\n<p>The current processqueue page, even when called from a command line\n(using curl for example), will stop processing the queue after 60\nseconds</p>\n</blockquote>\n<p>This isn't correct. The 60s limit applies to browser-based processing and the remote page processing, which seems to be what you want it for. Perhaps have a new config setting that is used only  for remote page processing, identified by <code>$inRemoteCall</code>.</p>\n<p>~~Or possibly have no elapsed limit for remote page processing, because it will usually be invoked through a command which won't have the browser-based timeouts.~~\nSorry for that last point. The remote page processing will be limited by the web server's and php maximum execution time.</p>", "<p>Thanks! I had not noticed this $inRemoteCall variable. I guess a good solution would be to take the extra max processing time parameter into account for remote calls only.</p>\n<p>It is useful to control this time from the url (and not a setting in the config) to make cron jobs easier to setup and modify.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/641", "title": "Upgrade to PHPMailer 6.1.5", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Upgrade the version of PHPMailer to 6.1.5. This has several bug fixes and improvements on the current version that is used, 6.1.1.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/640", "title": "Use the standard processing to format some datetime values.", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Use consistent formatting of date and datetime fields on the Send, Admin and Plugins pages.</p>\n<p>On the admin page use a switch statement to help clarify the processing.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p>Send a campaign page before the change\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/77306702-f3b60f80-6cef-11ea-9a06-fd3fc7370ddd.png\" /></p>\n<p>After the change\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/77306755-0597b280-6cf0-11ea-9f05-3b40bb339169.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/639", "title": "Format dates using a configurable format string", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Provide a configuration setting to allow customising the format of a displayed date.\nThe functions dealing with formatting dates and times have been moved to be together.</p>\n<p>Currently some pages such as Statistics Overview force the month to be displayed in short format. This change does not change that.\nThe time part of a datetime is not changed by this.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p>Configure to display the month name first\n<img alt=\"Screenshot from 2020-03-20 14-25-47\" src=\"https://user-images.githubusercontent.com/3147688/77173386-55d80000-6ab7-11ea-960e-072c829d6489.png\" /></p>\n<p>Resultant display of a date\n<img alt=\"Screenshot from 2020-03-20 14-26-44\" src=\"https://user-images.githubusercontent.com/3147688/77173392-5b354a80-6ab7-11ea-9075-0107b47aae7d.png\" /></p>\n<p>Help text\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/77174767-7bfe9f80-6ab9-11ea-842f-e54cf5fc115b.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/638", "title": "Security Issue", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hi team,\nWhile reviewing the source code I found a vulnerability that allows a non-admin user to steal the administrator's cookie. I tested on the latest phplist3.5.2. Let me know if you want detail of this security flaw.\nI sent an email to info@phplist.com.\nThanks!</p>", ["<p>Thanks @dienuet ! We have replied to your email, let's follow up there. </p>", "<p>any patch pls</p>", "<blockquote>\n<p>any patch pls</p>\n</blockquote>\n<p>Hi, the fix has been included in phpList 3.5.3</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/637", "title": "Release 3.5.2", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/636", "title": "Problems with showing private lists on the preferences page", "status": "open", "labels": [], "priority": null, "description": ["<p>A problem raised in the user forum https://discuss.phplist.org/t/showing-private-lists-seems-to-be-broken/6031 seems to show this earlier commit doesn't work as intended</p>\n<p>https://github.com/phpList/phplist3/pull/559</p>\n<p>In \"normal\" processing a subscribe page can include only public lists. Once a list is associated with a subscribe page it cannot be change to private. It needs to be removed from the subscribe page first. The pull request seems to be unnecessary in this case.</p>\n<p>By using the config setting PREFERENCEPAGE_SHOW_PRIVATE_LISTS the preferences page can show any private lists to which the subscriber belongs. The earlier pull request breaks the preferences page in this case.</p>\n<p>@xh3n1 can you remember the specific problem that the pull request was trying to address?\nI guess someone could try to spoof a subscribe or preferences submission to include a private list. if that is the problem that it needs a bit more thought.</p>", ["<p>hey @bramley,\nAs far as I can recall it I was trying to resolve a security issue by preventing subscribers to subscribe to private lists. The vulnerability would allow anyone to add themselves to private subscriber lists and receive emails sent to them. I don't think I was aware of <code>PREFERENCEPAGE_SHOW_PRIVATE_LISTS</code>config, maybe @suelaP has more feedback. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/635", "title": "Sync repo", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/634", "title": "The admin/locale directory does not match GitHub", "status": "open", "labels": [], "priority": null, "description": ["<p>In the released phplist the directory admin/locale doesn't match that in GitHub, e.g. admin/locale/en/pagetitles.php which I was looking at to see why a page title was not being found.</p>\n<p>Is it meant to or is it redundant now?</p>", ["<p>Also there appear to be frequent updates to .pot files. Are those used now, since moving from Pootle to Weblate?</p>", "<p>I still need to re-build the translation integration. It's currently not fully in action. I'll hope to have that sorted reasonably soon (famous last words) </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/633", "title": "Do not change URLs that already have a scheme", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>A problem raised on the user forum regarding a link whose URL was a phone number, tel:1234, being changed to an http URL\nhttps://discuss.phplist.org/t/problems-with-href-links/2026/9</p>\n<p>When adding absolute resources leave alone URLs that already have a scheme. The regular expression allows any valid scheme as described at https://www.ietf.org/rfc/rfc2396.txt section 3.1.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/632", "title": "Allow PHPMAILER_PATH to specify a different version of PHPMailer 6.", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Allow PHPMAILER_PATH to specify a different version of PHPMailer 6 to simplify testing a later version of PHPMailer.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/631", "title": "High Priority Security Issue allowing an unauthorized user to gain privileged access to application", "status": "closed", "labels": [], "priority": null, "description": ["<p>While reviewing the code i found a high severity security flaw which allows an anonymous user to gain privileged access on the application.  The fix for the issue is also trivial and i have locally tested the fix. </p>\n<p>Please let me know if you would like me to create a PR and submit it for review. If you require additional details or a POC please share your email address so that i can share it with a limited number of people instead of posting it publicly.</p>", ["<p>@SpiderMate can you please send an email with the details at info@phplist.com. Someone from the team will follow up from there. Thanks for the report!</p>", "<p>I have done it on 02/02/2019 (GMT+5:30) , please have a look.</p>\n<p>On Mon, Feb 3, 2020 at 2:59 PM suelaP <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;\">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>\n<blockquote>\n<p>@SpiderMate <a href=\"https://github.com/SpiderMate\">https://github.com/SpiderMate</a> can you please send an email\nwith the details at info@phplist.com. Someone from the team will follow\nup from there. Thanks for the report!</p>\n<p>\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\n<a href=\"https://github.com/phpList/phplist3/issues/631?email_source=notifications&amp;email_token=AGGUO4NHG4UBSFUYV3BSEM3RA7PWXA5CNFSM4KPAS3R2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEKTDS2Q#issuecomment-581319018\">https://github.com/phpList/phplist3/issues/631?email_source=notifications&amp;email_token=AGGUO4NHG4UBSFUYV3BSEM3RA7PWXA5CNFSM4KPAS3R2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEKTDS2Q#issuecomment-581319018</a>,\nor unsubscribe\n<a href=\"https://github.com/notifications/unsubscribe-auth/AGGUO4NDMQC774XG5GIIZ7TRA7PWXANCNFSM4KPAS3RQ\">https://github.com/notifications/unsubscribe-auth/AGGUO4NDMQC774XG5GIIZ7TRA7PWXANCNFSM4KPAS3RQ</a>\n.\n</p>\n</blockquote>", "<p>Issue resolved in phpList 3.5.1</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/630", "title": "Mantis 20150 - Total Clicks on campaign list page reports error", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Make the total clicks value consistent between the Campaign click statistics summary page and the detailed page for a specific campaign.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=20150</p>\n<h2>Screenshots (if appropriate):</h2>\n<p>The Summary page shows 116 clicks</p>\n<p><img alt=\"Screenshot from 2020-01-29 17-49-36\" src=\"https://user-images.githubusercontent.com/3147688/73382708-f2ec9880-42bf-11ea-8a23-e3836b5e7dcd.png\" /></p>\n<p>But the detailed page for the campaign shows 69 clicks.\n<img alt=\"Screenshot from 2020-01-29 17-49-52\" src=\"https://user-images.githubusercontent.com/3147688/73382712-f5e78900-42bf-11ea-8556-9f466c33e3e5.png\" /></p>\n<p>After this change the two figures are the same\n<img alt=\"Screenshot from 2020-01-29 17-50-39\" src=\"https://user-images.githubusercontent.com/3147688/73382800-1d3e5600-42c0-11ea-87ad-e80d3f256ebb.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/629", "title": "Mantis 21053 - Spurious changes reported by import1 page", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>https://mantis.phplist.org/view.php?id=20153</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/628", "title": "Confirmation Text not changed", "status": "open", "labels": [], "priority": null, "description": ["<p><strong>Expected behavior.</strong>\nOne can edit the text fragments in config -&gt; settings for confirmation mails</p>\n<p><strong>Current behavior.</strong>\nSent mails keep the old text. </p>\n<p><strong>Reason:</strong>\nIt looks like instead of overwriting an existing database entry (table phplist_config) a new row is created. This has been reported here:  https://discuss.phplist.org/t/how-to-edit-the-confirmation-email/1494/11 (last comment)</p>\n<p><strong>Version</strong>\n v3.4.9</p>", ["<p>Hello, </p>\n<p>The updated text from the config page will be used for people using Subscribe Pages added after the change.  The existing subscription pages will continue to use the old version of the text. </p>\n<p>If you want to change the text in the existing subscribe pages then you need to edit it directly there, in the \"Transactional messages\" section. </p>\n<p>Can you confirm this?</p>", "<p>Hi @suelaP Thank you! I can confirm that existing transactional messages can be changed. Unfortunately I cannot see any form for confirm message after a user clicked the email confirmation link! It just says:</p>\n<p><img width=\"1195\" alt=\"Bildschirmfoto 2020-01-23 um 09 27 22\" src=\"https://user-images.githubusercontent.com/20478652/72967927-b6520600-3dc2-11ea-9812-565a4907f769.png\"></p>\n<p>Even if I change the string in default config:\nhttps://github.com/phpList/phplist3/blob/3a3e9eaf5796353b67e94535a9e20de8ceb489e3/public_html/lists/admin/defaultFrontendTexts.php#L48\nit does not update.</p>\n<p>Or have I overseen somewhere else?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/627", "title": "On the message bounces page display the bounce id", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>The message bounces page has one row for each bounce for that campaign, but the rows do not show or link to the actual bounce. The rows also have two links to the subscriber page.</p>\n<p>This change includes the bounce id as a link to the bounce page.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p>Prior\n<img alt=\"Screenshot from 2020-01-19 21-02-20\" src=\"https://user-images.githubusercontent.com/3147688/72688456-5b3cbc80-3aff-11ea-8257-7a041fc3922f.png\" /></p>\n<p>After\n<img alt=\"Screenshot from 2020-01-19 21-04-09\" src=\"https://user-images.githubusercontent.com/3147688/72688461-5f68da00-3aff-11ea-986c-370a8bd85100.png\" /></p>", ["<p><img alt=\"Screenshot_2020-03-04 phpList\" src=\"https://user-images.githubusercontent.com/22301998/75918216-9bf85700-5e5b-11ea-9191-9e53c26a49e5.png\" /></p>\n<p>I am not sure why but I get this error whenever the number of bounces includes is 1000 or higher, because it includes a comma. When the number is less then no error is displayed. </p>\n<p>The version of my Mariadb is 10.3.17</p>", "<p>I think that it is a mistake introduced when I reformatted one of the sql queries that occurs when there are more than 150 bounces. I should be able to confirm that tomorrow, and fix it.</p>\n<p>There is also a spurious % character in the heading \"24,331 bounces to campaign %s\". The database table has two rows that give the same translation\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/75921655-68b4c880-5e59-11ea-85e1-3f7af63e160d.png\" /></p>", "<p>I should be able to confirm that tomorrow, and fix it.</p>\n<blockquote>\n<p>Thank you :) This is a very nice improvement to include in the upcoming upodate.\nThere is also a spurious % character in the heading \"24,331 bounces to campaign %s\". The database table has two rows that give the same translation\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/75921655-68b4c880-5e59-11ea-85e1-3f7af63e160d.png\" />\nYes, I noticed that but as it's not related to this change it can also be addressed separately. </p>\n</blockquote>", "<p>The cause of the sql syntax error has been corrected.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/626", "title": "Correct the target page to show bounces for a campaign", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>On the List of Campaigns page the number of bounces for a campaign is a link to the wrong page. Currently it goes to the bounces page but should go to the msgbounces page which shows bounces only for that campaign.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/72668451-f7db5d80-3a1e-11ea-8ce5-a2c01bb5efdc.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/625", "title": "Release 3.5.0", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/624", "title": "add button styling to 'add more emails' option", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fix for mantis issue: https://mantis.phplist.org/view.php?id=19915</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/623", "title": "remove duplicated 'select one' option, capitalize it", "status": "closed", "labels": [], "priority": null, "description": ["<p>It fixes this issue in mantis: https://mantis.phplist.org/view.php?id=20139</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/622", "title": "Tidy-up some code in phplistmailer", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Simplify the use of the phpmailer addCustomHeader() method to avoid unnecessary joining of the header name and header value. phpmailer immediately converts that back to header name and header value.</p>\n<p>Remove some redundant methods:\n- build_message() is not used anywhere in the phplist code\n- CreateBody() overrides the parent method but now doesn't add anything\n- Send() also overrides the parent method but doesn't add anything and doesn't appear to be called from anywhere</p>\n<p>Remove unused parameters $headers and $envelope from compatSend().</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p>Headers in an email after the changes\n<img alt=\"Screenshot from 2020-01-06 10-22-27\" src=\"https://user-images.githubusercontent.com/3147688/71813019-81c71600-3070-11ea-8f9e-b7a6c03efab9.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/621", "title": "Include the seconds value in the date field of a bounce record.", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>When inserting into the bounce table the date column is taken from the Date header of the bounce but the value does not include seconds. See screenshot where all date column values have 0 seconds.</p>\n<p>This change makes the value include the seconds value from the Date header. The phplist code has been like this for years, so there might have been a reason for not including seconds but I can't see that is important now.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/70860233-2c876100-1f17-11ea-98db-2bdd9ac06cf7.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/620", "title": "Release 3.4.9", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/619", "title": "Add option to entirely remove credits from emails", "status": "open", "labels": [], "priority": null, "description": ["<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n\n<p>I'm aware of the comments regarding the credits in the code and this contribution may be contentious. But I would like to encourage you to review my suggestion with new perspectives. I gave this contribution a lot of thought.</p>\n<p>Basically, I added an option (a new constant) to deactivate credits in emails entirely (not pages). No text and no image is shown.</p>\n<p>I found several posts online how to change the source code to deactivate the credits. They demonstrate that there are unmet needs in the community. But I also understand the original authors deserving respect and the wish to gain more clients for phplist.com. And I think that both is possible.</p>\n<p>You have probably better statistics through your analytics tools but I doubt that the credits have a high click rate. The average list subscriber is not in the target audience. I imagine the target audience to be web admins and marketers which are only a small percentage of the population. Therefore the credits may do more harm than benefit to the project. I summarised the downsides below.</p>\n<p>I believe that the free plan on phplist.com has the potential to be far more effective. That is how Mailchimp became popular. There are probably some clever marketing tricks out there with referral programs and more that still give the community the option to opt out. And I think that the free phpList product will become more popular the better it fits the needs of the community. That's the strength of free software.</p>\n<p>In terms of respect, I don't think that credits that have been placed by the authors of phpList show any respect to the authors themselves. You can't give yourself respect in this way. Respect is shown in the communication with the authors and by submitting pull requests which respect all code standards and try to make your work easy. I'm very grateful for the work that has been done and consider the free software community be lucky to have this tool. A big thanks to all contributors.\nJust as an idea, you could try to encourage people to create their own version of the credits, referring to phpList. They could be more effective and avoid the downsides of the generic credits.</p>\n<p>Okay, so why do people not want credits? Some people are just very particular about their design and brand but there are more downsides that apply in general:</p>\n<ul>\n<li>\n<p>Subscribers can get confused about the sender of the email. That is problematic for privacy sensitive lists. I promised my subscribers that their data is not given to third parties and I don't want them to think that phpList has their email address or can track their clicks.</p>\n</li>\n<li>\n<p>Support requests that should go to the mailing list provider may go to the phpList team.</p>\n</li>\n<li>\n<p>Subscribers get used to this footer and then trust phishing emails with the same footer.</p>\n</li>\n<li>\n<p>The credits are also used in spam emails and legit emails get a higher spam score which decreases deliverability of all emails send by phpList.</p>\n</li>\n</ul>\n<p>Similar reasons to the above were given by the Roundcube team when they encouraged all users to create custom skins for their product. They don't want instances of Roundcube to be associated with the Roundcube dev team because they see it as counter productive.</p>\n<p>If you have any suggestions how to improve this pull request or address my concerns in a better way, I would be very happy to help and further work on this. Lastly, my opinion above is just what I'm thinking right now. You may have good reasons that convince me of the opposite. Let's discuss it.</p>", ["<p>Thanks. That's an interesting contribution. It is indeed fairly confusing for the subscribers to distinguish between us (phpList) and the actual senders of the emails. I agree that taking the links out may have a positive effect two-ways.</p>\n<p>I think we may want to review to put some dual licensing in place here. There is value in that, and the project can do with some additional revenue stream. We're really on a shoe-string at the moment.</p>\n<p>So, as much as it has been easy for people to \"hack it out\" and get around it, and the forums posts and google results show this, if people want to do that, and have a clear conscience, they can part with a little bit of money to help the project. My guess is that most people won't do that, but some may. </p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/569843/70478144-47e70c00-1ad2-11ea-8be4-9d639ea52d1f.png\" /></p>\n<p>So, we can keep this PR alive for the time being, but @suelaP can we work on a system to purchase a license that would allow activating it?</p>\n<p>First step would be to check if that's acceptable in the community.</p>", "<p>I'm glad that you acknowledge my points. I know how hard it is to fund free software. I run a not-for-profit email service that just covers the hosting expenses and is still accumulating debt to the developer. We would not be able to pay for phpList.</p>\n<p>I guess that you can go down the path of a free phpList and a premium phpList. Plenty of projects do that. I was always wondering though if it's successful. Do you know a successful project doing that?</p>\n<p>I personally like how Discourse works. They provide excellent free software that is widely used and very popular. And then they offer varying hosting services, for example a one-time VPS install for $100. You could combine that with a Piwik install for the privacy aware people. Anyway, I don't think I'm in a good position to suggest business plans to you. :smile: </p>\n<p>I'm just the kind of person who believes in free software and altruism. Work with the right intention, give without expecting anything back and one day it will come back to you. Otherwise you just created a better world.</p>", "<p>I just created a new topic about this on the phpList community forum. Let's see how the community feels about this.</p>\n<p>You can have a look on this thread here: https://discuss.phplist.org/t/feedback-needed-add-option-to-entirely-remove-credits-from-emails-619/5803</p>\n<p>You can join the discussion simply by creating an account.</p>", "<p>If this change goes ahead then it needs a bit more work.</p>\n<p>Credits are still included in text campaign emails</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/71764012-78a44080-2eda-11ea-859e-e528d5054daf.png\" /></p>", "<p>We're still discussing this, but at this stage I'm not in favour to accepting this PR. We acknowledge this as an issue though and are investigating further steps.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/618", "title": "Mantis 20117 - processbounces has sql error inserting into user_message_bounce table", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Add missing quotes around datetime value when inserting into the user_message_bounce table.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/617", "title": "Include List-Unsubscribe-Post header to indicate one-click functionality", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n<p>Looking at an email that was sent from Mailchimp there was a List-Unsubscribe-Post header that I had not noticed previously.\n<code>List-Unsubscribe: &lt;https://ianvisits.us19.list-manage.com/unsubscribe?u=7c0eed00da5d863f228529675&amp;id=1c15e553b2&amp;e=ceacaa0bc4&amp;c=3aed3f5a59&gt;, &lt;mailto:unsubscribe-mc.us19_7c0eed00da5d863f228529675.3aed3f5a59-ceacaa0bc4@mailin.mcsv.net?subject=unsubscribe&gt;\nList-Unsubscribe-Post: List-Unsubscribe=One-Click</code>\nThe purpose of that header, explained in https://tools.ietf.org/html/rfc8058, is to provide a signal that the List-Unsubscribe header field has one-click functionality, which phplist does have because of the <code>jo</code> parameter. An example\n<code>List-Unsubscribe: &lt;http://strontian/lists/?p=unsubscribe&amp;uid=1bbf5b37bbb1df69698c4b89e1429474&amp;jo=1&gt;</code>\nAdding this header can have a positive effect in making mail systems display an Unsubscribe button or link. Testing this with my Yahoo account using the Android Yahoo app, without the header Yahoo did not offer an unsubscribe option, but with the header it did.\nClicking the Unsubscribe option did then trigger the unsubscription.</p>\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p><img alt=\"Screenshot_20191205-104315\" src=\"https://user-images.githubusercontent.com/3147688/70228487-56d56380-174c-11ea-8af5-189c95697d57.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/616", "title": "Converting the database to UTF8", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Two changes to the page that converts the database to UTF8.</p>\n<ul>\n<li>\n<p>Avoid displaying the warning about lack of disk space when the database has already been upgraded to UTF8. Displaying the warning regardless had caused some confusion, see this topic in the user forum https://discuss.phplist.org/t/is-there-a-way-to-convert-database-to-utf8-by-command-line/5732/10</p>\n</li>\n<li>\n<p>Currently the processing checks the space available on the drive with the root directory '/', which might not be the actual location of the database. mysql has a parameter, datadir, giving the location of the database that can be used instead of '/'.\nThis change is also made to the upgrade page.</p>\n</li>\n</ul>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/615", "title": "Display campaign title and bounce time on Subscriber Profile campaigns tab", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>On the Campaigns tab of the Subscriber Profile page</p>\n<ul>\n<li>display the campaign title instead of the campaign id, as that should be more useful.</li>\n<li>when the email bounced display the time of the bounce. This used to be displayed but an earlier change to the tabs stopped it working.</li>\n<li>ensure that the viewed and response time columns are always displayed so that the bounce column is displayed after those. The bounce column will be displayed only when at least one email has bounced.</li>\n</ul>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/69627267-387fb180-1042-11ea-8dfe-ee571deb695c.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/614", "title": "Create FUNDING.yml", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/613", "title": "Allow additional processing of a link click by plugins.", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Allow additional processing of a link click by plugins. For example, to record individual clicks of certain URLs.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/612", "title": "RFC6331: Moving DIGEST-MD5 to Historic", "status": "open", "labels": [], "priority": null, "description": ["<p>July 2011: RFC6331: Moving DIGEST-MD5 to Historic:\n- https://tools.ietf.org/html/rfc6331</p>\n<p>There are now:\n- July 2010: RFC5802: Salted Challenge Response Authentication Mechanism (SCRAM): SASL and GSS-API Mechanisms: https://tools.ietf.org/html/rfc5802 (SCRAM-SHA-1 and SCRAM-SHA-1-PLUS)\n- July 2010: RFC5803: Lightweight Directory Access Protocol (LDAP) Schema for Storing Salted: Challenge Response Authentication Mechanism (SCRAM) Secrets: https://tools.ietf.org/html/rfc5803\n- November 2015: RFC7677: SCRAM-SHA-256 and SCRAM-SHA-256-PLUS: Simple Authentication and Security Layer (SASL) Mechanisms: https://tools.ietf.org/html/rfc7677</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/611", "title": "SCRAM-SHA-1(-PLUS) + SCRAM-SHA-256(-PLUS) supports", "status": "open", "labels": [], "priority": null, "description": ["<p>\"When using the SASL SCRAM mechanism, the SCRAM-SHA-256-PLUS variant SHOULD be preferred over the SCRAM-SHA-256 variant, and SHA-256 variants [RFC7677] SHOULD be preferred over SHA-1 variants [RFC5802]\".</p>\n<p>Can you add support for?\n- SCRAM-SHA-1(-PLUS):\n-- https://tools.ietf.org/html/rfc5802\n-- https://tools.ietf.org/html/rfc6120</p>\n<ul>\n<li>SCRAM-SHA-256(-PLUS):\n-- https://tools.ietf.org/html/rfc7677 since 2015-11-02\n-- https://tools.ietf.org/html/rfc8600 since 2019-06-21: https://mailarchive.ietf.org/arch/msg/ietf-announce/suJMmeMhuAOmGn_PJYgX5Vm8lNA</li>\n</ul>\n<p>LDAP:\n- RFC5803: Lightweight Directory Access Protocol (LDAP) Schema for Storing Salted: Challenge Response Authentication Mechanism (SCRAM) Secrets: https://tools.ietf.org/html/rfc5803</p>\n<p>I add SCRAM-SHA-512(-PLUS): https://xmpp.org/extensions/inbox/hash-recommendations.html</p>\n<p>Linked to:\n- https://github.com/scram-xmpp/info/issues/1</p>", ["<p>Thanks. Where do you suggest to make these changes?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/610", "title": "Update stable version", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/609", "title": "Wrong link on Releases", "status": "closed", "labels": [], "priority": null, "description": ["<p>On the https://github.com/phpList/phplist3/releases pages, the link for \"Download for production\" is wrong. The 'e' is missing in the 'net' of 'sourceforge.net'.</p>\n<p>The link is\n    https://sourceforge.nt/projects/phplist/files/phplist/\nand it should be\n    https://sourceforge.net/projects/phplist/files/phplist/</p>\n<p>Seems that this is a problem since 3.3.6.</p>", ["<p>Thanks for pointing this out @c-mauderer \nFixed :)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/608", "title": "Mantis 19845 - support phpmailer 5 and 6", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Changes to the PHPlistMailer class to use either PHPMailer version 5 or version 6 depending on a config setting.</p>\n<p>The important changes to use PHPMailer 6 are the use of namespaces, which makes it backwards-incompatible, and PHPMailer now requiring php 5.5 or later.</p>\n<p>Added PHPMailer 6 in the directory admin/PHPMailer6\nAdded an intermediate class to encapsulate the code specific to each PHPMailer version.\nAdded a property $lineEnding which is set to \"\\n\" for the current PHPMailer and to the new static $LE for PHPMailer 6.\nChanged all occurrences of $this-&gt;LE to $this-&gt;lineEnding except in amazonSesSend() which is changed to remove trailing white space, as phpmailer itself does.</p>\n<p>Tidied-up the visibility of class properties, clarified those which are additional as opposed to inherited, and removed some that appear to be unused.</p>\n<p>Removed some obsolete code that supported earlier versions of phpmailer\n- add_attachment()\n- add_html_image()</p>\n<p>I have tested\n- sending using quoted-printable encoding\n- sending using 8bit encoding\n- adding an attachment\n- embedding images\n- sending through an smtp server\n- sending using the Amazon SES API\n- sending through a plugin</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19845</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>That's brilliant. @suelaP  we can merge this in and get it out to the world, and then it can be enabled with a switch. Once that has been done, that makes it much easier to test it in individual systems and then we can review.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/607", "title": "Mantis 19845 - upgrade PHPMailer to version 6", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Changes to the PHPlistMailer class to use PHPMailer version 6.</p>\n<p>The important changes are the use of namespaces, which makes it backwards-incompatible, and PHPMailer now requiring php 5.5 or later.</p>\n<p>Changed all occurrences of $this-&gt;LE to static::$LE except in amazonSesSend() which is changed to remove trailing white space, as phpmailer itself does.</p>\n<p>Tidied-up the visibility of class properties, those which are additional as opposed to inherited, and removed some that appear to be unused.</p>\n<p>Removed some obsolete code that supported earlier versions of phpmailer\nadd_attachment()\nadd_html_image()</p>\n<p>I have tested</p>\n<ul>\n<li>sending using quoted-printable encoding</li>\n<li>sending using 8bit encoding</li>\n<li>adding an attachment</li>\n<li>embedding images</li>\n<li>sending through an smtp server</li>\n<li>sending using the Amazon SES API</li>\n</ul>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19845</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>Superseded by https://github.com/phpList/phplist3/pull/608</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/606", "title": "Demo login doesn't work", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://demo.phplist.org/lists/admin/ says \"Default login is admin, with password phplist\" but then says \"Incorrect password\".</p>\n<p>I think this was working within the past week but isn't working today.</p>", ["<p>Hi @ryancwalsh \nI just noticed this issue. The login problem on the demo site is now fixed. You can check the phpList demo at https://demo.phplist.org/</p>\n<p>You might also want to check the community forum for frequent updates from the phpList community. </p>\n<p>Closing this issue. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/605", "title": "update chromedriver version to support chrome 78", "status": "closed", "labels": [], "priority": null, "description": ["<p>Update driver version to support latest stable version of Chrome browser</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/604", "title": "Correct Dutch translations", "status": "open", "labels": [], "priority": null, "description": ["<h2>Description</h2>\n<p>Some of the Dutch translations are translated very robotic, and/or contain typo's. Also capital casing is sometimes misused at a few places. This PR fixes those.</p>\n<h2>Related Issue</h2>\n<p>Not related</p>\n<h2>Screenshots (if appropriate):</h2>\n<p>Not applicable</p>", ["<p>Build seems to be blocked because of a driver issue...</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/603", "title": "Uat compatibility with hosted", "status": "open", "labels": ["work in progress"], "priority": null, "description": ["<p>Changes to Behat UAT to increase compatibility of tests with phpList hosted</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/602", "title": "Allow to set a predefined list of \"from\" addresses", "status": "open", "labels": [], "priority": null, "description": ["<p>This is a feature request to (optionally) define a list of \"from\" addresses, so that the admin user can only choose one of those as a \"from line\" in a campaign, instead of allowing them to enter whichever address they like.\nThis would prevent problems, especially with non technical users. If they enter the wrong address, then replies to the campaign would get lost. Or if they enter the wrong domain, there could be deliverability issues or, even worse, being marked as spammers.</p>", ["<p>Yes, that's a good idea. @suelaP do you want to create a mantis ticket for this?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/601", "title": "Change Import1 page to use \"Confirm Import\" instead of \"Go back\"", "status": "open", "labels": ["Hacktoberfest", "enhancement"], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19914</p>", ["<p>I'd like to work on this, please. Could you pls also elaborate on the issue. Thanks in advance.</p>", "<p>Hi @Lawrence4code  the change is to be made on the Import via text file page (import1)  that currently looks like this: </p>\n<p><img alt=\"Screenshot_2019-10-14 phpList\" src=\"https://user-images.githubusercontent.com/22301998/66768080-095a1a00-eeb2-11e9-9251-1a891b2cf75d.png\" /></p>\n<p>It should be changed to use the \"Confirm Import\" option like the \"Import via CSV page\" </p>\n<p><img alt=\"Screenshot_2019-10-14 phpList(1)\" src=\"https://user-images.githubusercontent.com/22301998/66768263-7cfc2700-eeb2-11e9-9166-5853bdf9f361.png\" /></p>", "<p>You can check how both those options work here: https://master.phplist.org/lists/admin/</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/600", "title": "Open Rate and bounce rate calculated differently in campaign results in dashboard and stats overview", "status": "open", "labels": ["Hacktoberfest"], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19976</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/599", "title": " Subscribe page is always set to active after changes", "status": "open", "labels": ["Hacktoberfest", "bug"], "priority": null, "description": ["<p>Mantis issue: https://mantis.phplist.org/view.php?id=19926</p>", ["<p>According to Mantis , looks like problem with the \"Active\" checkbox. If the checkbox will stay unchecked, the problem will be solved?</p>", "<p>Hi @kniziol \nYes, the problem is resolved if the status of the subscribe page isn't switched to \"Active\" after clicking \"Save changes\" after an edit. </p>\n<p>You can check how that works here: master.phplist.org/lists/admin/</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/598", "title": "Release 3.4.7", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/597", "title": "Unknown image format/encoding", "status": "open", "labels": [], "priority": null, "description": ["<p>I activated CKEditor as suggested <a href=\"https://discuss.phplist.org/t/the-server-didnt-reply-with-a-proper-xml-data/2243\">here</a>.</p>\n<p>However when I try to upload an image I get the following error:</p>\n<blockquote>\n<p>Unknown image format/encoding.</p>\n</blockquote>\n<p>Apparently after trying a second time the editor sends a request to a non existent file:</p>\n<p>http://lists.domain.org/admin/plugins/CKEditorPlugin/kcfinder/plugins/CKEditorPlugin/kcfinder/upload.php</p>\n<p>any ideas? Has this anything to do with the apache mime types?</p>", ["<p>@jucajuca It looks like you have the wrong path to KCFinder on the Settings page. Unless you have moved the CKEditor plugin then the path should be left as <code>plugins/CKEditorPlugin/kcfinder</code></p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/66842535-5944e980-ef63-11e9-81e5-22cb1390a7c8.png\" /></p>", "<p>I just checked and the path is correct. </p>\n<p>Only the <strong>second</strong> request has a wrong URL.</p>\n<p>The fisrt request returns:</p>\n<blockquote>\n<p>Unknown image format/encoding.</p>\n</blockquote>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/24567185/66897423-44b23100-eff7-11e9-8969-7ea0897cc523.png\" /></p>", "<p>Thanks. Can you check whether the php GD extension is enabled.</p>\n<p>Also, for the second point, what are the values in config.php for\n$pageroot and PLUGIN_ROOTDIR</p>", "<p>These are the values of the variables:</p>\n<p>$pageroot = '';\ndefine(\"PLUGIN_ROOTDIR\",\"plugins\");</p>\n<p>Here is an animation:</p>\n<p><img alt=\"error-screen\" src=\"https://user-images.githubusercontent.com/24567185/66900384-fe5fd080-effc-11e9-8f8f-0d409d66b008.gif\" /></p>", "<p>Can you try uploading from the image browser window instead to see whether that has the same problem?\nHow do I suspend the animation, it is going too fast to look at?</p>", "<p>after digging into it I found the problem.</p>\n<p>in the config file of kcfinder I had to change the drivers for images. Apparently I do not have imagemagick or gmagick. I think phplist should check if the software is installed.</p>\n<p>admin/plugins/CKEditorPlugin/kcfinder/conf/config.php</p>\n<p><code>'imageDriversPriority' =&gt; \"gd\", //\"imagick gmagick gd\"  &lt;&lt;&lt; I changed this.\n    'jpegQuality' =&gt; 90,\n    'thumbsDir' =&gt; \".thumbs\",</code></p>", "<p>Thanks for looking into this. The imagick and gmagick are optional and file uploading works when they are not present. Are you sure that you didn't change anything else?</p>\n<p>But the plugin should test whether the GD extension is installed, and not allow image upload if it is not. I will look into that.</p>\n<p>If GD is not installed then a different error message is displayed as imagick and gmagick are not standard php extensions so will usually not be installed anyway.</p>\n<blockquote>\n<p>Cannot find any of the supported PHP image extensions!</p>\n</blockquote>\n<p>I'm trying to work out how the error message that you had can be produced</p>\n<blockquote>\n<p>Unknown image format/encoding.</p>\n</blockquote>\n<p>What is the php version and phplist release?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/596", "title": "The server didn't reply with a proper XML data. Please check your configuration", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hello when I try to upload a file I get the following error:</p>\n<blockquote>\n<p>The server didn't reply with a proper XML data. Please check your configuration</p>\n</blockquote>\n<p>I looked and there is a requests that gets a 404:</p>\n<p><code>http://lists.domain.org/admin/plugins/fckphplist/fckeditor/editor/filemanager/connectors/php/connector.php?Command=GetFoldersAndFiles&amp;Type=Image&amp;CurrentFolder=%2F&amp;uuid=1570565587734</code></p>\n<p>it turns out that the folder is actually called phplists like so </p>\n<p>admin/plugins/fckphplist/fckeditor/editor/filemanager/connectors/phplist.</p>\n<p>Is there a workaround for this? or am I missing something here?</p>", ["<p>solved with https://discuss.phplist.org/t/the-server-didnt-reply-with-a-proper-xml-data/2243</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/595", "title": "Minor corrections", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>There are two small fixes.</p>\n<ul>\n<li>correct some html that is missing \"=\"</li>\n<li>correct the display of a select list configuration item that sometimes displays the option value instead of the option text, such as \"phplist-ui-bootlist\" instead of \"Trevellin\" see screenshot.</li>\n</ul>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/66137202-a4bad780-e5f4-11e9-8e1c-5fce26830daa.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/594", "title": "Admin address gets removed from the database", "status": "open", "labels": [], "priority": null, "description": ["<p>When we try to add the \"from\" address to the subscriber lists, it somehow gets deleted from the subscriber lists completely. We add it again and it happens again.</p>\n<p>Is this intended behavior? </p>\n<p>btw I tried to ask on the forum but the email validation thing isn't working and still shows \"needs to activate\" even after it was completed.</p>", ["<p>That's odd, but also, I'm not entirely sure I understand what you're writing.</p>\n<p>Can you write it like this? </p>\n<p>When on [URL]</p>\n<p>and I enter [data] in [field] and press [button]</p>\n<p>then [X] happens</p>\n<p>but I expect [Y] to happen.</p>\n<p>If you want, it's fine to \"obscure\" the actual data, but make it relative to the phpList web root.</p>", "<p>I can't recreate the issue that way, however I can tell you it doesn't happen immediately, so it seems to be related to cron activity, possibly campaign or bounce processing. We would add the address and next day it would be gone again.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/593", "title": "Mantis 19934 - Parse CSV by CSV standard - rfc4180", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Use fgetcsv() to parse an import file. Instigated by discussion on another pull request https://github.com/phpList/phplist3/pull/585</p>\n<p>New class to encapsulate reading a csv file. It uses fgetcsv() to read line by line instead of loading the complete file into an array. This is to reduce the memory usage but requires the file to be parsed twice in order to count the number of rows.</p>\n<p>Similar changes to admin/import2.php and admin/actions/import2.php to use the new class.\nRemove references to the $email_list variable.\nRemove the current manipulation of the various line endings.\nUse htmlspecialchars() instead of addslashes()</p>\n<p>Some phpunit tests.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19934</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/592", "title": "Added proxy setting for curl", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Added proxy setting for curl if php installed behind proxy</p>", ["<p>@zazzati Thank you for contributing! Please can you take a few seconds to sign the CLA on this link?: https://phplist.com/cla The link to sign is at the top.</p>", "<p>@zazzati Thanks for the additional improvements -- let me know when you've finished working and are ready for final review.</p>", "<p>The file config.php is intended to have a minimum set of configuration settings, the new settings HTTP_PROXY_HOST and HTTP_PROXY_PORT should not be in there, as they are not going to be applicable in most cases.</p>\n<p>The usual way is to put the setting and an explanation in config_extended.php with the default being set in admin/init.php.</p>\n<p>As an example the setting ALLOW_UPDATER\nconfig_extended.php\n<code>// To disable the automatic updater change the value to false. By default the value is true.\ndefine('ALLOW_UPDATER', true);</code>\nand in init.php</p>\n<p>```\nif (!defined ('ALLOW_UPDATER')){\n    define('ALLOW_UPDATER', true);\n}</p>\n<p>```</p>", "<p>The default values need to be added to init.php</p>\n<p><code>if (!defined ('HTTP_PROXY_HOST')) {\n    define('HTTP_PROXY_HOST', '');\n}\nif (!defined ('HTTP_PROXY_PORT')) {\n    define('HTTP_PROXY_PORT', '');\n}</code>\nAlso, there is an unnecessary blank line added to config.php that can be removed.</p>", "<p>@zazzati Thanks for the improvements! There is still unnecessary whitespace (many spaces) on various lines -- you should configure your code editor / IDE to automatically remove trailing whitespace, or make it visible to you so you can see it before committing. For example online 1177 and 1210. This trailing whitespace makes it harder to see the real changes you have made because in the diff Gitlab shoes those lines as being changed, even though there is no meaningful change present.</p>", "<p>Something else to tidy-up is to squash the 12 commits into just one. I think that can be done when you do the merge by using \"squash and merge\" instead of just \"merge\". The commit history needs to see just the end result of these commits, not each one, otherwise it becomes bloated.</p>", "<p>@bramley Yes I should be able to do that during the merge</p>", "<p>It would be nice to merge this PR, but there are conflicts, which are mostly due to whitespace changes. If it can be cleaned up and the whitespace changes are reversed, it will merge fine. </p>\n<p>@zazzati let me know if you have a moment to do that, or otherwise, I'll fork your version and do it, but then the changes would be attributed to me, which would be incorrect.</p>\n<p>Also, if you can take a moment to sign the <a href=\"https://www.phplist.com/cla\">CLA</a>, then we can merge it without issues</p>", "<blockquote>\n<p>It would be nice to merge this PR, but there are conflicts, which are mostly due to whitespace changes. If it can be cleaned up and the whitespace changes are reversed, it will merge fine.</p>\n<p>@zazzati let me know if you have a moment to do that, or otherwise, I'll fork your version and do it, but then the changes would be attributed to me, which would be incorrect.</p>\n<p>Also, if you can take a moment to sign the <a href=\"https://www.phplist.com/cla\">CLA</a>, then we can merge it without issues</p>\n</blockquote>\n<p>@michield </p>\n<p>Feel free to fork. </p>", "<p>I have created https://github.com/phpList/phplist3/pull/710 which does the same without making too many changes to whitespace</p>", "<p>@zazzati  if you can test #710 that woudl be great. You  seem to have the setup for it, which most of us don' t.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/591", "title": "Error when install PhPList", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hi!\nI'm trying to install PHPlist with commandline using a command /usr/bin/phplist -pinitialise, but it don't work. I got this command on Docker version of phplist.\nHowever, the wizard installation /admin don't start.</p>", ["<p>Hello @Hartick! Thanks for submitting a new issue. https://discuss.phplist.org/ is a better place for your question above. There are hundreds of community members who can help there. Also, you can use the search button there because someone might have had the same problem in the past.  </p>\n<p>Cheers\nMariana</p>", "<p>Closing this issue. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/590", "title": "Update stable version", "status": "closed", "labels": [], "priority": null, "description": ["<p>Update stable version stated </p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/589", "title": "Proxy settings ?", "status": "open", "labels": [], "priority": null, "description": ["<p>We have installed phplist on a server farm behind proxy. </p>\n<p>Phplist after login try to contact </p>\n<p>https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/updateLib.php</p>\n<p><code>$serverUrl = \"https://download.phplist.org/version.json\";</code></p>\n<p>With php curl, there are no proxy setting in the code:</p>\n<p>` <br />\n     $ch = curl_init();</p>\n<pre><code>curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);\n\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n\ncurl_setopt($ch, CURLOPT_URL, $updateUrl);\n\n$responseFromServer = curl_exec($ch);\n\ncurl_close($ch);\n</code></pre>\n<p>`</p>\n<p>The request fail with a timed out. </p>\n<p>it is possible to plan the insertion in the code of </p>\n<p><code>if ($PROXY_FROM_CONFIG_FILE and $PROXY_PORT_FROM_CONFIG_FILE) {\n   curl_setopt($ch, CURLOPT_PROXY, $PROXY_FROM_CONFIG_FILE);    \n   curl_setopt($ch, CURLOPT_PROXYPORT,  $PROXY_PORT_FROM_CONFIG_FILE);    \n}</code></p>\n<p>or smilar code ?</p>\n<p>thx</p>", ["<p>I don't see any reason why not. Please can you implement and test this (including adding the new config options to config_extended.php) and open a pull request for review? </p>", "<p>Its seem that variable and constants in config_extended.php are not visibile in application scope.</p>\n<p>In config.php i read</p>\n<p><strong> NOTE: To use options from config_extended.php, you need to copy them to this file </strong></p>\n<p>Whats the correct way ?</p>", "<p>Follow this!\nThere are many settings to allow to use of proxy in PHPList?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/588", "title": "Chrome version fix", "status": "closed", "labels": [], "priority": null, "description": ["<p>Travis issue with updating Chrome on Trusty: </p>\n<p>https://github.com/travis-ci/travis-ci/issues/9361</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/587", "title": "Dependency on php version 5.4", "status": "open", "labels": [], "priority": null, "description": ["<p>An earlier pull request used the short array syntax assuming that php version 5.4 or later is being used. \nhttps://github.com/phpList/phplist3/pull/543/files#diff-c24d5bdfa2b25ebe4461a8063f6b83a8R910</p>\n<p>But it is still the case that phplist allows php 5.3.3\n```\n    if (version_compare(PHP_VERSION, '5.3.3', '&lt;') &amp;&amp; WARN_ABOUT_PHP_SETTINGS) {\n        Error(s('Your PHP version is out of date. phpList requires PHP version 5.3.3 or higher.'));\n    }</p>\n<p>```\nThat change makes the subscribe/preferences page fail for php &lt; 5.4, see  https://discuss.phplist.org/t/subscriber-update-preferences-screen-is-blank/5483</p>", ["<p>@samtuke I'm not sure that should be fixed? PHP5.3 should really be retired.</p>\n<p>In fact, PHP5.6 is out of support since December 2018, so maybe \u1e81e should do so as well. I know some Centos fanatics want to keep it, but that's their problem.</p>", "<p>It looks like @bramley was recommending to update the part that says <code>version_compare(PHP_VERSION, '5.3.3', '&lt;')</code>.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/586", "title": "Update UPGRADE", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Updated the UPGRADE file with a working URL and a better description of what the URL contains.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>@mishari Thank you for contributing! \ud83c\udf89</p>\n<p>If you haven't already, please can you <a href=\"https://phplist.com/cla\">sign the CLA</a> via GitHub? Takes a few seconds.</p>", "<p>Hi Sam</p>\n<p>How do I do the signing?</p>\n<p>On Mon, Sep 16, 2019 at 4:33 PM Sam Tuke <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;\">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>\n<blockquote>\n<p>@mishari <a href=\"https://github.com/mishari\">https://github.com/mishari</a> Thank you for contributing! \ud83c\udf89</p>\n<p>If you haven't already, please can you sign the CLA\n<a href=\"https://phplist.com/cla\">https://phplist.com/cla</a> via GitHub? Takes a few seconds.</p>\n<p>\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\n<a href=\"https://github.com/phpList/phplist3/pull/586?email_source=notifications&amp;email_token=AAD2Z2RPZXWD73KIJTGNC7LQJ5HD3A5CNFSM4IWZKJOKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD6YSWMY#issuecomment-531704627\">https://github.com/phpList/phplist3/pull/586?email_source=notifications&amp;email_token=AAD2Z2RPZXWD73KIJTGNC7LQJ5HD3A5CNFSM4IWZKJOKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD6YSWMY#issuecomment-531704627</a>,\nor mute the thread\n<a href=\"https://github.com/notifications/unsubscribe-auth/AAD2Z2XAA4ZLGIJHPLWKJTDQJ5HD3ANCNFSM4IWZKJOA\">https://github.com/notifications/unsubscribe-auth/AAD2Z2XAA4ZLGIJHPLWKJTDQJ5HD3ANCNFSM4IWZKJOA</a>\n.\n</p>\n</blockquote>", "<p>@mishari Visit the <a href=\"https://phplist.com/cla\">CLA page</a>, then click 'Sign the CLA with Github' at the top \u263a\ufe0f</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/585", "title": "Modify CSV import to comply RFC 4180", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>This patch enhances CSV import. It changes CSV parsing to be compliant to RFC 4180.</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=19934</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>Thanks @ljelinek-cznic ! This will go through the usual QA process and hopefully make it into phpList 3.4.7</p>", "<p>@ljelinek-cznic You seem to have written your own parser. php has a function to parse a csv string str_getcsv() https://www.php.net/manual/en/function.str-getcsv.php\nIs there a reason why that cannot be used?</p>", "<p>To answer my own question. The import data needs to be split into lines before str_getcsv() can parse a line of text. As one of the intentions of this change is to allow a new-line character within a field then that cannot now be done.</p>\n<p>Instead fgetcsv() could be used.</p>", "<p>This current piece of code normalises the line ending to \"\\n\". \n<code>// Clean up email file\n    $email_list = trim($email_list);\n    $email_list = str_replace(\"\\r\", \"\\n\", $email_list);\n    $email_list = str_replace(\"\\n\\r\", \"\\n\", $email_list);\n    $email_list = str_replace(\"\\n\\n\", \"\\n\", $email_list);</code></p>\n<p>But if \"\\n\" can now appear within a field then I'm not sure that the processing is entirely valid as it could change the content of a field.</p>", "<p>Unfortunately, <code>fgetcsv()</code> don't ensure full compliance to RFC 4180. This is the reason that I solve it by implementing own mechanism. Probably the most exhaustive explanation is here: https://wiki.php.net/rfc/kill-csv-escaping</p>", "<p>Thanks.\nFrom what I can see from the link you provided the problems are with the escaping mechanism (using the \\ character) which is outside RFC4180. But it appears that can be disabled by using \\0 as the escape character. </p>\n<p>The php function fgetcsv() seems to support the seven points in the definition at https://tools.ietf.org/html/rfc4180#page-2\nOr is there something that I am missing?</p>", "<p>I have changed the code to use fgetcsv(). Using your file with some additions to have embedded new line, and embedded double quotes,\n<code>email;Last name;Name;Country\n\"johnsmith@example.com\";\"butter\";\"\";\"Czech Republic\"\n\"x.smith@example.com\";\"maslo\nafter new line\";\"smith\";\"Czech Republic\"\nfoo@bar.com;\"name including a\"\" character\";\"Jim\";\"Great Britain\"</code>\nthe test output is\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/65064903-40074800-d979-11e9-81a6-f18ac221b4b5.png\" /></p>\n<p>I think that the \\ in front of \" is a phplist bug. The value stored in the database does not have that.</p>", "<blockquote>\n<p>I have changed the code to use fgetcsv(). Using your file with some additions to have embedded new line, and embedded double quotes,</p>\n</blockquote>\n<p>And what now? Can you create a pull request with your code please to be merged instead of mine?</p>", "<p>Yes I'll do that shortly.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/584", "title": "Mantis 20069 - Some quirks with simple paging", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>When displaying a set of results using simple paging\n- Avoid paging past the final page.\n- Display only the remaining items on the last page.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=20069</p>\n<h2>Screenshots (if appropriate):</h2>\n<p>Event log page showing the last page,\nprior to change shows the last 50 events\n<img alt=\"Screenshot from 2019-08-27 08-25-14\" src=\"https://user-images.githubusercontent.com/3147688/64079929-22ce4a80-cce6-11e9-9c57-0c528cb490f5.png\" />\nafter change shows the last 47 events</p>\n<p><img alt=\"Screenshot from 2019-08-27 08-22-39\" src=\"https://user-images.githubusercontent.com/3147688/64079933-2d88df80-cce6-11e9-9e8b-d8f8a5f11616.png\" /></p>", ["<p>Nice one</p>\n<p>:+1: </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/583", "title": "Cant use API because of PHP error", "status": "open", "labels": [], "priority": null, "description": ["<p>I have tried to activate the api for my website and went for the guide on the website: </p>\n<p>https://www.phplist.org/manual/books/phplist-manual/page/api-and-integrations</p>\n<p>but got an error on my way:</p>\n<p>Fatal error: Uncaught PDOException: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'b2bliga2_phpl984.phplist_config' doesn't exist in /home/b2bliga2/public_html/newsletter/base/config/parameters.php:29 Stack trace: #0 /home/b2bliga2/public_html/newsletter/base/config/parameters.php(29): PDO-&gt;prepare('select value fr...') #1 /home/b2bliga2/public_html/newsletter/base/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Loader/PhpFileLoader.php(41): include('/home/b2bliga2/...') #2 /home/b2bliga2/public_html/newsletter/base/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Loader/PhpFileLoader.php(44): Symfony\\Component\\DependencyInjection\\Loader\\ProtectedPhpFileLoader-&gt;Symfony\\Component\\DependencyInjection\\Loader{closure}('/home/b2bliga2/...') #3 /home/b2bliga2/public_html/newsletter/base/vendor/symfony/symfony/src/Symfony/Component/Config/Loader/DelegatingLoader.php(40): Symfony\\Component\\DependencyInjection\\Loader\\PhpFileLoader-&gt;load('/home/b2bliga2/...', NULL) #4 /home/b2bliga2/pub in /home/b2bliga2/public_html/newsletter/base/config/parameters.php on line 29</p>\n<p>checking out parameters.php on line 29 i found this:</p>\n<p><code>$statement = $pdo-&gt;prepare(\"select value from phplist_config where value = :value\");</code></p>\n<p>which is clearly missing the table prefix, and using phplist_ as prefix??  i tried fixing that with:</p>\n<p><code>$statement = $pdo-&gt;prepare(\"select value from \".$table_prefix.\"config where value = :value\");</code></p>\n<p>yet i get a server internal error when trying to acces the api:</p>\n<p><code>{\"code\":500,\"message\":\"Internal Server Error\"}</code></p>", ["<p>Did you install phpList? Seems like the database structure has not been created yet.</p>", "<p>This issue also occurs for me.  </p>\n<p>First error is a DBName error from \nlists/base/config/parameters.php:29\nWhen I fix line 29 as above, I also get the 500 server error.</p>\n<p>I would make a PR for the issue with the table name, but I don't see this file anywhere in the repo.</p>\n<p>For anyone else looking here with the same issue:\nI was able to get this working by changing my table prefix to the default of phplist_</p>", "<p>Hmm, maybe this needs more attention.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/582", "title": "Update phplist", "status": "closed", "labels": [], "priority": null, "description": ["<p>Some polish translations</p>\n<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>@suelaP These need to be committed to the locale SVN as well</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/581", "title": "Add website config option to stats recorded", "status": "closed", "labels": [], "priority": null, "description": ["<p>Add website config option value to the stats email which is sent after a campaign finishes sending. </p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/580", "title": "Mantis 20037 - Failing to identify the email address in a bounce", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Improve matching of email addresses within a bounce.\nThe change uses the same regex as when parsing a plain text campaign email to find email addresses, function parseText() in sendemaillib.php.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=20037</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/579", "title": "Update VERSION", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/578", "title": "edit composer.json to update  chromedriver", "status": "closed", "labels": [], "priority": null, "description": ["<p>Update chromedriver to support the latest version of chrome used</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/577", "title": "Apply new README design from brunildadosti branch", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19492</p>\n<p>New PR avoiding conflicts from @BrunildaDosti's branch / PR https://github.com/phpList/phplist3/pull/532.</p>\n<p>This introduces a new README.md design from @BrunildaDosti.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/576", "title": "Fix more detailed subscriber click stats the userdataexport csv files", "status": "closed", "labels": [], "priority": null, "description": ["<p>Data in the csv table 'User clicks Info' was missing due to the db query used. Replace the sql query to get data, and more data.</p>\n<p>Also add a check for the forwarded email data to see if any results are returned, and if not, print message saying so.</p>\n<p>Note: The behaviour of tables where no data is found is now inconsistent: all tables show col headings and no data, except for the forwarded message data table, which now does the table title and a message stating forwarded data is absent of that is the case. It would be good to add conditional checks to the other tables to test for this too in future.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/575", "title": "Check for and use the centrally set csv delimiter instead of comma", "status": "closed", "labels": [], "priority": null, "description": ["<p>Use the config file's centrally set csv delimiter (set via EXPORT_EXCEL) instead of always comma. Makes the exported user data use tab delimiter by default. Improves consistency of csv formatting across exports.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/574", "title": "Add csv export to mclicks page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Add 'download as CSV' button to mclicks page, and use webblerListing class to change output type to tab delimited.</p>\n<h2>Screenshots (if appropriate):</h2>\n<p><img alt=\"Selection_613\" src=\"https://user-images.githubusercontent.com/695422/61897127-b017c580-af16-11e9-83e9-9717bb38040f.png\" /></p>", ["<p>Note:\n- Not yet tested on accounts with no campaign clicks\n- Unclear when the ajaxified version of the page is used vs the regular one (eg. actions/mclicks.php)\n- When a campaign ID is provided, when there are zero unique clicks then zero is shown in the web view but in the csv export zero is represented as a empty cell</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/573", "title": "Link the unique clicks column on the campaign click stats page to list of individual subscribers", "status": "closed", "labels": [], "priority": null, "description": ["<p>Link the two pages together for easier discovery of the additional stats.</p>\n<h2>Screenshots (if appropriate):</h2>\n<p><img alt=\"Selection_605\" src=\"https://user-images.githubusercontent.com/695422/61812173-44b0f380-ae43-11e9-8b17-47f6a6ce97f0.png\" /></p>", ["<p>Depends upon PR https://github.com/phpList/phplist-ui-bootlist/pull/106</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/572", "title": "Add a 'clicks' overview tab to the subscriber profile page", "status": "open", "labels": [], "priority": null, "description": ["<p>Add a tab to the subscriber profile page, which lists all clicks that subscriber has ever performed, across all campaigns, with links to general stats about each URL that they clicked, and also click stats for the last campaign in which that URL appeared.</p>\n<h2>Screenshots (if appropriate):</h2>\n<p><img alt=\"Selection_601\" src=\"https://user-images.githubusercontent.com/695422/61807463-e0d5fd00-ae39-11e9-9baa-7fe70af643ba.png\" /></p>", ["<p>One known issue exists which is that the table data is split over two rows when it could be a single row.</p>", "<p>Note this tab seems to duplicate functionality of /lists/admin/?page=userclicks&amp;userid=1</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/571", "title": "add trusty for the build dist", "status": "closed", "labels": [], "priority": null, "description": ["<p>Not sure why travis is now using xenial on the build set up so, a simple PR from @marianaballa is failing the checks: https://travis-ci.org/phpList/phplist3/builds/563051547</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/570", "title": "Update CONTRIBUTING.md", "status": "closed", "labels": [], "priority": null, "description": ["<p>I fixed typos and added extra content. </p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/569", "title": "Mantis 20028 - When insert into message table fails the fatal error is not displayed by Trevellin theme", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>When inserting into message table fails return to the caller instead of exiting, which is the same approach as used elsewhere.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=20028</p>\n<h2>Screenshots (if appropriate):</h2>\n<p>Trevellin now displays the error\n<img alt=\"trevellin message insert fatal error\" src=\"https://user-images.githubusercontent.com/3147688/61529473-4df02980-aa19-11e9-9564-cb83e19e2920.png\" />\nDressprow displays the error\n<img alt=\"dressprow message insert fatal error\" src=\"https://user-images.githubusercontent.com/3147688/61529478-50528380-aa19-11e9-85c2-f8c02037b16b.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/568", "title": "Mantis 20027 - When deleting bounces the result message shows 0 bounces deleted", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Use the correct function to get the number of rows deleted from the bounce table when deleting processed or unidentified bounces.</p>\n<p>A number of lines have had trailing white space removed.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=20027</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/567", "title": "Plugins test", "status": "closed", "labels": [], "priority": null, "description": ["<p>Added test for adding and updating plugin, related to:  https://mantis.phplist.org/view.php?id=20004</p>", ["<p>The code looks good \ud83d\udc4d</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/566", "title": "Updater deploys beta versions", "status": "closed", "labels": [], "priority": null, "description": ["<p>Running 3.4.1 and wanted to upgrade to 3.4.3, the latest \"stable\". However, the dashboard doesn't have any notifications of the update, and when going to 'update' the only version visible is 3.4.4rc1?</p>\n<p>It seems like this probably isn't intentional, or shouldn't be. The \"user friendly\" updater should only deploy stable version or else should offer choices, wouldn't that make more sense?</p>", ["<blockquote>\n<p>Running 3.4.1 and wanted to upgrade to 3.4.3, the latest \"stable\". However, the dashboard doesn't have any notifications of the update, and when going to 'update' the only version visible is 3.4.4rc1?</p>\n<p>It seems like this probably isn't intentional, or shouldn't be. The \"user friendly\" updater should only deploy stable version or else should offer choices, wouldn't that make more sense?</p>\n</blockquote>\n<p>Hello @pridetechdesignllc,</p>\n<p>You can visit Config&gt;Settings and here you can enable/disable the option to receive notifications only for the RCs or only the final releases. </p>\n<p>Additionally, you might want to join the phpList community forum. You can find many useful tips for phpList there. Forum link: https://discuss.phplist.org/</p>\n<p>Closing this issue. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/565", "title": "Search list by name", "status": "closed", "labels": [], "priority": null, "description": ["<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>\n<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Make it possible to search for a list by name</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19105</p>\n<h2>Screenshots (if appropriate):</h2>\n<p><img width=\"917\" alt=\"Screenshot 2019-07-03 at 19 49 39\" src=\"https://user-images.githubusercontent.com/9008509/60617889-9dedb000-9dcc-11e9-932d-2bc266f7d583.png\">\n<img width=\"991\" alt=\"Screenshot 2019-07-03 at 19 49 48\" src=\"https://user-images.githubusercontent.com/9008509/60617897-a2b26400-9dcc-11e9-868a-2acfec97c708.png\"></p>", ["<p>So great \ud83c\udf8a</p>", "<p>The Mantis issue refers to finding a list regardless of its category. This change doesn't appear to support that.</p>\n<p>Currently the lists page doesn't seem to have  a way to display lists regardless of category - it displays Uncategorised lists initially, then you can change category, but cannot display all lists.  I'm not sure how simple it might be to make the search work across categories, and display the results.</p>", "<p>@bramley I have created an issue for searching all lists and will implement it once it's supported :)\nhttps://mantis.phplist.org/view.php?id=19961</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/564", "title": "Added a search placeholder in campaigns page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>\n<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Added a user-friendly placeholder </p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19685</p>\n<h2>Screenshots (if appropriate):</h2>\n<p><img width=\"585\" alt=\"Screenshot 2019-07-03 at 18 06 03\" src=\"https://user-images.githubusercontent.com/9008509/60611564-84456c00-9dbe-11e9-9263-7d2c6cf598ea.png\"></p>", ["<p>\ud83c\udf89 Thanks Xheni! </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/563", "title": "Set travis build distribution to trusty to avoid old PHP version build errors", "status": "closed", "labels": [], "priority": null, "description": ["<p>Set the distribution used for travis to trusty to fix build failures with error The command \"phpenv global 5.5\" failed and exited with 1 during ., eg https://travis-ci.org/phpList/phplist-ui-bootlist/jobs/553261701.</p>\n<p>See also: https://travis-ci.community/t/php-5-4-and-5-5-archives-missing/3723/2).</p>", ["<p>phpList3 uses it by default so this can be closed. Change for bootlist submitted here: https://github.com/phpList/phplist-ui-bootlist/pull/103 </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/562", "title": "Set trusty as travis build distribution", "status": "closed", "labels": [], "priority": null, "description": ["<p>Set the distribution used for travis to trusty to fix build failures with error <code>The command \"phpenv global 5.5\" failed and exited with 1 during .</code>, eg https://travis-ci.org/phpList/phplist-ui-bootlist/jobs/553261701. </p>\n<p>See also: https://travis-ci.community/t/php-5-4-and-5-5-archives-missing/3723/2).</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/561", "title": "Updating a plugin fails due to php 7.3 PCRE change", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Ensure that regex pattern is compatible with php 7.3</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=20004</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>@suelaP A behat test for this would be good, though not critical IMO.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/560", "title": "Replacement of id attribute with name in checkAllBoxes function-campaigns sending", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=19998#bugnotes\nhttps://mantis.phplist.org/view.php?id=19994#bugnotes</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>This fixes both issues reported.\nHowever, for consistency it would be better if checking \"Select All\" doesn't actually check all boxes (visually).  For example checking \"All lists\" when no categories are used,  won't check all lists even though the campaign will be sent to all lists. </p>", "<p>Let's check the logic consistency after this is merged as this already fixes the original problem.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/559", "title": "Prevent subscribing to private lists", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>There was no check if the list is private or not when users subscribe/update preferences.\nI created a function that determines if the list is private or not. Additional test is needed.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>TBA</p>", ["<p>Merging this in order to make the 3.4.3 release. My rationale is that the multiple-calls are a performance issue, which is secondary to the security issue. Caching can be added in a separate PR.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/558", "title": "corrected two typos on the footer", "status": "closed", "labels": [], "priority": null, "description": ["<p>Corrected two typos on the footer. </p>\n<p>Mantis:  https://mantis.phplist.org/view.php?id=19942</p>", ["<p>@marianaballa Congratulations on your first phplist3 PR!</p>\n<p>@michield Any possible side effects of this, or good to merge? </p>", "<p>@marianaballa Please create and link to a corresponding mantis issue describing this problem. </p>", "<blockquote>\n<p>@marianaballa Please create and link to a corresponding mantis issue describing this problem.</p>\n</blockquote>\n<p>Here is the link on the Mantis issue: https://mantis.phplist.org/view.php?id=19942</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/557", "title": "Mantis 19974 - Linking from Manage Plugins page to Settings page", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Sanitise the plugin category so that it can be used as an html id attribute value</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19974</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/556", "title": "Create a feature to add custom tracking campaign parameter", "status": "open", "labels": [], "priority": null, "description": ["<p>Currently in phplist, one can automatically add _utm parameters to all links in a campaign.\nBut what about other parameters we would like to automatically add?\nFor example an id.</p>\n<p>One way to solve it could be to have a field to enter the name of the parameter we want. We could then populate it with attributes or any other dynamic values from the template.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/555", "title": "reload the page on access denied", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>reload the page with JS on the referrer check failing</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=19973</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/554", "title": "clear Maintenance mode if there's no need to upgrade", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Reset maintenance mode when running the upgrade script and no upgrade is necessary</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=19972</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/553", "title": "help icon for view rate", "status": "closed", "labels": [], "priority": null, "description": ["<p>This adds an info icon on the View Rate column added on this PR https://github.com/phpList/phplist3/pull/548</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/552", "title": "nginx rewrite for rest api", "status": "closed", "labels": [], "priority": null, "description": ["<p>I'm using phplist with nginx it's working so far, my configuration file, only relevant parts included, looks like this:</p>\n<p>```\n  location ~* .(txt|log|inc)$ {\n    allow 127.0.0.1;\n    deny all;\n  }</p>\n<p>location ~* .(js|css|png|jpg|jpeg|gif|ico)$ {\n    expires max;\n    log_not_found off;\n  }</p>\n<p>location /config {\n    deny all;\n  }</p>\n<p>location ~* (index.php|upload.php|connector.php|dl.php|ut.php|lt.php|download.php|api.php)$ {\n    fastcgi_pass unix:/run/php/php7.2-fpm.sock;\n    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n    include fastcgi_params;\n    include snippets/fastcgi-php.conf;\n  }\n```</p>\n<p>Basically following: https://www.nginx.com/resources/wiki/start/topics/recipes/phplist/?highlight=phplist</p>\n<p>Now I activated the rest api, following this: https://www.phplist.org/manual/ch049_api-and-integrations.xhtml</p>\n<p>I tried several options in nginx for rewriting, e.g. something like: </p>\n<p><code>location ~ ^/api/v2/ {\n    rewrite ^/api/v2/(.*?)$ /api.php$is_args$1 last;\n  }</code></p>\n<p>I'm not an expert though and seem to miss something. Your help is much appreciated. Has anyone done this, and if so, how can it be done? </p>", ["<p>I think it's probably better to ask this in an nginx forum.</p>\n<p>But https://github.com/phpList/base-distribution#phplist-4-base-distribution\nmaps to app.php, not api.php </p>\n<p>Maybe that's the issue? Otherwise @xh3n1 or @oliverklee may have an idea?</p>", "<p>Yes, the rewrite needs to go to <code>app.php</code>. There is no <code>api.php</code> in phpList 4.</p>", "<p>I have phpList 3.4.2 installed. There is no <code>app.php</code>, but an <code>api.php</code>. In the <code>.htaccess</code> the rewrite goes to the <code>api.php</code>, which is why I used it.</p>", "<p>@grossherr you are right as you right as I did changes to make rest API work with phpList3.</p>\n<p>Regarding your issue: \nI think you should add this line as it was posted in the forum https://discuss.phplist.org/t/rest-api-with-nginx/5282/15:\n<code>rewrite ^(/lists/api/v2/.*) /lists/api.php;</code>\nAlso, the best place to ask for help and support is the phpList forum ;)</p>", "<p>Thanks to all of you. I'll give it a try, and next time turn to the forum.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/551", "title": "Remove var_dump function, probably forgotten", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Simply removed var_dump</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/550", "title": "Remove duplicate page title on verify db structure page", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Remove duplicate page title on verify db structure page</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19894</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/549", "title": "Escape title value in edit subscribe page", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Escape $title value in insert query.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19969</p>", ["<p>@samtuke no, only in this query.</p>", "<p>@xh3n1 I'm still concerned that this will add escape characters which never get removed. Escaped literal characters should never be visible to users, but if the title of subscribe pages have escape chars inserted, and you have not added any corresponding function to remove them when the value is loaded again, surely users will see them?</p>", "<p>This value is escaped in other places too such as here for subscribepage table https://github.com/phpList/phplist3/blob/f1410dc9f94e42a4551fa5b3e593f218cd5a6308/public_html/lists/admin/spageedit.php#L44 and here for subscribepage_data table: https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/spageedit.php#L66. The value is escaped in the database, but  \"slashes\" are not displayed to the user anyway as they are stripped. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/548", "title": "Domain bounces stats", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<ul>\n<li>Top 25 domains with the highest number of bounces</li>\n<li>If you click the domain name, you will more detailed data such as:\nsent emails, bounces rate and total views.</li>\n</ul>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<p>https://mantis.phplist.org/view.php?id=18026</p>\n<h2>Screenshots (if appropriate):</h2>\n<p><img width=\"910\" alt=\"Screenshot 2019-05-29 at 14 57 04\" src=\"https://user-images.githubusercontent.com/9008509/58559305-16d47780-8223-11e9-8655-dc7f1dc2c287.png\">\n<img width=\"969\" alt=\"Screenshot 2019-05-29 at 14 47 42\" src=\"https://user-images.githubusercontent.com/9008509/58559338-2d7ace80-8223-11e9-98a7-8ad457237aeb.png\"></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/547", "title": "Adds senderid configuration and process to allow feedback loops to t\u2026", "status": "closed", "labels": [], "priority": null, "description": ["<p>\u2026rigger</p>\n<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Implements simple recommendation from https://support.google.com/mail/answer/6254652?hl=en\nto allow Google mail feedback loop process to work</p>\n<h2>Related Issue</h2>\n<p>Allow phplist to be compliant with gmail feedback loop service</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>Thanks! Looks good. Regarding the senderid, that appears to be a hardcoded string, but shouldn't it be a different value for each host or installation? In which case it should probably be easier to set than by editing that hardcoded value. What is the impact of using this new header including literally the string 'senderid'? Presumably the feedback loop would fail.</p>", "<p>I let the core team decide how they want to pass on the config Item as I'm not sure about the strategy here (config file or Database)</p>", "<p>@utagawal OK, so you confirm it needs to be set independently for each installation in order for the feedback loop to work with most mail hosts?</p>", "<p>@utagawal Would it be better to leave senderid as an empty string, and add a conditional to check if it is set before using the feedback loop header? Seems to me that would be safer than enabling the header with an invalid value by default.</p>", "<p>@utagawal The easiest way to make the var configurable is to use a new config option in the config.php / config_extended.php file. That is simple to do and acheives the goal of easy configuration and documentation for users.</p>", "<p>Yes, it's a good idea, but needs some more detail to work as a feature that can be accepted.</p>\n<p>The correct way to make this change is as follows:</p>\n<ol>\n<li>make $senderid a constant, eg SENDERID. As a variable, it's too dangerous as it might change halfway the code.</li>\n</ol>\n<p>As this is Google specific, it is probably even better to call it GOOGLE_SENDERID</p>\n<ol>\n<li>\n<p>Initialise the constant in init.php with an \"if not defined\"  and initialise it to the empty string</p>\n</li>\n<li>\n<p>add the constant to config_extended with an explanation</p>\n</li>\n<li>\n<p>add the header based on \"if not empty\" so that it's not added when the senderid is not defined.</p>\n</li>\n</ol>\n<p>Bonus points would be if the \"a : b : c\" from https://support.google.com/mail/answer/6254652?hl=en are implemented, ie \"campaign ID\", \"subscriber ID\" etc.</p>\n<p>More bonus points would be to document it on the resources wiki.</p>", "<p>@utagawal how do you feel about implementing those recommendations? This looks like a good improvement to be included in the next release. Someone from our team is willing to check it tomorrow if you are not planning to and you are ok with that :)</p>", "<p>As said I'm no real developer. I have followed Michiel's explanation. But didn't go for the extra mile as I'm not sure how/where to gather the campaingId and subscriber ID variables.\nIt should be quite straight forward for a developer in the core team to extend it though...</p>", "<p>Can you let me know how to ge the campaingId and subscriber ID variables so I can add them to the message header too as requested ?</p>", "<p>Looks good to me. @xh3n1 ?</p>\n<p>@utagawal don't worry about the abc variables. That can be added later. As it stands, this will work.</p>", "<p>@utagawal Once you apply Xheni's change I'll merge</p>", "<p>@utagawal any blocks on getting @xh3n1 recommendations? </p>", "<p>@suelaP I have implemented the recommended change proposed by @xh3n1 </p>", "<p>@utagawal The test is failing now because you should remove the quotes in !empty('GOOGLE_SENDERID')  :) </p>", "<p>@xh3n1 fixed</p>", "<p>@utagawal, it seems that this syntax is not supported in PHP 5.4, sorry about that.\nIn this case, please remove <code>!empty('GOOGLE_SENDERID')</code> leave it as:  <code>if (GOOGLE_SENDERID != '')</code> since the constant is defined anyway in init.php.</p>\n<p>Thanks.</p>", "<p>ok resolved</p>", "<p>@utagawal Great, thanks \ud83d\ude03 </p>", "<p>@utagawal Please can you take 2 minutes to agree to this CLA? Unfortunately without that we cannot ship this change in phpList 3.4.3. You need do it only once: https://phplist.com/cla</p>", "<p>@utagawal Thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/546", "title": "Switch charset from iso-8859-1 to utf8", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Remove  iso-8859-1 Charset and replace it with utf8</p>\n<h2>Related Issue</h2>\n<p>Compatibility with more chars</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>This change is unnecessary. First of all, it's a change to an external library, which should be changed in the upstream source (as we try to keep their source as verbatim as we can), and secondly this line makes this change obsolete:</p>\n<p>https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/class.phplistmailer.php#L79</p>", "<p>The code line in question has moved to: https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/class.phplistmailer.php#L82</p>\n<p>Closing this</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/545", "title": "Apply Alan George mod to the core of phplist to enhance email header \u2026", "status": "closed", "labels": [], "priority": null, "description": ["<p>\u2026: https://www.alangeorge-photography.com/lcode_30x_14.php</p>\n<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>Thanks for this PR. What is the primary problem it is designed to solve? </p>\n<p>It seems to delete or comment out headers that already exist, only to move several of them to another part of the script. Additionally it adds some redundant comments to headers which already exists (labelling them as originating from the Alan George mod), which makes it harder to see the changes which are being introduced.</p>", "<p>The tests are failing due to this: https://travis-ci.org/phpList/phplist3/jobs/538287971#L651</p>", "<p>Hello, this allows to use message enveloppe properly according to Alan George Mod.</p>\n<p>The users can unsubscribe directly by doing email reply.</p>\n<p>Explanations are here  : https://www.alangeorge-photography.com/lcode_30x_14.php</p>\n<p>Next step is to have the bounce mechanism within phpList able to process the email unsubscribe requests.</p>", "<p>This PR is trying to do too many things at the same time. Some of the changes are simply said <strong>disastrous</strong> and cannot and should not be taken. I can comment inline for each of them, but I don't think that's worth the effort. Instead each element should be turned into a separate PR with the following structure:</p>\n<ol>\n<li>problem that currently exists</li>\n<li>explanation of the solution</li>\n<li>reason for the related code change</li>\n</ol>", "<p>@michield can you quickly point out the \"disatrous\" changes ? So at least I can split the PR to only provide the changes that could make sense ?</p>", "<p>Maybe I was a little too dramatic. The only \"disastrous\" change is where message_envelope is removed. That will stop the bounce processing from working. As such, that is a bad idea.</p>\n<p>Most of the other ones are just very \"hacky\". For example hard coding email addresses for \"reply-to\" and then like is just not the way to do things.</p>\n<p>All in all, it's rather messy and as I wrote, it's better to split them into different PRs that each identify a problem and then resolve them.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/544", "title": "Add publiccode.yml", "status": "open", "labels": [], "priority": null, "description": ["<p>Would you be interested in a patch to add a metadata file like https://github.com/globaleaks/GlobaLeaks/blob/master/publiccode.yml ? It's necessary to be included in https://developers.italia.it/en/software/ , the list of free software which the Italian state will heavily advertise to the public sector in Italy.</p>", ["<p>Yes, sounds good. Some of the data needs to be updated for each release, but updating the release script used to roll releases should be easy. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/543", "title": "Added data verification for $_GET['list'] and $_GET['htmlemail']", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Based on requests from the related issue</p>\n<h2>Related Issue</h2>\n<p>https://github.com/phpList/phplist3/pull/522</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/542", "title": "Feature/19920 add uid on attachment download url", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Add UID to the download of attachments in text versions of emails</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=19920</p>", ["<p>The main problem on this is that</p>\n<p>this will have an issue in upgrade. When a campaign has been sent on an older version without the \"uid\", it will stop providing the document and throw a 404. This only applies to attachments in text versions of the campaigns (very limited audience, presumably)</p>\n<p>@suelaP is that acceptable, or do we need to create a way to alleviate this problem.</p>", "<p>@suelaP Ping</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/541", "title": "redundant JS causing error", "status": "closed", "labels": [], "priority": null, "description": ["<h2>Description</h2>\n<p>This JS is not needed and causes an error as it runs before jQuery is loaded. </p>\n<p>The functionality is handled in admin/js/phplistapp.js around line 395</p>\n<h2>Related Issue</h2>\n<p>NA</p>\n<h2>Screenshots (if appropriate):</h2>\n<p>error from chrome\n?page=export&amp;tk=2cfda4e7e6cba9534ba3bdaec27d651a:289 Uncaught ReferenceError: $ is not defined</p>", ["<p>It's not redundant, but it should be re-coded to load after jQuery, that's true.</p>", "<p>That will work, I just called it redundant because the same .hide() function is called on the same dom element at</p>\n<p>https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/js/phplistapp.js</p>\n<p>line 397\" $(\"#exportdates\").hide();</p>", "<p>Yes, you're right. Nice one, thanks</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/540", "title": "Error in Docs", "status": "closed", "labels": [], "priority": null, "description": ["<p>on this page: https://www.phplist.org/manual/ch049_api-and-integrations.xhtml it reads\n\"Delete this folder entirely: public_html/lists/base/cache\"\nI think it should be:\n\"... public_html/lists/base/var/cache\"</p>", ["<p>@derralf That's correct. You can submit a Pull Request here https://github.com/phpList/phplist-manual to update it :)</p>", "<p>fixed in https://github.com/phpList/phplist-manual/pull/12</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/539", "title": "Update $GLOBALS['jQuery'] version", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19918</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/538", "title": "Missing files referenced from languages.php", "status": "closed", "labels": [], "priority": null, "description": ["<p>I find that the following files are referenced in this code from line 225 to 245 in languages.php, but they do not exist.</p>\n<pre><code>    if (is_file($this-&gt;basedir.$this-&gt;language.'/'.$page.'.php')) {\n        @include $this-&gt;basedir.$this-&gt;language.'/'.$page.'.php';\n    } elseif (!isset($GLOBALS['developer_email'])) {\n        @include $this-&gt;basedir.$this-&gt;defaultlanguage.'/'.$page.'.php';\n    }\n    $this-&gt;lan = $lan;\n    $lan = array();\n\n    if (is_file($this-&gt;basedir.$this-&gt;language.'/common.php')) {\n        @include $this-&gt;basedir.$this-&gt;language.'/common.php';\n    } elseif (!isset($GLOBALS['developer_email'])) {\n        @include $this-&gt;basedir.$this-&gt;defaultlanguage.'/common.php';\n    }\n    $this-&gt;lan += $lan;\n    $lan = array();\n\n    if (is_file($this-&gt;basedir.$this-&gt;language.'/frontend.php')) {\n        @include $this-&gt;basedir.$this-&gt;language.'/frontend.php';\n    } elseif (!isset($GLOBALS['developer_email'])) {\n        @include $this-&gt;basedir.$this-&gt;defaultlanguage.'/frontend.php';\n    }\n</code></pre>", ["<p>Yes, this is a known issue being actively worked on. You can track progress here: https://mantis.phplist.org/view.php?id=19895</p>", "<p>@plane007 That's because the translations are handled differently now. Those pages have been legacy pages that have been removed. </p>", "<p>This issue seems not to have any updates since May. For future questions/proposals, I would recommend the <a href=\"https://discuss.phplist.org/\">community forum</a> or <a href=\"https://mantis.phplist.org/my_view_page.php\">Mantis, the phpList bug tracker</a>.</p>\n<p>Closing this.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/537", "title": "Fix typo in .htaccess", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fixed outdated comment.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/536", "title": " Time of bounce in history of a subscriber profile", "status": "closed", "labels": [], "priority": null, "description": ["<p>Will do some additional testing before it's ready to review.\nhttps://mantis.phplist.org/view.php?id=18078</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/535", "title": "Release 3.4.2", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Merge 3.4.2 branch</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/534", "title": "Send sql error", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>An sql syntax error was reported when running the send page from the command line</p>\n<p><code>phpList - Database error 1064 while doing query  You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '' at line 1\nphpList - Sql error SELECT * FROM phplist_message where id = 148  and owner =</code>\nThis was caused by incorrect permissions being derived when phplist is run from the command line. There are two changes\n1) The function accessLevel() returns 0 as a default value when the an admin is not logged-in.  The usual way of the calling code testing this value is through a switch statement with cases such as 'owner' or 'all'. But those comparisons are \"loose\" which means 0 will match the first case, usually 'owner', instead of falling through to the default. The change is for accessLevel() to return 'none' instead of 0.\n2) Regardless of that problem, when run from the command line phplist doesn't seem to have a \"current admin\", so the result of accessLevel() is going to be wrong. The second change is to mimic 'all' permissions.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>The change to function accessLevel() is highlighting an error elsewhere. \nIn home.php, when the database needs to be initialised the function PageLink2() is called to create a link to the initialise page.</p>\n<pre><code>    PageLink2('initialise&amp;firstinstall=1', $GLOBALS['I18N']-&gt;get('Initialise Database')).' '.\n</code></pre>\n<p>But that function uses accessLevel() to restrict creating a link to only those admins with permission. In this case there is no admin because phplist hasn't been initialised, so an empty string is returned.</p>\n<pre><code>if ($access == 'owner' || $access == 'all' || $access == 'view') {\n    if ($name == 'processqueue' &amp;&amp; $hideProcessQueue) {\n        return '';\n    }//'&lt;!-- '.$desc.'--&gt;';\n    elseif ($name == 'processbounces' &amp;&amp; !MANUALLY_PROCESS_BOUNCES) {\n        return '';\n    } //'&lt;!-- '.$desc.'--&gt;';\n    else {\n        if (!$no_plugin &amp;&amp; !preg_match('/&amp;amp;pi=/i',\n                $name) &amp;&amp; isset($_GET['pi']) &amp;&amp; isset($GLOBALS['plugins'][$_GET['pi']]) &amp;&amp; is_object($GLOBALS['plugins'][$_GET['pi']])\n        ) {\n            $pi = '&amp;amp;pi='.$_GET['pi'];\n        } else {\n            $pi = '';\n        }\n\n        if (!empty($_SESSION[$GLOBALS['installation_name'].'_csrf_token'])) {\n            $token = '&amp;amp;tk='.$_SESSION[$GLOBALS['installation_name'].'_csrf_token'];\n        } else {\n            $token = '';\n        }\n        $linktext = $desc;\n        $linktext = str_ireplace('phplist', 'phpList', $linktext);\n\n        return sprintf('&lt;a href=\"./?page=%s%s%s%s\" title=\"%s\"&gt;%s&lt;/a&gt;', $name, $url, $pi, $token,\n            htmlspecialchars(strip_tags($title)), $linktext);\n    }\n}\n\nreturn '';\n</code></pre>\n<p>That then makes the automated test fail.\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/57749848-ab918e00-76d7-11e9-967d-0ec9d95cf8eb.png\" /></p>\n<p>Previously accessLevel() returning 0 would match with 'owner', which is wrong, and the link would be created.</p>", "<p>The same problem happens with the link to \"Continue with phpList setup\" after initialising the database. With the change to accessLevel() that also generates an empty link.</p>\n<pre><code>echo '&lt;div id=\"continuesetup\" style=\"display:none;\" class=\"fleft\"&gt;'.$GLOBALS['I18N']-&gt;get('Continue with').' '.PageLinkButton('setup',\n        $GLOBALS['I18N']-&gt;get('phpList Setup')).'&lt;/div&gt;';\n</code></pre>\n<p>@michield Any insight on this? Having accessLevel() return 0 is wrong but it's not clear whether that then allows any unauthorised access.</p>", "<p>There used to be some code to check if the DB had been initialised and if not, it would return true for the access function. I'm not sure if that has been removed and is causing this issue?</p>\n<p>It was in index.php. It may be that I removed it as a security issue, but it needs adding back in. </p>", "<p>I think it was a \"require_login\" flag that was false when there's no admin table found. That should be used for the install process, so that the accessLevel function is not called at all.</p>", "<p>I have reverted the change to the accessLevel() function so that can be handled separately if necessary. The change to sendemaillib.php is simply to stop an SQL syntax warning being displayed.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/533", "title": "Make MySQL Sessions work with PHP 7.2", "status": "closed", "labels": [], "priority": null, "description": ["<h2>Description</h2>\n<p>Fix 500 Error with no error message under PHP 7.2 and make MySQL session handler work.\n- Tested to work with PHP 7.2 and 5.6\n- ini_set('session.save_handler', 'user') not allowed in php 7.2\n- The read callback must always return a session encoded (serialized) string, or an EMPTY STRING if there is no data to read.</p>", ["<p>I think this a duplicate of https://mantis.phplist.org/view.php?id=19936</p>\n<p>except under php 7.2 I could not create a new session without changing the read call back to return '' instead of false for an empty value. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/532", "title": "Brunilda dosti readme design", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", ["<p>-Changed README.md file with the right language and theme icon names.\nThe readme design images are uploaded and accessed but GitHub does not display them!\nEg. https://sendeyo.com/up/e958786d80a00f6ad461002617506bde.svg</p>\n<p>We can let links as they are since we find a place to upload.</p>", "<p>Thanks for resolving conflicts. Still this PR contains two versions of the README file where presumably it should only contain one. Please can you remove whichever version of the file is redundant so that there is only one README.md file? </p>", "<p>should this be closed @samtuke @BrunildaDosti ?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/531", "title": "Design of README markdown file.", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis issue:\nhttps://mantis.phplist.org/view.php?id=19492</p>\n<p>*Images are uploaded to phpListSite repo.</p>", ["<blockquote>\n<p>The whole code is written in HTML now, not markdown. Was this intended?</p>\n</blockquote>\n<p>The code was written using https://jbt.github.io/markdown-editor\nThe code is HTML and markdown syntax too.</p>", "<p>Is this now redundant due to #532? </p>", "<blockquote>\n<p>Is this now redundant due to #532?</p>\n</blockquote>\n<p>Turns out yes, it is. Closing.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/530", "title": "Add a test to check if there is an error when updating translations", "status": "closed", "labels": [], "priority": null, "description": ["<p>Add a check for errors on the update translations page.</p>", ["<p>This is failing with:</p>\n<p><code>001 Scenario: Update translations    # tests/features/getting-started/updateTranslations.feature:7\n      Then I should not see \"Error:\" # tests/features/getting-started/updateTranslations.feature:11\n        The text \"Error:\" appears in the text of this page, but it should not. (Behat\\Mink\\Exception\\ResponseTextException)</code></p>\n<p>Presumably this is correct because the updates via weblate are in fact failing? </p>", "<p>@samtuke that's correct.</p>", "<p>@suelaP in that case this shouldn't be merged until the translation update issue is resolved, otherwise it will complicate the development and release workflow</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/529", "title": "Test links in public pages", "status": "closed", "labels": [], "priority": null, "description": ["<p>This is a simple test that looks for the default links on the public pages and checks if they lead to the corresponding pages.</p>\n<p>Mantis: https://mantis.phplist.org/view.php?id=19925</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/528", "title": "Add Updater repository to Travis", "status": "closed", "labels": [], "priority": null, "description": ["<p>Add the Updater Repository to the Travis set up</p>\n<p>Mantis: https://mantis.phplist.org/view.php?id=19924</p>\n<p>To be merged after changes to https://github.com/phpList/updater/pull/75 are made.</p>", ["<p>Tests failing with:</p>\n<p><code>Failed: ./public_html/lists/updater/index.php\nPHP Parse error:  syntax error, unexpected '.', expecting ',' or ';' in ./public_html/lists/updater/index.php on line 19</code></p>", "<p>@samtuke They are supposed to fail as they detect the unsupported syntax in php 5.3 and 5.4. </p>\n<p>When The fix from Xheni is merged they will pass.</p>", "<p>@suelaP OK great</p>", "<p>This can be merged now</p>", "<p>Reviewing this again, wouldn't it be better for the updater tests to be in the updater repo, so that commits there which change its behaviour result in failed builds for that repo, and not this one? Otherwise failed builds in this repo may mean changes were made elsewhere, and PRs to the updater repo will always pass, regardless of issues introduced.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/527", "title": "When validating a subscription display all field errors", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n\n<p>When validating a subscription display all errors found instead of just one. This is one of the points raised in this forum post https://discuss.phplist.org/t/email-address-removed-if-captcha-wrong/5243</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>\n<p>Now shows all errors. In this case\ncountry not selected\nlist not selected\ncaptcha not entered (this is validation by a plugin)\na disposable email address has been used (again, validation by a plugin)</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/57131834-9478a500-6d95-11e9-9d61-1454e901822c.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/526", "title": "Add http to vCard url", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19883</p>", ["<p>Looks like this also hyphenates the filename of the vcard</p>", "<p>@xh3n1 @samtuke  This shouldn't use simply \"http\". There is a global variable <code>$public_scheme</code> that has the correct protocol. There is also a global for the website, <code>$website</code></p>\n<p>As an example see this code that constructs the click tracking links</p>\n<pre><code>    $newlink = sprintf('&lt;a %shref=\"%s://%s/lt.php?tid=%s\" %s&gt;%s&lt;/a&gt;', $links[1][$i],\n        $GLOBALS['public_scheme'], $website.$GLOBALS['pageroot'], $masked, $links[4][$i],\n        $links[5][$i]);\n</code></pre>", "<p>@bramley Thanks. Using <code>$website</code> would save executing another database query, which is good. Why use <code>$public_scheme</code> though? Isn't that the protocol for accessing the phpList installation itself? We expect the website URL to be hosted independently of the phpList installation.</p>", "<p>Sorry, I misunderstood slightly what is being changed. yes <code>$public_scheme</code> is for the phplist public pages e.g. the <code>https</code> in <code>https://mysite.com/lists</code></p>\n<p>But <code>$website</code> is just the domain for phplist, <code>mysite.com</code> in the above URL. I don't think that it was intended to be the domain for other uses. People might want to use a different domain for the vcard contact information, for example if phplist is installed on a sub-domain, so using <code>$website</code> is just a best-guess, unless you add another configuration field. </p>", "<p>@bramley Yes it's unclear where is best to link to for the vcard URL field. We wanted to avoid adding a new config field if possible. The current implemtation assumes that there is an accessible website on the domain of the phpList installation. There may not be. Alternatively we could link to the default public page, which should be accessible, and at least contains contact info for the phpList installation admin and an overview of public lists (potentially useful), if nothing else. Thoughts?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/525", "title": "Improve notification logic", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<ul>\n<li>Return false if a production version is not found. </li>\n<li>Updated PHPDocs.</li>\n<li>Show notification only if the version is found in init.php.</li>\n<li>Check if curl extension is loaded before checking for update.</li>\n</ul>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>TBA</p>", ["<p>@suelaP </p>\n<blockquote>\n<p>we might want to reconsider adding more dependency on that module that has been optional until 3.3.7</p>\n</blockquote>\n<p>Sorry which module?</p>", "<blockquote>\n<p>Sorry which module?</p>\n</blockquote>\n<p>I read that wrong. This just checks if curl is there so it's OK.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/524", "title": "Support [CONTACTURL] placeholder", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=19882</p>", ["<p>@bramley Does this look OK to you? </p>", "<p>htmlspecialchars() is sufficient to escape html, no need to use htmlentities(). This is consistent with use elsewhere in this file, e.g.</p>\n<pre><code>$html['preferencesurl'] = sprintf('%s%suid=%s', $url, htmlspecialchars($sep), $hash);\n</code></pre>\n<p>The text value should not be encoded.</p>", "<p>@bramley Thanks! </p>", "<p>@xh3n1 Can you please check?</p>", "<p>@suelaP sure, both work for me. I prefer using htmlentities() wherever I can since it's a better security practice, but for this particular case, htmlspecialchars() works also fine.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/523", "title": "Update lists/js directory with jquery-3.3.1 version", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>-Removed lists/js/jquery-1.5.2.min.js file\n-Added  lists/js/jquery-3.3.1.min.js file \n-Called new script by editing \\lists\\admin\\lib.php file</p>\n<h2>https://github.com/phpList/phplist3.git</h2>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/522", "title": "Accept $_GET parameters &list=x,y,z (or just &list=x) and &htmlemail=1", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>$_REQUEST['email'] and $_REQUEST['emailconfirm'] are already allowed, so let's also support the other two fields.</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=15235</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>:+1: </p>", "<p>@lwcorp sorry for the delay on this. I am trying to debug a problem with my local set up (not related to these changes) to be able and properly test this. </p>", "<p>@xh3n1 Review still in progress? </p>", "<p>@samtuke Waiting for @lwcorp to add the check, but it's still ok to be merged.</p>", "<p>@lwcorp Are you planning to make the discussed amendment? </p>", "<p>Not sure I understand. @xh3n1 asked me a yes/no question 8 days ago and I immediately replied to it. @xh3n1 can you follow my answer and tell us how to proceed?</p>", "<p>Just push additional commits to the same branch in order to update this pull request. The new commits will show up on this page automatically. Eg commit and push in the same way you did for the original pull request. </p>", "<p>The problem is it's \"unknown\":\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/1773306/58204812-c5d5f800-7ce5-11e9-870e-d3fe5ebc87d4.png\" /></p>\n<p>Does it mean I have to submit the patch from scratch?</p>", "<p>That's very strange - no, I'll merge this, then you can create a separate PR without having to re-do the existing changes. Thanks! </p>", "<p>It's because I did the original pull directly without forking, hoping it won't require edits since I've been using this code for years.\nThis time I forked so you can find your requested data verification (plus a similar yet non requested one) at https://github.com/phpList/phplist3/pull/543.</p>", "<p>Great, thank you. It will be reviewed shortly. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/521", "title": "Support for inline attachments", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Added support for inline attachments like PDF files</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=15277</p>\n<h2>Screenshots (if appropriate):</h2>", ["<p>It will be interesting to review the UX of this. With attachments being inline, it won't prompt for download of the file which may in some cases be more desirable. But I do think that most systems will then also allow a download option, so that will be fine.</p>\n<p>@suelaP can you review and decide?</p>\n<p>If the UX is fine, I'd be happy to merge this PR. </p>", "<p>@michield no UX changes are made and the attachments are included in the same way as before. \nThe difference is that when you send a message in Text format the link included at the bottom that says: \" This message contains attachments that can be viewed with a webbrowser:\nLocation: http://mysite.com/lists/dl.php?id=14\" \nWill be opened in a Browser instead of prompting for download. Once you view the attachment in the browser you can then use the download option. \nThe same change is noticed when using the \"Campaign Archive\" option. Before these changes you could only download the attachment. Now you can open it in the browser instead.</p>", "<p>@suelaP Sounds like something to be documented in the manual? </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/520", "title": "Add email validation on import via txt file", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<ol>\n<li>Email validation on \"import via a text file\" (used \"is_email\" function)</li>\n<li>Added \"Count invalid emails\" to import report</li>\n<li>Validate emails only if \"omit invalid\" is checked (it's checked by default)</li>\n</ol>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19861</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/519", "title": "added alignButtons class for fixing buttons view in template page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19913</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/518", "title": "Fix typo in PR template", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Fixed typo in the related issue description.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/517", "title": "Make \"Omit Invalid\" option checked by default on  CSV import page", "status": "closed", "labels": [], "priority": null, "description": ["<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis, please include a link to the issue here. -->\n<p>Fix https://mantis.phplist.org/view.php?id=19862</p>", ["<p>@xh3n1 Shouldn't we use the boolean attribute 'checked' for HTML5?</p>", "<p>@samtuke both work the same, used this way for consistency only as it is used this way in other places too.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/516", "title": "Improvements to List Templates page", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<ul>\n<li>Add explicit edit button for each template to the 'list templates' page</li>\n<li>Move edit buttons to same line, right side</li>\n<li>Remove unnecessary ID column</li>\n<li>Change table title</li>\n<li>Add unique title for first column</li>\n</ul>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis , please include a link to the issue here. -->\n<p><a href=\"https://mantis.phplist.org\">Mantis</a> : https://mantis.phplist.org/view.php?id=19761</p>\n<p><img alt=\"Selection_561\" src=\"https://user-images.githubusercontent.com/695422/56380522-a6ddd500-6212-11e9-89e9-206fb77197b0.png\" /></p>", ["<p>Known issues remaining:\n- ~~border on every 2nd table row, despite removing <code>setClass()</code>~~\n  (Fixed in https://github.com/phpList/phplist-ui-bootlist/pull/87)\n- ~~spacing between action buttons is inconsistent~~\n- ~~padding of action button images is not centered~~</p>", "<p>@BrunildaDosti Please work on the two issues CSS issues mentioned above at some point (FYI @suelaP)</p>", "<blockquote>\n<p>@BrunildaDosti Please work on the two issues CSS issues mentioned above at some point (FYI @suelaP)</p>\n</blockquote>\n<p>Ok. Sam.</p>", "<blockquote>\n<p>@BrunildaDosti Please work on the two issues CSS issues mentioned above at some point (FYI @suelaP)</p>\n</blockquote>\n<p>The PR for this issue:\nhttps://github.com/phpList/phplist-ui-bootlist/pull/89</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/515", "title": " Add compatibility check for PHP 7.3 on Travis", "status": "closed", "labels": [], "priority": null, "description": ["<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis, please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19836</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/514", "title": "Reduced required modules list", "status": "closed", "labels": [], "priority": null, "description": ["<p>Reduce the list of required php modules</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/513", "title": "Move required extensions in checkprerequisites.php file and removed some optional ones", "status": "closed", "labels": [], "priority": null, "description": ["<ul>\n<li>Moved required extensions in checkprerequisites.php.</li>\n<li>Removed some optional ones such as gd, iconv, mbstring etc</li>\n</ul>", ["<p>It might help if you can explain how you came to decide which extensions are mandatory and which are optional.</p>\n<p>Previously I explained that curl is currently optional, in that phplist code tests whether it can be used, see the comment by Michiel https://mantis.phplist.org/view.php?id=19838 on how to simplify fetching a remote URL.\nI think that my original point in https://mantis.phplist.org/view.php?id=19838 has not really been addressed. What I am concerned about is an upgrade to phplist breaking someone's installation.</p>\n<p>What seems to be causing the problem with curl is the previous change to notification of a new release being available, https://github.com/phpList/phplist3/pull/488\nThat could be changed to use the approach explained by Michiel.</p>", "<p>curl should be removed from the list of required extensions in this PR, because the other recent PRs which rely on it have been, or are being, updated with fallbacks. fetchURL() is indeed a useful, centralised workaround for installations without it - the fact it uses caching is an added bonus. Thanks for pointing this out @bramley.</p>\n<p>In the near future I think it makes sense to make curl a required extension, because it has been included in standard distributions of PHP for some time and is very widely used. fetchUrl() is useful but won't serve as a replacement in all scenarios, eg more complex cases where authentication, redirection, or other curl features are required. For 'developer experience' it is awkward to keep track of which default PHP extensions are required by PHP or not. Therefore while fallbacks for all uses of curl will be in place for the next phpList release, I propose making curl required in the following months, and giving notice to phpList users that this change will take place. Hopefully this would only impact a small number of users.</p>\n<p>@bramley What's your view? </p>", "<p>@bramley Any objections to this being merged? </p>", "<p>I agree with validating that those extensions which are used unconditionally in the code are installed. This list looks ok but I don't know if there are any more.</p>", "<p>@bramley Thanks for the feedback. Yes probably there are more, and they can be added to the list as they are discovered. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/512", "title": "Public page footer Update for v3.4.0", "status": "closed", "labels": [], "priority": null, "description": ["<p>Update footer of users that upgrade from 3.4.0 to 3.4.1, to prevent having blank subscribe pages due to \"not found\" file of jQuery.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/511", "title": "Update jQuery version of default public page and other subscribe pages", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fix https://mantis.phplist.org/view.php?id=19867 </p>", ["<p>Can we add some behat checks to avoid this from happening?</p>", "<p>@suelaP will add the test in a separate PR.</p>", "<p>@xh3n1 What about renaming the jQuery files, or using a symlink, to avoid having to update these references the next time that jQuery is updated?</p>", "<p>@samtuke OK, I will rename the jQuery files to jquery.min.js and update the references, does that sound good?</p>", "<p>Yes, so long as there is still a way to identify the version. Either within the file itself (if the version is stated), or if necessary, perhaps a simple version text file stating the jquery version. </p>", "<p>Can this check and replacement also be applied to all existing subscribe pages stored in the database? That would provide a more seamless solution for users - their subscribe pages would be automatically updated to the latest jquery version, instead of them having to reset or replace them. </p>", "<p>@samtuke done, thanks. The version can be found in the filename or in browser console ( jQuery.fn.jquery)</p>", "<p>@xh3n1 That console command is useful, thanks. When you say the filename, you mean there is a duplicate copy of the library with the version in the name, or which filename?</p>", "<p>@samtuke the jQuery version itself is defined inside jquery.min.js. I didn't mean duplicated copy.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/510", "title": "Edit readme file to state other repos for phpList development copy", "status": "closed", "labels": [], "priority": null, "description": ["<p>Update the Readme file on phpList3 repo to state other repos needed in the development copy.\nMantis : https://mantis.phplist.org/view.php?id=19844</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/509", "title": "Fix system template title name ", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>System template should be checked as \"system\" by default when loaded. Fixed the title name that caused the issue.</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=19866</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/508", "title": "Check for required PHP extensions", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis , please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19837</p>", ["<p>@michield @samtuke Despite what the documentation might say, some of the php extensions are not mandatory because the code sometimes checks before trying to use it.</p>\n<p>Examples are curl and mbstring, see index.php\n```\nif (!function_exists('mb_strtolower')) {\n    function mb_strtolower($string)\n    {\n        return strtolower($string);\n    }\n}</p>\n<p>```</p>\n<p>When this change is included in a release, if someone who does not have all of these extensions upgrades then phplist is going to stop working for them. I think that any change to making extensions mandatory needs a bit more thought.</p>\n<p>Also, an earlier change added the file checkprerequisites.php explicitly for this kind of validation.</p>", "<p>@bramley \nThere are not always checks for functions before trying to use them, which leads to blank pages etc.\nFollowing your comment here, I created this PR https://github.com/phpList/phplist3/pull/513\nwhere I moved the code to checkprerequisites.php, and removed some extensions that I think are more optional( those that have if-else step around functions). </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/507", "title": "Add organisation name placeholder", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Make the organisation name accessible via [ORGANISATION_NAME] placeholder.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis , please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19804</p>", ["<p>I think this needs to use a global variable $organisation_name instead of the config table value. See this code in connect.php that sets the website, domain and organisation name when the config table values are empty.\n<code>$organisation_name = getConfig('organisation_name');\n$domain = getConfig('domain');\n$website = getConfig('website');\nif (empty($domain)) {\n    $domain = $_SERVER['SERVER_NAME'];\n}\nif (empty($website)) {\n    $website = $_SERVER['SERVER_NAME'];\n}\nif (empty($organisation_name)) {\n    $organisation_name = $_SERVER['SERVER_NAME'];\n}</code></p>", "<p>I think that it would be better to leave it blank that replace it with the installation name. \nIf I have the name of my installation \"xyznews\" I wouldn't like that my \"xyz\" company is shown with that name. </p>\n<p>I think the best approach is to replace the placeholder with a default value on template preview that shows the user that it needs to be provided. </p>\n<p>Something like [EDIT: ORGANIZATION NAME EXAMPLE]</p>", "<p>@suelaP I pushed the changes for \"preview template\" as suggested.</p>", "<p>@xh3n1 \nThis line doesn't look seem to do anything\n<code>$template = str_ireplace('[ORGANISATION_NAME]', '[ORGANISATION_NAME]', $template);</code></p>\n<p>@suelaP Also, as I mentioned before there is already a fallback for the organisation name when it is empty. \nThe organisation name is already used as a placeholder in the front-end public pages. So if you want to change the fallback to something else then it needs to be consistent.</p>\n<p><del>You might not realise but there are only a few placeholders that can be used within a template. The majority can be used only within the message content, including the organisation name.</del></p>\n<p>Sorry, ignore the last part. I was misreading some code.</p>", "<p>@bramley that line is for preview template only. When organisation name is NOT set it will display [ORGANISATION_NAME] as fallback text when you view template, as a way to tell the users about that placeholder.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/506", "title": "Shorten API calls", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Added api.php in lists which is needed to create shorters API calls.\nThe new base url will be : http://example.com/lists/api.php/\nExample: http://example.com/lists/api.php/sessions</p>\n<p>Will push changes to core repo too.\nTo do: Fix the tests. Remove  strict_types as it's not supported in old versions of PHP and add a PHP version check.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis , please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19847</p>", ["<p>@xh3n1 Could /api.php be made even shorter by changing it to /api/ using mod_rewrite?</p>", "<p>@samtuke yes, I can do so, but they would still need to use api.php if they don't have mod_rewrite enabled.</p>", "<p>@xh3n1 What's your view on that? The increase in possible URLs is undesirable, but perhaps worth it to have shorter and cleaner URLs.</p>", "<p>Done.\nChanges in phpList4: https://github.com/phpList/core/commit/5ae3882cbbb49e0d8f27edaf41864fd48cf58435\nhttps://github.com/phpList/rest-api/commit/7d2145f7f719aeaa2dc0978cb424f28a1a617210</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/505", "title": "Ambiguous date format when checking for an update", "status": "open", "labels": [], "priority": null, "description": ["<p>This code in file admin/updatelib.php added to check for an update looks to be error prone\n<code>function lastTimeCheck()\n{\n    $doCheck = false;\n    $currentTime = date('m/d/Y h:i:s', time());\n    $lastCheckTime = getConfig('lastcheckupdate');\n    $lastTimeFormattedDateTime = new DateTime($lastCheckTime);\n    $currentTimeFormattedDateTime = new DateTime($currentTime);\n    $interval = $currentTimeFormattedDateTime-&gt;diff($lastTimeFormattedDateTime);\n    $dDiff = $interval-&gt;format('%a');\n    if ($dDiff &gt;= '3') {\n        $doCheck = true;\n    }\n    return $doCheck;\n}</code>\nUsing the date format 'm/d/Y' is ambiguous,  '1/4/2019' could refer to the first of April or the fourth of January. Instead the ISO format YYYY-MM-DD HH:MM:SS should be used.</p>\n<p>Also, there is no need to do this to get the current time as a DateTime object</p>\n<pre><code>$currentTime = date('m/d/Y h:i:s', time());\n$currentTimeFormattedDateTime = new DateTime($currentTime);\n</code></pre>\n<p><code>new DateTime()</code> with no parameter defaults to the current date/time.</p>", ["<p>Not sure if there is already a mantis issue for this </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/504", "title": "/lists/admin broken on new installs", "status": "closed", "labels": [], "priority": null, "description": ["<p>I was expecting to see some type of initialization instructions.</p>\n<p><code>Database error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_config' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_admin' doesn't exist</code></p>", ["<p>Hi, can you try again on a different browser? That happens if you have already used phplist in the browser session before you reinstall. \nClosing the browser should delete the php session.</p>", "<p>confirmed.  thanks.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/503", "title": "Use the correct variable for the custom forward footer when forwarding", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>This fixes a problem when forwarding a message that has a custom forward footer. The forwarded message does not include the footer due to the code  using an incorrect/non-existent variable.\nSee https://discuss.phplist.org/t/missing-footer-when-forwarding-to-a-friend/4696/8 for the discussion.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis , please include a link to the issue here. -->\n<p><a href=\"https://mantis.phplist.org\">Mantis</a> :</p>\n<h2>Screenshots (if appropriate):</h2>\n<p>Prior to the change, the email does not have the footer\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/54498434-2ff5a980-48ff-11e9-9f7b-2bafb97e4188.png\" />\nAfter the change, the email now does include the footer\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/54498449-64696580-48ff-11e9-9878-76275768abcd.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/502", "title": "Release 3.4.0", "status": "closed", "labels": [], "priority": null, "description": ["<p>Merge release branch into master. </p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/501", "title": "Added app.php entrypoint in htaccess", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Added app.php entrypoint in FileMatch  lists </p>", ["<p>The purpose of this is to make the REST API accessible in builds of phpList 3</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/500", "title": "Label error on export subscribers was_uncofirmed ", "status": "open", "labels": ["Hacktoberfest"], "priority": null, "description": ["<p>Minor label error (i guess it does not affect data) when exporting subscribers from a list: </p>\n<p>was_uncofirmed  should be was_unconfirmed</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/745632/54388562-45b86400-469e-11e9-8935-22cf3839fcb3.png\" /></p>", ["<p>@luison Thanks for reporting this. Is there already a mantis issue for it?</p>\n<p>FYI @suelaP </p>", "<p>@suelaP ping</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/499", "title": "Replacement of jQuery-1.5.2 with jQuery 3.3.1 in /lists/js directory", "status": "closed", "labels": [], "priority": null, "description": ["<p>\\phplist-3.4.0-RC1\\public_html\\lists\\js\n- replaced jquery-1.5.2.min.js with jquery-3.3.1.min.js file</p>\n<p>\\phplist-3.4.0-RC1\\public_html\\lists\\admin\\js\n- replaced jquery-1.7.1.min.js with jquery-3.3.1.min.js file</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/498", "title": "Template changes", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19814</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/497", "title": "added jQuery-3.3.1.min.js for lists directory and jquery-ui-1.12.1.mi\u2026", "status": "closed", "labels": [], "priority": null, "description": ["<p>Added jquery-3.3.1.min.js file in lists\\js directory.</p>\n<p>Added jquery-ui-1.12.1.min.css file in lists\\admin\\css directory.</p>", ["<p>@BrunildaDosti Please can you remove the unused template items from your opening comment? </p>", "<p>@BrunildaDosti this appears to add rather than replace / update a copy of jQuery? </p>", "<blockquote>\n<p>@BrunildaDosti this appears to add rather than replace / update a copy of jQuery?</p>\n</blockquote>\n<p>Actually, the /lists directory had an old version of jQuery, so I have replaced it with the new one.\nAlso, replaced jQuery UI script with a new version of jQuery-ui for Dressprow theme.</p>", "<blockquote>\n<blockquote>\n<p>@BrunildaDosti this appears to add rather than replace / update a copy of jQuery?</p>\n</blockquote>\n<p>Actually, the /lists directory had an old version of jQuery, so I have replaced it with the new one.\nAlso, replaced jQuery UI script with a new version of jQuery-ui for Dressprow theme.</p>\n</blockquote>\n<p>But the following file still exist in this branch: <code>jquery-1.5.2.min.js</code> -- shouldn't that version of jQuery be removed if you've replaced it with the new one?</p>", "<blockquote>\n<blockquote>\n<blockquote>\n<p>@BrunildaDosti this appears to add rather than replace / update a copy of jQuery?</p>\n</blockquote>\n<p>Actually, the /lists directory had an old version of jQuery, so I have replaced it with the new one.\nAlso, replaced jQuery UI script with a new version of jQuery-ui for Dressprow theme.</p>\n</blockquote>\n<p>But the following file still exist in this branch: <code>jquery-1.5.2.min.js</code> -- shouldn't that version of jQuery be removed if you've replaced it with the new one?</p>\n</blockquote>\n<p>It is supposed to not be there as should be replaced with the new jQuery version . My mistake, sorry! I'm checking it again.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/496", "title": "Add credit and license in docblock for 3rd party email template", "status": "closed", "labels": [], "priority": null, "description": ["<h2>Description</h2>\n<p>Add license and attribution info for recently added email template</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis , please include a link to the issue here. -->\n<p><a href=\"https://mantis.phplist.org\">Mantis</a> : https://mantis.phplist.org/view.php?id=19820</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/495", "title": "Function quotes", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis , please include a link to the issue here. -->\n<p><a href=\"https://mantis.phplist.org\">Mantis</a> :</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/494", "title": "Switch to double quotes in phplistapp.js", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>@BrunildaDosti Was the change in functionality intentional? If so, please amend the PR description. If not, please create a new mantis issue and PR to address this.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/493", "title": "Save secret in db for phpList4", "status": "closed", "labels": [], "priority": null, "description": ["<h2>Description</h2>\n<p>A parameter used by the Symfony framework.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/492", "title": "Fix typo and improved wording in transactional message", "status": "closed", "labels": [], "priority": null, "description": ["<p>Minor email wording fix</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/491", "title": "Mantis 19792 - Subscriber page ignores list order if categories are used", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Ensure that lists are ordered by the list order field when displayed within categories.\nThere are also a few removals of trailing white space, which is done automatically by my editor.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis , please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19792</p>\n<h2>Screenshots (if appropriate):</h2>\n<p>The specified list order\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/53721871-2890c380-3e5c-11e9-9e25-8d748e6ade2b.png\" /></p>\n<p>Subscribe page prior to the change\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/53721793-fd0dd900-3e5b-11e9-9ad8-c8d2a44b4b5d.png\" />\nSubscribe page after the change\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/53721817-0f881280-3e5c-11e9-8f76-16ab6eaef670.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/490", "title": "Mantis 19794 - CONTACT placeholder not replaced correctly", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Remove erroneous space from the CONTACT url\nAllow lower case CONTACT placeholder to be used, similarly to other phplist placeholders.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis , please include a link to the issue here. -->\n<p>https://mantis.phplist.org/view.php?id=19794</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/489", "title": " jQuery migrate v3.3.1 for phplist3", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<!--- Please provide a general description of your changes in the Pull Request -->\n<p>Upgrade of jQuery from 1.12.1 version to version  3.3.1.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis , please include a link to the issue here. -->\n<p><a href=\"https://mantis.phplist.org\">Mantis</a> :\nhttps://mantis.phplist.org/view.php?id=19755</p>\n<h2>Screenshots (if appropriate):</h2>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/488", "title": "Introduce new notification for updates", "status": "closed", "labels": [], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Done</p>\n<ul>\n<li>[x] Introduce new notification for update, </li>\n<li>[x] Remove \"try automatic updater beta\"</li>\n<li>[x] Check for update every 3 days</li>\n<li>[x] Save check time on the first install</li>\n<li>[x] Do not show notification on Dev </li>\n<li>[x] Hide \"update now\" for disabled automatic updater. </li>\n<li>[x] Fix tests</li>\n</ul>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=19760</p>\n<p>TODO </p>\n<ul>\n<li>[x] Decide if the notification should be displayed for RCs too.</li>\n<li>[x] Remove old notification and checks.</li>\n</ul>", ["<p>@samtuke cc: @suelaP  Please let me know if the notification should be displayed for RCs too.</p>", "<p>@xh3n1 Thanks. @suelaP : over to you. </p>", "<p>I think this should be displayed for RCs too as whoever wants to test might want to see that. Other people might just ignore it. Although, I am not sure how good that will work with the check for updates every 3 days. @samtuke </p>", "<p>@suelaP For hosting services and consultants who provide phpList as a service, encouraging their users to upgrade to an unstable RC would be undesirable. As a compromise I propose having two config file settings:\n- disable auto updater (disables all notifications)\n- disable rc updates (shows only stable updates)</p>\n<p>Both would be enabled by default. A possible risk is that most admins who want to prevent RC notifications would take the more extreme approach of disabling the updater completely, which would undermine the benefit of having two options.</p>\n<p>Thoughts?</p>", "<p>I think providing options on both is the best approach, however I find the \"disabled by default\" for both quite radical. </p>\n<p>I think we can leave it disabled for RC notifications and enabled for regular updates. \n@samtuke </p>", "<p>@suelaP Sorry, the double negatives introduced confusion -- I meant that both the config options could be set such that notifications for both RCs and stable updates would be shown by default in the interface; that was the suggestion.</p>", "<p>Rerunning Travis tests to try and get to green</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/487", "title": "Add functionality to load default templates", "status": "closed", "labels": ["enhancement", "to review"], "priority": null, "description": ["<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>Users can choose from some available default templates to add by clicking the \"Add default template\" button.</p>\n<h2>Related Issue</h2>\n<p>https://mantis.phplist.org/view.php?id=19790</p>\n<p>This is a draft PR (Thanks GitHub for this new feature \ud83d\ude03 ) for @suelaP to test the functionality. \nThe current values of templates are just for testing and can be updated later from @BrunildaDosti . </p>", ["<p>https://mantis.phplist.org/view.php?id=19790</p>\n<p>Added three existing templates to phpList3(Suela suggestions and one premium template).</p>", "<p>@xh3n1 This cannot yet be merged as it's still a 'draft'</p>", "<p>@samtuke  this is not a draft anymore.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/486", "title": "Provide a simple PR template", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/485", "title": "Reorder plugins from filesystem -> move CommonPlugin to the top", "status": "closed", "labels": ["to review"], "priority": null, "description": ["<p>An issue can occur if you use the Autoresponder plugin. Php can retrieve the list of plugins in wrong order, so the Autoresponder checks for dependencies before the CommonPlugin gets loaded.\nAnd because it needs the CommonPlugin as a dependency, the Autoresponder plugin will never be enabled.</p>", ["<p>Thanks for the PR! </p>", "<p>The proper solution for the dependency issue between plugins would be the way how NPM is handling it.\nEach plugin should have an option to have a package.json file (or something similar) with names of required plugin dependencies.\nAnd before loading the plugins, the phplist would check for dependencies and first load plugins without any plugin dependencies and then load plugins with dependencies.\nAnd if it encounters any cross plugin dependency, it would mark these plugins as problematic.</p>\n<p>But of course, this is just an idea ;)</p>", "<p>Plugin dependency checks are already done when plugins are activated, and should be activated in the right order. See lines 134 of the original file.</p>\n<p>If you are seeing something different then please explain what is happening.</p>\n<p>There might still be some boundary conditions that are not handled properly, such as a new version of a plugin that has stricter requirements might still be enabled when it shouldn't be. But Common Plugin is activated before any other of the plugins developed by me, including Autoresponder.</p>", "<p>Hi Bramley, I was kinda hoping for you to get in this conversation :)</p>\n<p>I just double checked my edits, just to figure out that my Phplist needs the edit to function correctly. However, after thoroughly inspecting the said file, I found out that I am actually using a bit outdated version of the Phplist.\nIt appears that you already fixed/evaded this issue a few months ago :)\nhttps://github.com/phpList/phplist3/commit/6f3bc075e13574414f712573a4e0ce221e219fc4#diff-164abccedc5ff74a34ad10a9202e4f3c</p>\n<p>I think that this pull request can be cancelled :)</p>\n<p>Sorry for taking your time!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/484", "title": "Merge 3.3.9 release", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/483", "title": "Content max width wider screens", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19742</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/482", "title": "[Feature] link system bounces to profile", "status": "closed", "labels": ["to review"], "priority": null, "description": ["", ["<p>@suelaP I've added a check, so it now processes each bounce only once.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/481", "title": "Changed the class of Bounce Rules alert", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19734</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/480", "title": "Apply Vcard changes to  release-3.3.9 branch", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/479", "title": "Add Text placeholder for Vcard and language fixes", "status": "closed", "labels": [], "priority": null, "description": ["<ul>\n<li>Added text placeholder</li>\n<li>Use defaultfrontendtexts as default.</li>\n<li>Fixed typo</li>\n</ul>", ["<p>@suelaP Should this also be merged into the release branch? If so Xheni should create a separate PR for that. </p>", "<p>@samtuke yes that\u2019s the plan. @xh3n1 will create another PR. </p>", "<p>@samtuke @suelaP done</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/478", "title": "Correct the values for the updatepassword radio buttons.", "status": "closed", "labels": [], "priority": null, "description": ["<p>I found weird behaviour when trying to send the password reset email on the Admin page.\nThe confirmation message didn't say that the email had been sent, but after a further change to an admin field it did say that.</p>\n<p>An earlier change https://github.com/phpList/phplist3/pull/399/files#diff-151b5aaf0a8d1c46203a572c46ab3746L193 re-ordered the radio button captions from No then Yes to Yes then No but didn't modify the html attribute values, which meant elsewhere checks for Yes are being met when the No button is selected.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/477", "title": "Use global plugins and add other missing checks", "status": "closed", "labels": [], "priority": null, "description": ["<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", ["<p>@samtuke @xh3n1 Just noticed this change and wondered what the reason for it is?</p>\n<p>There is no need to test $plugins to be set or to be an array etc, as it is initialised in pluginlib.php which is included in connect.php. Those extra tests are just more \"noise\".\nUsing $GLOBALS everywhere also just leads to more noise.</p>", "<p>@bramley it was causing issues for me on some remote pages.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/476", "title": "Repeated html input fields on the Send a Campaign page", "status": "closed", "labels": [], "priority": null, "description": ["<p>When using the Firefox web console tool to see what was sent when submitting a campaign I noticed that two hidden fields were duplicated, the message id and the message status. This change removes those.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/475", "title": "Mantis 18435 - sort order on the List Campaigns page", "status": "closed", "labels": [], "priority": null, "description": ["<p>This change covers some of the points raised in the mantis issue</p>\n<ul>\n<li>display the actual sort order when the page is displayed for the first time</li>\n<li>allow each tab to have its own sort order, which is remembered throughout the session</li>\n</ul>\n<p>Also, there is some restructuring to hold all tab related fields and all sort-order related fields in structures instead of being spread throughout the code.</p>\n<p>I think that there is still a usability issue allowing sorting by a field whose value is not displayed (such as the embargo), but maybe that can be addressed separately. This change doesn't affect that.</p>", ["<p>Hi Duncan, I tested the changes with a dummy database and:</p>\n<ol>\n<li>I got a confusing  mysql-error-1064 when I got the changes but It's resolved when switching to private mode or another browser. </li>\n<li>The embargo time is displayed so, I don't think that's a usability issue but, I think it's better to use \"Embargo ascending\" instead of descending because that way the campaign expected to start processing sooner will be displayed on the top (or currently processing). That's makes it easier for the user to \"keep an eye\" on their progress.    </li>\n</ol>", "<p>Hi Suela, thanks for testing this change.\nIs the mysql error repeatable for you? I have just tested with a new database, both the existing 3.3.8 code, and the modified code and neither gave an error.</p>\n<p>I agree about the default order for the Active tab, so I will change that to be \"embargo ascending\".</p>", "<p>Hi Duncan, the error only appeared when I was testing with an existing database, after replacing the 3.3.8 code with the updated file. I just replaced the file and refreshed the window where phpList was already opened -- that's the only case when the error is replicated. </p>", "<p>@suelaP Hi Suela, with your extra information I could repeat the error. It is caused by a php session variable being changed from a string to an array by this change. That is a problem only if someone uses the List Campaigns page first, then upgrades, then views the List Campaigns page again without logging-out first.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/474", "title": "false alert about pageroot on admin page", "status": "closed", "labels": [], "priority": null, "description": ["<p>On the admin screen I see an error saying the pageroot is incorrect, and to check the config.</p>\n<p>The pageroot is \"/\", and that is correct (the address is \"https://domain.com/\")</p>\n<p>version is 3.3.8</p>", ["<p>@samtuke I think this ticket belongs in https://github.com/phpList/phplist3. Could you please transfer the issue? (I don't have the necessary permissions for this.) Thanks!</p>", "<p>@oliverklee Thanks -- done</p>", "<p>@pridetechdesignllc Thank you for reporting this. Do you know if there is already a <a href=\"http://mantis.phplist.org/\">mantis</a> issue for it?</p>", "<blockquote>\n<p>@pridetechdesignllc Thank you for reporting this. Do you know if there is already a <a href=\"http://mantis.phplist.org/\">mantis</a> issue for it?</p>\n</blockquote>\n<p>I don't know, github was the first place I checked and I thought it'd be the most appropriate place to report the issue.</p>", "<p>@pridetechdesignllc Just noticed this issue, please see this topic in the forum https://discuss.phplist.org/t/solved-pageroot-problem-after-upgrading-to-3-3-7/4817</p>\n<p>TL;DR <code>$pageroot</code> should be '', an empty string, not '/'.</p>", "<p>Resolved: https://github.com/phpList/phplist3/pull/473/</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/473", "title": "Clarify $pageroot when phplist is installed in the web root directory", "status": "closed", "labels": [], "priority": null, "description": ["<p>A previous change #443 causes a warning to be shown when phplist is installed in the web root directory and $pageroot is set to '/' instead of an empty string, ''. That has always been incorrect as it causes double '/' characters in some URLs constructed by phplist.</p>\n<p>My editor has also removed trailing spaces from some other lines.</p>", ["<p>it was my mistake with regards to the '/'.  i had previously always fresh installed within subfolders, not subdomains.  BUT, i've also successfully swapped over subfolder installs to subdomain installs, where the updated pageroot='/', without receiving an error notice.</p>\n<p>please disregard my post.  it looks like the issue is on my end, in that i must not have properly set up my 3.3.8 subdomain install.</p>\n<p><strong>thank you all for your patience, help &amp; support!!!</strong></p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/472", "title": "Msgbounces text tweaks", "status": "closed", "labels": [], "priority": null, "description": ["<p>Minor wording improvements for message bounces page</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/471", "title": "vCard feature", "status": "closed", "labels": ["enhancement", "work in progress"], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19442</p>\n<p><strong>TO DO:</strong></p>\n<ul>\n<li>[ ] Add logo property</li>\n<li>[ ] Check <a href=\"https://evertpot.com/escaping-in-vcards-and-icalendar/?fbclid=IwAR3ZNikzUE9oBfmHh7MCQCetDItQZCywtxjZbqTa27T2mkW8kqeLijRuKBI\">escaping in vCard</a> and apply required changes </li>\n<li>[ ] placeholder for text format </li>\n<li>[ ] unit tests?</li>\n</ul>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/470", "title": "Save template with the same name after edit", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fix #468 </p>", ["<p>Mantis: https://mantis.phplist.org/view.php?id=19647</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/469", "title": "Add total clicks to stats overview", "status": "closed", "labels": [], "priority": null, "description": ["<p>I will also add the info text to the help repo.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/468", "title": "Existing message templates cannot be edited anymore", "status": "closed", "labels": [], "priority": null, "description": ["<p>In 3.3.8 you integrated a check in admin/template.php if the title of a message template exists. If it exists changes in the template cannot be saved. The way this is right now noone can modify an existing template without renaming it at every little change. Does this really make sense?</p>", ["<p>@webchills  thanks for reporting it, that was not intentional and it will be fixed soon for the next release.</p>", "<p>@webchills I created the PR to fix this issue: https://github.com/phpList/phplist3/pull/470\nSorry for the inconvenience!</p>", "<p>thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/467", "title": " Use separate table columns for 'Clicks' and 'View Subscriber's clicks button'", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19705</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/466", "title": " Campaign click stats minor fixes", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fix https://mantis.phplist.org/view.php?id=19701 and https://mantis.phplist.org/view.php?id=19702</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/465", "title": "Update version to 3.3.8", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/464", "title": "show bounces to transactional messages on the profile of a subscriber\u2026", "status": "closed", "labels": ["work in progress"], "priority": null, "description": ["<p>\u2026, and add an option on the reconcile page to process that retrospectively</p>", ["<p>Hi Michiel, </p>\n<p>@michield  I have been checking these changes and whenever I click the \"Associate system bounces to subscriber profiles\" \nThe message I get on execution is: \n\"Relinking transactional messages that bounced to the related subscriber profile\n4 to process\n4 bounces have been associated with a subscriber profile\"</p>\n<p>I am unclear if it is intentional that:\n1) All bounces system messages are processed in each run?\n2) The date of the bounce on subscribers profile is updated to the last time that button was used. </p>\n<p>If yes, wouldn't that be a problem when the number of those bounces is high?</p>", "<p>Yes, very good point. I will update it to only process the ones that have not been associated yet. </p>", "<p>@michield this might be considered too: https://mantis.phplist.org/view.php?id=19731</p>", "<p>Ok, funny one. I was trying to play with rebasing from master, but instead all commits to master have been pulled into this PR. </p>\n<p>I'll continue to work on it, but before merging I'll redo it the Github way. </p>", "<p>Ctd on #482 </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/463", "title": "Mantis 19611 - some dates have month in English", "status": "closed", "labels": [], "priority": null, "description": ["<p>Most dates are formatted in php, which allows translation of the month name. This PR fixes a few dates that were formatted in sql.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/462", "title": "Change the number of \"recently visited\" pages from 6 to 3", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19667</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/461", "title": "Show error message if the template title exists", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19647</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/460", "title": "Remote processing validation", "status": "closed", "labels": [], "priority": null, "description": ["<p>As discussed in #440 the validation of the remote processing secret is duplicated. This PR has four parts</p>\n<ul>\n<li>removes the validation from processbounces</li>\n<li>removes the validation from processqueue</li>\n<li>allows remote processing for processbounces when MANUALLY_PROCESS_BOUNCES is set to false (which makes it similar to processqueue and MANUALLY_PROCESS_QUEUE). The benefit is that process bounces is removed from the admin interface.</li>\n<li>makes the output of processbounces with remote processing simpler by outputting only text, not html. So the output is then similar to that for command line.</li>\n</ul>\n<p>I have tested these changes using remote processing, but not with processing the queue by the phplist hosted service. That doesn't appear to be running or at least is not responding to my account.</p>", ["<p>Which Hosted account did you test on? I'll check that it's still enabled.</p>", "<p>The account is on phplist.com and gives access to the remote queue processing</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/50653146-7aae8900-0f80-11e9-8f40-3356331b1353.png\" />\nI guess that you can find the account by looking up my name.</p>\n<p>In my phplist, processing the queue is being done through the phplist.com service\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/50653230-b77a8000-0f80-11e9-987c-afe66df99d47.png\" /></p>\n<p>The campaign was submitted but nothing happened after that. I tried suspending and resubmitting it but that didn't have any effect.</p>", "<p>the remote processqueue system had stopped working. I have re-enabled it on a different server. </p>", "<p>Thanks. I have now tested this change when processqueue is initiated by phplist.com. The campaign was sent successfully.</p>", "<p>Ok, this PR tidies up the code a little, so will merge. Then we can also review that it continues to work once this has gone out to a version. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/459", "title": "List-ID?", "status": "closed", "labels": [], "priority": null, "description": ["<p>Is the list-ID support planned? \nhttps://tools.ietf.org/html/rfc2919\nSome services (https://yandex.com/support/postoffice/advices.html) use it for statistics.</p>", ["<p>Thanks for the suggestion - no it's not currently planned, though it could be easily added. </p>\n<p>Isn't that header intended for use with many-to-many mailing list systems like mailman, rather than for one-to-many newsletter and marketing systems like phpList?</p>\n<p>What would be the benefit for phpList users? </p>", "<p>@Maasik We're still keen to hear you're views on this</p>", "<p>This issue seems to have been abandoned in a long time and there is no progress. For future proposals/questions I would recommend the <a href=\"https://discuss.phplist.org/\">community forum</a> or <a href=\"https://mantis.phplist.org/my_view_page.php\">Mantis, the phpList bug tracker</a>.</p>\n<p>Closing this. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/458", "title": "Fix config menu test", "status": "closed", "labels": [], "priority": null, "description": ["<p>Please see:\nhttps://github.com/phpList/phplist-ui-bootlist/pull/79\nThe PR on bootlist is required to be merged first.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/457", "title": "Add option to disable the automatic updater", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19654</p>", ["<p>@samtuke added the entry for documentation.</p>", "<p>Where might the logic for those checks go? Users should to be prompted to fix permissions in order to be able to upgrade. </p>", "<p>I think this PR is good to go, The files permission check is done on the updater and the update cannot continue without users fixing the permission of displayed files. After that they do that, they can try again.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/456", "title": "Mantis 19347 - command line signature is displayed twice", "status": "closed", "labels": [], "priority": null, "description": ["<p>Output the command line signature in only one place in index.php, allowing all other calls to ClineSignature() to be removed</p>\n<p>```\nbefore for page initlanguages\n======\nphpList - phpList version 3.3.7 (c) 2000-2018 phpList Ltd, https://www.phplist.com</p>\n<p>Try automatic updater here (beta)\nphpList version 3.3.7 (c) 2000-2018 phpList Ltd, https://www.phplist.comphpList - pt\nphpList - Up to date\nphpList - de\nphpList - Up to date</p>\n<h1>after</h1>\n<p>phpList - phpList version 3.3.7-dev (c) 2000-2018 phpList Ltd, https://www.phplist.com</p>\n<p>Running DEV version, but developer email is not set\nphpList - pt\nphpList - Up to date\nphpList - de\nphpList - Up to date</p>\n<p>```</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/455", "title": "Made dev notification translatable", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/454", "title": "Emails aren't being received (sent successfully from phpList)", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hello everybody,</p>\n<p>We did setup phpList successfully on our server and configured the mail server information into it. We are able to send campaigns successfully as it shows in phpList.</p>\n<p>The only problem, we aren't receiving any of the emails as we have inserted them among the public list we are sending to.</p>\n<p>The campaign stats shows that few people are actually opening the newsletter but a very low rate ( around 1.5% of more than 2000 contacts)</p>\n<p>We have monitored the log in hMail server during the sending process and it shows that all the emails are processed successfully (only yahoo addresses are stuck for some reason but that is another issue)</p>\n<p>How we can track what's going wrong exactly?</p>\n<p>Appreciate your help!</p>\n<p>Thanks</p>", ["<p>@developar That sounds like a great question for the phpList Forum: http://discuss.phplist.org/</p>\n<p>Short answer: deliverability is very hard, and probably the reputation of your IP or the message content is resulting in messages going to spam or being silently discarded by the large inbox providers.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/453", "title": "Release 3.3.7", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/452", "title": "Add info window for trying the automatic updater", "status": "closed", "labels": [], "priority": null, "description": ["<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/451", "title": "Update menu and redirect", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/450", "title": "Paying for credits with cryptocurrencies", "status": "closed", "labels": [], "priority": null, "description": ["<p>For phpList web version I would propose to also have the possibility to pay for credits using one or more cryptocurrencies. Just an idea. </p>", ["<p>Same as the previous issues, there is no activity here for a long time now. For future proposals I would recommend the <a href=\"https://discuss.phplist.org/\">community forum</a> or <a href=\"https://mantis.phplist.org/my_view_page.php\">Mantis, the phpList bug tracker</a></p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/449", "title": "Issue warning for $pageroot only when not command line.", "status": "closed", "labels": [], "priority": null, "description": ["<p>The earlier pull request https://github.com/phpList/phplist3/pull/443 doesn't work properly when phplist is run from the command line. The warning is always issued because REQUEST_URI does not exist.</p>\n<p>This change is to test $pageroot only when phplist is not run from the command line.</p>", ["<p>That would be more consistent with the rest of the file.</p>", "<p>I just ran into this error again.  I was installing a fresh install into a sub-domain.  </p>\n<p>i set this:\n$pageroot = '/';</p>\n<p>and this, hoping it might help:\ndefine('HTTP_HOST','lists.#####.com');</p>\n<p>i haven't found a way to have the error message go away before install... but then, after install... i noticed that it contained \".com//?\" on the settings page.  error went away after I removed the / in pageroot.</p>\n<p>updated to:\n$pageroot = '';</p>\n<p>also, this line should probably be cleaned up.  looks like what should be 2 lines bumped together, onto 1 line: \n<code>**The</code> pageroot in your config does not match the current locationCheck your config file.**`</p>\n<p><img alt=\"screenshot 2019-01-20 16 34 04\" src=\"https://user-images.githubusercontent.com/6146508/51445505-da709800-1cd3-11e9-8a45-0a125ccc14d7.jpg\" /></p>", "<blockquote>\n<p>updated to:\n$pageroot = '';</p>\n</blockquote>\n<p>Yes that is correct, your original value of '/' is not correct. Please see this topic on the forum https://discuss.phplist.org/t/solved-pageroot-problem-after-upgrading-to-3-3-7/4817</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/448", "title": "When editing a subscribe page display the plugin section at the end", "status": "closed", "labels": [], "priority": null, "description": ["<p>An earlier change https://github.com/phpList/phplist3/pull/348 didn't include the sections for plugins, which are now displayed before other sections.\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/49221320-ae6e2000-f3d0-11e8-95ac-2a3826b8774a.png\" />\nThis change is to display any plugin sections at the end.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/447", "title": "Avoid php notice re undefined index", "status": "closed", "labels": [], "priority": null, "description": ["<p>Avoid php notice re undefined index when sending is blocked by a plugin</p>\n<p><code>[Wed Nov 28 12:39:35.992842 2018] [php7:notice] [pid 2323] [client 127.0.0.1:45052] PHP Notice:  Undefined index: send blocked by Segmentation in /home/duncan/Development/GitHub/phplist3/public_html/lists/admin/actions/processqueue.php on line 1060</code></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/446", "title": "Avoid php notice when converting php memory limit", "status": "closed", "labels": [], "priority": null, "description": ["<p>Convert only the numeric part of the php memory limit to avoid php issuing a notice </p>\n<p><code>PHP Notice:  A non well formed numeric value encountered in /home/duncan/Development/GitHub/phplist3/public_html/lists/admin/connect.php on line 1514, referer: http://strontian/lists/?p=forward&amp;mid=103&amp;uid=1bbf5b37bbb1df69698c4b89e1429474</code></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/445", "title": "Ajax fail do500", "status": "closed", "labels": [], "priority": null, "description": ["<p>added a call to explicitly set the http response code to 500 per my previous PR:</p>\n<ul>\n<li>https://github.com/phpList/phplist3/pull/432</li>\n</ul>", ["<p>ugh, can someone explain to me why this PR has commits from my other PR in it? I intentionally put them in distinct branches to prevent this :(</p>\n<ul>\n<li>https://github.com/phpList/phplist3/pull/444</li>\n</ul>\n<p>Distinct branches:</p>\n<ul>\n<li>https://github.com/maltfield/phplist3/tree/hackAttemptFix</li>\n<li>https://github.com/maltfield/phplist3/tree/ajaxFailDo500</li>\n</ul>", "<p>Does this change do what you intend, or at least are you sure that it does something different to before the change? \nWhen an exception is thrown the immediately following code will not be executed. If you want to explicitly return a 500 status code then you don't want to throw an exception, which I think was the gist of my comment on the previous change.</p>", "<p>@bramley good point. I changed the exception to error_log() in this commit to the branch corresponding to this PR, but it looks like that didn't update this PR.</p>\n<ul>\n<li>https://github.com/maltfield/phplist3/commit/5f5274dc704524bc7d3afd6b4d2d2d16dee294f8</li>\n</ul>\n<p>How do I update this PR to include the above commit?</p>", "<p>@maltfield try doing git reset or creating a new PR and cherry pick the commit that you want.</p>", "<p>@maltfield git cherry pick also allows you to pick a range or commits -- it's great that way. Extricating the commits you want should only take a few git commands to do.</p>", "<p>@maltfield Anything I can do to help you here? :) </p>", "<p>It would be good to get this merged before branches diverge further</p>", "<p>Sorry, I feel like a total git, but I have no idea how to do this. Why would my PR include multiple branches? Shouldn't the commits between branches be isolated? I thought that was the point of branches..</p>\n<p>Here is my change</p>\n<p>```\nuser@personal:~/sandbox/phplist3$ grep -C10 \"FAIL\" public_html/lists/index.php \n                    if (empty($confirmation)) {\n                        echo 'OK';\n                    } else {\n                        echo $confirmation;\n                    }\n                    exit;\n                } else {\n                    // we failed to subscribe the user; send an error back to\n                    // the ajax client</p>\n<pre><code>                echo 'FAIL';\n\n                // log an error and set the http status code to a 500\n                // Internal Server Error, easily caught by jquery.ajax()\n                error_log( \"Error: Subscribe attempt failed!\" );\n                http_response_code( 500 );\n\n            }\n            break;\n        case 'preferences':\n            if (!isset($_GET['id']) || !$_GET['id']) {\n</code></pre>\n<p>user@personal:~/sandbox/phplist3$ \n```</p>\n<p>It looks like it comes from commit = 5f5274dc704524bc7d3afd6b4d2d2d16dee294f8 = https://github.com/phpList/phplist3/pull/445/commits/5f5274dc704524bc7d3afd6b4d2d2d16dee294f8</p>\n<p>I tried to cherry pick it, but it says there's no changes to commit..</p>\n<p>```\nuser@personal:~/sandbox/phplist3$ git cherry-pick 5f5274dc704524bc7d3afd6b4d2d2d16dee294f8\nOn branch ajaxFailDo500\nYou are currently cherry-picking commit 5f5274dc.</p>\n<p>nothing to commit, working tree clean\nThe previous cherry-pick is now empty, possibly due to conflict resolution.\nIf you wish to commit it anyway, use:</p>\n<pre><code>git commit --allow-empty\n</code></pre>\n<p>Otherwise, please use 'git reset'\nuser@personal:~/sandbox/phplist3$ \n```</p>\n<p>What do you need me to do here?</p>", "<p>This is now done here https://github.com/phpList/phplist3/commit/68a37581c0ae119b18e41a3f6dfbb3eb2a37ae9c</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/444", "title": "added better logging when 'hack attempt is encountered', and fixed a \u2026", "status": "open", "labels": ["to review"], "priority": null, "description": ["<p>\u2026logic bug that resulted in a false-positive of the \"hack attempt\" exit when a phplist subscribe page had 0 lists selected. For more info, see:</p>\n<ul>\n<li>https://discuss.phplist.org/t/purpose-of-hack-attempt-exit-in-subscribelib2-php/4578/</li>\n</ul>", ["<p>The case that needs to be handled is when $GLOBALS['pagedata']['lists'] is an empty string, because explode() on an empty string gives an unwanted empty array entry.</p>\n<p>I think that it is quite ok to assume that $GLOBALS['pagedata']['lists'] is correctly formatted so there won't otherwise be any empty entries.</p>", "<p>@xh3n1 Did you already review this? </p>", "<p>@suelaP Seems like this is still in need of review and implementation of @bramley 's suggestions</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/443", "title": "Warning not issued for incorrect $pageroot", "status": "closed", "labels": [], "priority": null, "description": ["<p>Correct the test to issue warning for incorrect $pageroot.</p>\n<p>The warning is now displayed when the current request does not begin with $pageroot followed by '/admin'. For example $pageroot has default value of '/lists' but phplist has been installed in '/newsletter'.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/442", "title": "Plugin remote pages", "status": "closed", "labels": [], "priority": null, "description": ["<p>Allow a plugin to have pages that can be accessed using the remote processing secret.</p>\n<p>1) Add an array of remote pages to the default plugin.\n2) Test that when the secret parameter is provided and the current page is for a plugin that the page is in the array of remote pages provided by the plugin.\n3) set $inRemoteCall accordingly</p>", ["<p>What kind of thing would you want to use this for? This functionality is for phplist.com to process bounces and the queue, when you register there. We would have to add something else to this service. Unless you plan to invoke it from elsewhere?</p>", "<p>I remember when this was introduced one reason was to stop people including an admin user and password in the URL.  That was usually  done because of a hosting limitation on a cron job to only fetching a URL. So some people have been using this functionality separately to the phplist hosted remote queue processing.</p>\n<p>The idea here is to allow someone with a restricted cron function to be able to run, say, the RSS Feed Plugin get page, through a cron job in their own hosting account, not phplist hosted. </p>\n<p>There is no real change to the plugin code to allow that, apart from making the page available as a remote page.</p>", "<p>Ah, yes, you're right. Now I remember. When people can create crons that can curl/wget something, but not run a commandline. I wonder if that needs a bit more documentation. It's also a terribly convoluted way to handle this. The main problem with this is when/if this opens attack vectors. </p>", "<p>@samtuke @xh3n1  it will be good to add some tests for this</p>", "<blockquote>\n<p>I wonder if that needs a bit more documentation.</p>\n</blockquote>\n<p>There is this page but it is a bit hard to find https://resources.phplist.com/system/remote_processing</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/441", "title": "Two factor authentication", "status": "closed", "labels": [], "priority": null, "description": ["<p>I was trying to find if accounts in the web version offer 2FA as a feature, but didn't find it. If this is not available would be a much needed feature in my opinion that would further enhance the security of the accounts. </p>", ["<p>@rskikuli Can you speak a little more about why this is a top priority for you? Would it differentiate against other email marketing platforms? Do you have particular concerns about authentication security with phpList?</p>", "<p>In my perspective it is more a security feature than a marketing feature. Every phpList account hosts some data including emails and in some cases, depending on the account, names of the persons registered to a list. Having 2FA lowers the risk of exposing the data to people that crack a certain phpList account and keeps user accounts more secure.</p>", "<p>Perhaps an efficient way to introduce this would be to add support for SSO via OAuth, so that you can login using an auth provider like Twitter that already supports 2FA via SMS or other channels.</p>", "<p>I'm in favor of oAuth supprt. If Google oAuth was a feature, that'd potentially make it SO much easier for folks to properly integrate their gsuite email accounts for sending (and Gmail). </p>\n<p>When I introduce clients to phplist, logging in for the first time is actually the issue that I deal with the most. Seems silly to me, but they're familiar with process associated with the big names. </p>\n<p>Step 1 being that they actually signed up, and are expecting a confirmation email. Unlike in phplist, where they're invited on and seem to easily overlook the confirmation. </p>\n<p>Cheers,\nShannon</p>\n<blockquote>\n<p>On Dec 1, 2018, at 7:06 AM, Sam Tuke <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;\">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>\n<p>Perhaps an efficient way to introduce this would be to add support for SSO via OAuth, so that you can login using an auth provider like Twitter that already supports 2FA via SMS or other channels.</p>\n<p>\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub, or mute the thread.</p>\n</blockquote>", "<p>@splaquet Very interesting, thanks. </p>\n<p>Are referring to new account registrations on phpList.com, or subscriber signups using self hosted subscribe pages? </p>", "<p>Self hosted.  To be honest, I don\u2019t have any experience  with using phplist.com <a href=\"http://phplist.com/\">http://phplist.com/</a>.  I\u2019ve only ever used self hosted phplist installs.</p>", "<p>Third party sign up also works @samtuke , but as a short and/or mid term solution. For a long term approach I would definitely go for your own 2FA and even make it mandatory since the trend on web security seems to go that way nowadays for both web and self-hosted phpList platforms. </p>", "<p>Two-factor authentication is a very interesting feature proposal. This issue has no activity since last year. \nFor future proposals I would recommend the <a href=\"https://discuss.phplist.org/\">community forum</a> or <a href=\"https://mantis.phplist.org/my_view_page.php\">Mantis, the phpList bug tracker</a>. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/440", "title": "Testing the remote processing secret appears to be duplicated", "status": "closed", "labels": [], "priority": null, "description": ["<p>I'm looking at allowing a plugin to have pages accessed using the remote processing secret, similar to processqueue and processbounces. The test for using the secret parameter is in admin/index.php\n<code>} elseif (!empty($_GET['secret']) &amp;&amp; ($_GET['page'] == 'processbounces' || $_GET['page'] == 'processqueue' || $_GET['page'] == 'processcron')) {\n        //# remote processing call\n        $ourSecret = getConfig('remote_processing_secret');\n        if ($ourSecret != $_GET['secret']) {\n            @ob_end_clean();\n            echo 'Error'.': '.s('Incorrect processing secret');\n            exit;\n        }</code></p>\n<p>but admin/actions/processqueue.php and admin/processbounces then repeat the test for the secret parameter e.g.\n```\nif (isset($_GET['secret'])) {\n    $ourSecret = getConfig('remote_processing_secret');\n    if ($ourSecret != $_GET['secret']) {\n        echo Error(s('Incorrect processing secret'));</p>\n<pre><code>    return;\n</code></pre>\n<p>```\n@michield  Is this just unnecessary duplication or is there some way that the test in index.php can be bypassed?</p>", ["<p>I think that's duplication. Everything runs via index.php</p>", "<p>Thanks, I have just submitted a pull request to allow this.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/439", "title": "Warning about incorrect $pageroot is never displayed", "status": "closed", "labels": [], "priority": null, "description": ["<p>This warning in admin/index.php that the current url does not match the config variable $pageroot is never displayed because the regex never matches.</p>\n<p><code>$this_doc = getenv('REQUEST_URI');\nif (preg_match('#(.*?)/admin?$#i', $this_doc, $regs)) {\n    $check_pageroot = $pageroot;\n    $check_pageroot = preg_replace('#/$#', '', $check_pageroot);\n    if ($check_pageroot != $regs[1] &amp;&amp; WARN_ABOUT_PHP_SETTINGS) {\n        Warn($GLOBALS['I18N']-&gt;get('The pageroot in your config does not match the current locationCheck your config file.'));\n    }\n}</code>\nI don't understand what the '?$' in the regex is trying to match, because REQUEST_URI will be something like  <code>/lists/admin/?page=home&amp;tk=23ccf910178a19b3cd0f53fd73250df1</code> or the simplest <code>/lists/admin/</code>. I'm don't know whether the URL will always end in '/' prior to the query string.</p>\n<p>So far as I can see this has not changed since the phplist code moved to GitHub.</p>", ["<p>It might be simpler to just verify that the current url begins with <code>$pageroot . '/admin'</code></p>\n<p>```\nif (WARN_ABOUT_PHP_SETTINGS) {\n    if (strpos(getenv('REQUEST_URI'), $pageroot.'/admin') !== 0) {\n        Warn($GLOBALS['I18N']-&gt;get('The pageroot in your config does not match the current locationCheck your config file.'));\n    }\n}</p>\n<p>```</p>", "<p>See https://github.com/phpList/phplist3/pull/443</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/438", "title": "Fix \"clicked\" on  \"Campaign statistics\" page to show total clicks ", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fix https://mantis.phplist.org/view.php?id=19268</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/437", "title": "If plugins dir not writable, Manage Plugins should still show plugin list", "status": "closed", "labels": [], "priority": null, "description": ["<p>If plugins dir not writable, the Manage Plugins page shows</p>\n<blockquote>\n<p>The plugin root directory is not writable, please install plugins manually</p>\n</blockquote>\n<p>It should still show the list of plugins because you might want to:</p>\n<ul>\n<li>See what plugins are installed; or</li>\n<li>Enable/disable plugins</li>\n</ul>\n<p>I think it worked this way <strong>before</strong> v3.3.5; have not tested 3.3.6.</p>", ["<p>@mwithheld &gt; The plugin root directory is not writable, please install plugins manually</p>\n<p>Only the input field to enter a plugin install URL should not be displayed.\nThe page should then display the installed plugins.  Possibly something is failing and the complete page is not being displayed.</p>", "<p>Can this issue be closed, or should it be opened on Mantis?</p>", "<p>I can not replicate this issue on 3.3.9 with /plugins set to 755 so I will close this. \n<img alt=\"image_2019-02-20_18-40-29\" src=\"https://user-images.githubusercontent.com/22301998/53112298-33378880-353f-11e9-9dc7-6d18d1aaa7f3.png\" /></p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/436", "title": "Mantis 19555 - URL is truncated when click tracking is enabled", "status": "closed", "labels": [], "priority": null, "description": ["<p>Ensure matching delimiter when processing href attribute in three places</p>\n<ul>\n<li>finding links in an html format message for click tracking</li>\n<li>finding links to add google tracking</li>\n<li>converting an html format message to plain text</li>\n</ul>", ["<p>Interesting. These regexes are hard to read, but you're saying that sometimes there may be a \" inside a '-quoted href or the other way around, so that would match it badly?</p>\n<p>Have you run tests on this? This seems a very unit-testable bit of code.</p>", "<p>I can add some details about what has been tested tomorrow but here is how the problem manifests itself. Using the original URL in this link\n<code>&lt;a href=\"https://www.google.com/maps/place/Jack+Astor's+Bar+%26+Grill/@43.7345959,-79.3460459,17z/data=!3m2!4b1!5s0x89d4cd7216df3c6d:0xb43516d71ae89300!4m5!3m4!1s0x89d4cd717b796be3:0x54b68eeb1833e8b4!8m2!3d43.7345959!4d-79.3438572\"&gt;link&lt;/a&gt;</code></p>\n<p>the URL in linktrack_forward is truncated at the single quote\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/48448731-de45e280-e797-11e8-99b3-b7ff3d6ec89e.png\" /></p>\n<p>and the link in the resultant email is badly formed. Note that the part of the original URL after the single quote is left in the link\n<code>&lt;a href=\"https://www.dcameron.me.uk/lists/lt.php?tid=f0sGXVRUAQABCB9TBwcATlZTCFdPCAQFVxhSUQALB1lSUVAKB1xFU1UAC1UEAAhOBFBbBE8EDAdSGFUNCApOUwYECA4EBwxUAwBUSlBQCVtSVQ0ETwhUAFcYAAUGCk5ZBVMBFQYAXVJSWwQOUwoIAA\" s+Bar+%26+Grill/@43.7345959,-79.3460459,17z/data=!3m2!4b1!5s0x89d4cd7216df3c6d:0xb43516d71ae89300!4m5!3m4!1s0x89d4cd717b796be3:0x54b68eeb1833e8b4!8m2!3d43.7345959!4d-79.3438572\"&gt;link&lt;/a&gt;</code></p>\n<p>With the code change, the full URL is stored in the linktrack_forward table.\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/48449221-94f69280-e799-11e8-9146-75b223901249.png\" /></p>", "<p>That's good enough evidence for me :-)</p>\n<p>might be interesting to tell Jack we squashed a bug because of his apostrophe ... </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/435", "title": "Display error message for email validation as an action result", "status": "open", "labels": ["to review"], "priority": null, "description": ["", ["<p>@suelaP Thanks, that's what I also thought.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/434", "title": "Mantis 19542 - Allow import of attribute value that includes a field separator", "status": "closed", "labels": [], "priority": null, "description": ["<p>The current processing strips any double-quotes then splits on the field separator.</p>\n<p>The str_getcsv() function recognises fields wrapped in double quotes and allows the field separator to appear in the field value.</p>", ["<p>nice one</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/433", "title": "Add info icon on list organisation settings", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19484</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/432", "title": "return error code on FAIL in ajax subscribe", "status": "closed", "labels": [], "priority": null, "description": ["<p>See bug report (quoted below link)</p>\n<ul>\n<li>https://mantis.phplist.org/view.php?id=19524</li>\n</ul>\n<blockquote>\n<p>This is apparently a long-standing issue with the community-recommended way for users to be able to add subscribers to phplist from an external domain using ajax in phplist3 as described in this thread:</p>\n<ul>\n<li>https://discuss.phplist.org/t/ajax-subscribe-api/974</li>\n</ul>\n<p>The code in the zip file attached to the above thread uses jquery's ajax function, and it defines a function success() that's triggered when the ajax call succeeds and a error() function that's triggered when the ajax call failed. The problem is: phplist merely prints \"FAIL\" in the response when the subscribe attempt fails, but the status code remains a 200.</p>\n<p>IMHO, the ajax form should not have to search for the string \"FAIL\" in the response in order to detect a failure. Instead, it should check the status code of the HTTP response from the server. This can be achieved, for example, by throwing an exception in PHP--which will make PHP return a 500 Internal Server Error.</p>\n<p>Here is the relevant code for handling ajax subscription queries on phplist's side:</p>\n<ul>\n<li>https://github.com/phpList/phplist3/blob/7ec8ab78f215894c29da8e54ff9d7c41ffde64c6/public_html/lists/index.php#L242-L272</li>\n</ul>\n<p>My recommendation is to add the line:</p>\n<pre><code>throw new Exception( \"Error: Subscribe attempt failed!\" );\n</code></pre>\n<p>after the \"echo 'FAIL';\" line here:</p>\n<ul>\n<li>https://github.com/phpList/phplist3/blob/7ec8ab78f215894c29da8e54ff9d7c41ffde64c6/public_html/lists/index.php#L270</li>\n</ul>\n</blockquote>", ["<p>@maltfield Thanks for the PR :+1: </p>", "<p>:+1: </p>", "<p>This change doesn't appear to have the expected outcome, causing a 500 error to be returned. </p>\n<p><code>throw new Exception( \"Error: Subscribe attempt failed!\" );</code></p>\n<p>In my test the status was still 200. \n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/47970646-51f13c80-e080-11e8-8be8-5cd80e37cdf6.png\" />\nThe web server is running LiteSpeed, so whether an unhandled php exception causes a server error might be dependent on the environment. The usual way of returning a specific status code though is the header() function.\nBut returning 500 for the case of someone already subscribed seems a bit excessive.</p>\n<p>A better solution would be to have a configurable message that is returned, similar to that for a successful request\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/47970675-ba401e00-e080-11e8-9215-52ca8c07599d.png\" />\nThen the client doesn't need to know whether the subscription was successful or not. It just displays the returned text.</p>", "<p>@bramley thanks for the testing &amp; feedback! For us, this definitely returns 500 on our setup with an apache backend. I wonder if the difference in your environment is your php config or web server (LiteSpeed)?</p>\n<p>I thought about setting the header--which would be the most exact way to achieve this desired result (and I do believe it's a must that the return code to be non-200 on error), but I intentionally avoided that solution since--iirc--calling header() must be done before any output is sent, and could therefore break things either as they are now or in the future.</p>", "<p>@bramley did you test this in dev or production? Try setting display_errors to 0 in your php config and see if it's still returning a 200. Production, of course, should have display_errors set to off.</p>\n<p>Per https://www.reddit.com/r/PHP/comments/4iubg1/why_doesnt_php_send_a_500_status_code_if_an/</p>", "<p>Another possible option would be to use http_response_code(), which--at least from the documentation--looks like it might not have the same \"must call before output\" limitations as header()</p>\n<ul>\n<li>https://secure.php.net/manual/en/function.http-response-code.php</li>\n</ul>", "<p>The site is shared hosting so is quite restricted in changing the php configuration, but display_errors is off.</p>\n<p>phplist starts output buffering at the start of index.php, so header() would be ok (which is how I tested it previously when the exception did not have the desired effect) but http_response_code() should be ok too.</p>", "<p>Yes, it should be ok to use header()</p>", "<p>@bramley I reorganized my sandbox and created a new PR using http_response_code(). Please verify that it does return a 500 for you.</p>\n<ul>\n<li>https://github.com/phpList/phplist3/pull/432</li>\n</ul>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/431", "title": "Check if domain is set for terms of service", "status": "closed", "labels": [], "priority": null, "description": ["<p>As discussed here https://github.com/phpList/phplist3/pull/301\nAlso made an improvement regarding getNewAttributeTablename. </p>", ["<p>Please can you remind us of the purpose of this PR (which discussion within #301 is referred to)?</p>", "<p>@samtuke Since we use the domain placeholder for the terms of service, I added a check if it is set or not, and if it is not set, the \"domain\" placeholder will be replaced with \"our website\" text as fallback.</p>", "<p>@xh3n1 Thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/430", "title": "Better warning message for bounce that doesn't longer exist", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/429", "title": "Add code of conduct ", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19417</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/428", "title": "Newsletter registration page: improvements proposals ", "status": "closed", "labels": [], "priority": null, "description": ["<p>I would like to propose some improvements on the user registration page. As an example that might help the case here is the link of a page I'm trying to customize: https://collective68.hosted.phplist.com/lists/?p=subscribe&amp;id=2. Here are the proposals for the web version:</p>\n<ul>\n<li><strong>background image:</strong> this would add more branding at the page and make it more pleasant. At a technical level I would avoid adding background image at the form.</li>\n<li><strong>adding a logo</strong>: this is quite important in my opinion especially on the header;</li>\n<li><strong>change of fonts</strong>: not sure if this can be implemented at the web version, but would be cool. Maybe using <a href=\"https://fonts.google.com/\">Google Fonts</a> api can be a solution, although I'm not sure what happens in terms of privacy;</li>\n<li><strong>basic analytics</strong>: If people are having a marketing campaign and using the registration page as a landing page of the campaign would be very useful to know the number of unique visitors and total visitors of this page. This data will help users optimize their campaigns and improve their page;</li>\n<li><strong>registration page URL</strong>: in my case the registration page is https://collective68.hosted.phplist.com/lists/?p=subscribe&amp;id=2. It would be more user friendly in my opinion if the URL is shorter. </li>\n</ul>\n<p>The changes above would make the registration process more attractive and also add more branding to the page. I would propose that these changes are active for the accounts that have credits adding more value to this category of phpList customers/partners. \nps: not sure if this is connected o #320, I'm referring to the web version of the software. </p>", ["<p>@rskikuli Great suggestions, thanks!</p>\n<ul>\n<li>background image: where would the image be displayed? Behind the panel div? If not in the form, then where?</li>\n<li>adding a logo: that is already a feature request here that can be prioritised: https://mantis.phplist.org/view.php?id=18791</li>\n<li>change of fonts: Interesting; where would the font be selected? That would need an interface of some kind. Would it be a config option for individual subscribe pages? Would only one font be used for all text on the page?</li>\n<li>basic analytics: great idea and agreed. It may be straightforward to add a field that allows the admin to paste tracking code that is added to the end of the page. Did you already try including this? Or you would rather allow only GA and request only the tracking ID instead?</li>\n<li>registration page URL: would e.g.  https://collective68.hosted.phplist.com/lists/?p=s&amp;id=2 or https://collective68.hosted.phplist.com/lists/s/2 be a sufficient improvement? Or you mean shortcode URLs? </li>\n</ul>", "<p>Thanks for the fast response @samtuke .My comments below:</p>\n<ul>\n<li><strong>background image:</strong> I'll try to work on a preview design proposal with @kristicunga. Hopefully this will make it clear. </li>\n<li><strong>adding a log:</strong> would be great if this moves forward somehow. Not sure if I can contribute at a technical level. </li>\n<li><strong>change of fonts:</strong> I would propose to use only one font selection for the subscription page and ideally at the automated email messages mainly due to the fact that it seems easier to implement technically at the first stage. </li>\n<li><strong>basic analytics:</strong> I did not try to add any analytics due to the fact that I don't know how to manage and I'm not aware of any analytics other than GA that as you know is not a floss solution. </li>\n<li><strong>registration page URL:</strong> yes this seems a much better URL https://collective68.hosted.phplist.com/lists/s/2. Although short URLs are cool and look good I would make life more complicated at a technical level.  </li>\n</ul>", "<p>Hi Sam, Kristi here, designer at Collective68</p>\n<p><a href=\"https://www.figma.com/file/STrGAI9FiaPgclM7RshM4t1A/phpList-registration-page---C68?node-id=0%3A1\">Here</a> is the link for the proposal of the design for the subscription page. </p>\n<p><strong>Design</strong> </p>\n<p>The design is basically quite similar the the one you have already with improvements. We had several internal discussions about a background image and agreed that this element would make things more complicated with results varying from sleek images from <em>unsplash.com</em> to a rebirth of Myspace custom pages.  It could also have consequences to page loading times. In a few words we skipped it. </p>\n<p><strong>Fonts</strong></p>\n<p>In this particular design we have used Raleway (Regular, Bold and Light) as the main font, but it would be cool if users can choose among 10 - 15 different open source licensed fonts. </p>\n<p><strong>Customization</strong></p>\n<p>Below are the elements that would add more value to the page if users could customize them in my opinion:\n    - fonts (choosing from a selection of fonts) \n    - colors for the header (HEX code)\n    - company/institution logo or just text (png) \n    - links color (HEX code)\n    - text color (HEX code)</p>\n<p>Elements with HEX code could also be a selection of predefined color palette. </p>\n<p>Hope you like it and that is is something that helps other users!</p>\n<p><img alt=\"c68 - phplist - newsletter registration proposal - laptop - frontal\" src=\"https://user-images.githubusercontent.com/40668901/48775500-83e3df00-eccd-11e8-8623-6e9dd5c4e9ca.jpg\" />\n<img alt=\"c68 - phplist - newsletter registration proposal - laptop\" src=\"https://user-images.githubusercontent.com/40668901/48775501-847c7580-eccd-11e8-893a-2434b1166c56.jpg\" />\n<img alt=\"c68 - phplist - newsletter registration proposal - mobile - frontal\" src=\"https://user-images.githubusercontent.com/40668901/48775502-847c7580-eccd-11e8-860b-fb8c73d1002b.png\" />\n<img alt=\"c68 - phplist - newsletter registration proposal - mobile\" src=\"https://user-images.githubusercontent.com/40668901/48775503-847c7580-eccd-11e8-99a7-1af2f8edcc7c.jpg\" /></p>", "<p>Now that I see it, I would add 'powered by phpList' somewhere. Waiting for comments from Sam and the phpList crew. </p>", "<p>@kristicunga This is awesome, thanks! I'll let Rudolf comment on the design screens.</p>\n<p>Regarding customisation, do you have thoughts on the UI for setting these options? Additional input fields on the 'configure subscribe pages' page, or what? </p>", "<p>@rudidolfi</p>", "<p>Happy that you liked it @samtuke . We can work on the UI for setting these options, but it will need some patience from your side because we will need slightly more time that the implementation of the registration page. </p>\n<p>As a side note, we were working on our own registration page (collective68.tech/newsletter) and we were thinking that it is quite important to have an improved version of page which is the first step to have our friends and potential customers interact with us. If we were a shop, this would be our front window  \ud83d\ude03</p>\n<p>Do I need to open a new issue the design or we keep the conversation here? </p>", "<p>@kristicunga We can keep the conv here for convenience.</p>\n<p>Regarding customisation, mockups from your side would be awesome, but also high level input and ideas are useful. The config options could go in various places, or use an editor. I wondered if you already had an approach / interface in mind.</p>\n<p>Regarding the shop window: absolutely. If you are improving the layout for your use case, then we could also take those changes, change the colours to default, and ship it as an improved design for all users.</p>", "<p>Hi everyone, \nNice work here @kristicunga, \nI have some suggestions though:</p>\n<ul>\n<li>One thing that immediately noticed was the color of the text, which I would make it more like a dark/black color, just not to give the bad impression that it might be an input error from the users side.</li>\n<li>Since this is the subscription page, I would remove the unsubscribe button.</li>\n<li>I also had a look at your website, and would like more the elegant gradient for the header, instead of the red color.</li>\n<li>The check boxes since it might be that they are a less importance, can be smaller in size. Not sure if this is supported by back-end...</li>\n</ul>\n<p>I took the time to make a simple design for the suggestions I made. </p>\n<p><img alt=\"newsletter registration page\" src=\"https://user-images.githubusercontent.com/45257615/48950876-eb539600-ef3c-11e8-89af-fc5690170125.png\" /></p>", "<p>As mentioned on the related issue #320 I think to start, creating a proper CSS structure for the PHP generated HTML of that form and page would be the way to start. This is, all fields  (and labels) should include a class with their fields slug, maybe a proper form structure (label for, etc). From there onwards it would be down to each to customise that CSS. That would still have the problem of having fixed HTML container (table vs grid, etc) but would be a good starting point. </p>\n<p>Alternatively a pseudo template block with HTML like {{attribute1_label}}, {{input_attribute1}} for self constructing the whole form. Problem being in this case how to deal with the different types of inputs or selects to create.</p>\n<p>A quick-dirty-untested sample:</p>\n<p>```html</p>\n<div class=\"form-subscribe\">\n\n<div class=\"form-row\">\n  <label class=\"label label-name\" for=\"name\">Name</label>  \n  <input id=\"textinput\" name=\"textinput\" type=\"text\" class=\"value value-name\">\n</div>\n\n<div class=\"form-row\">\n  <label class=\"label label-email\" for=\"email\">email</label>  \n  <input id=\"email\" name=\"email\" type=\"email\" class=\"value value-email\">\n </div>\n\n<div class=\"form-row\">\n  <label class=\"label label-email-confirm\" for=\"email-confirm\">email</label>  \n  <input id=\"email-confirm\" name=\"email-confirm\" type=\"email\" class=\"value value-email-confirm\">\n</div>\n\n</div>\n<p>```</p>", "<p>Thank @luison . It seems that there is a connection between front-end and back-end in relation to this. Should we move the discussion to #320  @samtuke ?</p>", "<p>@luison @rskikuli Thanks - I've followed up in #320 </p>", "<p>This issue has no activity for a long time now. I have linked this issue to this forum topic: https://discuss.phplist.org/t/suggestion-for-css-improvement-on-subscribe-page-construction/4078/3</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/427", "title": "user acceptance tests for email delivery and content", "status": "closed", "labels": [], "priority": null, "description": ["<p>Further discussion for this issue in #412 </p>", ["<p>:+1: </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/426", "title": "Group lists by category feature ", "status": "closed", "labels": [], "priority": null, "description": ["<p>-https://github.com/phpList/phplist-ui-bootlist/pull/74 needs to be merged for lists to be split into two columns. </p>", ["<p>I will resolve merge conflicts. </p>", "<p>@xh3n1 Can you remove the extra margin at the bottom of lists? Currently they make the accordion section content have unbalanced whitespace at top and bottom of the section.\n<img alt=\"workspace 1_496\" src=\"https://user-images.githubusercontent.com/695422/47559122-fd79ee80-d914-11e8-8d45-4880144ce1e3.png\" /></p>", "<p>Currently the list name is repeated twice, and the list description isn't stated (when group by categories is used).\n<img alt=\"selection_498\" src=\"https://user-images.githubusercontent.com/695422/47563843-5ea8be80-d923-11e8-9cc5-3f96f5339016.png\" /></p>", "<p>@samtuke it's not the list name that's repeated, it's the description. </p>", "<p>oh, i see what you mean, I'm checking now.</p>", "<p>@suelaP it was happening only when lists were not selected on the subscribe page (all public lists displayed all by default), but I committed a change and it should be good now. </p>", "<p><img width=\"459\" alt=\"screen shot 2018-10-28 at 19 40 47\" src=\"https://user-images.githubusercontent.com/9008509/47620346-6619c480-dae9-11e8-90c5-6d4f766fcdb6.png\"></p>\n<p>@samtuke I added the default setting on configuration page</p>", "<p>@samtuke  I pushed a commit <a href=\"https://github.com/phpList/phplist-ui-bootlist/pull/74\">here</a> for the bottom margin.</p>", "<p>This feature in action (depends on changes to bootlist/trevelin theme also):</p>\n<p>Per-list settings:\n<img alt=\"screenshot_2018-10-31 phplist 1\" src=\"https://user-images.githubusercontent.com/695422/47781473-0a745480-dcfe-11e8-81f6-6e64efb4c1ff.png\" /></p>\n<p>Global setting:\n<img alt=\"screenshot_2018-10-31 phplist\" src=\"https://user-images.githubusercontent.com/695422/47781474-0a745480-dcfe-11e8-9c8c-79db23fcfb1c.png\" /></p>\n<p>Example subscribe page single column:\n<img alt=\"screenshot_2018-10-31 subscribe to our newsletters 1\" src=\"https://user-images.githubusercontent.com/695422/47781475-0a745480-dcfe-11e8-97d4-d7061788935e.png\" /></p>\n<p>Example subscribe page dual column:\n<img alt=\"screenshot_2018-10-31 subscribe to our newsletters\" src=\"https://user-images.githubusercontent.com/695422/47781476-0b0ceb00-dcfe-11e8-83bf-bedf30d24343.png\" /></p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/425", "title": "Fix typo on '$bounce_unsubscribe_treshold = 3' and replace 'PHPlist' with 'phpList'", "status": "closed", "labels": [], "priority": null, "description": ["<p>mantis ticket: https://mantis.phplist.org/view.php?id=18837</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/424", "title": "form element ids added for WCAG compliance", "status": "closed", "labels": [], "priority": null, "description": ["<p>My apologies for deleting the original PR and repo.. Anyway once I \"reset styling to default\" the subscribe page loaded the css and I could get it looking right in trevellin.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/423", "title": "Changes views to unique views on mviews page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Signed-off-by: Silva Arapi <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#115;&#105;&#108;&#118;&#97;&#46;&#97;&#114;&#97;&#112;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#115;&#105;&#108;&#118;&#97;&#46;&#97;&#114;&#97;&#112;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", ["<p>@blackpenguins please take a few seconds to sign the CLA via GitHub so we can keep this merge in core! https://phplist.com/cla</p>", "<p>@samtuke done, signed the CLA. </p>", "<p>Thanks! </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/422", "title": "fix bounces per campaign link on manage bounces", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>@IzabelaBakollari please take a few seconds to sign the CLA via GitHub so we can keep this merge in core! https://phplist.com/cla</p>", "<p>@samtuke just signed.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/421", "title": "redacted the reconcileusers link", "status": "closed", "labels": [], "priority": null, "description": ["<p>Signed-off-by: Ares Dragoi <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#97;&#114;&#101;&#115;&#100;&#114;&#97;&#103;&#111;&#106;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#97;&#114;&#101;&#115;&#100;&#114;&#97;&#103;&#111;&#106;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", ["<p>Mantis issue: https://mantis.phplist.org/view.php?id=19455</p>", "<p>@AresDragoi please take a few seconds to sign the CLA via GitHub so we can keep this merge in core! https://phplist.com/cla</p>", "<p>It should be done now.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/420", "title": "Remove non-standard Bounces-To header", "status": "closed", "labels": [], "priority": null, "description": ["<p>Resolves issue #419.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/419", "title": "Remove non-standard Bounces-To header", "status": "closed", "labels": [], "priority": null, "description": ["<p>The only thing that matters for bounces is the address in the <code>MAIL FROM</code> command (as <a href=\"https://github.com/phpList/phplist3/blob/9ec0dba0b2ccc403d21a2f5fcc0c05b52e5186a6/public_html/lists/admin/PHPMailer/class.smtp.php#L863\">set here</a>.) See <a href=\"https://tools.ietf.org/html/rfc3834\">RFC 3834</a>. I checked with half a dozen MTA implementations and none of them had any handling for the <code>Bounce-To</code> header. It's non-standard and as far as I can tell no important MTA uses it for anything.</p>\n<p>The MTA is responsible for setting the <code>Return-Path</code> based on the <code>MAIL FROM</code> command. My MTA, OpenSMTPd, does this and this is the only reason why bounces work.</p>\n<p>The correct fix here is to remove <code>Bounces-To</code> completely. phpList can explicitly set a <code>Return-Path</code> but <a href=\"https://tools.ietf.org/html/rfc3834\">RFC 3834</a> clearly states that is up to the MTA and that the MTA should remove any existing <code>Return-Path</code>  headers. Setting this header explicitly can result in duplicated headers. Anti-spam tools are likely to see duplicated <code>Return-Path</code> headers as an email forgery attempt.</p>", ["<p>Yes, I can't remember where I got that from, and I agree, it's not commonly used. I've merged the PR. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/418", "title": "Double opt-in via form for confirmation and unsbuscription links", "status": "open", "labels": [], "priority": null, "description": ["<h1>415 demonstrates the need for a two-step subscription and unsubscription process.</h1>\n<p>The (un)subscription confirmation page should no longer (un)subscribe on GET requests. Add a button with an <strong>(Un)subscribe</strong> button instead. Clicking that should POST to the same page and only then (un)subscribe the user.</p>\n<p>Ideally the button should be big and in the middle of the page with some text like \u201cConfirm your (un)subscription request.\u201d</p>\n<p>This extra process should possibly only apply to some User-Agents or recipient domains (see #415).</p>", ["<p>@da2x You're suggesting that a second step to (un)confirmation is added and selectively required based on the user agent?</p>\n<p>Isn't it simpler, and better UX, to simply block access to the (un)confirmation pages for specific user agents of known bots? </p>", "<p>No, I\u2019m suggesting that an extra step is required for everyone. It\u2019s probably better than blocking based on the User Agent. (Though no confirmation should be accepted from a blacklisted User-Agent too.)</p>", "<p>@da2x Thanks for clarifying; I don't yet get it.</p>\n<p>If no confirmation is accepted from blacklisted User-Agents, then what's the benefit of adding the second required step for everyone (including humans)?</p>\n<p>There's a clear downside to adding that, which is that people trying to unsubscribe must make a greater effort to do so. It may also impact list-unsubscribe buttons in mail clients; I don't recall how that's currently implemented.</p>", "<p>@da2x phpList already has a mechanism for that. If \"<a href=\"https://resources.phplist.com/system/config/unsubscribe_jumpoff\">JumpOff</a>\" is false, it will request details and require a post to actually unsubscribe.</p>\n<p>The main reason to not use that, ie jump off true, is to make it as quick and easy as possible to get off a list. That's mostly because phpList unfortunately is also used for non-permission based marketing. This makes doing that less attractive.</p>\n<p>However, I do agree that even in those cases it will be useful to put things in that avoid bots from erroneously unsubscribing people.</p>\n<p>Subscription is always double opt-in, and has been so forever. People have tried to hack that, but I don't think that's a good idea. It will fill your system with spam accounts and pollute the database.</p>", "<blockquote>\n<p>Subscription is always double opt-in, and has been so forever. People have tried to hack that, but I don't think that's a good idea. It will fill your system with spam accounts and pollute the database.</p>\n</blockquote>\n<p>But it doesn\u2019t require a POST request, right? Which is what this ticket was about. I wasn\u2019t aware of <code>UNSUBSCRIBE_JUMPOFF</code> and I guess what I\u2019m looking for is a <code>SUBSCRIBE_JUMPON</code> then; requiring the same POST request before subscribing someone via an confirmation link.</p>", "<p>True, there's no POST request on confirming. But that should be really short-lived. There is however a POST request on subscribing, and then the email has a unique link that is a GET. Again, there's a UX issue here. If that's were to be a POST, you'll lose half your subscribers. And these are supposed to be the real ones that actually went through the trouble of click the confirmation link in the email, so they really want to get your stuff, it seems. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/417", "title": "Disable the X-Mailer header", "status": "closed", "labels": [], "priority": null, "description": ["<p>It\u2019s adding no value and yields a negative spam score.</p>", ["<p>I'm not sure this will do anything. Don't we set the X-Mailer later on? </p>", "<p>It\u2019s set by the PHP Mailer library. This patch removes the header in my testing, at least.</p>", "<p>@michield Any objection to merging?</p>", "<p>Well, It's similar to the powered-by-phplist footer in every message. It's debatable whether it's good or bad for the project. This one is a little more obscure, as it will only be noticed by techies who will press ctrl-U. And by automated filters of course.</p>\n<p>So, I'd prefer to allow removing it with a config option, but not by default. If people think it helps deliverability, fine, they can switch it off, but I think it's good for the project to have a presence in the world of email. </p>", "<p>@da2x Any idea why this header would harm a spam score? Seems innocent enough, and the technology used to send a message, especially a php library, does not connote particular content or sending behaviour in my view.\nWhich spam rating system provided the spam score used in your testing? </p>", "<p>It's probably only seen in other emails classified as spam and only rarely if ever in non-spam classified emails.</p>\n<blockquote>\n<p>Which spam rating system provided the spam score used in your testing?</p>\n</blockquote>\n<p>I got a friend who works at a unnamed email provider run a few test messages through their internal filters. It's a bayesian filtering system based on their customers' emails.</p>", "<p>I see that others have reported this setting as impact deliverability as well, including users of Drupal and Wordpress. Deliverability is critical to phpList; more important than voluntary attribution, in my view. Proliferation of config options is undesirable: we should aspire to utilitarian defaults that 'just work' in most use cases.</p>\n<p>Therefore I recommend the following: enable the x-mailer header when phpList is in development / debugging mode, and disable it in production (inspired by this <a href=\"https://www.drupal.org/project/smtp/issues/2908655\">Drupal issue</a>). This has some technical value, but avoids negative impact on deliverability to sensitive spam filters.</p>\n<p>@da2x If you agree, would you consider adapting this PR in that direction?</p>", "<p>Yes, fair enough. Things change, as they do. I'd say, it's fine to merge this PR.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/416", "title": "Stop reusing the same Message-ID for system messages", "status": "closed", "labels": [], "priority": null, "description": ["<p><code>Message-ID: systemmessage</code> is a really bad idea. Messages are expected to always have unique IDs. See also <a href=\"https://tools.ietf.org/html/rfc5322#section-3.6.4\">RFC 5322 \u00a73.6.4</a>.</p>\n<p>It causes system messages to get really high spam scores and end up in junk folders. I\u2019m looking at two identical messages at Yahoo! Mail now and they stick  the one with <code>X-Message-ID: systemmessage</code> in junk and the one with no difference other than a unique string in the inbox.</p>\n<p>Internal logic looks for this specific hardcoded ID for bounce processing.</p>\n<p>Quick fix: Set the ID as <code>phplistinternal-&lt;random-numbers&gt;@[website]</code> and then change the places that expect that specific ID to look for message IDs that start with <code>phplistinternal-</code>. For backwards compatibility, the Message ID <code>systemmessage</code> should also be checked for a transitional period and removed in a later release (six months?).</p>\n<p><code>@example.com</code> should be added to the end of the Message ID the same time, as it\u2019s the convention for most Message IDs. Older spam filters looked at Message-ID domain mismatches as an indication of a message having been sent through an open relay. Not sure if this is still the case, but phpList should still stick with the convention regarding the format of the Message ID. </p>", ["<p>Yes, good point. The main thing is that we use the \"systemmessage\" during bounce detection, so that would need to change as well.</p>", "<blockquote>\n<p>Yes, good point. The main thing is that we use the \"systemmessage\" during bounce detection, so that would need to change as well.</p>\n</blockquote>\n<p>I did actually address that in my report.</p>", "<p>@xh3n1 Any thoughts on this?</p>", "<blockquote>\n<p>I did actually address that in my report.</p>\n</blockquote>\n<p>Yes, true. Thanks. @xh3n1 the above suggestions should make it fairly easy to sort out. We're not doing too much (yet) with bounced system messages.</p>", "<p>@samtuke I also think that X-MessageID should be unique. The above suggestions sound good but it should be tested :) </p>", "<p>@da2x A PR addressing this issue would be very welcome. </p>", "<p>Actually, I just realised there's some confusion here. We're not using Message-ID: systemmessage. We use X-MessageID: systemmessage. The RFC refers to Message-ID. We use our own, with the X- prepended, which is perfectly acceptable.</p>\n<blockquote>\n<p>extension-field =\n                   <Any field which is defined in a document\n                    published as a formal extension to this\n                    specification; none will have names beginning\n                    with the string \"X-\"></p>\n</blockquote>\n<p>The Message-ID is auto-generated by phpMailer and we don't do anything with it.</p>\n<p>Also, we use X-MessageID for the \"ID\" of the campaign, so it is 1, 2, 3 etc for all subscribers.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/415", "title": "Block BingPreview (auto-visits links in emails)", "status": "open", "labels": [], "priority": null, "description": ["<p>Outlook.com (therein also Hotmail and Live Mail) customers are being auto-subscribed to my newsletter. They open all links by default for security purposes. phpList should block their User-Agent on the confirmation page to prevent this from happening.</p>\n<p>As far as I can tell, this is only a problem with email services from Microsoft.</p>\n<p>User-Agent: <code>Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534+ (KHTML, like Gecko) BingPreview/1.0b</code></p>", ["<p>Interesting. Would be good to get a few steps to reproduce this. I have several Outlook accounts, so I can try to replicate it. Can you give the steps?</p>", "<ol>\n<li>Sign up for a phpList managed mailing list with an @outlook.com account.</li>\n<li>Wait.</li>\n</ol>\n<p>BingPreview bot will visit the link within a few minutes of the email being delivered. You should see the welcome message being sent to the Outlook email too. Opening the email in the Outlook.com email interface (don\u2019t click the confirmation link!) seems to reduce the time you have to wait.</p>", "<p>Trying now :+1: </p>", "<p>A similar issue with bots crawling campaign links was recently described on relation to Yahoo and unsubscribe links here: https://discuss.phplist.org/t/users-reporting-unauthorized-unsubscribes/4417</p>\n<p>It would be good to add user agent checking and blocking for both Microsoft and Yahoo mail bots. </p>", "<p>I wasn't able to replicate it. But I think that in general we should add anti-bot headers (no-follow, no-index) to all pages and also document the robots.txt lines to use. The issue with robots.txt is that it lives in the site root and therefore we have no access to it from the application.</p>", "<p>Just confirming OP's issue. Note that I'm not here because of phpList, but of a related issue with Office 365.</p>\n<p>Our organization uses Office 365 and it auto visits every link that's sent to our emails with that <code>BingPreview</code> user agent mentioned by the OP. This has been an issue for us because not just phpList, but many other web apps out there also sends out one-click URLs in confirmation emails.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/414", "title": "Don\u2019t remove useful anchor links", "status": "closed", "labels": [], "priority": null, "description": ["<p>Still removes \"#anchor\" but not \"https://www.exameple.com/#anchor\".</p>", ["<p>Thanks for the PR @da2x </p>", "<p>Nice one</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/413", "title": "+https detection", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>@da2x Thanks for the PR! If you haven't already, please sign the CLA via GitHub: https://phplist.com/cla</p>", "<p>Done.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/412", "title": "Add user acceptance tests for email delivery and content", "status": "closed", "labels": [], "priority": null, "description": ["<p>Add Behat-based user acceptance tests to check the following:</p>\n<ul>\n<li>Campaigns generate and send emails when queued</li>\n<li>Emails are received by a real inbox</li>\n<li>Textual email content within received emails is correct (matches what was set in the campaign composer) </li>\n</ul>", ["<p>Hello All,</p>\n<p>Finally I can make a pull request for this issue in #427. Here's some notes about implementation:</p>\n<ol>\n<li>SMTP implemented by using smtp sink. Here's how I setup my dev environment:\n```sh\n$ cd /path/to/phplist\n$ sudo apt-get install postfix</li>\n</ol>\n<h1>we don't need postfix</h1>\n<p>$ sudo service postfix stop</p>\n<h1>smtp-sink always write in current directory,</h1>\n<h1>so we need to cd first before start smtp-sink</h1>\n<p>$ mkdir -p build/mails\n$ cd build/mails\n$ smtp-sink -d \"%d.%H.%M.%S\" localhost:2500 1000 &amp;\n<code>- You need to setup your</code>config.php<code>file to use this smtp-sink:</code>php\ndefine('PHPMAILERHOST', 'localhost');\ndefine('PHPMAILERPORT',2500);\ndefine('PHPMAILER_SECURE',false);\ndefine('TEST', 0);\n```</p>\n<ol>\n<li>New Context added, so your <code>behat.yml</code> file need to be reconfigured:\n<code>yaml\ndefault:\n    suites:\n        default:\n            contexts:\n                - MailContext:\n                    mail_dir: %paths.base%/build/mails\n                - SubscriberContext\n                - UserContext</code>\nTo create a new scenario using this context, you need to add <code>@emptySentMail</code> so MailContext can empty <code>build/mails</code> directory before scenario tests started:\n```gherkin</li>\n</ol>\n<h1>sample scenario using new context definition</h1>\n<h1>ref file in: tests/features/smtp.feature</h1>\n<p>Feature: SMTP Mail test\n    ...\n    @emptySentMail @javascript\n    Scenario: Sending campaign with list subscribers\n        Given I have logged in as an administrator\n        And I have \"smtp\" list with the following subscribers:\n            \"\"\"\n            test1@phplist.dev\n            test2@phplist.dev\n            test3@phplist.dev\n            \"\"\"\n        ...\n        And I should have email sent from \"From Me\"\n        And I should have email sent from address \"me@mydomain.com\"\n        And I should have email sent to address \"test1@phplist.dev\"\n        And I should have email sent to address \"test2@phplist.dev\"\n        And I should have email sent to address \"test3@phplist.dev\"\n        And I should have email sent contains \"This is the Content of the SMTP Campaign\"\n        And I should have email sent contains \"This is the Footer of the campaign\"\n```</p>", "<p>hello @samtuke @suelaP </p>\n<p>I forget to mention about mailhog:\nhttps://github.com/mailhog/MailHog\nWith mailhog we can tests a real email sent and check that on mailhog inbox.</p>", "<p>@kilip thanks for that. I will check this today. \nVery sorry for the delay on your pull request. I struggled a little bit to run your test locally but now it's working. I followed the steps from Travis configuration in order to do that please let us know if there is another (easier approach).\nI just need to test one more thing with some javascript elements as I think the behat.yml file might need to change in order for those to pass. </p>", "<blockquote>\n<p>please let us know if there is another (easier approach).</p>\n</blockquote>\n<p>@suelaP unfortunately there are no easier approach. Do you use docker? I can setup a docker and to do tests developer only need to execute <code>docker-compose</code> , no need to setup. We can also have mailhog in that docker machine which I think will be a great help for phplist developer. Please read about mailhog in the link I give.</p>", "<p>Yes, mailhog is nice and with docker very easy to use. @suelaP we use it in the hosted docker setup.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/411", "title": "Mantis 19453 - Some plugins were disabled after upgrading to release 3.3.5", "status": "closed", "labels": [], "priority": null, "description": ["<p>Move the test of whether a plugin can be enabled to where all plugins have been created.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/410", "title": "Use translation in subscribe button (Subscribe page)", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>@asosso Thanks for the PR! It looks like this is the first time you've patched phpList 3 core - if so, please could you take a few seconds to agree to the CLA?: https://phplist.com/cla</p>", "<p>@samtuke I signed the cla! </p>", "<p>@asosso Thanks! Just need a review and then we're good to go.</p>", "<p>@xh3n1 thank you! I missed that field.\nI couldn't understand why it wasn't translated</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/409", "title": "Editing email address to another existing email address silently fails", "status": "closed", "labels": [], "priority": null, "description": ["<p>When editing an email address and saving, if the new email address matches another existing address, this silently fails and no changes are saved. It would be much more helpful to display some kind of message stating that the email address you typed already exists (maybe even link to that other contact).</p>", ["<p>I can not replicate the problem on 3.3.9 so I am closing this.\n<img alt=\"selection_011\" src=\"https://user-images.githubusercontent.com/22301998/53184441-4b6ddd00-35fd-11e9-8b59-c790d89e80c9.png\" /></p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/408", "title": " Adding missing ids to form elements on public pages to pass WCAG", "status": "closed", "labels": [], "priority": null, "description": ["<p>html label elements need a target id or automatic accessibility testing fails.\nThis adds a couple on public pages that were missing. </p>", ["<p>Seems fine to do this, but it may need an additional change in the CSS to work correctly.</p>", "<p>@thedayse Are you happy to make the necessary CSS changes to reduce the size of the labels in the Web interface following your changes, so that the container of the checkbox and the label are of similar visual size? </p>", "<blockquote>\n<p>@thedayse Are you happy to make the necessary CSS changes to reduce the size of the labels in the Web interface following your changes, so that the container of the checkbox and the label are of similar visual size?</p>\n</blockquote>\n<p>There are no CSS changes to make. (I just edited this comment to make this clear)  </p>\n<p>I am happy to do that but I don't see any css to edit - labels don't have borders in the default css, where text is 12px and form elements are 14px . A label shouldn't make any difference - the before case doesn't have a label so there I guess that the bold has been styled with a border which isn't in the default stylesheet.</p>\n<p>These are the only two css files that a public subscribe page loads\n/lists/styles/subscribe.css\n/lists/styles/color.css</p>\n<p>I might of course be missing something..</p>\n<p>It would be good if the doctype were html5 but that code is in the theme. WCAG 2.0 is an EU directive .</p>", "<p>@thedayse You might be using a different theme to the one in our testing. When using phpList from git sources, a default version of the Dressprow theme is used, but when using phpList official releases or from Sourceforge then the Trevelin theme is default. That's because the themes are generally stored in separate repos (also here on GitHub), for easier development. </p>\n<p>Have you tested your changes with the Trevelin theme? https://github.com/phpList/phplist-ui-bootlist</p>\n<p>You should clone it to your lists/admin/ui folder and then enable it on your phpList settings page from the Web UI (new themes should be detected automatically).</p>\n<p>When we have used Trevelin with your changes there are some new minor layout issues discussed above, which is why this PR wasn't yet merged. </p>", "<blockquote>\n<p>Have you tested your changes with the Trevelin theme? https://github.com/phpList/phplist-ui-bootlist</p>\n<p>You should clone it to your lists/admin/ui folder and then enable it on your phpList settings page from the Web UI (new themes should be detected automatically).</p>\n<p>When we have used Trevelin with your changes there are some new minor layout issues discussed above, which is why this PR wasn't yet merged.</p>\n</blockquote>\n<p>Yes I have tried and I can't duplicate the screendump that's blocking this. Public subscribe pages don't load a theme and changing the admin theme doesn't alter them.  The css for these pages is loaded by \"Header of public pages\" which by default only loads\n /lists/styles/subscribe.css\n/lists/styles/color.css\nand those files don't have any css that would produce the borders or alignment  in the screen shot.</p>", "<p>@thedayse if you use the Trevellin theme it will actually load the css from the theme. Please see the attached screenshot:\n<img width=\"913\" alt=\"screen shot 2018-10-20 at 23 28 04\" src=\"https://user-images.githubusercontent.com/9008509/47260663-24bd5f80-d4c0-11e8-9857-009b39feffad.png\"></p>", "<blockquote>\n<p>@thedayse if you use the Trevellin theme it will actually load the css from the theme. </p>\n</blockquote>\n<p>I do see that. I'm just not sure how to do it myself. I have only taken the theme folders from the 3.3.5 sourceforge download and copied them to the right places rather than building them.  Got it - I needed to \"reset style to default\" on the subscribe page admin, I had no idea... Anyway it looks ok if I move the bold inside the label so I will update the patch.  </p>", "<p>@thedayse thanks for persevering </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/407", "title": "Mantis 17649 Click tracking decoding urlencoded characters", "status": "closed", "labels": [], "priority": null, "description": ["<p>This is a quick fix for Mantis 17649 https://mantis.phplist.org/view.php?id=17649</p>\n<p>The problem is that, when trying to remove some specific query parameters from a url, the url can get changed or corrupted. The current processing breaks a url into its constituent parts then reassembles those, even when there is no need for that.</p>\n<p>This change is simply to leave alone urls that do not contain any of the disallowed parameters.</p>\n<p>A better, but larger, solution is to rework and simplify the processing of urls for link tracking.</p>", ["<p>@bramley Many thanks Duncan</p>", "<p>Yes, agreed. Good to have a temp fix, and will be good to revisit this section. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/406", "title": "#405 prevent subscriber preferences view/update using only the email \u2026", "status": "closed", "labels": [], "priority": null, "description": ["<h1>404 remove/revert spaces added in #18880 to $html['preferencesurl'] etc, preventing update of subscriber preferences.</h1>", ["<p>@thedayse Thank you for this contribution \ud83d\udc4d</p>", "<p>@thedayse Please can you spend some seconds on agreeing to the CLA via GitHub? https://phplist.com/cla</p>", "<blockquote>\n<p>@thedayse Please can you spend some seconds on agreeing to the CLA via GitHub? https://phplist.com/cla</p>\n</blockquote>\n<p>I spent those seconds yesterday :) Got me thinking though. I've only deleted things. Is a deletion a creative work?</p>\n<p>Actually it looks like I've already signed it before as well:\nAwesome, you have signed the phpList CLA\nYour github login: thedayse\nDate signed: 2018-02-12</p>", "<p>@thedayse Aha, I only checked the most recent additions -- yes I see you did it before now. Sorry for costing you those seconds needlessly :)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/405", "title": "GDPR privacy , restrict access to preferences page", "status": "closed", "labels": [], "priority": null, "description": ["<p>The links for subscribe, preferences etc all use the unique id which is fine and good. However these same pages can also be accessed with an email instead like this\n?p=preferences&amp;email=somebody@domain.foo\n?p=preferences&amp;unsubscribeemail=somebody@domain.foo\nWhich seems both unneeded and easy to abuse. Maybe I'm missing something. Any private data the subscriber has supplied, like their name, can be viewed and changed by anyone using just the email address. Is there any need for this?</p>", ["<p>Yes, good point. I think it is there as it used to be considered convenient, but now we need to tighten these things up a little. Fancy creating a PR?</p>", "<p>Yes I think i can manage a PR later this week. Can I combine it with a fix for #404 or do I need to do 2 PRs?</p>", "<p>Should be fine to combine, I reckon. If you haven't yet, can you also <a href=\"https://phplist.com/cla\">sign the CLA</a>, thanks</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/404", "title": "[preferencesurl] has a trailing space causing user preferences update to fail ", "status": "closed", "labels": [], "priority": null, "description": ["<h1>18880 added a space to too many things. It adds a %20 in the html link which then fails.</h1>\n<p>These should not have a space before the '\n$html['preferencesurl'] = sprintf('%s%suid=%s ', $url, htmlspecialchars($sep), $hash);\n$text['preferencesurl'] = sprintf('%s%suid=%s ', $url, $sep, $hash);\n$html['confirmationurl'] = sprintf('%s%suid=%s ', $url, htmlspecialchars($sep), $hash);\n$text['confirmationurl'] = sprintf('%s%suid=%s ', $url, $sep, $hash);</p>", ["<p>Just to make it easy to see the problem. Take any url for updating preferences and open it in your browser. they look a bit like this:\n?p=preferences&amp;uid=216971000000008e760575b5\nnow add %20%20 to the end (2 spaces)\n?p=preferences&amp;uid=216971000000008e760575b5%20%20\nIn chrome this also loads the correct preferences page - the spaces are ignored, but submitting the form fails because Chrome, and firefox, now includes the %20%20 in the form target.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/403", "title": "Adding (more) graceful failure when phplist does not have access to r\u2026", "status": "closed", "labels": [], "priority": null, "description": ["<p>\u2026andom_bytes() from some cryptographically secure pseudorandom number generator (CSPRNG). For more info, please see:</p>\n<ul>\n<li>https://discuss.phplist.org/t/common-installation-errors-manual-chapter-feedback-and-discussion/217/4</li>\n<li>https://mantis.phplist.org/view.php?id=18546</li>\n<li>https://tech.michaelaltfield.net/2018/08/25/fix-phplist-500-error-due-to-random_compat/</li>\n</ul>", ["<p>@maltfield brilliant - thanks \ud83d\udc4d</p>", "<p>@maltfield Sorry I jumped the gun with this merge - please can you take a few seconds to agree to the CLA via GitHub: https://phplist.com/cla</p>", "<p>@samtuke sure, done.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/402", "title": "Mantis 19403 - Use of mysql \"replace into\" with the listuser table", "status": "closed", "labels": [], "priority": null, "description": ["<p>Use \"insert ignore\" instead of \"replace into\" when adding records to the listuser table.\nFor simple import, count insertions in the same way as for import1 and import2.</p>\n<p>On the list membership page, make all the options count insertions in the same way, and ensure that the entered field is populated.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/401", "title": "Fatal error in hu translation", "status": "closed", "labels": [], "priority": null, "description": ["<p>No is \"Nem\" in Hungarian.</p>", ["<p>Translations need to be edited on https://translate.phplist.org</p>", "<p>@michield Thank you. Currently I have no time to register and log in and get familiar with the UI.</p>", "<p>@szepeviktor Thank you for your contribution!</p>\n<p>I have applied your translation here: https://translate.phplist.org/hu/phplist/translate/phplist.po#unit=142026 As @michield says, that's the best place to add translations.</p>\n<p>I merged the PR in order to test updating the strings in Pootle (the software running on translate.phplist.org) directly from Git, as a Pootle Admin. This failed due to an authentication issue that I'll work on.</p>", "<p>@samtuke merging here may cause mayhem with the translation system. Please avoid doing that. </p>", "<p>Thank you.</p>", "<blockquote>\n<p>@samtuke merging here may cause mayhem with the translation system. Please avoid doing that.</p>\n</blockquote>\n<p>Sorry, my bad. I won't matter. But it won't do anything either. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/400", "title": "Get style from  $defaultheader and $defaultfooter", "status": "closed", "labels": [], "priority": null, "description": ["<p>Before it was getting the style from config table, but since this table is not updated when you upgrade from 3.3.1 to 3.3.4, I had to change the values to $defaultheader and $defaultfooter which hold the values of the default theme on 3.3.4. </p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/399", "title": "Option to add password on the interface when you create a new admin", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19061</p>", ["<p>Can you make this enabled with a flag? I think we want to allow keeping the original way of working, which keeps the password more secret than then new one. </p>", "<p>@michield Yes we can do that,  I would also prefer having a \"confirm password\" input. What do you think @michield @samtuke @suelaP ?</p>", "<p>Yes, confirm is good. You can also make it a single system, eg with divs/tabs</p>\n<ol>\n<li>either use \"send a password by email\"</li>\n<li>or input here</li>\n</ol>\n<p>just like the compose campaign page being \"input here\" or \"send a url\"</p>", "<p>@xh3n1 My vote is with Suela. </p>", "<p>I added the \"confirm password\" input field and some js for input validation:\nScenarios:</p>\n<p><strong>if password is &lt; 8</strong> :</p>\n<p><img width=\"827\" alt=\"screen shot 2018-09-23 at 18 22 57\" src=\"https://user-images.githubusercontent.com/9008509/45930306-c489db00-bf5e-11e8-80a9-039279cff4a7.png\"></p>\n<p><strong>if passwords do not match</strong> :</p>\n<p><img width=\"817\" alt=\"screen shot 2018-09-23 at 18 23 41\" src=\"https://user-images.githubusercontent.com/9008509/45930308-cbb0e900-bf5e-11e8-95c4-bc0c592c76d7.png\"></p>\n<p><strong>if password is &gt;8 and passwords match</strong>\n  Note that \"Save changes\" button is <strong>disabled</strong> until this condition is met.\n<img width=\"829\" alt=\"screen shot 2018-09-23 at 18 24 16\" src=\"https://user-images.githubusercontent.com/9008509/45930316-e8e5b780-bf5e-11e8-8867-8a5a7742785b.png\"></p>", "<p>Is this still on hold and work in progress? </p>", "<p>@samtuke yes</p>", "<p>@samtuke It's ready for review now. \nI was wondering why the js code for radio button was working on dressprow theme and not on trevelin, and then I found out that this: https://github.com/phpList/phplist-ui-bootlist/blob/18579645c28706b94e7a98297437050dae589439/js/phpList3ToBootstrap.js#L185-L190 was preventing it because the ID was changed to name+value attributes on DOM, making my ID not used. Anyway, I manually set the ID to the how the function would generate it. I will also add a PR for Dressprow theme.</p>", "<p>Reviewing the code, looks good. We should test this a bit though, once merged. </p>\n<p>But I'm happy with it, nice work!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/398", "title": "Added sendstart time to campaigns page", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=18170 </p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/397", "title": "Add DS_Store to gitignore file", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/396", "title": "Update language_info", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>Thanks for these</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/395", "title": "Update phplist.po", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/394", "title": "public_html structure - use of subdirectory", "status": "open", "labels": [], "priority": null, "description": ["<p>Related (but different) discussion @ #336 </p>\n<p>The current structure for public_html assumes a /lists folder on a (sub)domain, and requires a user to manually edit the index.html file to reflect their own website when installing phplist.</p>\n<p>While I can see why that may have been done historically, in today's internet where the use of reverse proxies / rewrite rules etc is common, and the concept of not putting sites at common locations (e.g. /lists) to avoid automated vulnerability scanners, it would be nice to see 'public_html' contain the source of the application itself. </p>\n<p>The current structure looks to be a historical decision ?</p>\n<p>Having just been going through the installation process and thinking of ease of use for a new user, this caught me out initially; I first configured the webroot for /, then for public_html then realised that I needed to either use /public_html/lists or edit the index file - so between my mistake and this, made what should have been a simple 1 step into 3 steps</p>", ["<p>@phpitech Good points. \n@michield Thoughts?</p>", "<p>Yes, it's fairly historical, but I do think the installation instructions are correct. So, you're mostly saying, we should bridge the gap between your expectations and the reality, as most people won't read installation instructions but simple do what they assume needs to be done (which has changed over time). </p>\n<p>I think with things like docker on the way, all this will be less relevant. The current method works for people with a simple site who need a newsletter added as a function. Anyone going more \"pro\" than that will be able to figure it out. Also, I did it this way to avoid people saying \"hey, installing phpList wiped my website\", which, I kid you not, has happened. </p>", "<p>It's easy to figure out on your own if you know how to code, as @michield said, but perhaps we should consider making these changes for people who don't really know anything about PHPList or PHP for that matter? Granted, it's a low priority task for sure.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/393", "title": "Language translation strings", "status": "closed", "labels": [], "priority": null, "description": ["<p>Again, I'm happy to do a PR to sync these strings but the language translation strings are <em>way</em> out of date in git. In fact, equally happy to automate a PR once a month from the translate site.</p>\n<p>The locale files @ https://github.com/phpList/phplist3/tree/master/public_html/lists/admin/locale are all over a year old. </p>\n<p>I can see they've not been updated when the last release was generated. Shall I sync the files and add a PR ? </p>\n<p>It would be good to have them reasonably up to date - i'm missing english translation strings here; don't want to raise that as a bug when it's likely already on the translate site!</p>", ["<p>I had a look at generating this, and observation is that there are strings generated on the translate site that are not in the phplist repo - is that because they are used by phplist.com; e.g. databasestructure.php</p>", "<p>@phpitech Thanks for checking -- databasestructure.php is used by phpList, and there shouldn't be any strings from .com on the translate site, though it's possible that they crept in. It's more likely that they are simply strings that are no longer used (such strings are not automatically deleted). Can you give an example of such a string?</p>", "<p>@phpitech Regarding syncing strings: that would be great. The strings should be automatically updated after a fresh installation, which is probably why it hasn't been noticed before that they're out of date. But yes, the latest ones should be pulled in during the release process; it looks like that step must be broken. I'll investigate.</p>", "<p>Tracking here https://mantis.phplist.org/view.php?id=19385</p>", "<p>This has been marked as resolved on Mantis (on the link above). For future proposals/questions I would recommend the <a href=\"https://discuss.phplist.org/\">community forum</a> or <a href=\"https://mantis.phplist.org/my_view_page.php\">Mantis, the phpList bug tracker</a>.</p>\n<p>Closing this. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/392", "title": "Installation - Database error", "status": "closed", "labels": [], "priority": null, "description": ["<p>When performing a database installation of current git trunk (21/08/2018), receive a \"incorrect integer value\" as shown below:</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/42390693/44424345-63927000-a578-11e8-8e0f-a5e198d9e6ff.png\" /></p>\n<p>This is caused by line 1507 of lib.php:</p>\n<p><code>$result = Sql_query(\"insert into {$GLOBALS['tables']['message']} (uuid,subject,message,entered, status, owner, footer, sendformat) values(\\\"$uuid\\\",\\\"$inviteMessageSubject\\\",\\\"$inviteMessage\\\",now(),\\\"draft\\\",\\\"$ownerid\\\",\\\"$footer\\\",\\\"invite\\\" )\");</code>\nThe quotes around $ownerid are not required.</p>\n<p>Where addInviteCampaign is called by the installer, in that case, $_SESSION['logindetails']['id'] was not set, so adding a cast to the previous line would seem to fix the code:</p>\n<p><code>$ownerid = (int)$_SESSION['logindetails']['id'];</code></p>\n<p>Although i'm not sure that is the correct solution to apply in this case?</p>", ["<p>Proposed patch for this:</p>\n<p>```\ndiff --git a/public_html/lists/admin/lib.php b/public_html/lists/admin/lib.php\nindex 5120e84a..334bd13b 100644\n--- a/public_html/lists/admin/lib.php\n+++ b/public_html/lists/admin/lib.php\n@@ -1502,9 +1502,9 @@ function addInviteCampaign() {\n     $inviteMessage = addslashes($message);\n     $inviteMessageSubject = \"Do you want to continue receiving our messages?\";\n     $uuid = uuid::generate(4);\n-    $ownerid = $_SESSION['logindetails']['id'];\n+    $ownerid = (int)$_SESSION['logindetails']['id'];\n     $footer = sql_escape(getConfig('messagefooter'));\n-    $result = Sql_query(\"insert into {$GLOBALS['tables']['message']} (uuid,subject,message,entered, status, owner, footer, sendformat) values(\\\"$uuid\\\",\\\"$inviteMessageSubject\\\",\\\"$inviteMessage\\\",now(),\\\"draft\\\",\\\"$ownerid\\\",\\\"$footer\\\",\\\"invite\\\" )\");\n+    $result = Sql_query(\"insert into {$GLOBALS['tables']['message']} (uuid,subject,message,entered, status, owner, footer, sendformat) values(\\\"$uuid\\\",\\\"$inviteMessageSubject\\\",\\\"$inviteMessage\\\",now(),\\\"draft\\\",$ownerid,\\\"$footer\\\",\\\"invite\\\" )\");</p>\n<pre><code> return $result;\n</code></pre>\n<p>```</p>", "<p>Hi @phpitech , This has been fixed in https://github.com/phpList/phplist3/pull/380 for the next release,\nbut it's not yet merged to master :)</p>", "<p>@xh3n1 - confirmed that #380 fixes this, so will mark this as closed.</p>", "<p>thank you @phpitech </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/391", "title": "Community news - cache directory not writable  on installation", "status": "open", "labels": [], "priority": null, "description": ["<p>When installing phplist, receive the following:</p>\n<p>[Note: have added a debug_print_backtrace() call to see the stack trace before the error</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/42390693/44424004-31344300-a577-11e8-93ef-f04787eac86c.png\" /></p>\n<p>As an observation, and happy to add pull requests for some of these: </p>\n<p>a) a simple call is used to grab the URL that may not work behind a corporate firewall e.g. if authentication is required. There are library e.g. guzzle php that could be used to enhance this</p>\n<p>b) the rss parser looked to be abandoned code (when doing a quick google search) - i'm not sure if you would consider a PR that added a maintained parser?</p>\n<p>c) in this context, the error message did leak the PHP path; although arguably that is a web server configuration issue; although should the default setup be more robust?</p>\n<p>d) A quick glance suggests the rss parser is responsible for setting the cache directory in this case - I'm not sure whether this path can be configured through the config_extended.php</p>", ["<p>@phpitech Thanks for raising this. PRs for your points a) and b) -- yes please! Regarding c) and d), I'm not sure. @michield probably knows </p>", "<p>a) yes, true. But even with guzzle, you'd need to configure something for it to work ootb, presumably\nb) yes, absolutely. I recall there were some similar attempts in the past\nc) your php.ini settings should cover that. In general phpList is not very verbose at all and switches error reporting off (which some people don't like either)\nd) it uses the value set in config.php; https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/communityfeed.php#L72</p>\n<p>which is mentioned in config_extended: https://github.com/phpList/phplist3/blob/master/public_html/lists/config/config_extended.php#L730</p>\n<p>and defaults to /tmp</p>\n<p>https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/init.php#L677</p>", "<p>by the way, config_extended is only there for reference. To action the settings, you need to copy them to config.php</p>\n<p>https://discuss.phplist.org/t/config-php-vs-config-extended-php-files/2034</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/390", "title": "Disable phplist using admin account", "status": "closed", "labels": [], "priority": null, "description": ["<p>I have a very old phplist installation (version 2.10.19). I still have the admin account but not access to the server anymore. I think it's being used to send out spam (probably due to a bug?) since I am receiving a lot of <code>Mail Delivery Failure</code> notifications to the email used in phplist to send out emails (it's used only there).</p>\n<p>Is there a way to disable / delete / destroy / anything (it's not used anymore) phplist from the web interface using the admin account?</p>\n<p>Thanks for your help.</p>", ["<p>posted on https://discuss.phplist.org/ , sorry to create noise here.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/389", "title": "Hashing workaround for unique indexes", "status": "closed", "labels": [], "priority": null, "description": ["<ul>\n<li>[x] create unique indexes on url_hash/regexhash values on new initialisations. Use char type to store hash values. </li>\n<li>[x] make sure to store hash values of URL&amp; Regex fields and URL &amp;regex itself. (apply changes to queries for new entries)</li>\n<li>[x] calculate and store hash for all the rows on upgrade. (before creating indexes)</li>\n<li>[x] create columns for hash values and unique indexes on url_hash/ regexhash values on upgrade.</li>\n</ul>", ["<p>Regarding linktrack table: It doesn't make sense to change the field size and index because it's a legacy table which is not used anymore to add new entries. See uncommented query: https://github.com/phpList/phplist3/blob/0b974ae2690dbe6c1afd38d2d4b78a902aacdf88/public_html/lists/admin/sendemaillib.php#L1315</p>\n<p>and : https://github.com/phpList/phplist3/blob/master/public_html/lists/lt.php#L137-L145</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/388", "title": "Formatted numbers on view opens page", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/387", "title": "Make bounce total number formatted on bounces per list page", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19339</p>", ["<p>@xh3n1 Please check that the changed translation string also works with existing translations of other languages which which presumably still include references to the old print formatting characters.</p>", "<p>@xh3n1 Please try to replace the old string which has now been replaced (line 77) with the new one so that all existing translations are not outdated. E.g. the natural language text has not changed, only the removal of printf formatting, so a regex / bulk search and replace on the translation files should be possible to modify the strings and avoid triggering creation of a 'new' string. That should be done before this PR is merged in order to avoid an unnecessary automated notification to translators.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/386", "title": "smtp prossible ?", "status": "closed", "labels": [], "priority": null, "description": ["<p>extern smtp possible like sendgrid ?</p>", ["<p>@d4op Answers to this and more await you in the forum \ud83d\ude0e You can search without registration.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/385", "title": "batch processing?", "status": "closed", "labels": [], "priority": null, "description": ["<p>i am able to batch process a big list ?\ni want to send message to 300 subs everyday of my big list of 50.000.\nevery day next 300 ones.\npossible ???</p>", ["<p>@d4op Short answer: yes. More detailed answers to your question can be found in the phpList forum:  https://discuss.phplist.org/</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/384", "title": "Change \"emails\" to \"addresses\"on listbounces page  ", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19340\nSigned-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", ["<p>@xh3n1 It looks like neither the old nor the new string is translatable -- can you check?</p>", "<p>@samtuke you are right, good catch.</p>", "<p>In its current form this will add a new string for translation (increasing the burden on volunteer translators). However if we combine the two existing strings ('download' and 'addresses') then it could have unintended consequences for languages with which we are not familiar. Hence I will merge this as-is.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/383", "title": "#19348 modify action buttons on header of bounces page", "status": "closed", "labels": [], "priority": null, "description": ["<p>mantis link: https://mantis.phplist.org/view.php?id=19348</p>\n<p>BEFORE:\n<img alt=\"screenshot from 2018-08-05 20-10-37\" src=\"https://user-images.githubusercontent.com/7660111/43691089-ed89a672-98ec-11e8-84f7-0838e7bb0ed3.png\" /></p>\n<p>AFTER:\n<img alt=\"screenshot from 2018-08-05 20-05-31\" src=\"https://user-images.githubusercontent.com/7660111/43691100-03d4bbb0-98ed-11e8-9dca-f3cad46d7606.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/382", "title": "replace power-phplist.png", "status": "closed", "labels": [], "priority": null, "description": ["<p>Following @michield  instructions:\nhttps://mantis.phplist.org/view.php?id=19329#c60953</p>\n<p>May I replace this one too?\nhttps://github.com/phpList/phplist3/blob/master/public_html/lists/admin/images/power-phplist.png</p>", ["<p>@michield I replaced the /admin/images too.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/381", "title": "#0018944: Style top buttons in manage plugins page", "status": "closed", "labels": [], "priority": null, "description": ["<p>mantis link: https://mantis.phplist.org/view.php?id=18944</p>\n<p>BEFORE:\n<img alt=\"screenshot from 2018-07-26 13-03-42\" src=\"https://user-images.githubusercontent.com/7660111/43289645-fd3a9b0a-9101-11e8-9531-cbd303b0a7c0.png\" /></p>\n<p>AFTER:\n<img alt=\"screenshot from 2018-07-26 18-31-33\" src=\"https://user-images.githubusercontent.com/7660111/43289704-2ae223c0-9102-11e8-8183-9e8aada5f158.png\" /></p>\n<p>No changes in Dressprow.</p>", ["<p>@mariez it looks very good, just one thought: maybe change the \"plugin package url\" text position to look vertically center-aligned? </p>", "<p>Thats not possible in this commit because css is in Trevelin repository. We can do it later.</p>", "<p>Unless I can add a style to the open form tag. I will commit a change but I need your review on the formStart() function line @xh3n1 </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/380", "title": "Set ownerid of invite campaign to 1 for fresh new installations", "status": "closed", "labels": [], "priority": null, "description": ["<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", ["<p>@michield thanks for the review. I made changes to the PR.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/379", "title": "Do not enable a plugin that does not meet its dependencies", "status": "closed", "labels": [], "priority": null, "description": ["<p>There is a problem when a plugin is updated and then does not meet its dependencies.</p>\n<p>On the Plugins page it is correctly shown as disabled due to dependency checks, but the processing in pluginlib.php, on each page load, treats it as still being enabled and the plugin's menu items etc are still displayed. Depending on what the dependencies actually are, this can cause a failure that can be difficult to diagnose.</p>\n<p>This change adds a test of whether each plugin can be enabled and ignores plugins that are already enabled but fail the test.</p>", ["<p>@samtuke @xh3n1 </p>\n<p>It may be useful to find some place to notify about this, as it will disable plugins that are enabled during an upgrade.</p>\n<p>I'll create a mantis issue to review the UX here.</p>", "<p>https://mantis.phplist.org/view.php?id=19337</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/378", "title": "#18943: style \"remove subscriber\"", "status": "closed", "labels": [], "priority": null, "description": ["<p>mantis: https://mantis.phplist.org/view.php?id=18943</p>\n<p>BEFORE\n<img alt=\"screenshot from 2018-07-18 18-01-46\" src=\"https://user-images.githubusercontent.com/7660111/42907790-3f946fce-8ab5-11e8-8896-790b363360e3.png\" /></p>\n<p>AFTER\n<img alt=\"screenshot from 2018-07-18 18-01-20\" src=\"https://user-images.githubusercontent.com/7660111/42907798-48887242-8ab5-11e8-9ed7-03fd2676ea7f.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/377", "title": "Changed url and regex fields from varchar to text and check if indexes exist", "status": "closed", "labels": [], "priority": null, "description": ["<p>This is a PR for release-3.3.4 \n1. Changed url fields from varchar to text\n2. Changed regex field from varchar to text\n3. Created a function to check if indexes exist\n4. Drop old indexes if they exist and then create new ones.</p>\n<p>I have tested it on fresh new installations and upgraded and it works on my side. (I even tried manually removing an index and then upgrade). Anyway, this needs additional testing as in my opinion it's kind of sensitive. </p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/376", "title": "Release 3.3.4", "status": "closed", "labels": [], "priority": null, "description": ["<p>Merge 3.3.4 back to master</p>", ["<p>@michield is this ready for merge? </p>", "<p>Yes, @xh3n1 if you agree this has all the changes from 3.3.4 we can merge.</p>", "<p>What's the advantage of merging the release branch back into master before the final release is issued? The release procedure includes this merge, as documented in the internal wiki. </p>", "<p>@samtuke not before the final release, but just wanted to make sure that everything is included.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/375", "title": "Change bounce data field datatype from blob to mediumblob", "status": "closed", "labels": [], "priority": null, "description": ["<p>-Changed the data type of the column in the bounce table for new installations and upgrades.\nhttps://mantis.phplist.org/view.php?id=19324</p>\n<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/374", "title": "Plugin adding attachments does not work", "status": "closed", "labels": [], "priority": null, "description": ["<p>Correct misspelt variable name that stopped a plugin adding an attachment to an email.</p>\n<p>Can this be added to the pending 3.3.4 release in addition to master?</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/373", "title": "Improve the appearance of user check page", "status": "closed", "labels": [], "priority": null, "description": ["<p>-Removed the duplicated emails\n-Display key column only if its not null\n-Removed the \"duplicated\" continue button</p>\n<p>Before:\n<img width=\"1138\" alt=\"screen shot 2018-07-12 at 16 59 57\" src=\"https://user-images.githubusercontent.com/9008509/42644387-c70c64fc-85fb-11e8-8c4e-afbfbd21d925.png\">\nAfter : \n<img width=\"1136\" alt=\"screen shot 2018-07-12 at 17 36 38\" src=\"https://user-images.githubusercontent.com/9008509/42644424-df72eaac-85fb-11e8-97b4-4fe804d29afe.png\"></p>", ["<p>Mantis issue: https://mantis.phplist.org/view.php?id=19320</p>", "<p>This page has different labels for foreign key 'Foreign Key' and 'key'. Perhaps use just 'Foreign Key' in both.</p>\n<p>setElementHeading() applies to the WebblerListing so need be called only once outside of the loop, not for each email/foreign key</p>\n<p>The non-existing subscribers listing displays either an email address or a foreign key (depending on which radio button was selected) so the heading should reflect that.\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/42675483-3c35940e-866c-11e8-8c3e-7ae6215964ff.png\" /></p>\n<p>What is the reason for changing htmlspecialchars() to htmlentities()?</p>\n<p>With the first  Continue button removed I had to scroll down to find the button beneath the input area, on both Trevelin and Dressprow themes. I suggest keeping both buttons or decreasing the height of the input area so that the single button is always visible.</p>", "<p>Using strip_tags() looks odd, because it means the value displayed in the listing can be different to that which was entered and used to match an email address or foreign key.</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/42676171-fdb2758c-866e-11e8-870c-ac9f52bc637a.png\" /></p>\n<p>I think that using htmlspecialchars() on the entered value should be sufficient.</p>", "<p>@bramley Thank you for the review. \n1. There are two different WebblerListing ($lsexist and $lsnonexist) and it needs to be applied to both.\n2. Regarding the headings, I think that one should see the corresponding email address of the foreign key entered and vice versa if it exists and either email address or a foreign key (depending on which radio button was selected) if it doesn't exist.\n3. Use htmlentities() instead of htmlspecialchars() because htmlspecialchars() translates only some set of characters (http://php.net/manual/en/function.htmlspecialchars.php). For full entity translation, htmlentities is recommended. Anyway on \"textarea\" context, using htmlspecialchars is also fine.\n4.  I agree with you about strip_tags, I applied htmlentities and stripslashes to that element as well.\n5. Regarding the \"continue\" button I agree with you about decreasing the height of the textarea, but I think that the button should be positioned at the bottom. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/372", "title": "Make dates human readable on Campaign click statistics page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Applied standardized date formatting to latest clicked date.\nMantis: https://mantis.phplist.org/view.php?id=19316</p>\n<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/371", "title": "Added csv extension  for \"bounces per list\" download file", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=18023</p>\n<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/370", "title": "Make pages and menulinks empty array", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis issue: https://mantis.phplist.org/view.php?id=19311\nSigned-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/369", "title": "Change copy to draft icon", "status": "closed", "labels": [], "priority": null, "description": ["<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/368", "title": "Change the title to reset style to default", "status": "closed", "labels": [], "priority": null, "description": ["<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/367", "title": "#0018939: Whitespace at the end of Subscriber profile page", "status": "closed", "labels": [], "priority": null, "description": ["<p>MANTIS ISSUE LINK: https://mantis.phplist.org/view.php?id=18939</p>\n<p>BEFORE:\n<img alt=\"screenshot from 2018-07-07 17-55-46\" src=\"https://user-images.githubusercontent.com/7660111/42414639-6a4cb46e-820f-11e8-8355-a5a705c01909.png\" /></p>\n<p>AFTER:\n<img alt=\"screenshot from 2018-07-07 17-56-16\" src=\"https://user-images.githubusercontent.com/7660111/42414642-798d727e-820f-11e8-80ea-f4e697b18be9.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/366", "title": "#0018862: Improve link to subsciber page from Clicks of a subscriber page", "status": "closed", "labels": [], "priority": null, "description": ["<p>BEFORE:\n<img alt=\"screenshot from 2018-07-06 21-30-04\" src=\"https://user-images.githubusercontent.com/7660111/42405244-51eb47ba-8169-11e8-888a-a876ebb985ba.png\" /></p>\n<p>AFTER:\n<img alt=\"screenshot from 2018-07-06 21-31-09\" src=\"https://user-images.githubusercontent.com/7660111/42405247-5c38ad52-8169-11e8-9baa-3102d8ea54c4.png\" /></p>", ["<p>Please add a link to the Mantis issue that this PR corresponds to. If no Mantis issue yet exists, please create one. </p>", "<p>https://mantis.phplist.org/view.php?id=18862</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/365", "title": "Display bounces per campaign", "status": "closed", "labels": ["on hold"], "priority": null, "description": ["<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", ["<p>@xh3n1 The layout of the page top buttons needs some work, and it would be good to add a dropdown list of other campaigns to navigate to, as is already provided on the 'bounces per list' page. Also stating the total bounces at the top, as on the other page, would be useful. See comparison of pagination and menu layout.</p>\n<h2><img alt=\"selection_466\" src=\"https://user-images.githubusercontent.com/695422/44145619-8e7896be-a08c-11e8-8d78-fca31d4f8561.png\" /></h2>\n<p><img alt=\"selection_467\" src=\"https://user-images.githubusercontent.com/695422/44145624-94fe1054-a08c-11e8-9533-af6ba1d6af3e.png\" /></p>", "<p>Thanks for the review @samtuke , good points. </p>", "<p><img width=\"1112\" alt=\"screen shot 2018-08-15 at 23 59 18\" src=\"https://user-images.githubusercontent.com/9008509/44175932-2f3a3200-a0e8-11e8-858f-11671ae115ca.png\"></p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/364", "title": "Mantis 18598: Add link to 'Active' tab of 'View Campaigns' page from 'Process queue' page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Add link to 'Active' tab of 'View Campaigns' page from 'Process queue' page</p>", ["<p><img alt=\"screenshot from 2018-06-29 19-56-35\" src=\"https://user-images.githubusercontent.com/7660111/42118080-edef09d2-7bd6-11e8-897b-7d28e2acd549.png\" /></p>\n<p>This is how it looks if you change this:\n<code>echo '&lt;a href=\"./?page=messages&amp;tab=active\" id=\"sendingprogress\" class=\"button\"&gt;'.snbr('View progress').'&lt;/a&gt;';</code>\nwith this:\n<code>echo '&lt;a href=\"./?page=messages&amp;tab=active\" id=\"sendingprogress\" class=\"button btn-primary btn-lg pull-right\"&gt;'.snbr('View progress').'&lt;/a&gt;';</code></p>", "<p>I agree, thanks :)</p>", "<p><strong>Sorry, but this doesn't make sense.</strong> </p>\n<p>The view progress button only makes sense when you process the queue on command line. When the queue is processed in the Browser, going to \"view progress\" would stop the queue from being processed.</p>\n<p>We should not add a link to \"view progress\".</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/363", "title": "Create htmlentities version of s function ", "status": "closed", "labels": ["enhancement"], "priority": null, "description": ["<p>This function is useful for escaping translation content.</p>\n<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/362", "title": "Encode text message in editor", "status": "closed", "labels": [], "priority": null, "description": ["<p>The text message in the editor was not properly encoded, when the data was rendered a second time (and edited) this resulted in the browser transmitting HTML special characters instead of the encoded versions. Thus breaking stuff that relied on special characters such as URLs containing <code>&amp;curren</code>.</p>\n<p>To reproduce this:</p>\n<ol>\n<li>Enable the manual text editor (define('USE_MANUAL_TEXT_PART',1);)</li>\n<li>Enter the following message as text: \"https://www.paypal.com/cgi-bin/webscr?business=hbeer@ability1group.eu&amp;cmd=_donations&amp;amount=0&amp;item_name=DEEPclearing&amp;lc=en_US&amp;currency_code=DKK\"3. Go to the next section</li>\n<li>Go back to \"Text\" and see it broken (since it's double encoded)</li>\n</ol>\n<p>Fixes https://discuss.phplist.org/t/url-for-paypal-donation-destroyed-in-text-message-window/3517</p>\n<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/361", "title": "Show delete button on sent campaigns if it is a test", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19283</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/360", "title": "Client denied by server configuration for fckeditor connector.php", "status": "closed", "labels": [], "priority": null, "description": ["<h3>Short problem description</h3>\n<p>A plugin URL is going 403 and ~~I can't found why~~. I \"solve\" the issue by adding <code>connector.php</code> on this line: https://github.com/phpList/phplist3/blob/b9c5c46858fcfe1bf75e60b81b8d59363c5d2266/public_html/lists/admin/plugins/.htaccess#L13</p>\n<h3>Steps to reproduce</h3>\n<p>From the editor, I go to the image server browsing, calling this url:</p>\n<p><code>https://mailing.site.org/lists/admin/plugins/fckphplist/fckeditor/editor/filemanager/connectors/php/connector.php?Command=GetFoldersAndFiles&amp;Type=File&amp;CurrentFolder=%2F&amp;uuid=1530137988035</code></p>\n<h3>Expected behaviour</h3>\n<p>The URL should be accessible.</p>\n<h3>Actual behaviour</h3>\n<p><code>[Thu Jun 28 00:45:41.966389 2018] [authz_core:debug] [pid 13187] mod_authz_core.c(809): [client 90.110.6.214:43194] AH01626: authorization result of Require all denied: denied\n[Thu Jun 28 00:45:41.966482 2018] [authz_core:debug] [pid 13187] mod_authz_core.c(809): [client 90.110.6.214:43194] AH01626: authorization result of &lt;RequireAny&gt;: denied\n[Thu Jun 28 00:45:41.966568 2018] [authz_core:error] [pid 13187] [client 90.110.6.214:43194] AH01630: client denied by server configuration: /var/www/site.org/mailing/current/web/lists/admin/plugins/fckphplist/fckeditor/editor/filemanager/connectors/php/connector.php</code></p>\n<p>If there are any error messages, please include those as well.</p>\n<h3>System configuration</h3>\n<h4>Package version</h4>\n<p>3.3.1</p>\n<h4>PHP and Composer version</h4>\n<p><code>PHP 7.2.5-0ubuntu0.18.04.1 (cli) (built: May  9 2018 17:21:02) ( NTS )\nCopyright (c) 1997-2018 The PHP Group\nZend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies\n    with Zend OPcache v7.2.5-0ubuntu0.18.04.1, Copyright (c) 1999-2018, by Zend Technologies</code></p>\n<p><code>Composer version 1.6.3 2018-01-31 16:28:17</code></p>\n<h4>Apache (2.4) configuration</h4>\n<p>```\n<VirtualHost *:443>\n    ServerName mailing.site.org\n    DocumentRoot /var/www/site.org/mailing/current/web</p>\n<pre><code>&lt;Directory \"/var/www/site.org/mailing/current/web\"&gt;\n    AllowOverride All\n    Require all granted\n&lt;/Directory&gt;\n\nErrorLog ${APACHE_LOG_DIR}/mailing.site-error.log\n\n# Possible values include: debug, info, notice, warn, error, crit,\n# alert, emerg.\nLogLevel debug\n\nCustomLog ${APACHE_LOG_DIR}/mailing.site-access.log combined\n\nInclude /etc/apache2/sites-ssl/site-org.ssl.conf\nInclude /etc/apache2/letsencrypt.conf\n</code></pre>\n<p></VirtualHost>\n```</p>", ["<p>@Soullivaneuh Is this the plugin that was included with phplist 3.3.1 with no changes, or something else? From your description of the URL being denied, the path does not actually exist in the plugin</p>\n<p><code>plugins/fckphplist/fckeditor/editor/filemanager/connectors/php/</code></p>", "<blockquote>\n<p>Is this the plugin that was included with phplist 3.3.1 with no changes, or something else?</p>\n</blockquote>\n<p>Provided by phplist itself for sure. I didn't setup any custom plugin/library on this project.</p>", "<p>@soullivaneuh  As I previously mentioned, the path you showed does not exist. The correct path  is</p>\n<p>plugins/fckphplist/fckeditor/editor/filemanager/connectors/<strong>phplist</strong>/</p>\n<p>But the fckeditor is now outdated and you should use ckeditor through the ckeditor plugin instead.</p>", "<blockquote>\n<p>But the fckeditor is now outdated and you should use ckeditor through the ckeditor plugin instead.</p>\n</blockquote>\n<p>@bramley Did not see any doc about that. How I am suppose to do that? :thinking: </p>", "<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/1698357/100791225-37cde800-3419-11eb-81e4-659d57e52eca.png\" /></p>\n<p>Found it, but I am not able to activate it.</p>", "<p>Found. I had to disable the other editor plugin first.</p>\n<p>Thanks for the help.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/359", "title": " Provide 'Reset template' button for subscribe pages", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19267</p>", ["<p>This PR on trevelin theme needs to merged for the resettemplate icon : https://github.com/phpList/phplist-ui-bootlist/pull/60</p>\n<p><img width=\"1081\" alt=\"screen shot 2018-06-28 at 14 24 20\" src=\"https://user-images.githubusercontent.com/9008509/42034096-3cbce9b0-7adf-11e8-93dd-bf13e3ca412a.png\"></p>", "<p>@xh3n1 Thanks!</p>\n<p>@suelap What do you think about only resetting the subscribe page header and footer, so that the reset only affects the theme and not the page text content or transactional messages? </p>", "<p>@samtuke yes I think it would be better to use this option to reset only header and footer, but we should also do something similar with updating transactional messages, in a seperate issue.</p>", "<p>@samtuke @suelaP Thanks,  I made the changes. Now only footer and header will be reset. </p>", "<p>@suelaP @xh3n1 Should the wording of the button alt text be changed to reflect this? E.g. 'Reset styling to default (header and footer)'?</p>", "<p>I think \"Reset styling to default\" it's enough of a hint. The message then provides a better description. @xh3n1 @samtuke </p>", "<p>@samtuke @suelaP done. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/358", "title": "Escape list description content on index page", "status": "closed", "labels": ["on hold"], "priority": null, "description": ["<p>I have used htmlentities to escape list description content to prevent malicious tags on index page (/lists/?p=subscribe&amp;id=). </p>", ["<p>I think we should allow admins to have HTML in the description of a list. This will stop that and render the page very strangely. Maybe we should only allow some tags and strip <script> and other ones, but I do think we want to allow HTML.</p>", "<p>List description is somewhat confusing currently as it is used on both public and private pages. I would expect HTML content on the public pages, but not on the private pages, and the nature of the description is potentially different. Thoughts @suelaP ?</p>", "<p>@suelaP Ping</p>", "<p>@samtuke  &gt; @xh3n1 will review this again following a conversation we all had about this. </p>", "<p>Ping</p>", "<p>This needs rethinking, and can't merge as is</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/357", "title": "use getNewAttributeTablename function to increment the tablename of default attributes", "status": "closed", "labels": [], "priority": null, "description": ["<p>It will fix the issue described here: https://mantis.phplist.org/view.php?id=19246</p>\n<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/356", "title": "Move tabs from userhistory to user by using ajax", "status": "closed", "labels": [], "priority": null, "description": ["<p><a href=\"https://github.com/phpList/phplist-ui-bootlist/pull/59\">Create fallback handling for jQuery UI async tabs</a> needs to be merged to make it work.\nOn this PR I have:\n1. created a page on actions folder for each element of userhistory. \n2. removed the userhistory button and replace every userhistory pagelinkbutton with user.\n3. changed the confirm button to use an event handler because script tags are not executed on while loaded async.</p>\n<p>I'm not sure about permission checks on the newly created pages. Any feedback?</p>\n<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", ["<p><img width=\"1137\" alt=\"screen shot 2018-06-26 at 13 06 09\" src=\"https://user-images.githubusercontent.com/9008509/41907633-c74472aa-7941-11e8-92ec-ce216ff30d8b.png\"></p>", "<p>I will also fix the tests.</p>", "<p>@xh3n1 When clicking the following tabs: Campaigns, bounces, Subscription, I get the following error:</p>\n<p><code>Error: Syntax error, unrecognized expression: ./?page=pageaction&amp;action=campaigns&amp;ajaxed=true&amp;id=1&amp;tk=9f03275d26431f47f63612383fc3a689 jquery-1.12.1.min.js:2:12733\n    t&lt;/fa.error http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/jquery-1.12.1.min.js:2:12733\n    t&lt;/fa.tokenize http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/jquery-1.12.1.min.js:2:18785\n    t&lt;/fa.select http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/jquery-1.12.1.min.js:2:21596\n    fa http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/jquery-1.12.1.min.js:2:7320\n    find http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/jquery-1.12.1.min.js:2:24109\n    n.fn.init http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/jquery-1.12.1.min.js:2:24672\n    n http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/jquery-1.12.1.min.js:2:406\n    c.prototype.show http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/dist/phpList_ui_bootlist.min.js:5:25871\n    b/&lt; http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/dist/phpList_ui_bootlist.min.js:5:25372\n    each http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/jquery-1.12.1.min.js:2:2879\n    each http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/jquery-1.12.1.min.js:2:844\n    b http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/dist/phpList_ui_bootlist.min.js:5:25264\n    e http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/dist/phpList_ui_bootlist.min.js:5:26887\n    dispatch http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/jquery-1.12.1.min.js:3:12396\n    add/r.handle http://local.pl2/lists/admin/ui/phplist-ui-bootlist/js/jquery-1.12.1.min.js:3:9158</code></p>", "<p>@samtuke did you use this https://github.com/phpList/phplist-ui-bootlist/pull/59? </p>", "<p>@xh3n1 No; and with that branch of the theme the problem is resolved. Thanks for the hint</p>", "<p>@xh3n1 I see that you removed the test for the userhistory pages from <code>newsubscriber.feature</code>, but it looks like replacement tests were not added (so the subscriber history data is no longer checked). Can you add some corresponding tests?</p>", "<p>Ok, both PRs merged. Will be good to do some thorough testing on this.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/355", "title": "Move 'Dashboard' from 'Info' on Dressprow and delete 'Info' menu", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19219\nhttps://mantis.phplist.org/view.php?id=19171</p>", ["<p>This is failing because the pull request from Mariez is not merged yet. </p>", "<p>I merged the PR from Mariez and restarted Travis</p>", "<p>@suelaP should rebase to master otherwise the tests will fail  </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/354", "title": "#19272: Move 'Configure attributes' link from Config to Subscribers", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/353", "title": "How is runcommand intended to be used?", "status": "closed", "labels": ["question"], "priority": null, "description": ["<p>@michield There is a runcommand page, file admin/runcommand.php, that appears to restricted to run only from the command line. It refers to $_GET though, in particular $_GET['command']. How is that set?</p>", ["<p>I found that including <code>command=xxx</code> in the command but <strong>before</strong> the -p and -c parameters works, <code>$_GET['command']</code> is then populated.\nIs that the intended way?</p>", "<p>Yes, that's intended.</p>", "<p>although, I can't remember that it needed to be before -c and -p </p>", "<p>If it appears after -p and -c then it gets included in the last parameter</p>\n<p><code>php /home/duncan/www/lists/admin/index.php  -c /home/duncan/Development/PHP/phplist/config.php -p runcommand command=xxx</code></p>\n<p><code>Error: runcommand command=xxx does not process commandline</code></p>", "<p>ah, yes, I remember that. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/352", "title": "use stripslashes for the intro field ", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19254</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/351", "title": "Escape text message content and attachment fields using htmlentities on message page", "status": "closed", "labels": [], "priority": null, "description": ["<p>I have used htmlentities to escape subject, fromfield, text content and attachment fields on ?page=message&amp;id  page for proper rendering and preventing malicious tags. </p>", ["<p>@xh3n1 Please can you resolve the conflicts that have arisen, then I will merge this.</p>", "<p>@samtuke I resolved the conflicts, thanks</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/350", "title": "Display strYouAreBlacklisted  if a blacklisted subscriber clicks on update preferences button", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/349", "title": " Convert the first char of table headings etc to uppercase", "status": "closed", "labels": ["work in progress"], "priority": null, "description": ["", ["<p>I think we should not do this. This has all kinds of strange effects on other languages. eg in German capitalisation is very different from English</p>", "<p>I agree with Michiel. This was discussed years ago and everyone agreed to let translators the freedom to manage uppercase or lowercase, not force the case with css or php.</p>", "<p>@mariez @michield ok, I didn't know that. I'm closing the PRs. </p>", "<p>Anyway, I have noticed that ucfirst is being used for some strings and we should remove it. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/348", "title": " Improve the order of tabs on 'Add new subscribe page'", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19266</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/347", "title": "Use correct column name of message table  on resetMessageStatistics", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fix #346 </p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/346", "title": "Use of incorrect column name of message table", "status": "closed", "labels": [], "priority": null, "description": ["<p>This pull request https://github.com/phpList/phplist3/pull/298 has an error </p>\n<pre><code>    Sql_Query(sprintf('update %s set viewed = 0 where messageid = %d', $GLOBALS['tables']['message'], $messageid));\n</code></pre>\n<p>It should be referring to the id column of the message table.</p>", ["<p>thank you @bramley for reporting it, I will fix it. </p>", "<p>Thanks for spotting that @bramley </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/345", "title": "Display list names on the messages page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Display the names of the lists to which a campaign has been or will be sent.</p>\n<p>I have added a row to show the list names but there might be a better way of doing that. To avoid the \"Lists\" label, maybe append the list names to the campaign subject</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/41034490-a72edad4-6981-11e8-9c87-01424a44461c.png\" /></p>", ["<p>Why do you think it is necessary to add that there when the information is already available when clicking the \"View\" campaign option?</p>", "<p>The benefit is seeing immediately the lists to which the campaign was sent or will be sent.</p>\n<p>This arose because a client of mine composed a campaign and chose the wrong list. Looking at the Active tab of the messages page for confirmation he saw that it was scheduled to be sent but did not see that he had chosen the wrong list. Possibly the list names could be displayed only on the Active tab but I don't see a problem displaying on all the tabs.</p>", "<p>It works when there is only one or a small number of lists, but what happens if the amount of lists is large?</p>", "<p>Yes, that's my concern too. I have seen very long list names too. \nAlso, I think adding this will put too much information on one page, making it as a whole less readable. </p>", "<p>What about showing the lists only for active campaigns? Some users also have many campaign running simultaneously, I suppose, but still it would solve the visual clutter problem on the other tabs.</p>", "<p>Perhaps display only a few list names with an indication of how many other lists were sent to. </p>\n<p>This example displays a maximum of three lists. If there are more than three (actually four for this campaign) then only the first two are displayed with an indication of the number not being shown.\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/41773992-d36f75c2-7615-11e8-8b1f-0fdcb313e50a.png\" /></p>\n<p>I'm not sure about long list names, possibly truncate to a length that will display reasonably in both themes. Is there anywhere else that list names are truncated?</p>", "<p>Yes, that's quite nice, I think that would work. Even with long names, it wouldn't be too bad. It would probably be good if the \"and 2 more\" links to the place where this is expanded.</p>", "<p>Now made the \"and n more\" a link to the lists on the view message page\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/42043242-dc9ff158-7aed-11e8-8c75-0a74e396c5d2.png\" /></p>", "<p>Great!</p>", "<p>@bramley  I don't know if it was intentional but these changes are applied for sent campaigns too, not only those on the active tab. I thought we agreed on Sam's proposal to only do that for campaigns being sent ( as in that way it would address the problem you described earlier in the thread). @xh3n1  can work on reverting the commit related to the sent tab, but maybe you want to make the change yourself?</p>", "<blockquote>\n<p>I thought we agreed on Sam's proposal to only do that for campaigns being sent</p>\n</blockquote>\n<p>No, there wasn't any further discussion of the suggestion to limit the change to only the Active tab. </p>\n<p>The vertical impact of the change is limited by displaying only three list names. Can you show a  screenshot where that is too disruptive?</p>", "<p>@bramley I agree that isn\u2019t too distruptive but, I can\u2019t see any value on adding it there either. The problem you described is resolved with adding the lists on campaigns being sent. As per already sent campaigns the information is already there and easy accessible. </p>", "<p>Maybe we should revert the commit for the release branch and keep it on master for changes if needed?  What do you think?</p>", "<p>I agree @xh3n1</p>", "<p>I don't see a value in reverting. It's not obstructing anything, and reverting will increase the work involved, having to re-check it. For now, we should close this and leave it as is. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/344", "title": "fix campaign click statistics export", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19269</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/343", "title": "#0019164: Send test from Template only available for System Template", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>The send test on templates is not like campaigns. There is no content to send. So, the send Test in templates will send the transaction messages as the content.</p>\n<p>That is the reason we are only sending tests on templates with the system template.</p>\n<p>If you want that to change you'd need to think about what content to send in the test messages, or maybe empty content? Or Lorem Ipsum.</p>", "<p>The commit only uncomment the if statement that use to hide the send test panel on non system templates. Just to hide it again. I don't know who or why this was commented.</p>", "<p>Yes, and as a result non-system templates will be able to be used to send test mails. That may not be desired functionality.</p>", "<p>@michiel I think maybe I am not using the right words. I will try to explain myself again. </p>\n<p>Actually, the \"send test\" panel is shown with all templates, thats why @suelaP  reported the issue: https://mantis.phplist.org/view.php?id=19164 asking to hide the \"send test\" button on non-system templates, because is not usefull for that templates.</p>\n<p>When I open template.php I see that there is an if statement at the bottom to hide the \"send test\" panel on non-system templates. Thats great, but that if statement, actually is commented, so is not doing  the job. Thats why actually we have the issue that the \"send test\" panel is shown on non-system templates. </p>\n<p>So, with this commit, I am triying to remove the comments and let the if statement work again and hide the \"send test\" panel.</p>", "<p>Yes, I know what will happen when we do this. I'm just trying to flag up that I'm not sure that we want that to happen. I think it will be very confusing UX. On the template page (without actual campaign content to send for testing) only sending the system template as a test makes sense. Not any other template.</p>", "<p>Ok, my bad. I completely read is the opposite of how it is. Instead of removing the condition, you are re-adding it. Sorry to cause all the confusion. I just don't understand how it got to be as it as in the first place. </p>", "<p>Wow, it's been like that for 4 years, amazing: https://github.com/phpList/phplist3/commit/a3bf8d3fcfc85a7b4b816f1666be7781c4e80dbf</p>", "<p>And not only that, I made that change. Ouch. \nhttps://mantis.phplist.org/view.php?id=17462</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/342", "title": "Change Edit icon to Copy icon", "status": "closed", "labels": [], "priority": null, "description": ["<p>A corresponding commit to the bootlist theme adds necessary JS to make the button icon render correctly: https://github.com/phpList/phplist-ui-bootlist/commit/e3177c860dc28008c7bbdcaa9e6405565035f61a</p>\n<p><img alt=\"selection_428\" src=\"https://user-images.githubusercontent.com/695422/40849686-e8f5320a-65c2-11e8-9979-ecb5d8dca8a1.png\" /></p>", ["<p>With the dressprow theme it appears to fall back to the title attribute. Works \u263a\ufe0f\n<img alt=\"copyicondressprow\" src=\"https://user-images.githubusercontent.com/1377837/40851455-7b15620a-6595-11e8-9cf0-75627ca8c9a4.png\" /></p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/341", "title": "select 'Don't offer choice, default to HTML' by default", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19265</p>", ["<p>Tests stopped failing after I used  <em>composer clear-cache</em> in my branch. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/340", "title": "Copy to draft feature", "status": "closed", "labels": [], "priority": null, "description": ["<p>The request comes up every now and then for the ability to copy a previously sent message into draft.\nThis adds a button in the \"Sent\" campaign list to do so.</p>\n<p>https://forums.phplist.com/viewtopic.php?p=39364</p>\n<p>Updated the patch to work with the latest version.</p>\n<p>Would be nice if this could be coded as a plugin, but there isn't a hook for it yet.</p>\n<p>https://mantis.phplist.org/view.php?id=19263</p>", ["<p>Brilliant - thanks for the PR \ud83d\udc4d It should be reviewed shortly.</p>", "<p>Yes, this has been requested many times. I have always been hesitant to add something like this, as I think it will make it easier to accidentally duplicate content to subscribers. </p>\n<p>My preference would be to wrap this in a config option that can be enabled in the config file, but is not enabled by default. We can then warn about it in the comments on the config file.</p>", "<p>How about adding contextual help or a popup to the button to warn not to send duplicate content to subscribers? </p>", "<p>@rolanyang before we can merge PRs from you, could you <a href=\"https://www.phplist.com/cla\">sign the CLA</a>? Thanks</p>", "<p>CLA done. \nI was looking for an icon closest to copy in ui/dressprow/images/16x16\nIt was either edit-1.png or library.png</p>\n<p>One more thing to look over: </p>\n<p>I don't know what the database fields  repeatinterval, repeatuntil, requeueuntil, requeueinterval do. Perhaps it might be better to leave them out of the \"insert\" query. Also I'm noticing now that \"processed\" should probably be left out as well.</p>", "<p>I think the fontawesome catalogue of icons should be at your disposal as well. </p>", "<p>You may want to check out the repeatMessage function </p>\n<p>https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/connect.php#L1811</p>\n<p>This is used when REPETITION is enabled and campaigns and automatically duplicated after they have been sent. </p>\n<p>To make this feature work fully, you would need to duplicate attachments as well.</p>\n<p>You won't be able to use that function, but you can verify the steps done there. </p>", "<p>In regards to using the \"copy\" icon, implementing that would cascade changes down into the bootstrap.js, and a slew of css files one for each of the themes. The 16x16 image would have to be extracted out of the glyph's file too as Dressprow theme doesn't use woff2 fonts for the buttons.  I'm not sure if you want to go down that route. </p>", "<p>I copied this branch and created a PR which replaces the edit icon with a copy one: https://github.com/phpList/phplist3/pull/342</p>", "<p>Are there any remaining tasks that need to be done on my part?</p>", "<p>@rolanyang What about campaign attachments? Did you take a look at the logic for campaign repetition that michield mentioned? </p>", "<p>This is missing some fields on the message table - uuid, repeatinterval and requeueinterval.</p>\n<p>Several fields are held on the messagedata table, not on the message table - finishsending, sendmethod, sendurl, campaigntitle and excludelist, so those should be copied too.</p>\n<p>I think that people will expect the new draft message to be sent to the same lists as the original, so the rows on listmessage for the original should be also be copied.</p>\n<p>See https://github.com/bramley/phplist-plugin-common/blob/master/plugins/Common/DAO/Message.php#L36 for how I implemented similar function for the Campaigns plugin.</p>", "<p>In testing, I noticed the Campaign Subject would be lost om the message copy and instead take on the Campaign Title unless the \"subject\" field was copied over in the phplist_messagedata  table.</p>", "<p>how does this relate to #342 ?</p>", "<h1>342 Makes an icon available for the \"duplicate\" action. Any button can use the button by using the corresponding css class.</h1>", "<p>@rolanyang Are you able to fix that so the subject isn't lost? </p>", "<p>The most recent commit fixed the lost subject issue as well as the missing fields.\nhttps://github.com/phpList/phplist3/pull/340/commits/cd82b727bd31025c54f76f4751fc1364e461fc85</p>", "<p>@samtuke good to go for me, if we ensure some testing is done</p>", "<p>@samtuke do you want to remove the wip label? or is there still something outstanding. I actually think that not copying the attachment may be a good thing, otherwise you could end up accidentally sending the same attachments. In a way, that was the reason I was never in favour of a feature like this, but as a minimal implementation I guess it will improve UX a little. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/339", "title": "Make \"contact administrator\" translatable on subscribe page", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19257</p>", ["<p>I also added the string to english.inc files -&gt; https://github.com/phpList/phplist-lan-texts/pull/18</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/338", "title": "Check import with trevis", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>@suelaP Instead of closing PRs when the tests don't pass, you can instead give them a 'WIP' (work in progress) label. Then you and others can continue working on them and testing changes.</p>", "<p>will do that in future, I was actually testing something with trevis on my fork and opened this pull request accidentally </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/337", "title": "A question not and issue: Will asubscribe work with built-in captcha plugin?  ", "status": "closed", "labels": ["question"], "priority": null, "description": ["<p>Hi there,</p>\n<p>I didn't try that. But by just thinking about it, it doesn't look like this combination will work. I mean you would have to do other calls (which I don't see and API for) to display and process captcha before posting to asubscribe.</p>\n<p>If the above is true, should one just roll it's own captcha integration or the built-in plugin can be leveraged somehow? </p>\n<p>Thanks </p>", ["<p>@asdr45fsd35fdf Is your goal to add captchas (via the captcha plugin) to the unsubscribe page?</p>\n<p>This plugin hook allows you to override the default unsubscribe page: <a href=\"https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/defaultplugin.php#L1051\">unsubscribePage()</a></p>\n<p>Another way would be to update the unsubscribe page template that is stored in the database (to make it user editable).</p>\n<p>From a user perspective, perhaps the best approach would be to extend the captcha plugin to add an option to add captchas to unsubscribe pages (instead of creating a separate plugin).</p>\n<p>Does that help?</p>", "<p>FYI @bramley </p>", "<p>@asdr45fsd35fdf If you want to use asubscribe then you need to create your own subscribe form to be included on your web site. Usually those tend to be small so adding captcha might disrupt the layout too much.</p>\n<p>If you want captcha to be used then you'll need to look at the phplist subscribe page to copy and possibly modify the chunk of html that deals with captcha. So long as the same fields are submitted then the plugin will validate them.</p>\n<p>To ensure that a different captcha is displayed each time there needs to be a random number generated. That is done automatically when the html is generated by the plugin but would need to be done by client side code in your case, see the quick start guide for an example</p>\n<p>https://www.phpcaptcha.org/documentation/quickstart-guide/</p>", "<p>@samtuke\nSorry, I should have provided more context. I'm using asubscribe (ajax integration). I want captcha on my subscribe page (my html not phpList subscribe page) not the unsubscribe page. This is to prevent bots from spamming me. I saw built-in captcha plugin (that was disabled by default for me as it needs core plugin enabled first I think). I did not see a way how to integrate this captcha plugin into my custom html that uses asubscribe. </p>\n<p>@bramley \nYes, that what I did. My site is one single html page with custom subscribe form. I don't want the user to leave my page. Thank you for the suggestion I will try to piggyback on what \"phplist subscribe page\" does when captcha is enabled. \nI suspected that the plugin might not work with asubscribe out-of-the-box. Thank you for the link. I will investigate this.</p>\n<p>The issue is closed as far as I'm concerned.    </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/336", "title": "Separate phplist\\index.php (and other subscriber facing UI) from Admin parts", "status": "open", "labels": [], "priority": null, "description": ["<p>Hi there, </p>\n<p>For me, it is a gray area if we should consider it a bug, a design flaw, or a feature request. If you don't agree that it is an issue, please move it to a proper place, or let me know and  will recreate it elsewhere. </p>\n<p>So in the root folder of my website I have .htaccess file, to which I added the following snippet\n<code>RewriteEngine On\nRewriteCond %{REQUEST_URI} ^/phplist/admin\nRewriteCond %{REMOTE_ADDR} !=x.x.x.x\nRewriteRule ^(.*)$ - [R=403,L]</code>\nThis lets me access the admin section only from my IP and significantly decrease the angles of possible attacks from the bad boys and girls. </p>\n<p>However, when I do that the subscriber facing UI looses all the formatting and style. At first I thought I'll do a quick workaround by just copying all the js and css from admin a level up and change the references in index.php. But after quick inspection I doesn't look like it is an easy workaround. The subscriber UI and admin parts are tightly coupled. And untangling them will be a big effort.</p>\n<p>Please consider this for future releases. And I will be grateful if anyone has ideas on how to secure Admin without sacrificing Subscriber's UI.   </p>", ["<p>why so complicated with a Rewrite to block access. Just a simple require line would be sufficient.\nhttps://httpd.apache.org/docs/2.4/howto/access.html</p>\n<p>I don't think any shipped frontend code is in the admin folder, but there may be other references to it. Try checking the network connections, when you press F12. </p>\n<p>The forums are probably a better place to discuss this.</p>", "<p>@michield  hi there. As mentioned above, I want to keep my changes separate from phplist, thus I have  .htaccess inside my root folder. I don't know how you would tell Apache that you need to restrict \"/phplist/admin\" only and spit out 403. Anyhow that's not the problem.</p>\n<p>Unfortunately, the front end code is shared between Admin and Subscriber UI. See <a href=\"https://drive.google.com/open?id=11Ld4KBKtW5OYPThnO6aWkfhM5X7pEac-\">screenshot</a>. All the reds are coming from admin/ui or admin/js. Again, as I said there is more to untangling then just copy-pasting css and js and changing the references somewhere in index.php. When I look at it, the index.php requires bunch of other php files (from admin) that in turn require more php files (also from admin). Somewhere inside admin the needed references (to js and css) are eventually made.</p>\n<p>I can gladly move it to the forum, but I don't see \"register\" link <a href=\"https://forums.phplist.com/ucp.php?mode=login\">here</a>. If you implied some other forum please let me know. I will repost there and add a cross-reference here.  </p>\n<p>*reworded</p>", "<p>Interesting. Looks like your Rewrite is blocking too much.</p>\n<p>Forums are here: https://discuss.phplist.org/\nSign up here: https://www.phplist.org/join/</p>\n<p>If you find it's a bug, report it here: https://mantis.phplist.org</p>", "<p>@asdr45fsd35fdf Separating the two areas of the application entirely would require more duplication of libraries and complications for translation. Hopefully you can achieve access restriction to the admin pages that you desire with modified rewrite rules. When you do, please can you share what worked here, so that it can be added to the <a href=\"https://resources.phplist.com/\">wiki</a> (or add it to the wiki directly yourself)?</p>", "<p>@michield thanks for the information.</p>\n<p>@samtuke Agree, I will try to relax the RewriteCond and see if I can block php files only or subset of them. If I find a solution I will update the wiki.</p>\n<p>Thank you both for suggestions. </p>", "<p>@samtuke </p>\n<p>I come up with something that I think works:</p>\n<p><code>Options -Indexes\n&lt;IfModule mod_rewrite.c&gt;\n    RewriteEngine On\n    RewriteCond %{REQUEST_URI} ^/phplist/admin\n    RewriteCond %{REQUEST_URI} !^/phplist/admin/ui\n    RewriteCond %{REQUEST_URI} !^/phplist/admin/js\n    RewriteCond %{REMOTE_ADDR} !=x.x.x.x\n    RewriteRule ^(.*)$ - [R=403,L]\n&lt;/IfModule&gt;</code></p>\n<p>At least I've tested multiple scenarios and all looks good. I don't have access to any admin stuff but /phplist/ works fine because css and js from admin are not blocked anymore.</p>\n<p>I don't know if it covers all the angles. I also don't know if this is the easiest way.  If you find anything better, I'm all ears.</p>\n<p>Sorry, I won't have time to register on phplist.com and create a wiki anytime soon. I'm overwhelmed with  my todo list at the moment. If you think this is a good solution (and I assume you have an account with phplist.com) please post that to the wiki.</p>", "<p>@mrojnetsky Excellent thanks, documented here: https://resources.phplist.com/admin_pages_access_control</p>", "<p>I'd like to chime in here if I may.</p>\n<p>Because of the way my business works (mobile users), I use user certs to restrict access to admin functionality on websites. IP restriction won't work for me. The current architecture of phplist doesn't allow for this.  Its unfortunate as the content seems to be mainly static? </p>\n<p>I can understand the developers desire not to duplicate libraries, however the decision to place user content in the admin area should be reviewed as there are security implications.</p>\n<p>In the short term it would be beneficial if the static content used in the subscription pages was configurable in the config.php, That would at least give people the option to compartmentalise the user pages if they had a reason to. </p>\n<p>Longer term, a suggested architectural state:</p>\n<ul>\n<li>/admin/ (admin pages for admins to do admin, secured, restricted)</li>\n<li>/shared/ (shared libraries &amp; static content, public)</li>\n<li>/ (user subscription / tracking pages, public) </li>\n</ul>", "<p>@frasersdev Thanks for clearly explaining your use case.</p>\n<blockquote>\n<p>The current architecture of phplist doesn't allow for this. Its unfortunate as the content seems to be mainly static?</p>\n</blockquote>\n<p>The most important content of the subscribe pages is dymanic -- which attributes are offered, plus default values etc. are loaded from the database.</p>\n<blockquote>\n<p>In the short term it would be beneficial if the static content used in the subscription pages was configurable in the config.php, That would at least give people the option to compartmentalise the user pages if they had a reason to.</p>\n</blockquote>\n<p>Do you mean that the location of these files should be configurable, so that other paths can be specified in the config file?</p>\n<blockquote>\n<p>Longer term, a suggested architectural state:</p>\n</blockquote>\n<p>Good idea, though it probably makes most sense to work on this separation for phpList 4 rather than phpList 3. New issue added here: https://github.com/phpList/core/issues/296</p>", "<p>Hi @samtuke</p>\n<blockquote>\n<p>The most important content of the subscribe pages is dymanic -- which attributes are offered, plus default values etc. are loaded from the database.</p>\n</blockquote>\n<p>sorry perhaps I wasn't clear in what I meant. I understand the subscribe page code running on the server includes libraries from /admin.  I was only referring to resources being downloaded over http out of the /admin area. On my vanilla install these are:\n- /admin/js/phplistapp.js\n- /admin/ui/phplist-ui-bootlist/css/bootstrap-select.min.css\n- /admin/ui/phplist-ui-bootlist/css/bootstrap-toggle.min.css\n- /admin/ui/phplist-ui-bootlist/css/style.css\n- /admin/ui/phplist-ui-bootlist/js/dist/phpList_ui_bootlist.min.js\n- /admin/ui/phplist-ui-bootlist/js/jquery-1.12.1.min.js</p>\n<p>its all css and js (&amp; static). \nYou can confirm this using chrome developer tools.</p>\n<blockquote>\n<p>Do you mean that the location of these files should be configurable, so that other paths can be specified in the config file?</p>\n</blockquote>\n<p>Yes, ie\n\"Set the http path for user subscription page template resources\" (default = /admin) = /shared\nand then phplist subscription pages would load instead: \n- /shared/js/phplistapp.js\n- /shared/ui/phplist-ui-bootlist/css/bootstrap-select.min.css\n- /shared/ui/phplist-ui-bootlist/css/bootstrap-toggle.min.css\n- /shared/ui/phplist-ui-bootlist/css/style.css\n- /shared/ui/phplist-ui-bootlist/js/dist/phpList_ui_bootlist.min.js\n- /shared/ui/phplist-ui-bootlist/js/jquery-1.12.1.min.js</p>\n<p>easy to hardlink /shared/ui -&gt; /admin/ui &amp;  /shared/js -&gt; /admin/js\nalso easy to copy those 6 files over</p>\n<p>allows for full gamut of security options operating at the http layer, eg mod_rewrite (as originally posted), .htaccess, users certs...</p>", "<blockquote>\n<p>probably makes most sense to work on this separation for phpList 4 rather than phpList 3. New issue added</p>\n</blockquote>\n<p>agreed and thank you \ud83d\udc4d </p>", "<p>If the references are hard coded, then I can understand this is needed, but the code provided is only there as an example and the expectation is that it is overwritten with a local design, which has its own css and js, pulled from other places (eg from /js and /css and not /lists/js/ or /lists/css/)</p>\n<p>But yes, I guess the request in this issue could be done.</p>", "<p>Hi @michield<br />\nThanks, that expectation wasn't obvious to me anyhow, buts its good to know. Aside from styles (which the manual does mention it in the context of needing to modify css), theres javascript, Bootstrap and jQuery to move as well. </p>\n<p>Any new subscribe pages generated will of course refer back to resources in /admin/ui - but thats something that can be easily managed. </p>\n<p>cheers</p>", "<p>I've just logged a separate issue ( #394 ) - thinking through the process as a new user and the decision of adding a index.html (that needs to be edited) and a seperate /lists folder - just want to add a note here in case there is any merit to also looking at the other suggestion if/when doing this :)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/335", "title": "Issue inside subscribelib2.php", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hi there,\nI'm having problem with the https://github.com/phpList/phplist3/blob/release-3.3.3/public_html/lists/admin/subscribelib2.php#L256</p>\n<p>Above which it says \"//# hack attempt...\"</p>\n<p>I'm sr. programmer (to give some context) but php newbie. What happens baffles me. </p>\n<p>If I use code as is. I'm able to subscribe using phpList UI; however when I do it using \"asubscribe\" and my fancy ajax - the user is created and subscribed to the list (both user_user and listuser tables are updated); however the confirmation email is not sent to the user nor is a copy to admin. </p>\n<p>I narrowed down the problem to the above mentioned code. If I comment out \"exit;\" on line 256 everything works perfectly. I receive all the emails. </p>\n<p>Out of curiosity, I decided to debug it line-by-line old school way: printing out messages after each line of code (I'm sure there is a better way, but I don't know at this point how else you can debug site on a shared hosting.) Anyways to my surprise, ALL my request where falling into first part of the if fork. So, the condition on line 247 always evaluates to true. All the lines inside the first part of the if fork execute successfully, without any error.</p>\n<p>That doesn't make any sense to me as a developer. If it never falls into the \"else\" clause there is no need to comment out \"exit;\" on line 256. But without commenting out I have the issue where the confirmation emails are not sent. </p>\n<p>Sounds paradoxical to me, even though I got use to things like that. Or perhaps, my luck of php knowledge is the problem.</p>\n<p>Please shed some light on the issue. Why it is behaving this way?      </p>", ["<p>@asdr45fsd35fdf So <code>exit()</code> is not being called, but commenting it out makes your custom ajax subscription process work?</p>\n<p>It sounds like <code>exit()</code> must be called, but perhaps you are not detecting it. You could try logging an error (using <a href=\"http://php.net/manual/en/function.trigger-error.php\"><code>trigger_error()</code></a>) every time it is called (assuming PHP errors are being logged and you can access that log). You could also try using xdebug() to step through the code, if your IDE supports this, e.g. add a break point to that line so you can pause execution and check what logical sequence led to that point.</p>\n<p>@xh3n1 may also have ideas.</p>", "<p><code>$key = sprintf('%d', $key);\n                if (!empty($key)) {</code></p>\n<p>The %d forces the key to be numerical. If that evaluates to 0, it meant the original key was not numerical, which means someone has tried to push some other kind of code in, ergo \"hack attempt\".</p>\n<p>Check that your ajax code doesn't push the \"lists\" variable to the page, and if it does, make sure the keys of the key-value pairs are numerical. </p>\n<p>The asubscribe parameter expects only an email address and will fetch the rest (including which lists to subscribe to) from the subscribe page definition. </p>\n<p>@samtuke I guess it could be useful to document the asubscribe call for everyone. It is currently only documented in the hosted account pages.</p>", "<p>by the way @asdr45fsd35fdf we would be able to be more serious if your handle wasn't some <a href=\"http://www.dictionary.com/browse/keysmash\">keysmash</a>. </p>", "<p>@samtuke correct! I don't understand why. I used \n<code>Fatal_Error('Some info plus var value');\n exit;</code>\nLine by line in that area of the code. I could see in the ajax response what the values are for the vars and my custom text. The above mentioned if-statement always evaluates as true, in my case. I checked it multiple times. I might be crazy but that's what I see.</p>\n<p>@michield it does push the list value and the key is numeric in the following way: </p>\n<p>HTML part </p>\n<p>```</p>\n<form method=\"post\" name=\"subform\" id=\"subform\" enctype=\"multipart/form-data\">\n                            <input type=hidden name=\"htmlemail\" value=\"1\">\n                            <input type=\"hidden\" name=\"list[2]\" value=\"signup\"/>\n                            <input type=\"hidden\" name=\"subscribe\" value=\"subscribe\"/>\n                            <input type=\"email\" name=\"email\" id=\"email\" required>\n                            <button class=\"btn\" type=\"button\" onclick=\"if (checkForm()) {submitForm();} return false;\"></button>\n                            <div class=\"alert alert-success\" id=\"success\" style=\"display:none\"></div>\n                            <div class=\"alert alert-danger\" id=\"danger\" style=\"display:none\"></div>\n                        </form>\n<p>```</p>\n<p>JS part</p>\n<p>```\nfunction checkForm(){\n     re = /^(([^&lt;&gt;()[].,;:\\s@\\\"]+(.[^&lt;&gt;()[].,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}])|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))$/;</p>\n<pre><code>if (!(re.test(jQuery(\"#email\").val()))) {\n    jQuery(\"#success\").empty().hide();\n    jQuery(\"#danger\").empty().append(\"Please enter a valid email.\").show();\n    jQuery(\"#email\").focus();\n    return false;\n}\nreturn true;\n</code></pre>\n<p>}\nfunction submitForm() {\n    successMsg = 'Thank you for your registration.';\n    failMsg = 'Sorry, we were unable to register you.';\n    data = jQuery('#subform').serialize();\n    jQuery.ajax( {\n        type: 'POST',\n        data: data,\n        url: '/phplist/?p=asubscribe',\n        dataType: 'html',\n        success: function (data, status, request) {\n            if(data==='FAIL'){\n                jQuery(\"#success\").empty().hide();\n                jQuery(\"#danger\").empty().append(failMsg).show(); \n            }else{\n                jQuery(\"#danger\").empty().hide();\n                jQuery(\"#success\").empty().append(successMsg).show();\n                jQuery('#email').val('');\n            }\n        },\n        error: function (request, status, error) { \n            jQuery(\"#success\").empty().hide();\n            jQuery(\"#danger\").empty().append(failMsg).show(); \n        }\n    });\n}</p>\n<p>```</p>\n<p>I borrowed and adapted this code from this thread https://discuss.phplist.org/t/ajax-subscribe-api/974/2\nThere they push the list the same way.</p>\n<p>I will try not to push the list value as you suggested and see if it works better. Last thing I want to do is to modify phpList code in any way, complicating future updates. </p>\n<p>@michield  your wish is my command. I do keysmash for all my accounts so that I not only don't know the randomly generated password but the username cannot be tied to any other accounts that uses the same username. It is a habit that I recommend to anyone given the perpetual hacking that's going on. But I can see how it might go against GitHub policy or invoke prejudice.    </p>\n<p>*Update: trying to fix code formatting </p>", "<p>It seems that there are no updates on this issue for more than a year. For future questions/proposals, I would recommend the <a href=\"https://discuss.phplist.org/\">community forum</a> or <a href=\"https://mantis.phplist.org/my_view_page.php\">Mantis, the phpList bug tracker</a>.</p>\n<p>Closing this. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/334", "title": "Prevent \"Reset to Default\" button to change the administrator email.", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19242</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/333", "title": "Behat tests final", "status": "closed", "labels": [], "priority": null, "description": ["<p>Re-writen tests to include import methods testing, CKEditor usage, list creation and removal</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/332", "title": "Behat tests", "status": "closed", "labels": [], "priority": null, "description": ["<p>Change construct function in FeatureContext, \nRemove 'add new subscriber' from menu.feature,\nAccept alert on login feature</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/331", "title": "#0019142: Remove \"add a new subscriber\" from the \"Subscribers\" menu", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>@samtuke for this to work behat of the application need to be modify. Do you know who wrote this tests?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/330", "title": "#19209: Horizontally align 'Campaign statistics' button on 'View opens\"", "status": "closed", "labels": [], "priority": null, "description": ["<p>BEFORE;\n<img alt=\"screenshot from 2018-05-25 23-28-20\" src=\"https://user-images.githubusercontent.com/7660111/40571658-7a6bc6ea-6073-11e8-8332-5ca6ee12e188.png\" /></p>\n<p>AFTER:\n<img alt=\"screenshot from 2018-05-25 23-27-55\" src=\"https://user-images.githubusercontent.com/7660111/40571661-8680df1a-6073-11e8-9b7f-468be24d95c3.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/329", "title": "add compatibility to PHP 7.2 and higher", "status": "closed", "labels": [], "priority": null, "description": ["<p>Resolved the merge conflicts in #254 </p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/328", "title": "Add option on simple import to select whether imported subscribers are confirmed or unconfirmed ", "status": "closed", "labels": [], "priority": null, "description": ["<p>-Add option to select whether imported subscribers are confirmed or unconfirmed. (the default selected option is confirmed).\n-Moved the \"import emails\" button from top to the bottom.\nhttps://mantis.phplist.org/view.php?id=19231</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/327", "title": "Fix the error when upgrading from a dev version", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19253</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/326", "title": "support translation for some alert messages", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19211</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/325", "title": "show busy image when exporting subscribers", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19243</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/324", "title": "Show preferences button only for not blacklisted users and remove whitespace from User Details page buttons", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/323", "title": "Remove 'Change admin password' from Checklist page", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19245</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/322", "title": "set blacklisted to 1 in user table if the new subscriber is blacklisted in blacklist table", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19240</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/321", "title": " update the list of the countries", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19239</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/320", "title": "Suggestion for CSS improvement on subscribe page construction", "status": "closed", "labels": [], "priority": null, "description": ["<p>I've been trying to find some info regarding tweaking further the construction of the table block within the subscription pages without success so far. Read https://www.phplist.org/manual/ch025_subscribe-page-design-and-configuration.xhtml and linked pages but did not find any info regarding.</p>\n<p>I can think this code is generated at: public_html/lists/admin/subscribelib2.php but not sure.</p>\n<p>I  can see the attributes inputs include a class assigned with the attribute id (ie &lt;input type=\"text\" name=\"attribute31\" ...\"</p>\n<p>but It would be of great help in order to design the page with css and have further personalization options that that class was also included within the TR so \"anything\" of that row could be personalized. It makes sense for CSS personalization to start on the first level as that would allow me to tweak the tr itslelf or any of their containing items, including input, select or label. Furthermore a \"label\" and \"input\" or value on each of the corresponding td would also help alltough can be done with nth position.</p>\n<p>Happy to consider helping on it if all that construction is centralised on a certain file or function.</p>\n<p>Thanks.</p>", ["<p>@xh3n1 Perhaps you could investigate this and share your findings?</p>", "<p>@luison Is your goal to be able to style individual table rows within the subscribe pages, or to be able to replace the tables altogether? Adding unique CSS class names or IDs shouldn't be difficult, which would allow you to add more specific styling. </p>", "<p>My goal would be to improve or have more personalization options on those pages. The idea of having an ID on the rows/cells would just be an easy way to help doing it with CSS Styles. The PHP code that generates that seems rather confusing and diversified.</p>", "<p>@luison By personalised options, do you mean custom theming of their inputs and labels? Deeper customisation would require changes to how attributes are added and managed.</p>", "<p>Hi @samtuke. Again as a suggestion whatever you guys find \"doable\". Truth is the design options via CSS are very limited now and therefore of my suggestion of at least move the attribute class you already seem to include on inputs, radios, etc further up as possible within the element. \nIn the case of the tables as you are building them today that would be on the TR I guess. In this form the label, text of radio buttons and other elements within that attribute become somehow \"modifiable\"</p>\n<p>With a sample current code:</p>\n<p>```code</p>\n<tr>\n<td><div class=\"required\"><label for=\"attribute4\">Label*</label></div></td>\n<td class=\"attributeinput\">\n            <input type=\"text\" name=\"attribute4\" class=\"attributeinput\" size=\"40\" value=\"\" id=\"attribute4\"></td>\n</tr>\n<p>```</p>\n<p>Making it just something like:\n```code</p>\n<tr class=\"attribute4\">\n<td class=\"label_container\"><div class=\"required\"><label for=\"attribute4\">Label*</label></div></td>\n<td class=\"attributeinput\">\n            <input type=\"text\" name=\"attribute4\" class=\"attributeinput\" size=\"40\" value=\"\" id=\"attribute4\"></td>\n</tr>\n<p>```</p>\n<p>Would allow  to change the background of the td for the label on some of them, increase padding on most important items, add the required * via CSS, etc.</p>\n<p>Again, further tuning via divs and classes would be better, but that kind of change should not break compatibility and allow some small additional tuning.</p>\n<p>thanks.</p>", "<p>@samtuke I wasn't aware that the frontend uses backend stuff, but I agree with @luison that it would be better to separate that. </p>", "<p>@luison Thanks for the snippet in #428 -- how about this for next steps:</p>\n<ul>\n<li>Replace table structure with divs, as you proposed</li>\n<li>Add auto-generated IDs for each div containing an input for easier CSS styling</li>\n<li>Add dedicated copies of currently shared UI libraries (e.g. jQuery)</li>\n<li>Make use of those UI libraries explicit within the public page template itself (can be changed or removed by the phpList admin, so other UI libraries can be used instead)</li>\n</ul>\n<p>Thoughts? Which of those steps would you be happy to work on?</p>", "<p>It seems that there is no activity on this issue for a long time. Additionally, this discussion can continue on the community forum: https://discuss.phplist.org/t/suggestion-for-css-improvement-on-subscribe-page-construction/4078</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/319", "title": "constant value for website/WEBSITE is stored in database table _config", "status": "open", "labels": [], "priority": null, "description": ["<p>While testing locally, I noticed a link to the unsubscribe page was pointing to the real hosted site instead of the local site.\nThis link (for example) traces back to the value of \"website\" in the db table phplist_config.\nI believe the database should be 100% portable and anything installation-specific should be in the config FILE.\nHaving this constant in the database renders the database non-portable and makes all links based on this constant incorrect as per my first observation.\nI would extend this point of view to other parameters in the admin configuration like email server and admin email addresses to use, to allow a fully independent installation to be used for testing, so requiring NO database modifications/changes when importing a production database to a development/local environment for functionality testing.</p>", ["<p>@torvista Thanks for reporting this. The challenge is to make it easy for settings which are commonly changed to be editable via the UI, while also making the config file the primary source of truth for important settings and keeping installations portable. It would be possible to store some settings from the Settings page in the config file, and others in the database, but that would introduce uncertainty about where to look when manually changing those values. Perhaps the settings could be grouped to indicate where they are stored on that page (in the UI).</p>\n<p>Would you be interested in working on introducing this functionality? E.g. the writing of certain values on the Settings page to the config.php file?</p>\n<p>FYI @michield </p>", "<p>While I always am keen to contribute to improvement of most things, I am so buried under my own business/affairs that I cannot even get round to doing essential work on my own online shop, so my efforts are limited to constructive criticism.\nI would just say move all installation-specific items to the config, but allow them to be viewed from the UI so it's obvious where they are located. Do whatever is necessary to make the db portable without needing to think .</p>", "<p>The reset settings link in the configuration page will reset the settings from the location where it is installed. Putting that in the config file makes it harder to configure for some other situations. Currently it will pick it up from the environment at install time.</p>\n<p>I agree it would be nice to allow a simple refresh to a development environment. I think we should make this a feature request. The reason it is in the DB is that the Web UI has access to the value, but the CLI does not and has to read it from the DB. Probably some command to run after a refresh would be the best route to go.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/318", "title": " add the \"Read more\" link that explains the GDPR compliance ", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19144</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/317", "title": "use both subject and meta title on stats overview page if they are different", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=17824</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/316", "title": "add subscription list to 'Subscription already confirmed page'", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19205</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/315", "title": "Make dates on 'Subscriber details' page human readable", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19212</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/314", "title": "add subscriber is an adult as a default attribute", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19226</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/313", "title": "0019204: Add facility for exporting all an individual subscriber's data including history", "status": "closed", "labels": ["GDPR"], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19204</p>", ["<p>@xh3n1 I see no reason for this to be on hold. Removing label.</p>", "<p>We never call mysqli_fetch_assoc and similar directly, but always use the functions from mysqli.inc eg</p>\n<p>sql_fetch_assoc</p>\n<p>Can that be updated?</p>", "<p>@michield mysql_fetch_assoc was deprecated in PHP 5.5.0, and it was removed in PHP 7.0.0 http://php.net/manual/en/function.mysql-fetch-assoc.php</p>", "<p>@xh3n1  I didn't write mysql_fetch_assoc, I wrote mysqli_fetch_assoc :-)</p>", "<p>@michield I made the changes, thanks :)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/312", "title": "Added link to contact the administrator on public homepage", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19232</p>\n<p>Adds a 'Contact the administrator' link to the public homepage (/lists) to make it easier for subscribers to request copies of their data, rectify or erase it.</p>\n<p>Uses simple email HTML entities-based email address obfuscation.</p>", ["<p>@torvista Good point. Can you patch it? </p>", "<p>...I don't have the time/need to get up to speed with Github and have rarely delved into the innards of phplist to know your \"customs\" but I did this:</p>\n<p><code>'\"&gt;'.s($strContactAdminstrator).'&lt;/a&gt;&lt;/p&gt;';</code></p>\n<p>and added </p>\n<p><code>$strContactAdminstrator</code></p>\n<p>to the language file.</p>", "<p>@xh3n1 Is the string mentioned by @torvista translatable now? If not, please add a mantis issue to track it. Again I apologise for introducing this problem in the first place.</p>", "<p>@samtuke There is already a mantis issue for that:  https://mantis.phplist.org/view.php?id=19257</p>", "<p>@xh3n1 Great, thanks. \n@torvista You can track progress on the issue using the link above.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/311", "title": "Add link to subscriber's public preferences page from their subscriber details", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19229</p>\n<p>Add a link to the Subscriber Details page to the public personalised preferences page for that subscriber. This makes it easier for administrators to access and provide this link to subscribers should they request it in order to rectify inaccurate records.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/310", "title": "Add preferences link to /lists homepage", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19228</p>\n<p>This adds a link to the generic public preferences page from the default homepage of the phpList installation. E.g. alongside the existing links from /lists to the default subscribe page and default unsubscribe pages, a link to the preferences page (which takes either the subscriber UID or their email address to send them their personal link) is included.\nThis is to make it easier for subscribers to manage their preferences even if they do not have a campaign link available.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/309", "title": "Re-enable the re-send confirmation email functionality", "status": "open", "labels": ["on hold"], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19222</p>\n<p>Uncomments existing functionality to re-enable it. </p>", ["<p>On Hold because of planned additional improvements</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/308", "title": "Add buttons to delete all blacklisted subscribers", "status": "closed", "labels": [], "priority": null, "description": ["<p>Two buttons added to Reconcile Subscribers page:</p>\n<ul>\n<li>Delete subscribers who are blacklisted because they unsubscribed</li>\n<li>Delete all blacklisted subscribers</li>\n</ul>\n<p>Also adds and uses new functions for deleting subscribers, including all related blacklist data (in blacklist-related database tables).</p>\n<p>https://mantis.phplist.org/view.php?id=19221</p>", ["<p>GitHub stating that Travis tests failed seems to be a bug -- the tests show as all passed on Travis: https://travis-ci.org/phpList/phplist3/builds/376984608</p>", "<p>https://travis-ci.org/phpList/phplist3/jobs/376984084\nfatal: Remote branch delete-unconfirmed-subs not found in upstream origin</p>\n<p>It's strange that it uses another branch name :confused: </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/307", "title": "change displayed message for the required checkbox field on subscribe page", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>https://mantis.phplist.org/view.php?id=19187</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/306", "title": "0019187: Add draft campaign for use with invite plugin available in new installations", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19187</p>", ["<p>@xh3n1 Is this something that you have been discussing with Sam and Michiel already? Is the Invite plugin going to be included within phplist now? The Mantis issue that you linked to appears to be private.</p>", "<p>@bramley The mantis ticket was mistakenly private until now (my mistake): https://mantis.phplist.org/view.php?id=19187</p>\n<p>I think it makes sense to include the invite plugin by default, and make inclusion of this default draft campaign more useful. Do you agree?</p>", "<p>I'm not sure that I want phplist to automatically create a draft campaign, which I would likely then just delete.</p>\n<p>The main saving by this change appears to be providing some default content for an invite campaign, as creating a draft campaign is trivial anyway.\nMaybe that default content could be provide in some other way, e.g. when you select \"invite\" on the Format tab then the plugin could populate the message content with the default content but only if the message content has not already been entered. The plugin could then provide a config setting for the default content, which allows someone to customise and translate it and reuse that content for several invite campaigns.</p>\n<p>Also you need to consider other languages than English, otherwise the content has to be changed anyway. And it should probably be in html rather that plain text. The Mantis attachment is html but this change appears to be plain text.</p>", "<p>@bramley Great points.</p>\n<ol>\n<li>\n<p>The campaign may just be deleted - true, however there is no downside to having an extra draft except for clutter, and the benefit of having an easy way to use re-opt-in campaigns is worth the inconvenience.</p>\n</li>\n<li>\n<p>Insert the campaign content after 'invite' format is selected - good idea, though having to go past the first page(s) where subject and content are set to get to the 'format' tab and select 'invite' is not intuitive. Also this would add complexity to the invite plugin, which is doable, but would likely delay the availability of the default campaign in any format before May 25th. Making the content reusable in this way would be superior to the draft campaign, which will no longer be a draft following its first use.</p>\n</li>\n<li>\n<p>The content is not translatable - yes that is currently a problem. The standard s() function could probably be used as with other translatable strings, but this is not yet the case. The English version should be final before this to avoid wasted efforts of translations in later editing. Do you have feedback on the current campaign content?</p>\n</li>\n<li>\n<p>Campaign content should be HTML - agreed. @xh3n1 Can you add an HTML version as well? It should only require basic markup such as paragraphs, but without that it will render in monospace on some mail clients, and HTML templates will not be used.</p>\n</li>\n</ol>\n<p>@bramley In conclusion I propose that the invite plugin is bundled with phpList 3.3.3, and this campaign is included in core as Xheni has already implemented, with HTML and translatable content, and that we mantis an improvement for making the content reusable, potentially inserting the content automatically following selection of 'invite' on the format tab. This approach allows the invite campaign to be included in phpList 3.3.3 with minimal additional work in time for its release very soon. What do you think?</p>", "<p>How about a different approach. \nPresumably people will look at the plugin documentation https://resources.phplist.com/plugin/invite and https://github.com/michield/phplist-plugin-invite to understand what it does and how to use it. So you could include sample content in the documentation, which can then simply be copy/pasted into a new campaign in phplist.</p>\n<p>But anyway the documentation should be improved if the plugin is going to be mass distributed in this way. I suggest moving the usage guidance from the readme in GitHub to the documentation page. In that way the documentation and guidance can be revised separately to the plugin code.</p>\n<p>I have installed the plugin for a couple of people, and both times it was a bit confusing as how best to use it in terms of which lists to create or add people to. There are probably a few common scenarios</p>\n<ul>\n<li>a reminder to people who have not confirmed their subscription</li>\n<li>a GDPR type message asking confirmed subscribers to accept a new privacy policy</li>\n<li>chasing confirmed subscribers who have been inactive for a while</li>\n<li>after importing \"collected\" email addresses asking them to confirm their subscription</li>\n</ul>\n<p>so maybe there could also be some guidance on how best to handle these.</p>", "<p>@bramley Yes the plugin documentation should be improved either way. However I think it is unlikely that most admins will ever go to the plugin docs page, especially when the plugin is bundled by default. It would be good to add contextual help using a (?) button on the 'Format' page so that an explanation is closer at hand.\nRegarding the four scenarios, documentation of each would be good but I'm not sure of the best place for that. Perhaps the manual is the best place for it.\nOverall this PR is an imperfect solution, but it makes it significantly easier to use functionality that many are seeking due to GDPR. I would like to merge this now in order to have an easy path to 'repermission' campaigns released before May 25th. Moving this draft into the Invite plugin itself seems like a good step to follow up with after releasing  phpList 3.3.3.</p>", "<p>@xh3n1 Is it possible to add a meta title to the campaign which communicates to the admin what the campaign is for (besides the campaign subject for the message recipient)? E.g. 'Example re-permission campaign'</p>", "<p>I think this is a good idea. It's often considered useful to have some examples in the draft queue and they can be ignored or deleted, so won't affect anything.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/305", "title": "mantis #19095: Buttons misaligned on bounces per list (list selected)\u2026", "status": "closed", "labels": [], "priority": null, "description": ["<p>BEFORE:\n<img alt=\"screenshot from 2018-05-06 19-41-57\" src=\"https://user-images.githubusercontent.com/7660111/39678610-3916c88c-5166-11e8-9b8e-870312f965fa.png\" /></p>\n<p>AFTER:\n<img alt=\"screenshot from 2018-05-06 19-41-30\" src=\"https://user-images.githubusercontent.com/7660111/39678613-49612548-5166-11e8-855e-e2f8427d5145.png\" /></p>", ["<p>@mariez In the 'After' screenshot, the left hand side of the 'Delete' button is not rounded (unlike the right hand side). This was also the case in the 'Before' screenshot, but can you fix that in the same PR, as it is related to the same buttons?</p>", "<p>@samtuke that fix will be in Trevelin repository, is a css change.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/304", "title": "fix typos and links ", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/303", "title": "fix typos", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>Great stuff</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/302", "title": "Make dates on 'View opens' page human readable", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19210</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/301", "title": "0019033: Provide default attribute for required attribute: consent to terms of service", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19033</p>", ["<p><img alt=\"screenshot from 2018-05-03 23-14-16\" src=\"https://user-images.githubusercontent.com/9008509/39603206-cd9eaa24-4f27-11e8-8295-e431bca4ab08.png\" /></p>", "<p>@samtuke I think this is fine, but we should make it optional to add it. For starters, it is going to break the Ajax subscribe system, but also, eventually GDPR compliance is a European problem. Europe is only a small part of the world. I think we make this optional, point all Europeans to how to switch it on, in a blog post and then we're off the hook.</p>", "<p>by the way, it may be optional already, so ignore me if that's the case :-)</p>", "<p>@michield It will only be added when it's loaded from predefined defaults :)</p>", "<p>@xh3n1 This looks great. Is there a way to link to another page which would contain the Terms of Service? Perhaps there is a workaround that would make it easy for the admin to change where the link points to. It is likely admins will have TOS pages on their own website or elsewhere. If linking to such a page is difficult, then an alternative would be to store a copy of them in phpList, but I think it is better to avoid that (to avoid duplication etc.).</p>", "<p>@samtuke It's difficult, but I will try to find a way.</p>", "<p>@xh3n1 So long as it is clear what the terms of service being referred to are (or where they can be found) then it should be OK. How about you use the domain config value in the printed statement, like \"...agree to the terms of hostwebsite.com...\", so that it is the responsibility of the admin of the tld on which the installation is hosted?</p>\n<p>If we took that approach then I think we'd need to ask the community for feedback on whether it would fit their model. For example there are many generic hosting providers which make phpList accessible on domains like samsaccount.phplist.hostingcompany.com - in such cases maybe using the domain as suggested wouldn't be ideal. But it would be better than not specifying any terms at all. </p>", "<p>@samtuke I made the change. \n<img alt=\"photo_2018-05-08_12-18-01\" src=\"https://user-images.githubusercontent.com/9008509/39751932-25eb974c-52ba-11e8-82fd-95ddc92a56f8.jpg\" /></p>", "<p>@xh3n1 This raises the question of whether <code>domain</code> is always set. There doesn't seem to be a convenient place to state that this config option should be accurate when choosing to load the attribute from defaults.</p>", "<p>FYI, I filed a mantis issue requesting the ability to add an html anchor link (for pointing to the ToS doc) to the text of this new default attribute:</p>\n<ul>\n<li>https://mantis.phplist.org/view.php?id=19436</li>\n</ul>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/300", "title": "0019188: Change default option on \"export\" page to \"Any date (Export all subscribers) \"", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19188</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/299", "title": "README.md: fix \"personalisaton\" typo", "status": "closed", "labels": [], "priority": null, "description": ["<p>Missing \"i\" in personalisation:\npersonalisaton -&gt; personalisation</p>", ["<p>@rfjakob if you <a href=\"https://www.phplist.com/cla\">sign the CLA</a>, it'll be quicker to include your PRs</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/298", "title": "0019131: resetMessageStatistics() should remove rows from user_message_view", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19131</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/297", "title": "Display campaign subject when clicking view campaign and fix the chrome tests failing ", "status": "closed", "labels": [], "priority": null, "description": ["<p>fix https://mantis.phplist.org/view.php?id=19197</p>", ["<p>also: https://mantis.phplist.org/view.php?id=19198</p>", "<p>what's the issue here. Why change from result to msgdata? One is pulled from the message table, the other from the message data.</p>\n<p>Is this the \"message subject\" vs \"campaign title\" ? If that's the case, we should really display them both.</p>", "<p>@michield before it was incorrectly displaying the campaign title instead of campaign subject.  </p>", "<p>doesn't it make sense to display both? Something like;</p>\n<p>campaign title\ncampaign subject line</p>", "<p>Yes we should display both:\n<strong>Before</strong> <img alt=\"screenshot from 2018-04-26 22-52-47\" src=\"https://user-images.githubusercontent.com/9008509/39331351-990bbdfc-49a4-11e8-8d4a-35db44aaaf06.png\" />\n<strong>After:</strong> \n<img alt=\"screenshot from 2018-04-26 22-51-24\" src=\"https://user-images.githubusercontent.com/9008509/39331359-9e702cd8-49a4-11e8-9035-be2ecf93d830.png\" /></p>", "<p>Great :grinning: </p>", "<p>thanks @michield  :smiley: </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/296", "title": "fix corrupted attributes using context-aware escaping", "status": "closed", "labels": ["bug"], "priority": null, "description": ["<p>Fix #264 https://mantis.phplist.org/view.php?id=19113</p>", ["<p>@michield please can you review this? </p>", "<p>yes, I saw this, and I need a bit more time to review this. I'm not entirely sure this will be secure enough. You can only escaping very few characters. From a security point of view, I'd like to work the other way around, disallow all and then allow some, instead of allow all and then disallow some. That approach tends to be more secure.</p>", "<p>@michield This context-aware escaping here should be sufficient in somewhat reasonable modern web browsers (i.e. everything above IE8). But arguably, if you use a web browser that old you have other issues.\nFor input fields, the code is replacing all \" with &#x22;, in $foo: <input value=\"$foo\">. Since \" is using as delimiter there, any potential malicious payload in there would just be included in the value and be rendered as input field and not as arbitrary HTML.</p>\n<p>For textarea fields, all &lt; and &gt; are replaced with the corresponding HTML entities. Since the delimiter is a </textarea> all potential malicious payload is also just rendered in the value and not as arbitrary HTML.</p>\n<p>While this is not the cleanest fix, the root cause here is that we have the data already encoded stored in the database. By applying a regular htmlentities transformation here we would end up with a double-encoding situation.</p>\n<p>I'd rather just replace those bad characters instead of whitelisting specific ones as the whitelist just mitigates this issue character by character. It would still be an issue with other entities.</p>\n<p>I've tested this with malicious payloads such as\n <strong></textarea><script>alert(1)</script></strong> \nand\n <strong>\"&gt;<script>alert(1)</script></strong>\nThanks :smiley: </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/295", "title": "Add contextual help option to the settings page  ", "status": "closed", "labels": [], "priority": null, "description": ["<p>This will be used to explain why an uploaded company logo is used and its format also to add advisory text for editing confirmation email content regarding data protection. The info icon will be displayed only if it is set.</p>\n<p>https://mantis.phplist.org/view.php?id=18790\nhttps://mantis.phplist.org/view.php?id=19145\n<img alt=\"screenshot from 2018-04-18 11-35-46\" src=\"https://user-images.githubusercontent.com/9008509/38924232-b102357a-42fc-11e8-8ad1-65da3b1bb4b4.png\" /></p>\n<p>TO DO: \n- [ ] Change the background colour for the info icon on the trevelin theme</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/294", "title": "mantis #0018974 and #0018971", "status": "closed", "labels": [], "priority": null, "description": ["<h1>0018974 before:</h1>\n<p><img alt=\"screenshot from 2017-11-26 20-17-20\" src=\"https://user-images.githubusercontent.com/7660111/38759737-c71d5f0e-3f4d-11e8-8a5f-b9334beb5d53.png\" /></p>\n<h1>0018974 after:</h1>\n<p><img alt=\"screenshot from 2018-04-13 19-25-20\" src=\"https://user-images.githubusercontent.com/7660111/38760212-7d24c312-3f50-11e8-85ed-6ceeeb70ecc7.png\" /></p>\n<hr />\n<h1>0018971 is \"Change Add New Attribute form in the Configure Attributes page\" (The labels are over the inputs, but they should be in the same row, as the forms of existing attributes in that page.)</h1>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/293", "title": "CKEditor doesn't give mail-safe HTML", "status": "open", "labels": [], "priority": null, "description": ["<p>Tools like https://topol.io/ automatically include required  &lt;meta/&gt;-tag's in the HTML content to assure all platforms will render the mail well.\nAre there any plans to include these  &lt;meta/&gt;-tag's in mails sent with phplist3?\nExample mail of topol,io containing the &lt;meta/&gt;-tags, and even more:\n<a href=\"https://github.com/phpList/phplist3/files/1906286/email_topol_io_example.txt\">email_topol_io_example.txt</a></p>\n<p>Currently using v3.3.1\nAlso reproducable here: https://demo.phplist.org/lists/admin/?page=send&amp;id=17&amp;tk=8bfe0f549ad22bae4293df47087e912a</p>", ["<p>Thanks for the report! </p>\n<p>Unfortunately topol is not Open Source and therefore cannot be included in phpList. You could make a plugin to package such a a proprietary editor and handle the license key etc., but it could never be bundled with a phpList download.</p>\n<p>Open Source editors for email do exist, such as mosaic, and raptor (unmaintained), and there have been previous discussions about including those. One challenge is that mosaic uses its own storage format which is incompatible with other editors, so it is currently not possible to implement it as a plugin (too many changes would be required to how campaign content is stored). It could be added as a core component (not plugin) however.</p>\n<p>Are you interested in working on this? </p>\n<p>For reference: https://discuss.phplist.org/t/mosaico-template-editor-integration/3595/13</p>", "<p>Hey Samtuke!</p>\n<p>It would indeed make sense to integrate this as core functionality. The hard part would be backwards compatibility with existing HTML mails. </p>\n<p>An easy solution could be to pass the HTML through something like https://github.com/alexdunae/premailer/ before sending. This fixes most issues I guess. At least Apple-mail wil render the HTML :)</p>", "<blockquote>\n<p>An easy solution could be to pass the HTML through something like https://github.com/alexdunae/premailer/ before sending. </p>\n</blockquote>\n<p>The Content Areas plugin inlines CSS. See https://resources.phplist.com/plugin/contentareas#inline_css_styles</p>", "<p>According to Litmus, 99% of email consumers now use mail clients which support embedded (non-inline) CSS. They blogged about it here but have since updated the statistic: https://litmus.com/community/discussions/6116-here-s-why-litmus-didn-t-inline-css-for-its-first-newsletter-of-2017</p>\n<p>As such, inlining CSS is probably a decreasing priority going forward for most phpList admins.</p>", "<p>Mostly Hotmail/Live/Outlook does not render well with inline CSS yet. So, it may be needed for a bit longer.</p>", "<p>Tx @bramley for the inline CSS plugin! One problem down.\nAre you aware of a plugin that also fixes the the \\&lt;meta> tags?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/292", "title": "Make default email input field use placeholder instead of value attribute", "status": "closed", "labels": [], "priority": null, "description": ["<p>Also make both email inputs use 'required' attribute\n<img alt=\"selection_395\" src=\"https://user-images.githubusercontent.com/695422/38633978-8af0d94e-3dc1-11e8-87c3-7f4c37667b57.png\" />\nMantis https://mantis.phplist.org/view.php?id=19168</p>", ["<p>Nice one</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/291", "title": "Add empty images folder to avoid error from CKEditor", "status": "open", "labels": ["on hold"], "priority": null, "description": ["<p>By default CKEditor and FCKEditor expect an images folder to exist and be writable in order to accept image uploads. This adds an empty folder (except for .gitignore) so that the editors load without errors by default. </p>", ["<p>Mantis issue: https://mantis.phplist.org/view.php?id=19179</p>", "<p>The CKEditor plugin uses UPLOADIMAGES_DIR as the location of the upload directory.</p>\n<p>There seems to be another discrepancy between the default value in init.php (which is 'images')and the value shown in config_extended.php, which is 'uploadimages', and which my guidance on using the plugin refers to.</p>\n<p>I'm not sure how this change is going to work though. To install phplist you copy the 'lists' folder from the expanded zip file to your web server. How is this new directory going to be created? If anything then the directory should be beneath 'lists', but I think that the person installing needs to decide where they want to store images and the name of the directory.</p>", "<p>@bramley In order to achieve a default config that works without the need to create a new directory, or in most cases that directory's permissions, would moving the images dir in this PR inside the lists/ folder be the best solution?</p>\n<p>Of course admins can still change the config file to use a different image directory location, or delete the empty folder and not allow images, if they want to.</p>", "<p>there are reasons I haven't done this before:\n1. it will only work if you make the folder world writable or at least web server writable and that means we create a potential weak spot in the server where it is installed. I don't think it's good if we do that without the admin being aware of it. So, I'd prefer if they do this themselves, and particularly if it is done by people who know what they're doing as opposed to unaware of the implications\n2. the install instructions say \"copy lists to your web root\", and this folder is not inside lists</p>\n<p>So, on the whole, I'm not really in favour of doing this.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/290", "title": "Mantis 19178 - In php 7.2 the each() function is deprecated", "status": "closed", "labels": [], "priority": null, "description": ["<p>Replace <code>while (list($key, $value)  = each(...))</code> by an equivalent foreach() construct.</p>\n<p>There was one instance of list($key) instead of list($key, $value) in template.php but that processing has been simplified by avoiding it completely.</p>", ["<p>I'm amazed how many places there were. All looks ok, although I need to double check that template.php change. </p>", "<p>Interesting trick on the template.php page :-)  nice.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/289", "title": "Make all links in the community page open in new tab", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19163</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/288", "title": "Resolve 0019139: Categorize lists messes up the page buttons.", "status": "closed", "labels": [], "priority": null, "description": ["<p>This change remove the total number of list actually beside the button, and move it to the table title. (see attached image)\n<img alt=\"screenshot from 2018-04-10 15-27-24\" src=\"https://user-images.githubusercontent.com/7660111/38579634-feb0aac4-3cdd-11e8-8bcc-d4fb58f4c284.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/287", "title": "Move \"Campaigns\", \"Bounces\", \"Subscription\" tabs from userhistory page to subscriber profile", "status": "closed", "labels": ["on hold"], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19015\n\"User History\" button and userhistory page also removed as described in the issue.</p>", ["<p>This test is failing https://travis-ci.org/phpList/phplist3/jobs/362662130#L631-L633. </p>", "<p>You copied the content from user_history into the user page. That will work, but the problem is that it will make the loading of that page much slower, particularly with busy systems and active users.</p>\n<p>Instead, the content should be loaded on request when you change the tab to for example bounces. When you change tab, it should fetch the contents on the fly with an Ajax request.</p>\n<p>That may be a little bit more complicated to achieve, so if you need help with that, let me know and we can arrange for a session to discuss it.</p>", "<p>I'm not sure this was ready to be merged. It still needs quite a bit of work.</p>", "<p>@michield this hasn't been merged to master. It's a closed PR. </p>", "<p>I did  \"reset --hard\" for the commits to this branch and the GitHub automatically closed it because there were no commits. I will create another one :)</p>", "<p>Ah, ok. Good. How odd, it looked like it had been merged. Thanks</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/286", "title": "Change default confirmation email text to include how data will be used", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19124</p>\n<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", ["<p>The text [domain] should be replaced with a placeholder which will use the actual domain of the list's web interface, if that is possible. I'll look into this.</p>", "<p>are the placeholders case insensitive? We generally use all upper placeholders.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/285", "title": "Update to current version of french translation", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>@roms2000  please sign the <a href=\"https://www.phplist.com/cla\">CLA</a> to allow me to merge</p>\n<p>Also, there's not really a need to merge this, as the languages are managed differently. However, it won't harm either.</p>", "<p>If the changes are significantly different from the existing translation, they will be overwritten from the translate.phplist.org site. How did you create this .po? Shall we import it into the translate.phplist.org site, so that it is retained.</p>", "<p>CLA has been signed.\nFor translation / po file, this was an export from translation.phplist.org.\nSo no need to force rewrite as you suggest.</p>", "<p>Ok, thanks. In that case, I'll close this. The translation from translate.phplist.org is automatically used in new releases and when users update the translations from inside the application. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/284", "title": "Update language_info", "status": "closed", "labels": [], "priority": null, "description": ["<p>Should be Fran\u00e7ais instead of fran\u00e7aise</p>", ["<p>Could you also sign the <a href=\"https://www.phplist.com/cla\">CLA</a>? Thanks</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/283", "title": "Update from translate.phplist.org", "status": "closed", "labels": [], "priority": null, "description": ["<p>I am Admin for this language</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/282", "title": "Translation Fix", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fix \ncatlists\nimport2\nimport1\nand everything after line 56</p>", ["<p>@clarkchentw please sign the <a href=\"https://www.phplist.com/cla\">CLA</a> so I can merge, thanks!</p>", "<p>Done!</p>", "<p>Great, thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/281", "title": "Update Language Name", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/280", "title": "set uuid for a forward link if it's not there yet.", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>@michield Which Mantis issue # does this relate to?</p>", "<p>this was a left-over commit from a previous release that had not been merged into master yet,</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/279", "title": "0019017: Move \"Subscriber is blacklisted ...\" text to the top of the page", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19017</p>\n<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", ["<p>You're creating invalid HTML here. The h3 is inside a table without a tr or td.</p>\n<p>I will be better to put the h3 before the table instead.</p>", "<p>@michield sorry, a copy paste error. It's changed now.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/278", "title": " Add warning to not add attributes containing sensitive subscriber information", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19144</p>\n<p><img alt=\"photo_2018-03-29_18-04-13\" src=\"https://user-images.githubusercontent.com/9008509/38099792-c87d3cb2-337b-11e8-87fa-b643f52132fc.jpg\" /></p>\n<p>Signed-off-by: Xheni Myrtaj <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;\">&#109;&#121;&#114;&#116;&#97;&#106;&#120;&#104;&#101;&#110;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>", ["<p>The proposal has a read more: https://mantis.phplist.org/view.php?id=19144\nCan this be added?</p>", "<p>This change and the other related to GDPR advisory text are anticipated for the 3.3.3 release, but which time the article to be linked to should have been published and the links to 'Read more' introduced. Therefore the advisory text as it stands should not be visible to users without a link. As such I will merge this.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/277", "title": "Change url varchar fields to text ", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=18054</p>\n<p>The changes in the structure.php will change the url fields on the new installations.\nThe changes in upgrade.php are for the database migrations. \n(note: I have manually tested it for dbversion 3.3.1 by changing the VERSION number to 3.3.3 to trigger an update)</p>", ["<p>The linktrack table is from phplist 2 and is used only in upgrading from phplist 2 to 3. The upgrade process removes rows from the table. In a phplist 3 installation the table will be empty but needs to exist.</p>\n<p>So I think that there is no need to include that table in this change.</p>", "<p>true, but there's no harm either, and it keeps things more consistent, so I vote to keep it. We could do a \"tidy up\" of the DB structure at some point.</p>", "<p>This restriction on the index length to 255 doesn't look quite right</p>\n<pre><code>    'unique_1' =&gt; array('urlunique (url(255))', 'URL should be unique'),\n</code></pre>\n<p>That means inserting a row with a url that matches an existing row on the first 255 characters will fail. I can see that having to specify a length is a restriction of changing to use a text column,</p>\n<blockquote>\n<p>Prefixes must be specified for BLOB and TEXT column indexes. </p>\n</blockquote>\n<p>Would simply using a longer varchar remove this problem?</p>", "<p>@bramley The index key prefix length limit is 767 bytes. You might hit this limit with a column prefix index of more than 255 characters on a TEXT or VARCHAR column, assuming a utf8mb3 character set and the maximum of 3 bytes for each character. </p>", "<p>What's the expected maximum? And does it makes sense removing the unique index there and adding a new row \"url_hash\" which is a SHA1 over the URL and has a unique index?</p>", "<p>@bramley @michield Do you agree that introducing hashing for the URLs is necessary in order to support both longer URLs and also indexing?</p>", "<p>Is the reason for this change that some urls are longer than 255 characters? If so, then just increase the length of the varchar to something more effective, which will continue to allow a unique index. That seems to require mysql 5.0.3+ though.</p>\n<p>I don't see the need to change the field type to text but I might be missing something.</p>", "<p>@bramley indexing is used for fast lookups as well as for unique values, but apparently the maximum length of the index is 255. Performance is very important for seamless access to linked pages from emails, particularly on very large installations. This is the reason Xheni proposed hashing instead.</p>", "<ol>\n<li>varchars no longer are limited to 255 - we can just increase the varchar size. Thanks @bramley for pointing that out, I wasn't aware of that</li>\n<li>I like the hash idea for indexing, so that it includes the entire URL and not the first 255 chars. However, indexing is only for speed, it will still find the correct URL, if you get two URLs where the first 255 characters are the same</li>\n<li>@xh3n1 I think we can expect URLs to be quite long now, it's getting more common</li>\n<li>I think text vs varchar(65535) is cosmetic, and won't make any difference. text will allow earlier Mysql versions, and I have no idea about the current version distribution.</li>\n</ol>", "<blockquote>\n<p>it will still find the correct URL, if you get two URLs where the first 255 characters are the same</p>\n</blockquote>\n<p>That's what I didn't realise. Also, that the constraints on index length are more restrictive that I had expected.\nApologies for the unnecessary earlier comments.</p>", "<p>Looks good. I see no issue. If you're ready to go, remove the on hold and work in progress and we can merge</p>", "<p>@michield  done </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/276", "title": "Mantis 19122 check for update to plugins", "status": "closed", "labels": [], "priority": null, "description": ["<p>There are a few changes:</p>\n<ol>\n<li>for plugins that have been installed from GitHub, query GitHub for the latest tag. If that is greater than the plugin's version then a new version of the plugin is available. \nAllow a plugin to provide its own method to find a new version.</li>\n<li>Display the number of plugins that are enabled, disabled and have an update available</li>\n<li>Reduce the number of rows displayed for each plugin by displaying two fields on one row</li>\n</ol>", ["<p>any reason not to use fetchUrl for fetching the update URL content?</p>", "<p>I changed the code to use fetchUrl() and it appears to work, but I need to wait for an hour to see whether the cache time-out processing works. </p>\n<p>But it appears to be specific to fetching a remote page for a campaign, and has some manipulation of the url with expandurl() and also of the resultant content with addAbsoluteResources(). I didn't look too closely at what those functions do but on the tag urls neither the url nor the result were changed.</p>\n<p>However more importantly it uses curl whereas plugins are fetched using file_get_contents(). So using fetchUrl() would place a further requirement on curl being available, which is not needed just to install a plugin.</p>\n<p>I can see that caching in the database is better than in the session though. </p>", "<p>fetchUrl probably caches even more. It's true it needs curl, but then again, loads of things like updating languages won't work without it.\nI don't mind if you want to keep file_get_contents. </p>", "<p>I have changed the tag retrieval processing to use getPageCache() and setPageCache() with the cache entry being valid for 24 hours instead of just one hour. Also, display the Update button for all plugins that have been installed from GitHub, instead of only those that have an update, to allow updating a plugin that doesn't use tags.</p>\n<p>For consistency, I think that using file_get_contents is necessary, but as another piece of work it would be a good improvement to have a single way of retrieving remote content, which would use whatever method is available.</p>", "<p>Nice one!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/275", "title": "0019065: Add help option to explain what does it mean to add a list as \"public\"", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19065</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/274", "title": "0019066: Add contextual help explaining the meaning of \"System\" templates", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19066\n-  Add help icon \n-  Use s( ) function for the translation. </p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/273", "title": "Fix [FROMEMAIL] not working in template", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fixes #272</p>", ["<p>You are misunderstanding the use of that field, it is the value to be used as the From address for system messages, such as subscription confirmation, not for campaigns.</p>\n<p>The field that you might be intending is \"Default for 'From:' in a campaign\", but even that is only a default and can be overridden when composing a campaign. The actual email address that is being used as the From address is in <code>$cached[$messageid]['fromemail']</code>.</p>", "<p>Thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/272", "title": "[FROMEMAIL] is not replaced when used in template", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>On second thought, [FROMEMAIL] <em>is</em> properly replaced in the footer, and putting [FOOTER] in a template works, so maybe I have been using the template in a way that it's not intended to be used?</p>", "<p>I would assume that [FROMEMAIL] should work anywhere in the email message, too, but most people probably don't even use this placeholder at all. I would like to know where the parsing takes place in the code so I could apply a fix on my own installation, because we might have someone try to use this placeholder sometime, not knowing about this limitation.</p>", "<p>Check out the fix referenced above (#273).</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/271", "title": "Mantis 19117 - Layout of the times of views on the Open Statistics page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Display view times as a single field.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/270", "title": "fix the system requirements link ", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/269", "title": "Clarify subsriber deletion code", "status": "closed", "labels": [], "priority": null, "description": ["<ul>\n<li>Added inline comments</li>\n<li>Deleted erroneous comment</li>\n<li>Improved SQL layout</li>\n<li>Improved deletion notification text</li>\n</ul>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/268", "title": "Delete the corresponding rows in the related tables when a user or message is deleted", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis: <a href=\"https://mantis.phplist.org/view.php?id=19114\">19114</a> &amp; <a href=\"https://mantis.phplist.org/view.php?id=19116\">19116</a></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/267", "title": "Avoid PHP warning about undefined index", "status": "closed", "labels": [], "priority": null, "description": ["<p>php issues this warning when phplist is run from the command line</p>\n<p><code>PHP Notice:  Undefined index: ui in /home/duncan/Development/GitHub/phplist3/public_html/lists/admin/connect.php on line 133</code></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/266", "title": "Use stable chrome to fix the failing tests", "status": "closed", "labels": [], "priority": null, "description": ["<p>The failing test: https://travis-ci.org/phpList/phplist3/jobs/353986178\nAfter the fix: https://travis-ci.org/xh3n1/phplist3/builds/354060410</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/265", "title": "Add 'delete list' button to Edit List page", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=18547</p>", ["<p>@xh3n1 Also please rebase on master to see if this fixes the failing tests.</p>", "<p>@samtuke Thanks for the review. Done :smiley: </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/264", "title": "Subscribe page text attribute value is corrupted", "status": "closed", "labels": [], "priority": null, "description": ["<p>The function removeXss() in admin/inc/magic_quotes.php always htmlspecialchars() $_POST, $_GET etc for public pages\n<code>function removeXss($string)\n{\n    if (is_array($string)) {\n        $return = array();\n        foreach ($string as $key =&gt; $val) {\n            $return[removeXss($key)] = removeXss($val);\n        }\n        return $return;\n    }\n    //$string = preg_replace('/&lt;script/im','&amp;lt;script',$string);\n    $string = htmlspecialchars($string);\n    return $string;\n}</code>\nThis results in text values, such as a company attribute, that include an &amp; character being corrupted.\nSo entering <code>M&amp;S</code> gets stored as <code>M&amp;amp;S</code> in the database. Then is displayed as <code>M&amp;amp;S</code> on the preferences page and if submitted is then stored as <code>M&amp;amp;amp;S</code> in the database.</p>\n<p>I'm not knowledgeable about how to avoid XSS but cannot believe that htmspecialchars() every parameter is necessary.</p>", ["<p>Removing the call to htmlspecialchars() doesn't appear to have any bad effect.\nIf I enter some html in a text field on the subscribe page\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/37467964-8f08c94c-2859-11e8-885c-47c479f1a21d.png\" /></p>\n<p>then on the preferences page it is shown literally, because the value is html encoded prior to display\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/37468035-bf25efe2-2859-11e8-9050-43c06007a8d0.png\" /></p>", "<p>Yes, I agree, it's a bit of a sledgehammer. I'll try to find some time to investigate</p>", "<p>Is it only the &amp; that is the issue, or other characters as well? We could just put &amp; back into &amp; and stick with that.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/263", "title": " Add info buttons to headings on stats overview page", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=18725</p>", ["<p>Please, do not merge this one yet. I have to investigate something first. </p>", "<p>OK!</p>", "<p>@xh3n1 Is this still blocked?</p>", "<p>It's fixed now. You can review and merge.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/262", "title": "Set a \"Please enter your credentials\" message on login page", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19050</p>", ["<p>There have been discussions on the minimum php version required for phplist. My recollection is that 5.3 is still supported, so you should avoid using short array syntax unless that has changed.</p>\n<p>See https://github.com/phpList/phplist3/pull/164</p>", "<p>@bramley thanks for the review. </p>", "<p>@xh3n1 Maybe rebasing this on master would fix the failing tests? </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/261", "title": "Permanent logout due to invalid session token", "status": "closed", "labels": [], "priority": null, "description": ["<p>I update from PHP5 to PHP7.1 on a running phplist installation. After the update i've got logged-out on every click after a successful login with the reason \"invalid session token\".</p>\n<p>I tested with PHP sessions and session tables as well, the behavior was still the same.\nFinally I found out that adding a <code>@session_start()</code> at the beginning of <code>admin/index.php</code> fixes the issue.</p>\n<p>Environment: phplist 3.3.1, php 7.1.11, apache 2.4.26</p>", ["<p>Sounds like a great catch, thanks!</p>\n<p>Can someone else replicate this, @bramley @michield ?</p>", "<p>My shared hosting site runs fine with phplist 3.3.1, php 7.1.14 and apache 2.4.29, so I guess that there is some other factor in play.</p>", "<p>My PHP7 installations have <code>session.auto_start</code> not set, Sadly I cannot check how it was set before, but if it was set this would definitively prevent the issue...</p>", "<p>@gillima On my local development server session.auto_start is also not set, but I have not experienced this problem. I wonder what else may have caused it?</p>", "<p>Finally i found it. Seems not to be a problem in the phplist core! Sorry about that. I moved the session_start downwards until i found the line which caused the problem. Finally I ended inside config.php. Right after setting the database credentials there was a <code>init_set('session.save_path', ...)</code> to a non writable directory. I guess the previous version of PHP was just not allowed to set this path, that's why it worked...</p>\n<p>Now it works even without the session_start because this is now done somehow later when including the languages.php file. Anyway, thanks for the help!!!</p>", "<p>@gillima Thanks for pursuing this to find the explanation. Happy to hear you got it resolved! Closing</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/260", "title": "Webbler listing row value of 0 is not displayed", "status": "closed", "labels": [], "priority": null, "description": ["<p>Testing $row['value'] for true is incorrect because it means that a value of 0 is not displayed.</p>\n<p>But $row['value'] and $row['align'] will always have a value as they are set in the addRow() method, so there is no need to test for true or being set.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/259", "title": "CSP - Content Security Policy (script-src)", "status": "closed", "labels": [], "priority": null, "description": ["<p>When I use .htaccess file with this line ('Mitigate the risk of cross-site scripting and other content-injection attacks' as shown in Apache Server Configs v2.15.0 | MIT License -&gt; https://github.com/h5bp/server-configs-apache):</p>\n<p><code>&lt;IfModule mod_headers.c&gt;\n    Header set Content-Security-Policy \"script-src 'self'\"\n&lt;/IfModule&gt;</code></p>\n<p>The error is this: \"all.min.js?v=1487027292:83 Refused to evaluate a string as JavaScript because 'unsafe-eval' is not an allowed source of script in the following Content Security Policy directive: \"script-src 'self'\".</p>\n<p>(anonymous) @ all.min.js?v=1487027292:83\"</p>\n<p>Thanks for your excelent work.</p>", ["<p>Do you have a suggestion how to resolve that?</p>", "<p>No, not realy! I'm not the right person to solve this. :-(</p>", "<p>This issue has no activity for more than a year now. In case there are more questions in the future, I would recommend to visit the community forum at https://discuss.phplist.org/. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/258", "title": "Minor usability improvements to bounces and bounces per list pages", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fixes:\n  - https://mantis.phplist.org/view.php?id=19097\n  - https://mantis.phplist.org/view.php?id=19096</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/257", "title": "0019085: Replace seconds with formatted date on Subscriber History page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis: https://mantis.phplist.org/view.php?id=19085</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/256", "title": "#0019064 & #0019062 about \"All subscribers\" list", "status": "closed", "labels": [], "priority": null, "description": ["<p>add help button, remove edit and delete buttons.\nThe help button to work also need this PR to be merged https://github.com/phpList/phplist-lan-help/pull/9 </p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/255", "title": "Change table name on Campaign click statistics page", "status": "closed", "labels": [], "priority": null, "description": ["<p><img alt=\"photo_2018-02-08_15-09-50\" src=\"https://user-images.githubusercontent.com/9008509/35977008-2c7d4e2a-0ce2-11e8-9301-efa8122be67e.jpg\" /></p>\n<p>Mantis issue: https://mantis.phplist.org/view.php?id=18860</p>", ["<p>@xh3n1 Thanks for this, there is some confusion over the version of the page to be changed. Please see the new note on the mantis issue.</p>", "<p>@samtuke Sorry about being confused and thanks for your review. I made the changes as suggested and also added the number format. </p>\n<p><img alt=\"version1\" src=\"https://user-images.githubusercontent.com/9008509/35982283-b2a34a92-0cef-11e8-9a3f-9cee9475c330.jpg\" />\n<img alt=\"version2\" src=\"https://user-images.githubusercontent.com/9008509/35982289-b6227e86-0cef-11e8-8231-785dec0b8585.jpg\" /></p>", "<p>@xh3n1  Brilliant, thanks! </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/254", "title": "Allow PHP 7.2 and higher", "status": "closed", "labels": [], "priority": null, "description": ["<p>Closes #253 </p>\n<p>The requirement notation is semver compatible and avoid unbound constraint. In other terms, it prevent installing with future PHP 8.</p>", ["<p>~The error is \"just\" a deprecation. I'll try to use symfony/phpunit-bridge to handle that.~</p>\n<p>The error come from phplint. Maybe deprecation can be ignored?</p>", "<p>I can't reproduce it on local:</p>\n<p>```\nsullivan@sweethome:~/projects/fork/phpList/phplist3(php-7.2)$ ./vendor/bin/phpLint ./public_html/</p>\n<p>Linting PHP in: ./public_html/</p>\n<p>273 Checked\n273 Passed\n0 Failed</p>\n<p>Pass</p>\n<p>```</p>", "<p>@Soullivaneuh thanks for the PR! Are you using a different version of phplint to Travis? Or is phpList using functions which have been depreciated in PHP 7.2?</p>", "<blockquote>\n<p>Are you using a different version of phplint to Travis?</p>\n</blockquote>\n<p>I don't think so, I use the binary from the installed vendors.</p>\n<blockquote>\n<p>Or is phpList using functions which have been depreciated in PHP 7.2?</p>\n</blockquote>\n<p>According to Travis, the deprecated call is <code>__autoload</code>. BTW, the suggested <code>spl_autoload_register</code> is available in all PHPLIst supported PHP versions. So it can be replaced with ease IMO.</p>", "<p>After digging on the code, I found the <code>__autoload</code> for PHP &lt; 5.1.2.</p>\n<p>As we support PHP 5.3 as minimum version, it can be removed.</p>", "<p>The tests are now working.</p>", "<blockquote>\n<p>After digging on the code, I found the __autoload for PHP &lt; 5.1.2.\nAs we support PHP 5.3 as minimum version, it can be removed.</p>\n</blockquote>\n<p>That is in phpmailer, an external package. It supports earlier releases of PHP.</p>", "<blockquote>\n<p>That is in phpmailer, an external package. It supports earlier releases of PHP.</p>\n</blockquote>\n<p>Maybe, but if PHPList support only PHP 5.3 and higher, phpmailer will never be used under lower PHP version here. Am I right?</p>", "<p>@michield This seems to be a safe approach to adding compatibility to PHP 7.2+. Any reason not to merge?</p>", "<p>It won't merge as is, as it has conflicts. </p>", "<p>@Soullivaneuh Please can you rebase on master and resolve conflicts? Thanks!</p>", "<p>@xh3n1 can you review this and create a new PR? It should only be a few changes, but this PR has conflicts and won't merge. The idea is still good though.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/253", "title": "PHP 7.2 compatibility", "status": "closed", "labels": [], "priority": null, "description": ["<p>The current <code>composer.json</code> does not allow PHP 7.2.</p>\n<p>Here is any reason for that? PHP 7.2 is backward compatible against PHP 7.1 according to semver.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/252", "title": "Port UAT tests to Behat 3 and Selenium2", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fixes: https://mantis.phplist.org/view.php?id=19098</p>", ["<p>@kilip The database username set in behat.yml is not being used by tests when executed locally. E.g. the value of <code>user</code> below is not used in test execution; 'phplist' is used regardless of what is set:\n<code>yaml\n                - FeatureContext:\n                    # Set database access credentials\n                    database:\n                        host: localhost\n                        user: foo\n                        password: bar\n                        name: bam</code></p>\n<p><strong>Edit:</strong> Actually changing the value of user causes errors, but without having a mysql/mariadb user named phplist the tests fail locally. Perhaps two sets of db credentials are being used.</p>", "<p>@kilip Are the following scripts available via composer for easier management? Or are they custom written by you?:\n- imgur-uploader.sh\n- start-selenium</p>", "<p>@samtuke that 2 script (imgur-uploader and start-selenium) is created by me.</p>\n<p>I think maybe those user error caused by recreating database  in this <a href=\"https://github.com/phpList/phplist3/blob/c5e0511c50e26446ef240fbf92a2f974edd49523/tests/features/getting-started/setup.feature#L8\">feature</a>.\nWhere the database will be dropped and then created again in this <a href=\"https://github.com/phpList/phplist3/blob/c5e0511c50e26446ef240fbf92a2f974edd49523/tests/features/bootstrap/FeatureContext.php#L164\">line</a></p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/251", "title": "Travis Selenium Integration", "status": "closed", "labels": [], "priority": null, "description": ["<p>This note can be found in <a href=\"https://gist.github.com/kilip/5aaae72d7f5dde63caf561c1eb85b92a\">this gist</a>  too.</p>\n<h3>New Development Requirements</h3>\n<p>To make selenium easier to be used by developer this 2 packages added into dev dependencies:\n- <code>enm1989/chromedriver</code>\n- <code>se/selenium-server-standalone</code></p>\n<p>New bash script <code>bin/start-selenium</code> added, so developer can start selenium by using this command:\n```bash</p>\n<h1>cd path/to/phplist3</h1>\n<p>$ bin/start-selenium\n```</p>\n<p>This command need to be execute before perform behat tests with <code>chrome</code> browser</p>\n<h3>Parameters Changed</h3>\n<p>This config parameters for <code>FeatureContext</code> is deleted:\n- baseurl\n- db_user\n- db_password\n- db_name\n- admin_username\n- admin_password</p>\n<p>The new config<code>FeatureContext</code> parameter with their default value is:\n```yaml</p>\n<h1>cd path/to/phplist3/behat.yml</h1>\n<p>default:\n    suites:\n        default:\n            contexts:\n                - FeatureContext:\n                    # Set database access credentials\n                    database:\n                        host: localhost\n                        user: phplist\n                        password: phplist\n                        name: phplistdb\n                    # Set admin user login credentials\n                    admin:\n                        username: admin\n                        password: admin\n```</p>\n<h3>Browser Testing</h3>\n<p>By this default command behat will be using goutte:\n<code>bash\n$ behat</code>\nTo do tests with chrome browser we should type this command (using behat profile):\n<code>bash\n$ behat -p chrome</code>\nSince using selenium with firefox is buggy, we can't tests firefox browser (at least for now).</p>\n<h3>Travis Build</h3>\n<ul>\n<li>Removed php <strong>5.3</strong> version, because no compatible package availble for php 5.3 version to take a screenshot during selenium tests.</li>\n<li>Actually the old travis build never use the phpenv version, the php version used in test is the one from apache (see this <a href=\"https://github.com/phpList/phplist3/blob/6187a3fd852dfc403806fc42b46ade4cb1e9f885/.travis.yml#L13\">link</a>. In the new travis configuration we using php built in server:\n<code>bash\n$ php -S localhost:8000 -t public_html/</code></li>\n<li>By default all tests in php version will use goutte, we only have 7.1 version to be tested with chrome browser</li>\n<li>For chrome browser test, failed screen shot will be uploaded into imgur by using <code>bin/imgur-uploader.sh</code> script. A link for this image can be found by the end of travis build log</li>\n<li>Behat will skip features/scenarios that tagged with <code>@wip</code> such as <a href=\"https://github.com/kilip/phplist3/blob/e51c919a975ee2b32e139b2a551a711902ed5aea/tests/features/managing-campaigns/newcampaign.feature#L2\">this feature</a>. Please remove this tag if that features/scenario is fixed.</li>\n</ul>", ["<p>@kilip Please can you resolve the conflicts so that this can be merged?</p>", "<p>I was a bit puzzled why this includes unrelated commits going back to October. Possibly you have been using a very old branch. It might be clearer to rebase using the current phplist master so that only your changes on February 6 are committed.</p>", "<p>@samtuke there are no conflicts, but not all tests passed. I think that may have been Travis. I restarted the one failing job to see if that helped.</p>", "<p>@bramley I think @samtuke  can explain more about the history, but I do think this branch goes back to October.</p>\n<p>@samtuke @kilip the restarted job still fails. It fails on one test \"52 scenarios (51 passed, 1 failed)\"</p>\n<p>And only on Chrome on PHP7.1</p>\n<p>Question for @kilip how do we access the screenshots that are taken?</p>", "<p>@michiel the conflicts were resolved earlier today by @kilip.\n@bramley this branch is forked from behat-cleanup, so the commit is likely in that branch; I'm not sure which one or why. I tried rebasing this branch on master today without success.</p>\n<p>I'm looking forward to trying the tests locally tomorrow.</p>", "<p>@michield , @samtuke \nForgive me if I am wrong, I have merged master into this behat-cleanup branch first, before I make a pull request.</p>\n<h4>Screenshot</h4>\n<p><code>bin/imgur-uploader.sh</code> start to upload scripts in <a href=\"https://travis-ci.org/phpList/phplist3/jobs/338069074#L702\">this line</a>, and it will creating output like:</p>\n<p><code>build/screenshot/tests_features_managing-subscribers_newsubscriber_feature_6.png: https://i.imgur.com/YVPTDTw.png</code></p>\n<p>In that case the screenshot can be found on: https://i.imgur.com/YVPTDTw.png</p>\n<h4>Failed tests</h4>\n<p>As I mentioned earlier, travis will ignore features/scenario that tagged with <code>@wip</code>. So actually we have 2 test that still need work:\n<strong>skipped feature:</strong> <code>newcampaign.feature</code> <a href=\"https://github.com/kilip/phplist3/blob/e51c919a975ee2b32e139b2a551a711902ed5aea/tests/features/managing-campaigns/newcampaign.feature#L1\">source</a>\nFailed on both goutte and chrome.</p>\n<p><strong>failed feature:</strong> <code>newsubscriber.feature</code> at this <a href=\"https://github.com/kilip/phplist3/blob/e51c919a975ee2b32e139b2a551a711902ed5aea/tests/features/managing-subscribers/newsubscriber.feature#L8\">step</a>\nInteresting failed tests where working on goutte, but failed on chrome. Because in chrome we need to click <code>Subscribers</code> menu to see <code>Add new subscriber</code>, I suggest for this test we change this scenario to be:\n```gherkin</p>\n<h1>tests/features/managing-subscribers/newsubscriber.feature</h1>\n<p>Features: ...\n  ...\n  Scenario: Login and create a campaign\n    Given I have logged in as an administrator\n     # define in FeatureContext.php to go to page:\n     # lists/admin/?page=adduser&amp;tk=XXXXX\n    And I want to add new subscriber</p>", "<p>@kilip Thank you for merging master; that makes it possible to merge more quickly.\nI have merged this into behat-cleanup in order for others such as myself to be able to push changes.\nThe test you mentioned, newsubscriber.feature, has been fixed and is passing locally and on Travis.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/250", "title": "Behat: Travis Fix", "status": "closed", "labels": [], "priority": null, "description": ["<p>this pull request contain fix in using behat with selenium on travis</p>", ["<p>Why did you close this? I think it's very interesting.</p>", "<p>@michield this pull request still have an error. I will try to fix and make a pull again after it's fixed</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/249", "title": "0018950: Improve formatting of 'Actions' section of 'List membership'\u2026", "status": "closed", "labels": [], "priority": null, "description": ["<p>Result on Trevelin:\n<img alt=\"screenshot from 2018-02-01 23-06-36\" src=\"https://user-images.githubusercontent.com/7660111/35713337-9148a5bc-07a5-11e8-83ac-22d4e0856303.png\" /></p>\n<p>Result on Dressprow:\n<img alt=\"screenshot from 2018-02-01 23-08-24\" src=\"https://user-images.githubusercontent.com/7660111/35713348-9d48c784-07a5-11e8-835a-206fef448a35.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/248", "title": "Link campaign statistics from page to more detailed stats", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19046</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/247", "title": "mantis #0018940: Reformat campaign table... on 'View opens' page", "status": "closed", "labels": [], "priority": null, "description": ["<p>result on dressprow:\n<img alt=\"screenshot from 2018-01-31 01-02-06\" src=\"https://user-images.githubusercontent.com/7660111/35604943-ff25587e-0623-11e8-9188-aabb0edfadde.png\" /></p>\n<p>result on trevelin:\n<img alt=\"screenshot from 2018-01-31 01-02-28\" src=\"https://user-images.githubusercontent.com/7660111/35604947-0e85e68a-0624-11e8-8ae8-58de05867da9.png\" /></p>", ["<p>@samtuke  i should re-submit this PR to see if can complete the first test?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/246", "title": "Add button link to campaign statistics page on View Opens page", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=18627</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/245", "title": " add number formatting to total bounces  on listbounces page", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=18275</p>\n<p><img alt=\"photo_2018-01-23_00-51-34\" src=\"https://user-images.githubusercontent.com/9008509/35250585-98d025e2-ffd7-11e7-84a4-ae0e53bad901.jpg\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/244", "title": "Fix miscalculation of percentages on statistics overview page", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19045\n<img alt=\"photo_2018-01-22_16-13-29\" src=\"https://user-images.githubusercontent.com/9008509/35227797-565f00fe-ff8f-11e7-986a-04ef08c628b2.jpg\" /></p>\n<ul>\n<li>The number_format() was causing the issue</li>\n<li>The total views and the total clicks rows  are now displayed.</li>\n</ul>\n<p>TO DO:\n- [x] Since the total clicks are not unique clicks, the clicks per views rate now  is &gt;100%,  which means that I need to calculate the uniqueclicked / viewed * 100</p>", ["<p>@samtuke and @bramley please review :) </p>", "<p>number_format() has been removed from numbers that should be displayed with thousand separators, e.g. 53938 and 1559 in the screenshot.</p>\n<p>There are a few unnecessary blank lines added.</p>\n<p>Don't leave unnecessary brackets\n<code>$totalSent = ( $row['num'] );</code></p>", "<p>Thank you for your review @bramley . I made the changes as requested. </p>\n<p><img alt=\"photo_2018-01-22_17-25-11\" src=\"https://user-images.githubusercontent.com/9008509/35231590-82c1f570-ff99-11e7-8db3-f373692505ab.jpg\" /></p>", "<p>Please can you add number formatting to the stats which are in the buttons as well? E.g. 'Opened' and 'Clicked'</p>", "<p>@samtuke Thanks for the review. I added the number formatting to them as well. </p>", "<p>@xh3n1 Thanks!</p>", "<p>I made some changes. The Unique clicks are now calculated and displayed. I also fixed the click per view rate. Maybe we should remove total clicks and only keep the unique clicks, what do you think @samtuke @bramley ?\n<img alt=\"e fundit\" src=\"https://user-images.githubusercontent.com/9008509/35243284-9b27439a-ffbc-11e7-8adf-27d349728398.jpg\" /></p>", "<p>I think that the row for Total Clicks doesn't really make any sense. The query is</p>\n<p><code>$clicked = Sql_Fetch_Row_Query(sprintf('select count(userid) from %s where messageid = %d',\n    $tables['linktrack_uml_click'], $id));</code>\nwhich counts the number of separate user/links for that message that have been clicked. So the total of 43,444 could be one person clicking one link 43,444 times, two people each clicking two links 10,861 times or any other combination. I don't think there is any meaningful information about the number of users.</p>", "<p>@bramley 'Total clicks' tells us about clicks, not about subscribers. The quoted query hasn't changed in this PR. I agree that the statistic is a blunt instrument, but what is the benefit of removing it? Assuming that bots/automated clicks are not at work, total clicks can still communicate engagement.</p>", "<blockquote>\n<p>So the total of 43,444 could be one person clicking one link 43,444 times, two people each clicking two links 10,861 </p>\n</blockquote>\n<p>Sorry, this explanation was wrong. What I mean is the total could be 43,444 people clicking one link  each any number of times, or 10,861 people clicking four links each any number of times, or other combinations.</p>\n<p>My point is that this figure isn't the total number of clicks, nor the number of users, instead it is the total of distinct user/links that have been clicked. </p>\n<p>If you want to confirm that then see the Campaign Click Statistics page which I think will show the same number of users (the Unique Clicks figure 22,663) but a larger number of clicks. I agree that showing the total number of clicks on this page is useful.</p>\n<p>In my phplist (using 3.3.1) the Campaign Click Statistics page shows 17 subscribers and 28 clicks. The summary Statistics Overview page confirms the figure of 17 but the detailed Statistics Overview page shows a figure of 22 for the total clicks.</p>", "<p>There is still a problem with the heading, which shows \"Campaign click statistics\". I think that there is a translation error because the code has different text</p>\n<p><code>echo '&lt;h3&gt;'.s('Campaign statistics').'&lt;/h3&gt;';</code></p>", "<p>@bramley Translation error fixed in this string (you were correct): https://translate.phplist.org/en/phplist/translate/phplist.po#unit=284202</p>", "<p>@bramley In order to avoid blocking this PR the issue you described will be written up in a separate mantis issue and addressed in a new PR.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/243", "title": "Added 'total views' for each subscriber CSV export table", "status": "closed", "labels": [], "priority": null, "description": ["<p>This commit is designed to get the 'total views per-subscriber' stats into the CSV export, to allow this data to be sorted. Currently it cannot be, and sorting it by default in order of total views descending in the web interface is not trivial due to the multiple queries involved.</p>\n<p>The order of the conditionals checking for more than 1 view is used twice; once to get the total views per subscriber to include in the first table row for that subscriber, and second to add the second table row with individual view data.</p>\n<p>This has not been tested with large data sets. A UI improvement would be to click the table row to expand and see the second table row. Also adding response time for each individual view may be beneficial for some users.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/242", "title": "Activate plugins in a controlled order", "status": "closed", "labels": [], "priority": null, "description": ["<p>Currently plugins are created in an indeterminate order, and made active in that order. It will be useful to apply some control to this, so that one plugin can validly assume that another has already been activated. One example is to activate the Common Plugin first.</p>\n<p>There are two changes:\nAdd priority field to a plugin.\nSort active plugins in descending priority order before activating.</p>", ["<p>This is great</p>", "<p>Yes, nice one</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/241", "title": "Add number formatting with thousand separators", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=18438</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/240", "title": "Replace \"Go there\" links with linked page titles and add table headings", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19044 &amp; \nhttps://mantis.phplist.org/view.php?id=18308</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/239", "title": "Add Help on Import by CSV page using the pop-up option", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>Please link to the related mantis issue on mantis.phplist.com.</p>", "<p>Hi Marie, \nYes you are right on both your observations. I did not notice there was a div with the same id in that page, and I did not tests it on Dressprow. I have removed that element from the page and I have left that section as it was, in plane text. Although I think it would look better if we developed a similar object to globalhelp to put this kind of information that include lots of text. \nAs for your second observation, you are totally right I have now pushed the files I created and their names are all lowercase. </p>", "<p>@michield or @samtuke  can you merge this PR? https://github.com/phpList/phplist-lan-help/pull/8</p>", "<p>Thanks, don't know how I missed that. \nAlso mantis issue: https://mantis.phplist.org/view.php?id=19051</p>", "<p>@suelaP  I think the best way to do this is using the php Help function, as I explain to you in the email with subject 'Help icon on \"View Opens\" page', that way if we decide to change this icon in the future we just have to change the Help function, instead of all html.</p>", "<p>For example:\nTo add the help button with topic testoutput, you wrote this html line \n<code>&lt;a href=\"help/?topic=testoutput\" class=\"helpdialog\" target=\"_blank\"&gt;&lt;span class=\"glyphicon glyphicon-question-sign text-warning\"&gt;&lt;/span&gt;&lt;/a&gt;</code></p>\n<p>but you only need to write this php line:\n<code>&lt;?php echo Help('testoutput'); ?&gt;</code></p>", "<p>Hi Marie, thats's done now, thanks for the explanation :)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/238", "title": "Attributes improvement", "status": "closed", "labels": [], "priority": null, "description": ["<ul>\n<li>add conceptual help icon for the <a href=\"https://mantis.phplist.org/view.php?id=18907\">predefined defaults</a></li>\n<li>Migrated to s() to translate the strings</li>\n</ul>\n<p>https://mantis.phplist.org/view.php?id=18907</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/237", "title": "Userhistory tweaks", "status": "closed", "labels": [], "priority": null, "description": ["<ul>\n<li>Formatted dates</li>\n<li>Added translation of strings used by 'blacklist info' data names</li>\n<li>Migrated to s() for translation of strings</li>\n<li>Removed leading newline/break from info table row</li>\n<li>Made 1st column labels bold; Removed colons as labels</li>\n<li>Used html special chars decoding to avoid literal printing of special chars in browsers</li>\n<li>Improved formatting/readability of long lines </li>\n</ul>\n<p>https://mantis.phplist.org/view.php?id=19035</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/236", "title": "Add campaign click ratio to statistics page", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=18538\nThe click rate shows the number of clicks on the campaign divided by the number of times the campaign is viewed, expressed as a percentage.</p>", ["<p>I don't think that this is the correct change because the existing code is incorrect, and you have based the change on that.  The current code already intends to display a number of clicks and a clicked/sent % but only the % is displayed. \n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/34600063-99071f7c-f1ed-11e7-9d83-fa3276c40f84.png\" /></p>\n<p>This is caused by a repeated error in calling addColumn() with the same first and second parameter values\n<code>$ls-&gt;addColumn($element, '', !empty($clicked[0]) ? PageLink2('mclicks&amp;id='.$id, $clicked[0]) : '0');</code>\n<code>$ls-&gt;addColumn($element, '', $perc.' %');</code></p>\n<p>only the final call of addColumn() will be used</p>\n<p>I suggest reworking the current code to make that display correctly then re-apply your change. One way to display several values in one column is to use a separator, for example \n58 | 19.6% | 29.6%\nbut this would need an explanation somewhere as what the two % figures actually mean.\nThe other way is to display each clicked % as a separate line, i.e. using addElement().</p>", "<p>Sorry, my previous comments were wrong. Your change is fine, but there is the existing problem with how addColumn() is used. Maybe you would like to look into fixing that?</p>", "<p>@bramley I'm not sure what you mean with the addColumn issue. Please send a PR if you think something needs fixing</p>", "<p>I misunderstood what the code is trying to do. \nIt appears to want to display an opened total and an opened % but only the latter is actually displayed. Similarly for clicks - a clicked total and a clicked/sent %.\nThe problem is that there are duplicate element names - Opened and Clicked are used for the total and for the %, so only the latter is displayed.</p>\n<p>Originally I thought it was trying to display extra columns, not extra elements.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/235", "title": "Replace \"Messages\" with \"Campaigns\" in user history table", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=18011 </p>", ["<p>I think that the original problem has already been resolved by using \"Campaign Id\" as the column heading, which means \"Messages\" is correct in describing the content of the listing. </p>\n<p>But even that is a bit redundant and inconsistent with using Campaigns on the tab heading. \nMaybe removing the panel heading will improve clarity\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/34600638-5831d304-f1f0-11e7-902f-9aa0dcbfeb98.png\" /></p>", "<p>Hey @bramley, I replaced the Messages with Campaigns for this PR, but we can remove it in the future.\nThanks for your review.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/234", "title": "0018997: Move 'Send test' button to the side of the test email...", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=18997</p>\n<p>This is the change in Trevelin:\n<img alt=\"screenshot from 2017-12-29 15-40-16\" src=\"https://user-images.githubusercontent.com/7660111/34444798-7f229912-ecaf-11e7-82c3-975dab0c027c.png\" /></p>\n<p>This is the change in Dressprow:\n<img alt=\"screenshot from 2017-12-29 15-03-52\" src=\"https://user-images.githubusercontent.com/7660111/34444810-8ba1c6ae-ecaf-11e7-9584-7df4ede71637.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/233", "title": "Get hover text using page name", "status": "closed", "labels": [], "priority": null, "description": ["<p>Currently the function PageLink2() tries to get any hover text using the $name parameter, but that can include additional query parameters, e.g. importsimple&amp;list=3, which means that the hover text is not found. \nThis change is to use only the page name to get hover text.</p>", ["<p>I think this change fixes the underlying problem of #189 </p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/34431039-18b10a52-ec63-11e7-953e-962c76c49f46.png\" /></p>", "<p>Nice work</p>", "<p>Relates to retrospectively opened issue: https://mantis.phplist.org/view.php?id=19042</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/232", "title": "fix 0018973: There is a wrong left space in /lists/admin/?page=import2", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=0018973</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/231", "title": "Set 1st column heading; Captialised column headings", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>As far as I could see, a separate capitalised string didn't already exist, so using it would have created a new one for translators. Generally we don't have two strings for the capitalised vs non-capitalised versions.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/230", "title": "Fixed typos and improved subeading formatting", "status": "closed", "labels": [], "priority": null, "description": ["<ul>\n<li>Added missing space between words</li>\n<li>Added missing full stop</li>\n<li>Removed duplicate colon</li>\n<li>Moved subheading to directly above corresponding items</li>\n<li>Merged two lines of explanatory text into one</li>\n</ul>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/229", "title": "Make view subscribe page button open in new tab", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/228", "title": "Pr 224", "status": "closed", "labels": [], "priority": null, "description": ["<p>@samtuke  is this what you need?</p>", ["<p>Of all the newly listed commits, only 2a4fc97 should be left in the diff once the behat-cleanup branch is merged. This merge is blocked by behat-cleanup.</p>", "<p>@mariez Yes, thanks!</p>", "<p>The problem is only with this commit: https://github.com/phpList/phplist3/pull/228/commits/69dd153223bc9f7a7ef9d3c6aae46d260d246482</p>\n<p>If resolve this will take too long, i prefer to split this PR so I can go forward the other commits.</p>", "<p>This PR should not be blocking other commits or other PRs -- this PR must wait until the behat-cleanup branch is merged (which will likely take some weeks).</p>", "<p>It is not blocking other commits, only the commits included in ths PR.</p>", "<p>Let's leave this for now. This PR is too big to be safe to merge</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/227", "title": "Inserted help buttons into CSV import page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Refreshed version of pr #226 by @suelaP with unrelated commits removed.</p>", ["<p>@suelaP Did we agree that @mariez would move the help buttons into the same table rows as the fields they relate to? Or do we have another solution for the layout?</p>", "<p>@samtuke , we agreed that @mariez would look for the best solution because putting them on the same row would cause problems when the content was expanded.</p>", "<p>The actual alert text e.g. \"The file you upload will need to have the attributes ....\" is no longer translatable. Is that deliberate?</p>", "<p>No, it wasn't intentional, thank you for pointing that out. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/226", "title": "Ui improvements", "status": "closed", "labels": [], "priority": null, "description": ["<p>Added HELP button on CSV import page </p>", ["<p>Would be good to fix this before attempting to merge this: https://travis-ci.org/phpList/phplist3/builds/314721899</p>", "<p>Closing - has been superseded by PR #227.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/225", "title": "Tidy-up usage of PLUGIN_ROOTDIRS and PLUGIN_ROOTDIR", "status": "closed", "labels": [], "priority": null, "description": ["<p>A few changes following investigation of a problem on a Windows server.</p>\n<p>1) Both the constants already have fallback define's in init.php.\n2) Using explode() on an empty string gives an array of one entry that is an empty string. On a Windows server I found that is_dir() on an empty string is treated as the current directory.\n3) I then found that is_dir('plugins') returned true (it shouldn't as the current directory is \"lists\" not \"lists/admin\") when pluginlib.php was included from the public pages. However opendir('plugins') then failed so I suggest that the result of opendir() should be tested.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/224", "title": "2 menu changes  and 1 layout fix for app.  And 2 layout changes only for Trevelin theme.", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>Moving the subscribe page to a different menu is breaking the current behaviour, so will likely confuse anyone who already uses subscribe pages. Also the current documentation refers to the Config menu, \nhttps://www.phplist.org/manual/ch014_creating-a-subscribe-page.xhtml</p>\n<p>You might also say that user attributes relate to subscribers so should also be moved to a different menu.</p>\n<p>I think that moving menu items needs a bit of thought.</p>", "<p>@samtuke are you sure about menu change? Read @bramley comment.</p>", "<p>@bramley Good points. The manual will be updated if this is merged, so no problem there. The menu location could indeed be confusing for those who are already familiar with it, however it would be in a more prominent position, on a menu viewed more frequently.\nI agree that moving the attributes menu item to subscribers would be a good idea. That would make the subscribers menu rather long, but that can be adressed separately.\nThe objective is to get this important functionality more widely used. At the moment it is on a menu that most users do not access during routine use.\nA dashboard notification could also be added explaining the moved menu item.</p>", "<p>It will require changing the Travis tests as they relay on the text being changed here.</p>", "<p>@michield Do you mean the UAT tests? Or which other tests rely on menu navigation?</p>", "<p>No, I mean https://travis-ci.org/phpList/phplist3/builds/310998804</p>", "<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/569843/33686111-b00c1a8a-dacb-11e7-83c1-ff1d6c9950d2.png\" /></p>", "<p>@mariez Please can you fix the related UAT test(s)? The way of accessing the import page needs to be updated. From the travis log:</p>\n<p>```\nFeatureContext::iAmAuthenticatedAsAdmin()</p>\n<pre><code>Then I should see \"Add a new subscriber\"                                                     # FeatureContext::assertPageContainsText()\n\n  The text \"Add a new subscriber\" was not found anywhere in the text of the current page.\n</code></pre>\n<p>```</p>", "<p>I dont know how to do that. Is documented anywhere?</p>\n<h2>mz.</h2>\n<p>http://harpitoweb.com</p>\n<p>El 7 dic. 2017 11:32 a. m., \"Sam Tuke\" <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;\">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> escribi\u00f3:</p>\n<blockquote>\n<p>@mariez <a href=\"https://github.com/mariez\">https://github.com/mariez</a> Please can you fix the related UAT\ntest(s)? The way of accessing the import page needs to be updated. From the\ntravis log:</p>\n<p>FeatureContext::iAmAuthenticatedAsAdmin()</p>\n<pre><code>Then I should see \"Add a new subscriber\"                                                     # FeatureContext::assertPageContainsText()\n\n  The text \"Add a new subscriber\" was not found anywhere in the text of the current page.\n</code></pre>\n<p>\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\n<a href=\"https://github.com/phpList/phplist3/pull/224#issuecomment-349983919\">https://github.com/phpList/phplist3/pull/224#issuecomment-349983919</a>, or mute\nthe thread\n<a href=\"https://github.com/notifications/unsubscribe-auth/AHTiTzmVHb7t-qYKdQ7P7ZRJKCZfLv86ks5s9_cGgaJpZM4Qz2Pb\">https://github.com/notifications/unsubscribe-auth/AHTiTzmVHb7t-qYKdQ7P7ZRJKCZfLv86ks5s9_cGgaJpZM4Qz2Pb</a>\n.\n</p>\n</blockquote>", "<p>@marie I thought that you had worked on them before. My mistake.</p>\n<p>@suelaP can you work on this? You'll need to change the test in this branch independently of the other UAT branch.</p>", "<p>@suelaP you can also leave it and we'll fix it after merging. </p>", "<p>@mariez We can't push to your repo to fix the broken tests. Please push the changes in this PR to a new branch in the official phpList 3 repo and recreate this PR. Then we can fix the tests in that branch before merging.</p>", "<p>Is this ok? https://github.com/phpList/phplist3/pull/228</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/223", "title": "Question: How to do transaction messages in HTML instead plainText", "status": "closed", "labels": [], "priority": null, "description": ["<p>Sorry if I am sending this question over there instead posting an issue.\nIs it there any way to send transaction emails such as \"Opt-In Confirmation email\", \"Subscription Confirmation email\" and \"Unsubscription confirmation email\" to be able to send them in  HTML instead PlainText?</p>", ["<p>oh by the way, I have put html tags in the messages boxes \n(This sample is in Spanish, however you get the point)\n<img alt=\"imagen\" src=\"https://user-images.githubusercontent.com/19806968/33498771-402c0ed2-d698-11e7-8259-43bc6b9519f8.png\" /></p>\n<p>Looking forward in hearing back from you soon. Thanks very much in advance!</p>", "<p>This is more a question for the <a href=\"https://discuss.phplist.org/\">Forums</a></p>\n<p>When you set the System Template in the template section it will be used to wrap around the transaction messages.</p>", "<p>Thank you very much! I already figured it out. Just for those who want to have the details I am writing them out in the following link:</p>\n<p>https://discuss.phplist.org/t/transacction-phplist-emails-make-them-html-instead-plain-text/3433</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/222", "title": "fckeditor filemanager connector issue with Apache 2.4", "status": "closed", "labels": [], "priority": null, "description": ["<p><code>$ cat current/web/lists/admin/plugins/fckphplist/fckeditor/editor/filemanager/connectors/phplist/.htaccess\n&lt;FilesMatch \"\\.(php|inc)$\"&gt;\nOrder allow,deny\nDeny from all\n&lt;/FilesMatch&gt;\n&lt;FilesMatch \"(connector.php|upload.php)$\"&gt;\nOrder allow,deny\nallow from all\n&lt;/FilesMatch&gt;</code></p>\n<p>The <code>.htaccess</code> file of the plugin is not Apache 2.4 compatible and throw this error:</p>\n<p><code>AH01630: client denied by server configuration:</code></p>\n<p>While uploading an image.</p>\n<p>We should check if the plugin did fix this issue and then update it.</p>\n<p>FYI, the correct <code>.htaccess</code> for Apache 2.4:</p>\n<p><code>&lt;FilesMatch \"\\.(php|inc)$\"&gt;\nRequire all denied\n&lt;/FilesMatch&gt;\n&lt;FilesMatch \"(connector.php|upload.php)$\"&gt;\nRequire all granted\n&lt;/FilesMatch&gt;</code></p>", ["<p>Can you report that to https://github.com/michield/phplist-plugin-fckeditor instead? </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/221", "title": "better favicon resolution", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p><img alt=\"screenshot_20171119-174337\" src=\"https://user-images.githubusercontent.com/7660111/32995341-95830e44-cd51-11e7-853f-25f1de9db5b7.png\" /></p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/220", "title": "Display more admin fields on the admins page", "status": "closed", "labels": [], "priority": null, "description": ["<p>A few separate commits so that each can be reviewed individually but I can squash if necessary. </p>\n<p>The main change is to display more fields for each admin on the admins page. \nA second change is to allow only a super admin to delete another admin. Currently an ordinary admin is able to delete other admins, which doesn't sound right. The other changes are just tidying-up bits of the code. The commit messages should explain what each is doing.</p>", ["<p>This is how the admins page would look\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/33150752-dc422d42-cfcc-11e7-9c79-df6a52a4297d.png\" />\nand when external authentication is used\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/33150812-21c41ac4-cfcd-11e7-913d-9209abee7b3f.png\" /></p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/219", "title": "Rework of the Update translations page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Display only installed languages each of which can be updated.\nUse a WebblerListing to show the results.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/218", "title": "Rework the Update translations page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Currently the Update translations page presents too much information because it lists all languages, not just those whose translations have been installed. Further, only one language, the current one, can be updated and that link can be hard to see within the overall list.</p>\n<p>I have a few suggestions</p>\n<ul>\n<li>show only those languages that have been installed</li>\n<li>replace the two similar labeled date fields (last updated and last modified) with a message indicating whether new translations are available</li>\n<li>use a Webbler listing so that the information structure is clearer</li>\n<li>allow any installed language to be updated, not just the currently selected language</li>\n</ul>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/32861334-482c8768-ca4c-11e7-9ee2-e8c3af3bded9.png\" /></p>", ["<p>Looks great to me +1</p>", "<p>Yes, brilliant, great idea</p>", "<p>Looking at the commit history of updatetranslations. php, it used to allow any language to be updated but that was changed to allow only the current admin language in this commit from 2013 \nhttps://github.com/phpList/phplist3/commit/72b27ffce99b65abc48ccb50d6bc7d4a599512cc#diff-e2b5ad1b5fd76dcbe624dfc819d06fc7</p>\n<p>Do you think that should still be the case? My proposal is to allow any of the installed languages (which will usually be one or two I guess) to be updated.</p>", "<p>Well, I did that at the time to avoid people updating languages they don't need, to avoid DDOSing the translation server. But your proposal will take care of that, if people choose which languages to \"install\" so I think it'll be fine. </p>", "<p>Now addressed by PR 219</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/217", "title": "Bug .. After changing themes", "status": "closed", "labels": [], "priority": null, "description": ["<p>I changed the themes from dressprow to Travelin and login again then,There is repeated popup \"Initialising phpList in your language, please wait.\" ..  and moreover submenu names in header is changed .. i tried couple of times reinstalling the phplist with new database but still could not resolve this issue , I am surprised no one has posted this issue till yet . \nCan you figure it out whats can be done here ?</p>", ["<p>@ashishvarma04 The \"Initialising phpList...\" message is due to downloading of the latest language files and requires a working network connection. If you see the message every time then you may have an issue with that -- please check your webserver logs.</p>\n<p>Regarding submenu names, can you post a screenshot to illustrate?</p>", "<p>@samtuke I have tried installing locally and on server and my network connection is doing well,still the \"Initialising phpList...\" message could not be resolve, this happen when I switch themes from default theme to phplist-ui-bootlist or vice-versa and logging out and again login,I tried different browser and using incognito mode too. and moreover submenus name are getting changed, please check it out the following screenshot .. and suggest some solution for themes</p>\n<p><img alt=\"menusboots\" src=\"https://user-images.githubusercontent.com/23340951/32877816-5067449a-cac9-11e7-93f5-3402d16587a7.PNG\" /></p>\n<p><img alt=\"menusboots2\" src=\"https://user-images.githubusercontent.com/23340951/32877817-509eee4a-cac9-11e7-9e4f-7b49c1fba5da.PNG\" /></p>\n<p><img alt=\"subscriber\" src=\"https://user-images.githubusercontent.com/23340951/32877819-50da33ec-cac9-11e7-9e41-2264c5b3ac81.PNG\" /></p>\n<p><img alt=\"system\" src=\"https://user-images.githubusercontent.com/23340951/32877820-510e862e-cac9-11e7-8a6d-56157b3b79cf.PNG\" /></p>", "<blockquote>\n<p>The \"Initialising phpList...\" message is due to downloading of the latest language files and requires a working network connection</p>\n</blockquote>\n<p>~~phplist uses file_get_contents() to retrieve the language files so you need to have allow_url_fopen php setting enabled. To test whether that is the case just go the Manage Plugins page. If that setting is not enabled then there will be a warning message displayed.~~</p>\n<p>Sorry my mistake. phplist actually uses a local file to initialise a new language, it doesn't fetch the latest language file. That is done when manually updating the translations.</p>", "<p>Have anyone gone through such issue ..?</p>", "<p>Did you check about allow_url_fopen being enabled? That might be the cause of the problem and it should be enabled for phplist to work properly.</p>", "<p>@bramley Yes its enable , still I have a problem .</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/23340951/32943843-83f740a4-cbb3-11e7-89a7-072d94478b4c.png\" /></p>", "<p>Sounds like it may be stuck on a Javascript error. Can you press f12 (in FF or CHR) and check the console for errors?</p>", "<p>@michield  No , I cant find console errors , for more info I am using php 7.1 version , and also I put off by antivirus firewall still problem is there.</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/23340951/33538169-cda89498-d8e5-11e7-8db1-f96adebd4ec2.png\" /></p>", "<p>Can you check the \"Network tab\" to see if the Ajax request is made correctly?</p>", "<p>@michield </p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/23340951/33646793-7e4b5fe6-da77-11e7-99e3-33e3e2b0c493.png\" /></p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/23340951/33646841-c281022e-da77-11e7-9bbe-dad9d49c506d.png\" /></p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/23340951/33646278-b9ba0c74-da74-11e7-8961-7aa42948e5c4.png\" /></p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/23340951/33646299-d3e5ec12-da74-11e7-861e-561d6f65e707.png\" /></p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/23340951/33646312-e3d3e232-da74-11e7-8434-a729179451e4.png\" /></p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/23340951/33646320-f2bcf41e-da74-11e7-910e-79343764df01.png\" /></p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/23340951/33646338-07fac6c6-da75-11e7-9f04-53b07fc1c985.png\" /></p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/23340951/33646365-1dcec1be-da75-11e7-9f3a-72f0163a6dfc.png\" /></p>", "<p>I'm puzzled and have no idea, I'm afraid. I'm not sure how to replicate this, which makes it hard to resolve.</p>", "<p>@michield Thankyou for your time . </p>", "<p>I have the same issue when I change the language to Albanian. </p>", "<p>@ashishvarma04 Please can you confirm that you experienced this issue on  copy of phpList installed from Git (and not a pre-packaged release)?</p>", "<p>@samtuke I installed phplist from git (clone or download button)</p>", "<p>@ashishvarma04 In that case this issue may only affect git-based installations, as we have not encountered this problem elsewhere (so far). We can keep this issue open and try to reproduce.</p>", "<p>It seems to affect only some languages. </p>", "<p>It seems that there is no activity in this issue for almost two years now. I would recommend to visit the community forum at https://discuss.phplist.org/ for future questions. There are a lot of experienced phpList users there who can help. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/216", "title": "Stats overview formatting", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=18629\nhttps://mantis.phplist.org/view.php?id=18596</p>\n<ul>\n<li>Replaced $GLOBALS['I18N']-&gt;get() with s()</li>\n<li>Added number formatting to stats (cast vars to int and then apply number_format() )</li>\n<li>Changed col heading 'views' to 'unique views'</li>\n</ul>", ["<p>@suelaP This changes the column heading as requested</p>", "<p>in the light of the trouble we had with number_format on the account pages, I'd stay away from using that, but if you insist and accept the risk, I'm happy to merge it.</p>", "<p>@michield Did you get to the bottom of why it was returning empty before? I presume it was because a variable which could not be converted into a number was provided to it. Number formatting is something that cannot be avoided, so either we need to use function or another one (write a new one?). I don't recall problems with this function except for that particular recent case.</p>", "<p>No, I still don't know why that happened. I will need to investigate a bit more before I can merge this.</p>", "<p>Let's take it and update it later</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/215", "title": "Added new constant MAX_OPENS_PP and used in mviews", "status": "closed", "labels": [], "priority": null, "description": ["<p>This limits the results shown on the mviews page from 50 to 20. Since new opens per subscriber will shortly be added, this is necessary for avoiding extremely long pages and large SQL query returns.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/214", "title": "Increased email address crop limit to 35", "status": "closed", "labels": [], "priority": null, "description": ["<p>This makes better use of available screen space using both Dressprow and Trevelin themes, also on mobile devices</p>", ["<p><img alt=\"phplist phplist view opens - nightly_317\" src=\"https://user-images.githubusercontent.com/695422/32743397-90888ea4-c8ac-11e7-824a-6b8da5a93767.png\" />\n<img alt=\"phplist phplist view opens - nightly_316\" src=\"https://user-images.githubusercontent.com/695422/32743398-90ac23a0-c8ac-11e7-9895-079de9e54e57.png\" /></p>", "<p>Have you tested that on all devices? The main reason for 15 is small screens.</p>", "<p>@michield Yes, on small screens the address wraps over two lines for long addresses, which takes up otherwise empty space, as the date and stats also wrap.</p>\n<p><img alt=\"selection_319\" src=\"https://user-images.githubusercontent.com/695422/32784496-48d3790e-c94f-11e7-9e35-60cd4139e985.png\" />\n<img alt=\"selection_318\" src=\"https://user-images.githubusercontent.com/695422/32784498-48f649d4-c94f-11e7-96f8-ea4d6c8e449c.png\" /></p>", "<p>Might be able to reduce the width of the response field by using abbreviated labels for day, minute etc\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/32793377-a8f326be-c95d-11e7-920b-77a9af83ae7d.png\" /></p>", "<p>@bramley Ideally this would be handled client-side by JS so that full labels are displayed when space is available, and not when not. Otherwise we would use potentially confusing abbreviations in all cases. I don't think d, m, s are sufficiently clear to use in all cases.</p>", "<p>OK, but I expected the abbreviations to be language-specific. In English I think that 1d 2h 3m 4s is reasonably clear.</p>\n<p>Currently something like 20 hours 58 minutes 21 seconds seems unnecessarily verbose and, as in your screenshot, can cause wrapping over three lines making it a bit harder to read.</p>", "<p>@bramley If the first label was always fully printed, then others could be abbreviated with less loss of clarity. </p>\n<p>E.g.:\n1 day 15 h 25 m 6 s\n6 hours 3 m 58 s</p>\n<p>It seems that PHP date functions don't provide a way to do this, but a custom function to achieve it would probably be overkill.</p>\n<p>Another way to shorten it would be to only include seconds (both value and label) if the duration is less than one day (the assumption being that seconds are irrelevant for long time frames like that). What do you think?</p>", "<p>Sam, continuing the discussion of formatting the response time is likely to delay this pull request, so I suggest starting a new issue. My original intention was only to reduce the space taken by the response time in order to give more space for the email address, not really to find the best way to format the response time.</p>", "<p>@bramley Agreed\n@michield Please review and merge without waiting for any further changes</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/213", "title": "Mantis 18478 Unable to delete unidentified bounces > 2 months old", "status": "closed", "labels": [], "priority": null, "description": ["<p>I grep'd the source and the status column is always used elsewhere to hold \"unidentified bounce\" not the comment column.</p>\n<p>See https://mantis.phplist.org/view.php?id=18478</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/212", "title": "Many changes on buttons locations.", "status": "closed", "labels": [], "priority": null, "description": ["<p>This is answer to this mantis request:\n0018788: Use standardised button layout below page heading on Subscriber lists page</p>\n<p>Most of the changes only affect Trevelin. Only 2 changes affect Dressprow moving  buttons located at the bottom of the page to the top of the page.</p>\n<p>I attaching images with the result of this change in Treveling. </p>\n<p>This commits should be merged before merge https://github.com/phpList/phplist-ui-bootlist/pull/34 in Trevelin.</p>\n<p><img alt=\"screenshot from 2017-11-11 17-36-49\" src=\"https://user-images.githubusercontent.com/7660111/32694078-b3bfe036-c715-11e7-9b1d-2b53036c2152.png\" />\n<img alt=\"screenshot from 2017-11-11 17-37-09\" src=\"https://user-images.githubusercontent.com/7660111/32694079-b3e4b0e6-c715-11e7-9be5-e219544d7ad8.png\" />\n<img alt=\"screenshot from 2017-11-11 17-37-25\" src=\"https://user-images.githubusercontent.com/7660111/32694080-b40db6d0-c715-11e7-8f5f-99bf1e7ff0da.png\" />\n<img alt=\"screenshot from 2017-11-11 17-39-10\" src=\"https://user-images.githubusercontent.com/7660111/32694081-b43338f6-c715-11e7-8284-f24142f9adfc.png\" />\n<img alt=\"screenshot from 2017-11-11 17-41-42\" src=\"https://user-images.githubusercontent.com/7660111/32694082-b4576370-c715-11e7-91f7-c2e4477cb015.png\" />\n<img alt=\"screenshot from 2017-11-11 17-44-21\" src=\"https://user-images.githubusercontent.com/7660111/32694083-b47c36aa-c715-11e7-9d7a-d63fa42d7860.png\" />\n<img alt=\"screenshot from 2017-11-11 17-46-40\" src=\"https://user-images.githubusercontent.com/7660111/32694084-b49fbd82-c715-11e7-94c9-cd2fb7f6c9fb.png\" />\n<img alt=\"screenshot from 2017-11-11 17-56-41\" src=\"https://user-images.githubusercontent.com/7660111/32694085-b4c3aa4e-c715-11e7-98bc-7714099f7d9c.png\" />\n<img alt=\"screenshot from 2017-11-11 18-04-44\" src=\"https://user-images.githubusercontent.com/7660111/32694086-b4e7df40-c715-11e7-8565-a625d9751f64.png\" />\n<img alt=\"screenshot from 2017-11-11 18-13-30\" src=\"https://user-images.githubusercontent.com/7660111/32694087-b50c9f92-c715-11e7-8f64-2de65d59e5ef.png\" />\n<img alt=\"screenshot from 2017-11-11 19-05-48\" src=\"https://user-images.githubusercontent.com/7660111/32694088-b530712e-c715-11e7-9857-610777dfe07e.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/211", "title": "Replace $GLOBALS['I18N']->get() with s()", "status": "closed", "labels": [], "priority": null, "description": ["<p>Switch to newer translation function</p>", ["<p>Rebased on origin master; ready to merge</p>", "<p>can't merge this, there are conflicts</p>", "<p>@michiel there are conflicts because in the time between the last update and your most recent review another PR was created and merged which modified the same files. I will do the manual conflict resolution again.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/210", "title": "Replaced responsetime string with existant 'Response time'", "status": "closed", "labels": [], "priority": null, "description": ["<p>Two translated strings already exist: responsetime and 'Response time'. This is a table heading and so we should make use of the latter.</p>", ["<p>@michield the reason I didn't is that firstview doesn't already exist as a translated string, so introducing it would require translators to update. Do you advise proceeding anyway?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/209", "title": "Added phpList config file to .gitignore", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>What is the idea behind this? Adding to .gitignore means that the initial config file won't be in the repository. Is there some other way of including a config file in the released package?</p>", "<p>@bramley The aim is to avoid accidentally committing local changes to this file, which happens from time to time in my own and other developers' work.</p>\n<p>Because the file is already committed, it does not mean that the file won't be distributed; the current version is unaffected by this change. However it does mean that future changes to this file can only be committed by using -f flag to 'force' commit (overriding .gitignore). The result should be that it is harder to commit changes by mistake, but still possible to to force changes on the rare occasions that it is necessary.</p>\n<p>Do you agree?</p>", "<p>You should use the \"SetEnv /path/to/config.php\" in your Apache config and not use the config that is on the repository for your local system.</p>", "<p>See https://resources.phplist.com/develop/developmentsetup</p>", "<p>@bramley Yes it does, which is the point. Only deliberate changes should be made to that file in any case; recently the rate of change has been approximately two commits per year. On the other hand not having it ignored requires stashing and popping changes several times each day in order to avoid committing the changes by mistake.</p>", "<p>@michield</p>\n<blockquote>\n<p>You should use the \"SetEnv /path/to/config.php\" in your Apache config and not use the config that is on the repository for your local system.</p>\n</blockquote>\n<p>I do for some servers, but this additional step inevitably gets missed in some environment setups. Having to use a git flag at most twice per year to avoid a daily risk with diverse environments and developers and avoid an additional web server initialisation step is worth the inconvenience in my view.</p>", "<p>If we do that, we should remove the config.php and add a config_dist.php instead.</p>\n<p>The way it is now is how it's referenced in all documentation, so I would say, do not touch config.php at any time, unless you actually want to submit a useful change to the repo and do not use it in local development.</p>", "<p>Can't merge this</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/208", "title": "Allow to define custom XMAILER", "status": "closed", "labels": [], "priority": null, "description": ["<p>Little PR to allow admin to redefine X-MAILER in header.</p>", ["<p>That goes against the Open Source identity. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/207", "title": "Change Bounces-to to Return-Path to fit to RCF", "status": "closed", "labels": [], "priority": null, "description": ["<p>I couldn't find any mention any where in RCF about Bounces-to, so I propose to change to Return-Path</p>", ["<p>Well, the Sender is the same as the Return-Path, so that would be obsolete. I'm not sure where I got the Bounces-To from, but it'll be good to research that.</p>\n<p>Have you tested this with a few MTAs? </p>", "<p>Are you talking about my MTA (sender)?</p>\n<p>I got access to only one server with only one MTA so i cannot test on different sender's MTA</p>", "<p>I need to research this more before I can accept or reject this.</p>", "<p>I understand.</p>\n<p>What can I tell you;\nIs I am using it for years and is worked perfectly with my configuration.</p>", "<p>Pull request #420 replaces this one. Documented in issue #419.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/206", "title": "[WIP] Behat cleanup", "status": "closed", "labels": [], "priority": null, "description": ["<p><strong>Work in progress, not yet ready for merge</strong></p>\n<ul>\n<li>Updated composer packages for Behat and associated web drivers</li>\n<li>Started using Selenium server for test</li>\n</ul>", ["<p>Moved this branch to origin to avoid Travis environment variable issues. Closing this PR.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/205", "title": "Not send email confirmation", "status": "closed", "labels": [], "priority": null, "description": ["<p>Continuation of PR200</p>", ["<p>Settings that are on/off are probably better defined using true/false rather than 0/1, which simplifies the code just a little bit and more importantly shows the intention, e.g.</p>\n<p><code>if (UNSUBSCRIBE_CONFIRMATION) {</code></p>\n<p>A couple of layout points</p>\n<ul>\n<li>use spaces instead of tabs</li>\n<li>a space each side of any operator, such as \"=\"</li>\n</ul>", "<p>Thanks for you review! correction done</p>", "<p>The comment line in config_extended.php about setting to 0 is now incorrect.</p>\n<p>But that raises a point about config_extended.php. I think that it is intended to match config.php plus all the default values applied in init.php.\nSo the setting should be to true not false, with the comment line explaining how to turn-off the setting.\nThis might also apply to the other pull requests.</p>", "<p>I think that you have misunderstood my previous comment. You have now made the default behaviour to not send the unsubscribe confirmation email whereas it is currently sent. There is no need for the setting to be in config.php, and should not be there, if a default value is set in init.php.</p>\n<ul>\n<li>don't change config.php, or at least only after a discussion about phplist default behaviour</li>\n<li>the setting in config_extended.php should match the default value that is set in init.php. That allows someone to swap config_extended.php and config.php when installing without any surprises.</li>\n<li>the comment in config_extended.php should explain how to change the default setting</li>\n</ul>", "<p>ok. i think this time i understood what you mean.</p>", "<p>what do you think about last commit?</p>", "<p>Yes, looks good. jd440, if you can <a href=\"https://www.phplist.com/cla\">sign the CLA</a>, I can merge this</p>", "<p>I did already sign it, and one of my PR(204) have already been merged?</p>\n<p>I signed et again</p>\n<blockquote>\n<p>Awesome, you have signed the phpList CLA\nYour github login: jd440\nYour name: jean\nDate signed: 2017-11-23</p>\n</blockquote>", "<p>strange somehow your previous signing had gone lost. Many thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/204", "title": "For better Responsive Design email support", "status": "closed", "labels": [], "priority": null, "description": ["<p>Add to email header \n<meta content=\"width=device-width\"/>\nTo get a better Responsive Design support</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/203", "title": "Add a mailto to List-Unsubscribe", "status": "open", "labels": [], "priority": null, "description": ["<p>I think a good feature to help unsubcribe.\nAnd since I add it I good a unsubscribe rate from outlook on iphone.</p>", ["<p>This functionality can probably be implemented in a plugin using the messageHeaders() method. See file admin/defaultplugin.php.</p>", "<p>But that's seems for me, that should be a core-feature.</p>", "<p>Making the unsubscribe process easier is a very worthwhile goal.\nEmail headers are primarily read by machines -- won't using HTML in the header content result in the URL being unreadable by automated systems?\nAre message headers readable by Outlook on iPhone? It is not possible to view them in many mail clients GMail and K9 on Android as far as I'm aware.</p>", "<p>@samtuke There isn't any html as such in the header, it is just plain text.\n@jd440 Please can you explain how this is meant to work? The code is a bit confusing, e.g. is the change intended to add a second unsubscribe header (as suggested by the comment in config_extended.php) or to replace the existing unsubscribe header. \nAlso, some explanation of how the subject and body of the unsubscribe email will be processed.</p>", "<p>@bramley </p>\n<blockquote>\n<p>Please can you explain how this is meant to work?</p>\n</blockquote>\n<p>This commit only add a second way to unsubscribe way, on header,\nThis is an addition, and not a substitution\nSo subcriber have a link directly from app/webmail, to unsubcribe, which will send a mail to mailto</p>\n<blockquote>\n<p>Also, some explanation of how the subject and body of the unsubscribe email will be processed.</p>\n</blockquote>\n<p>As you saw, on commit this will send an email to envelope.</p>\n<p>```\n+   $unsubscribeMailtoSubject= \"Unsubscribe%20By%20Mailto\";\n+   $unsubscribeMailtoBody = \"unsubscribe%20User%20$destinationemail%0D%0AX-MessageId%20:%20$messageid%0D%0Auid=$hash\" ;\n+   $text[\"unsubscribeMailto\"] = \"mailto:\" . $GLOBALS['message_envelope'] . \"?subject=\".$unsubscribeMailtoSubject.\"&amp;body=\" . $unsubscribeMailtoBody . </p>\n<p>```</p>\n<p>Subject :  \"Unsubscribe By Mailto\";\nBody : \"\n//the $destinationemail will allow processBounce to identify subscribers\nunsubscribe User $destinationemail\n//the X-MessageId will allow processBounce to identify Campaign to automatic process\nX-MessageId : $messageid\n//the $hash must improve delivrey by letting webmail identify message as unique\nuid=$hash\" ;</p>\n<p>Of course readability of this commit could by improve using urlencode() instead of %20 %0D%0</p>\n<blockquote>\n<p>As discussed elsewhere the value of a setting in config_extended should be the same as the default set in init.php, so false in this case.</p>\n</blockquote>\n<p>Don't worry I will do it,  now I understand what you expect on this side (true/false instead 1/0\u2026, init.php)\nOf course i will be happy to provide a better commit if you interest to merge it.\nThis is only the one that I use for my use.</p>", "<blockquote>\n<p>Of course i will be happy to provide a better commit if you interest to merge it.</p>\n</blockquote>\n<p>Please do that first. I had to manually break this line into pieces to understand what it is doing</p>\n<p><code>+    $mail-&gt;addCustomHeader(\"List-Unsubscribe:  \".((isset($text[\"unsubscribeMailto\"]) &amp;&amp; $text[\"unsubscribeMailto\"] !=\"\")?$text[\"unsubscribeMailto\"]:\"\").\"&lt;\" . $text[\"jumpoffurl\"] . \"&gt;\");</code>\nIt is a personal preference but please use variable interpolation or sprintf() when combining several variables and constants like this. Using the \".\" operator like this becomes unreadable.\nWhy have you used an array $text to hold the intermediate values?</p>\n<p>What do you mean by this comment\n<code>//the $hash must improve delivrey by letting webmail identify message as unique\nuid=$hash\" ;</code></p>", "<p>One other comment is about the approach of using the bounce email address.</p>\n<p>An email will be sent to that address but to be recognised as a bounce the body of that email must have what appear to be mail headers (X-MessageId and X-ListMember).</p>\n<p>@michield Is this approach of spoofing a bounce a good idea?</p>", "<p>@bramley\nI will commit asap, I already done but I have to test:</p>\n<blockquote>\n<p>An email will be sent to that address but to be recognised as a bounce the body of that email must have what appear to be mail headers (X-MessageId and X-ListMember).</p>\n</blockquote>\n<p>I check and test and i does recognise even if is in the body\nAnd if we check\n<a href=\"url\">https://github.com/phpList/phplist3/blob/69052ab76b407f388ce7697f788b7c1df8488ee2/public_html/lists/admin/processbounces.php#L515</a></p>\n<p><code>$messageid = findMessageId($bounceBody);</code></p>\n<p>is check from body</p>", "<p>For information\n\"ist-Unsubscribe header is described in RFC 2369 (for more details please see\nhttps://www.ietf.org/rfc/rfc2369.txt). The header field contains either a Web-URL, an\nemail address or both. Since different providers and email clients use that one or the\nother, <strong>we recommend to use both</strong> . A List-Unsubscribe header could look like this:\nList-Unsubscribe: <a href=\"http://www.host.com/list.cgi?cmd=unsub&amp;lst=list\">http://www.host.com/list.cgi?cmd=unsub&amp;lst=list</a>,\n<a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#108;&#105;&#115;&#116;&#45;&#114;&#101;&#113;&#117;&#101;&#115;&#116;&#64;&#104;&#111;&#115;&#116;&#46;&#99;&#111;&#109;&#63;&#115;&#117;&#98;&#106;&#101;&#99;&#116;&#61;&#117;&#110;&#115;&#117;&#98;&#115;&#99;&#114;&#105;&#98;&#101;\">&#108;&#105;&#115;&#116;&#45;&#114;&#101;&#113;&#117;&#101;&#115;&#116;&#64;&#104;&#111;&#115;&#116;&#46;&#99;&#111;&#109;&#63;&#115;&#117;&#98;&#106;&#101;&#99;&#116;&#61;&#117;&#110;&#115;&#117;&#98;&#115;&#99;&#114;&#105;&#98;&#101;</a>\nThe most important characteristic of these links is, that they don't require any user\ninteraction by the recipients, so that the unsubscribe is processed by just clicking the link.\"\nSource: https://certified-senders.org/wp-content/uploads/2017/07/CSA_list_unsubscribe.pdf</p>", "<p>After your previous explanation I looked at http://www.list-unsubscribe.com/ and now see why this is important. My main problem is that I cannot test the process end-to-end because none of my email clients (yahoo, gmail, outlook) display an unsubscribe button.</p>\n<p>I was looking at simplifying the code change and came up with this. Note that X-ListMember is the header that is expected by the bounce processing. Only if that is not present does the code look for any email address in the bounce body. Also, rawurlencode() is better than just urlencode().\n```\n    $listUnsubscribeHeader = 'List-Unsubscribe: ';</p>\n<pre><code>if (UNSUBSCRIBE_MAILTO) {\n    $listUnsubscribeHeader .= sprintf(\n        '&lt;mailto:%s?subject=%s&amp;body=%s&gt;, ',\n        $GLOBALS['message_envelope'],\n        rawurlencode('Unsubscribe by mailto'),\n        rawurlencode(\"X-ListMember: $destinationemail\\r\\nX-MessageID: $messageid\\r\\nuid=$hash\\r\\n\")\n    );\n}\n$listUnsubscribeHeader .= \"&lt;\" . $text[\"jumpoffurl\"] . \"&gt;\";\n$mail-&gt;addCustomHeader($listUnsubscribeHeader);\n</code></pre>\n<p><code>I think that generates the header correctly but I cannot test that the mailto: gets decoded as expected when someone clicks the button</code>\nList-Unsubscribe: <a href=\"&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#121;&#121;&#121;&#64;&#120;&#120;&#120;&#46;&#99;&#111;&#109;&#63;&#115;&#117;&#98;&#106;&#101;&#99;&#116;&#61;&#85;&#110;&#115;&#117;&#98;&#115;&#99;&#114;&#105;&#98;&#101;&#37;&#50;&#48;&#98;&#121;&#37;&#50;&#48;&#109;&#97;&#105;&#108;&#116;&#111;&#38;&#98;&#111;&#100;&#121;&#61;&#88;&#45;&#76;&#105;&#115;&#116;&#77;&#101;&#109;&#98;&#101;&#114;&#37;&#51;&#65;&#37;&#50;&#48;&#102;&#111;&#111;&#52;&#37;&#52;&#48;&#116;&#101;&#115;&#116;&#46;&#99;&#111;&#109;&#37;&#48;&#68;&#37;&#48;&#65;&#88;&#45;&#77;&#101;&#115;&#115;&#97;&#103;&#101;&#73;&#68;&#37;&#51;&#65;&#37;&#50;&#48;&#53;&#53;&#37;&#48;&#68;&#37;&#48;&#65;&#117;&#105;&#100;&#37;&#51;&#68;&#98;&#98;&#52;&#56;&#102;&#55;&#56;&#53;&#98;&#102;&#48;&#48;&#52;&#54;&#52;&#48;&#100;&#102;&#48;&#49;&#98;&#49;&#101;&#49;&#56;&#55;&#99;&#97;&#56;&#101;&#56;&#56;&#37;&#48;&#68;&#37;&#48;&#65;\">&#121;&#121;&#121;&#64;&#120;&#120;&#120;&#46;&#99;&#111;&#109;&#63;&#115;&#117;&#98;&#106;&#101;&#99;&#116;&#61;&#85;&#110;&#115;&#117;&#98;&#115;&#99;&#114;&#105;&#98;&#101;&#37;&#50;&#48;&#98;&#121;&#37;&#50;&#48;&#109;&#97;&#105;&#108;&#116;&#111;&amp;&#98;&#111;&#100;&#121;&#61;&#88;&#45;&#76;&#105;&#115;&#116;&#77;&#101;&#109;&#98;&#101;&#114;&#37;&#51;&#65;&#37;&#50;&#48;&#102;&#111;&#111;&#52;&#37;&#52;&#48;&#116;&#101;&#115;&#116;&#46;&#99;&#111;&#109;&#37;&#48;&#68;&#37;&#48;&#65;&#88;&#45;&#77;&#101;&#115;&#115;&#97;&#103;&#101;&#73;&#68;&#37;&#51;&#65;&#37;&#50;&#48;&#53;&#53;&#37;&#48;&#68;&#37;&#48;&#65;&#117;&#105;&#100;&#37;&#51;&#68;&#98;&#98;&#52;&#56;&#102;&#55;&#56;&#53;&#98;&#102;&#48;&#48;&#52;&#54;&#52;&#48;&#100;&#102;&#48;&#49;&#98;&#49;&#101;&#49;&#56;&#55;&#99;&#97;&#56;&#101;&#56;&#56;&#37;&#48;&#68;&#37;&#48;&#65;</a>, <a href=\"http://strontian/lists/?p=unsubscribe&amp;uid=bb48f785bf004640df01b1e187ca8e88&amp;jo=1\">http://strontian/lists/?p=unsubscribe&amp;uid=bb48f785bf004640df01b1e187ca8e88&amp;jo=1</a>\n```\nI think that this change should be tested in the major email clients to ensure that it works correctly in each.</p>", "<p>@bramley thanks. \nYour code seems cleaner, and ok.\n But i'll test it. If ok i'll commit and PR again.</p>", "<p>This version have been test on different webmail and mail provider on mobile and desktop\nThis feature add  an \"unsubcribe button action\" to:\n    outlook app\n    outlook\n    ios mail app\n    laposte.net web</p>\n<p>I Just add from the @bramley version in the body mailto, as in some case the unsubscribers could see message I think it's better we could see a message as:\n\"Please Unsubscribe me: \" So he could understand whats going on.</p>\n<p>Problem\n- on laposte.net web, when subscriber click on \"unsubscribe button action\" the server make a request on : lists/?p=unsubscribe&amp;uid=[\u2026] but as we are not in one-clik unsubscribe, nothing happen.</p>\n<p><em>So I think leave \"list-unsubscribe: lists/?p=unsubscribe&amp;uid=\" is maybe not a good think as</em> </p>\n<ul>\n<li>User ask to his mail provider to unsubscribe him</li>\n<li>mail provider made a call to lists/?p=unsubscribe</li>\n<li>Fail to unsubcribe</li>\n<li>user still subscribe and mail are sent</li>\n<li>!!!! Bad practise --&gt; decrease ip/domain reputation</li>\n</ul>", "<p>@jd440 Brilliant that it works on Outlook and iOS mail. if only laposte.net has the issue you describe, and the code is technically compliant, then this solution seems acceptable. What do you think?</p>", "<p>yes, it s a great idea to add this, and I've always had that in mind, except we do need to make sure that the unsubscribes work, otherwise it will be counter productive. Not processing unsubscribe requests will cause backlash, in those situations it's better to not give the impression that you can unsubscribe this way,</p>\n<p>So, that means, this PR needs to </p>\n<ol>\n<li>\n<p>use the bounce mailbox for the unsubscribe. It may be fine to specify some code in eg the subject to identify the subscriber. It can also be done by detecting the sender, but forwarding and other reasons may mean that the sender is not always the subscriber. Therefore, using VERP or similar would be better, but that will put requirements on the receiving MTA which is not available for most people and would therefore become an advanced feature for self-hosters who own their own server only.</p>\n</li>\n<li>\n<p>tell the bounce process to handle these messages and process the unsubscribe with the necessary audit trail.</p>\n</li>\n</ol>\n<p>Once that's in place, this will be a great addition and I agree it would be good to make it core </p>", "<p>And just to be clear, I really think we should not add this without those additions. Otherwise we're going to be giving incorrect impressions on the ability to unsubscribe. </p>\n<p>The alternative would be that the mailto goes to a person, but from a software developer point of view, we cannot rely on our users to process those requests correctly and timely. </p>", "<p>thank @michield for you answer</p>\n<p>I totally agree that we must be sure unsubscribe work but i didn't understand your worried.</p>\n<blockquote>\n<p>tell the bounce process to handle these messages and process the unsubscribe with the necessary audit trail.</p>\n</blockquote>\n<p>a simple bounce rule allow to unsubscribe.'</p>\n<p><code>INSERT INTO `phplist_bounceregex` (`id`, `regex`, `action`, `listorder`, `admin`, `comment`, `status`, `count`) VALUES\n(320, 'Unsubscribe By Mailto', 'unconfirmuseranddeletebounce', 0, 1, NULL, 'active', 2);</code></p>\n<blockquote>\n<p>use the bounce mailbox for the unsubscribe. It may be fine to specify some code in eg the subject to identify the subscriber</p>\n</blockquote>\n<p>processbounce identify unsubcribers, and not the sender from the mailto message as subscribers is identify in the body.\nI did a test :\ncase1</p>\n<ul>\n<li>email1 is subscribe</li>\n<li>email1 receive news</li>\n<li>email1 send \"mailto\"</li>\n</ul>\n<p>--&gt; email1 is unsubcribe</p>\n<p>case2\n- email1 is subscribe\n- email1 receive news\n- email1 forward to email2\n- email2 send \"mailto\"</p>\n<p>--&gt; email1 is unsubcribe</p>\n<p>case3\n- email1, &amp; email2 is subscribe\n- email1 receive news\n- email1 forward to email2\n- email2 send \"mailto\"</p>\n<p>--&gt; email1 is unsubcribe</p>\n<p>so as you could see initial recipient is always identify.\nSo ok is not perfect as </p>\n<ul>\n<li>someone could unsubcribe someone else</li>\n<li>If in case3 email2 want to unsubcribe himself, from forwarded himself it will not do it.</li>\n</ul>\n<p>So we could of course check if sender == bounce , but this will have another side effect.\nIf ;\n- email1 &amp; email2 is used by the same user (user1)\n- user1 forward||catch all mail from email1 in email2\n- user1 want to unsubcribe\nwe MUST to unsubcribe email1 even if email2 is the bounce's sender</p>", "<p>ah, indeed, using the bounce rule system may work. You example is a test on your system I presume. You'd never write an insert with an ID in the values. </p>\n<p>It will still be useful to make that part of the PR, eg by inserting the rule automatically during upgrade. </p>\n<p>Yes, the reason we are sending a final \"you have been unsubscribed\" is exactly to catch the ones where email1 is unsubscribed after forwarding to email2. </p>", "<p>what do you mean by:</p>\n<blockquote>\n<p>You'd never write an insert with an ID in the values.</p>\n</blockquote>\n<p>I can add to the PR an insert on upgrade, I'll do it as soon I got some time.</p>\n<p>I understand why you send confirmation, by that's again good practise, and already get complaint on confirmation (<a href=\"https://github.com/phpList/phplist3/pull/205\">PR 205</a>)</p>\n<p>please check \nhttps://litmus.com/blog/the-ultimate-guide-to-list-unsubscribe\nspecially \"Not all email clients support list-unsubscrib\"</p>", "<p>@jd440 @michield Looking at the bounce rule I am bit unsure how reliable this might be. An ordinary bounce will include the headers from the original email, including the list-unsubscribe header. So just looking for the text \"unsubscribe by mailto\" might match an ordinary bounce, not only the unsubscribe email.</p>\n<p>Looking at how the list-unsubscribe header appears in the bounce, the embedded spaces are still %-encoded as %20, <code>Unsubscribe%20by%20mailto</code> so this approach might be ok but seems to be relying on the encoding remaining in place.\nI have just tested this by manually changing the %20 to spaces and the bounce was matched by the \"unsubscribe by mailto\" rule.</p>", "<p>@jd440 I don't think that the body of the email needs <code>Please Unsubscribe me: $destinationemail\\r\\n</code> as that does not add anything needed by the bounce processing and is repeating the email address.  For comparison look at the unsubscribe header in the Github notification emails.</p>\n<p><code>List-Unsubscribe: &lt;mailto:unsub+003007a87992f05ec3487247a6b997666c440b1288333c1c92cf000000011610b1ee92a169ce0fef5630@reply.github.com&gt;,\n &lt;https://github.com/notifications/unsubscribe/ADAHqGFYkebrRen7ImiI46UARlk_Ui3Bks5sx5XugaJpZM4QBZij&gt;</code></p>\n<p>Also, what is the reason for including the uid value in the body?</p>", "<p>@bramley good findings. Yes, it'll need to be watertight, and certainly not catch normal bounces.</p>\n<p>@jd440 the ID in the table is auto increment, so you exclude it from insert queries</p>\n<p>@bramley the Github example uses VERP, which would be the best thing to do, but is less available for most people</p>", "<p>@bramley \nFor sure, we have to be sure to not unsubscribe from this rule,\nBut I'm using it for a years and I never false postive.\nBut maybe you can also test it</p>\n<p>About body:\nFor sure we can remove.\nYou found example without any body, and I can send you an example with that's not the point.\nThe fact is, when using \"unsubcribe action button\" from mailto some will display to subscribers the message.\nSo that's why I'm thinking it would be relevant to get a message understandable for users.\nwithout any side effect.</p>\n<p>About uid;\nOn this point I'm not sure it's really needed.\nI just read somewhere, of getting a unique id in mailto will help (microsoft, gmail\u2026) to understand this mailto will be use for unsubscribe user with uniq id.\nBut if you want remove it, do it.</p>\n<p>@michield \nAbout id, I now understand, after reading your answer and my previous post with request.\nOf course I'm not planning to insert id</p>", "<p>What are the next steps for this PR?</p>", "<p>I think it needs to be expanded to handle the unsubscription in a reliable way. I think that's quite a lot of work, but then again, if we send out a header saying \"Unsubscribe this and this way\" and it doesn't work, that would be really bad.</p>", "<p>@michield I'm totally agree with you that saying \"Unsubscribe this and this way\" and it doesn't work, would be worst than anything.</p>\n<p>But\u2026</p>\n<p>Why to you think this way is unreliable?\nDid you tried?\nI'm using it for month now\u2026 check and double checking any bounce and i could notice any trouble</p>\n<p>Have you thought to an another way to handle it?</p>", "<p>@jd440  when I look at https://github.com/phpList/phplist3/pull/203/files I don't see any code that handles the unsubscribes. Can you explain how it's done?</p>", "<p>merry christmas </p>\n<p>Sorry i was busy,</p>\n<p>unsucribe is handle by a advanced rule\na simple bounce rule allow to unsubscribe.'</p>\n<p><code>INSERT INTO `phplist_bounceregex` (`id`, `regex`, `action`, `listorder`, `admin`, `comment`, `status`, `count`) VALUES\n(320, 'Unsubscribe By Mailto', 'unconfirmuseranddeletebounce', 0, 1, NULL, 'active', 2);</code></p>", "<p>@jd440 Merry Christmas!</p>\n<p>Should that bounce rule be included by default in fresh installations?</p>", "<p>Sorry, I still don't get how that unsubscribes a user reliably. Can you explain?</p>", "<p>@samtuke For sure, rule should should be include on upgrade/install and feature available only when advanced rule is activate</p>\n<p>@michield \nonce subscriber click on \u00abunsubscribe button\u00bb from header/mailto an email will be sent \nobject: \"unsubscribe by mailto\"\ncontent:\"\nPlease Unsubscribe me: $destinationemail\nX-ListMember: $destinationemail\nX-MessageID: $messageid\"</p>\n<p>Then Advanced rule process will thread it.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/202", "title": "Feature to receive deletebounce for debugging rule", "status": "closed", "labels": [], "priority": null, "description": ["<p>I got a problem with a bad rule, deleting bounce, (which i don't),\nThis help me to find the bad rule.</p>", ["<p>As this change is reporting deleted bounces then the name of the setting should be REPORT_DELETED_BOUNCES.  Any \"debug\" output would go somewhere else, such as to a log file to just displayed on the page.</p>", "<p>Let me know if there is anything else!</p>", "<p>what's up?</p>", "<p>@bramley Any further comments?</p>", "<p>Only two smalls point about config_extended.php.\nIdeally the value of REPORT_DELETED_BOUNCES should match that in init.php, so that someone can swap config.php with config_extended.php.\nAlso the comment could be clearer, maybe something like</p>\n<p><code>// Set to 1 to include bounce deletions in the advanced bounce processing report</code>\ndefine('REPORT_DELETED_BOUNCES', 0);</p>", "<p>thanks @bramley Done!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/201", "title": "Add Pop-Before-Smtp Connection", "status": "closed", "labels": [], "priority": null, "description": ["<p>On server accepting only pop-before-smtp, this patch allowed to mail</p>", ["<p>According to wikipedia pop before smtp has been superceded by SMTP authentication https://en.wikipedia.org/wiki/POP_before_SMTP so I wonder why you need to use it. </p>", "<p>I got a server using it and i could connect otherwise.\nBut for sure if i'm the only one we can close it.</p>", "<p>@jd440 Like @bramley, I also wonder why this is still necessary. However the patch is straightforward and others may experience the same problem.</p>\n<p>@michield @bramley Do you see any problem in including this patch?</p>", "<p>One slight problem is that only jd440 is able to test this and confirm that it works.</p>\n<p>Also, I didn't like adding several extra config values, that seems to be cluttering the config file. The way that pop before smtp seems to differ from the usual smtp is that the authentication is done as a separate step, otherwise it is standard smtp.</p>\n<p>So I would be inclined to make this an option within the existing smtp processing and re-use the existing smtp fields - PHPMAILERHOST, username, password etc. Roughly something like this</p>\n<p>```\n        global $phpmailer_smtpuser, $phpmailer_smtppassword; // and any other config variables\n...\n        } elseif (defined('PHPMAILERHOST') &amp;&amp; PHPMAILERHOST != '') {\n            if (defined('PHPMAILERPORT')) {\n                $this-&gt;Port = PHPMAILERPORT;\n            }\n            //logEvent('Sending email via '.PHPMAILERHOST);\n            $this-&gt;Host = PHPMAILERHOST;</p>\n<pre><code>        if (POP_BEFORE_SMTP) {\n            // authenticate using the smtp user and password\n            $pop = new POP3();\n\n            if (!$pop-&gt;authorise(PHPMAILERHOST, 110, 30, $phpmailer_smtpuser, $phpmailer_smtppassword, 1)) {\n                // unable to authenticate, there might be an error message in $pop-&gt;getErrors()\n            }\n        } else {\n            // the existing smtp code\n            if (isset($GLOBALS['phpmailer_smtpuser']) &amp;&amp; $GLOBALS['phpmailer_smtpuser'] != ''\n                &amp;&amp; isset($GLOBALS['phpmailer_smtppassword']) &amp;&amp; $GLOBALS['phpmailer_smtppassword']\n            ) {\n                $this-&gt;Username = $GLOBALS['phpmailer_smtpuser'];\n                $this-&gt;Password = $GLOBALS['phpmailer_smtppassword'];\n                $this-&gt;SMTPAuth = true;\n            }\n        }\n        $this-&gt;Mailer = 'smtp';\n</code></pre>\n<p>...\n```</p>", "<p>As request by @bramley, Re-use smtp fields</p>", "<p>My bit of code was just an example, not intended to be copied without changing it. I would not expect this change to actually work</p>\n<ul>\n<li>need to include error handling</li>\n<li>the name of the config setting POP_BEFORE_SMTP, use '_' to separate words</li>\n<li>use true or false instead of 0 or 1 but definitely not ''</li>\n</ul>", "<p>@jd440 Is this ready for review?</p>", "<p>The code still needs corrections and tidying-up, but I'm not really sure that this functionality needs to be added.</p>\n<p>@jd440 please can you explain why you need to use the \"pop before smtp\" method and what other methods are available for sending? Who is the hosting company that you use?</p>", "<p>hey @bramley please don't make me lost my time.\nI close this PR 27 days ago after your first comment.\nYou ask me many correction. and after 1month spending time just to offer this PR you asking one more time if yes or not this PR is needed to be added.</p>\n<p>I need it.\nI'm using it for years on my side, i thought it could interest some others even if I'm agree with you Pop-before-smtp is almost dead.\nYou don't want to integrate it\u2026 Fine\nBut start to think if you want to integrate it before ask me corrections.</p>\n<p>I'm disappointed\u2026 one month ago when I started to commit I was very enthousiatic\u2026\nNow I just got feeling to lost my time.</p>", "<p>@jd440 There's no need to close the pull request; @bramley was just asking for more information about your use case.</p>\n<p>From my perspective, the feature is not complex, and so long as it meets coding guidelines then the added option is worth having.</p>\n<p>I'm not sure that including optional debugging output is necessary though.</p>", "<p>@jd440 apologies, my previous comment wasn't helpful for your change.</p>", "<p>ok So what would you need to merge it?</p>", "<p>Considering it's wrapped in a config option, it seems fairly safe to merge. It would be good to document the new config options in https://resources.phplist.com/system/config</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/200", "title": "Not send unsubscribe confirmation emails When a user opts out", "status": "closed", "labels": [], "priority": null, "description": ["<p>In order to get Best pratice It would be better to not send confirmation emails when customer Opt out.</p>", ["<p>@jd440 Thanks for the PR! An additional review by @michield is required to merge.</p>", "<p>Note: if this is merged then documentation about the new config variable will be required here: https://resources.phplist.com/system/config/variables</p>", "<p>@samtuke it's long time I use phplist so if I could help\u2026\nAbout documentation have I something to do?</p>", "<p>@jd440 Not just yet; let's wait for @michield's review first. The docs at the link above can be very short in any case. Thanks!</p>", "<p>Instead of   </p>\n<p><code>if (!defined('UNSUBSCRIBE_NOCONFIRMATION') || (UNSUBSCRIBE_NOCONFIRMATION == 0)) {</code></p>\n<p>The common way in phpList is to define it in init.php and then use</p>\n<p><code>if (! UNSUBSCRIBE_NOCONFIRMATION) {</code></p>", "<p>thanks @michield \nI hesitate to add in init.php</p>\n<p><code>if (!defined('UNSUBSCRIBE_NOCONFIRMATION')) {\n    define('UNSUBSCRIBE_NOCONFIRMATION', 0);\n}</code></p>\n<p>Do you want me to made an new commit?</p>", "<p>Thanks @jd440; please can you clarify your intention behind the additional commits made today?</p>", "<p>@jd440  it would be good to split your PRs by functionality</p>", "<p>Something else needs to be included in this change, the text displayed on the unsubscribe page when the person confirms the unsubscription. The text states that a confirmation message will be sent.</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/31689929-011c3b2c-b389-11e7-9dde-55dabe9e6ee7.png\" /></p>", "<p>Yes, good point. And @jd440  please remove the pop before smtp stuff, as that's something completely different. You can create a new branch to PR that separately.</p>", "<p>Hi everyone,</p>\n<p>Sorry about the commit I did yesterday, As you could guess it wasn't intentional, I'm newbie on git\nI wanted to push 2 different commit on 2 pull request, but both have been mixed.</p>\n<p>Yesterday, I just understand, the branch stuff.\nBut as my first commits have been made on my master, now both are mixed\nI don't know  how could remove the \"pop before smtp stuff\" commit, and how could i create a new branch without this first commit.</p>\n<p>Anyway, as soon as I fix my branch problem, I push correction about confirmation message notice by @bramley </p>", "<blockquote>\n<p>I don't know how could remove the \"pop before smtp stuff\" commit, and how could i create a new branch without this first commit.</p>\n</blockquote>\n<p>A simple way is to make two branches from master, then undo all the commits in master so that it is back at its original state. You can then edit each of the branches to remove the stuff that should not be there. Also, look at \"squashing commits\", so that there is only one commit in each branch.</p>", "<p>@bramley is there any way to send you PM, to ask you to help me?\nTo not polluate pull request?</p>", "<p>@jd440 You may also want to check the <code>git cherry-pick</code> command, which lets you copy specific commits (including ranges) from one branch to another.</p>", "<blockquote>\n<p>is there any way to send you PM, to ask you to help me?</p>\n</blockquote>\n<p>You can open a new topic in the forum, no need for it to be private.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/199", "title": "improve favicon, fix html error and mantis #0018859", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>before and after fix on  campaign click statistics table</p>\n<p>AFTER ON DRESSPROW:\n<img alt=\"after-on-dressrpw\" src=\"https://user-images.githubusercontent.com/7660111/31866632-fa5719aa-b758-11e7-8450-7ba605357278.png\" /></p>\n<p>AFTER ON TREVELIN:\n<img alt=\"after-on-trevelin\" src=\"https://user-images.githubusercontent.com/7660111/31866633-fa92fcfe-b758-11e7-99a1-aea4aa3ac74e.png\" /></p>\n<p>BEFORE ON DRESSPROW:\n<img alt=\"before-on-dressprow\" src=\"https://user-images.githubusercontent.com/7660111/31866634-fab736fa-b758-11e7-8479-fbe7231bc391.png\" /></p>\n<p>BEFORE ON TREVELIN:\n<img alt=\"before-on-trevelin\" src=\"https://user-images.githubusercontent.com/7660111/31866635-fadde2d2-b758-11e7-8009-7a6959aa3b72.png\" /></p>\n<p>Campaing Statistics column</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/198", "title": "Uniqid format", "status": "closed", "labels": [], "priority": null, "description": ["<p>As some other I got trouble on upgrading to 3.3.1 with statistic view, with corrupted uniqid.</p>\n<p>And I surprise that uniqid is in varchar(255) shouldn't be better to change to varchar(32)</p>", ["<p>Sorry, it's not clear what your issue is and how to resolve it.</p>", "<p>sorry about that.\nIs not a specific issue. </p>\n<p>As uniqid must alway get a 32 length I was just surprise that uniqid is in VARCHAR(255) and not  varchar(32)</p>", "<p>Ah, sure. 255 gives it more flexibility to expand on the Uniqid without needing to change the DB.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/197", "title": "Avoid warning about developer_email being undefined", "status": "closed", "labels": [], "priority": null, "description": ["<p>When using git version and with error reporting enabled there is a php warning about developer_email being undefined.\n<img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/30819765-c15b523e-a217-11e7-9586-f188a807d728.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/196", "title": "Mantis 18854 Link click stores urls with trailing space", "status": "closed", "labels": [], "priority": null, "description": ["<p>There are three commits that can be reviewed individually but I can squash them into one commit:</p>\n<ul>\n<li>remove surrounding white space from an extracted url</li>\n<li>remove commented-out and unreachable code</li>\n<li>remove unused variable and redundant assignments</li>\n</ul>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/195", "title": "Mantis 18847 - delete from all related tables when deleting a user", "status": "closed", "labels": [], "priority": null, "description": ["<p>When deleting a user remove rows from user_message_forward and linktrack_uml_click tables.</p>\n<p>Simplify the plugin processing as the default plugin provides the deleteUser() method.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/194", "title": "Mantis 18839 - plugin menu items", "status": "closed", "labels": [], "priority": null, "description": ["<p>Do not add a new plugin to the array of enabled plugins.\nSimplify code by using $pluginInstance instead of $GLOBALS['allplugins'][$className].</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/193", "title": "Mantis 18829 - initialisation of targetlist", "status": "closed", "labels": [], "priority": null, "description": ["<p>Initialise targetlist as an array not a string.</p>\n<p>See https://mantis.phplist.org/view.php?id=18829</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/192", "title": "Wrong type of \"processed\" counter in MySQL database structure.", "status": "closed", "labels": [], "priority": null, "description": ["<p>In table 'phplist_message', there is a 'processed' field, which is UNSIGNED MEDIUMINT(8).\nThis limits the number of recipients to 16777215 (see EDIT below), however this is not really a problem.</p>\n<p>The thing is that other fields regarding number of processed recipients use INT: astext, ashtml, viewed, bounced etc. Their values should never exceed the 'processed' field, so this is mistake for sure.</p>\n<p>The type of field comes most likely from https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/structure.php\n<code>'processed'     =&gt; array('mediumint unsigned default 0', 'Number Processed'),\n        'astext'        =&gt; array('integer default 0', 'Sent as text'),\n        'ashtml'        =&gt; array('integer default 0', 'Sent as HTML'),\n        'astextandhtml' =&gt; array('integer default 0', 'Sent as Text and HTML'), // obsolete\n        'aspdf'         =&gt; array('integer default 0', 'Sent as PDF'),\n        'astextandpdf'  =&gt; array('integer default 0', 'Sent as Text and PDF'),\n        'viewed'        =&gt; array('integer default 0', 'Was the message viewed'),</code></p>\n<p>Screenshot from phpmyadmin:\n<img alt=\"phplist\" src=\"https://user-images.githubusercontent.com/2614328/29027166-bee03a10-7b7f-11e7-8df8-dbc332a88f2f.PNG\" /></p>\n<p>EDIT: actually, the 'processed' field is increased during each iteration on any recipient. When using domain throttling or there is any other reason to fail, one mail address will be processed many times. Therefore the issue is even more valid, since the processed number can be many times larger than number of sent messages.</p>", ["<p>@alekw Looks like a great catch, thanks!</p>", "<p>@samtuke You're welcome. I fixed it in my installation by changing to INT, but I will not write PR for it, as it may affects upgrades and so on. Better to leave it to somebody more familiar with the code.</p>", "<p>Yes the upgrade process would need careful testing. Others will add their comments here in due course</p>", "<p>We will also need the same change for phpList 4 so the DB schema (schemata?) stay in sync.</p>", "<p>the processed field is actually not a valid or useful counter. It will keep track of how many times a message is being processed. Not sent. If sending fails and it tries again later, that's two in processed, even though nothing has been sent. It's more an \"activity indicator\" than an actual counter. </p>", "<p>@michield then maybe we can do modulo?\n<code>$processed %= 16777215;</code> or something like that?</p>", "<p>why would you want to do that?</p>", "<p>Well, I found this issue using command line processqueue. My subscriber list was way to small to cause range overflow, but it happened due to 'agressive' domain throttling.\nI realized that this value has completely no meaning for whole process: changing it manually didn't cause any problem. As you said, it's just indicator.\nIMHO, modulo operations will remove the issue for any number of processing the message.</p>", "<p>The problem that @alekw is seeing is possibly due to the sql mode. When strict mode is enabled then trying to update the value past its maximum causes an error. When strict mode is not enabled then the field remains at its maximum value.</p>\n<p><img alt=\"image\" src=\"https://user-images.githubusercontent.com/3147688/29092712-32e67d34-7c7f-11e7-81b6-fa49ccdab15c.png\" /></p>", "<p>@bramley Exactly that is happening.</p>", "<p>Ah, interesting. In a way changing it to INT won't solve the problem, only postpone it. But it'll allow the value to get much bigger, I would vote for that. It is probably the least likely way to change it without causing issues. I'll fix that.</p>", "<p>@alekw Thanks for the clarifications</p>", "<p>https://github.com/phpList/phplist3/commit/28feeb7aa502e9a902fea3fdb32eb4a158105140</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/191", "title": "on public subscribe page, move \"unsubscribe\" link beside the subscribe button", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/190", "title": "Cleaned up docblock comment formatting", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/189", "title": "Added page title to 'dialogue only' links using existing  variable", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=19042</p>", ["<p>Suggestions implemented; ready for merge</p>", "<p>Please review and merge</p>", "<p>I thought that code should conform to PSR-1 and PSR-2, specifically the placement of comma between parameters for a multi-line function call.\nI find the change to list.php quite impenetrable, it is extremely difficult to figure out what is doing because of the inconsistent indentation. \nThe addRow() method takes 6 parameters but it's hard to see what they actually are. My suggestion is to use some intermediate variables to construct the parameter values.</p>", "<p>Here is a rework of the change to list.php separating the literal parts of the html from the variable parts:</p>\n<p>```php</p>\n<pre><code>$editUrl = '?page=editlist&amp;amp;id='.$row['id'];\n$sendButton = PageLinkButton(\n    'send&amp;new=1&amp;list='.$row['id'],\n    s('send'),\n    '',\n    '',\n    s('start a new campaign targetting this list')\n);\n$importButton = PageLinkDialogOnly('importsimple&amp;list='.$row['id'], s('Add Members'));\n\n$actionsFormat = &lt;&lt;&lt;'END'\n</code></pre>\n<p><span class=\"edit-list\"><a class=\"button\" href=\"%s\" title=\"%s\"></a></span>\n<span class=\"send-list\">%s</span>\n<span class=\"add_member\">%s</span>\n<span class=\"delete\">%s</span>\nEND;\n    $actions = sprintf($actionsFormat, $editUrl, s('Edit this list'), $sendButton, $importButton, $deletebutton-&gt;show());\n    $ls-&gt;addRow($element, '', $actions, '', '', 'actions nodrag');</p>\n<p>```</p>", "<p>@bramley Ready for review</p>", "<p>@samtuke I don't think that you have applied my suggested change correctly.</p>", "<p>@bramley I was confused about the formatting changes in your snippet, and have reverted the last commit. Would you commit apply them as intended and commit?</p>", "<p>I have looked a bit more into this and think that this approach is unnecessary. The function PageLink2() already deals with the title attribute (using the hover text specified for each page) but in some cases the text is not obtained. I think that is a bug in PageLink2() so it will probably be clearer to raise a new PR for that.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/188", "title": "Added SHOW_LIST_OFALL_SUBSCRIBERS with variable", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>Have you committed what you intended? This change seems to add only a spelling mistake.</p>", "<p>@bramley You're right; now fixed. Thanks!</p>", "<p>This also doesn't look correct as this is invalid syntax:</p>\n<p><code>define('SHOW_LIST_OFALL_SUBSCRIBERS');</code></p>\n<p>I think that you intend to set it to false, so that matches the initialisation in admin/init.php</p>\n<p>```\nif (!defined('SHOW_LIST_OFALL_SUBSCRIBERS')) {\n    define('SHOW_LIST_OFALL_SUBSCRIBERS', false);\n}</p>\n<p>```</p>", "<p>Another good catch. Also fixed.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/187", "title": "Add translation repository folders to gitignore and remove symlinks", "status": "closed", "labels": [], "priority": null, "description": ["<p>Packaged versions of phpList include the help and info folders within the admin directory, and this is the default location for them. However phpList 3 currently ships with symlinks pointing to above the repo root directory for these folders. This does not follow the behaviour of packaged phpList versions therefore, and also results in missing config file errors unless the Apache variable is set to give the config file path. That variable is not relevant to other web servers, and is not always set in local development environments.\nTherefore this commit removes the symlinks and ensures that Git will not track the files. This makes it easier for developers to checkout the language repositories without errors.\nThose wishing to use the former directory structure, with langage repo folders above the root directory of phpList 3, can easily add their own symlinks. This is also true of CI servers -- symlinks can be added as part of the test setup procedure if necessary.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/186", "title": "Feature test cleanup", "status": "closed", "labels": [], "priority": null, "description": ["<ul>\n<li>Fixed failing steps in newcampaign.feature</li>\n<li>Added new feature step for logging in as an administrator in order to avoid code duplication in each scenario, and ported existing features to it</li>\n<li>Added test for bad login credentials</li>\n<li>Added two new commented out tests for when no login credentials are provided; currently no message is displayed in this case -- this bug needs fixing 'upstream'</li>\n<li>Renamed parameters in default.behat.yml to reduce ambiguity</li>\n<li>Added new parameters in default.behat.yml for admin login and base_url (necessary for above new step). base_url parameter already specificed via 'extensions' seems to be inaccessible in feature contexts, hence the duplicated new addition.</li>\n</ul>", ["<p>Commented out authentication tests relate to https://mantis.phplist.org/view.php?id=18754</p>", "<p>Currently failing because of a case sensitive search the mysterious lower-casing of a button label</p>", "<p>Seems that the theme selection in the config isn't working</p>", "<p>Trevelin is now installed during Travis setup but the lowercase button text from Dressprow is still being detected -- perhaps the $ui var in config.php is not being honoured?</p>", "<p>This is now passing tests and ready for merge</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/185", "title": "[BUGFIX] Use HTTPS for all phplist.com URLs", "status": "closed", "labels": ["bug"], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/184", "title": "Removed application of lower case to page titles", "status": "closed", "labels": [], "priority": null, "description": ["<p>Currently most pages have capitalised page titles but some (notably some account pages in Coipasa theme), which use this method if injecting the title, do not. This makes page titles be capitalised consistently.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/183", "title": "Password storage / Use password_hash from php5.5 for password storage", "status": "open", "labels": [], "priority": null, "description": ["<p>phplist currently uses unsalted single round hashes for admin and user passwords alike (with the option to disable hashing entirely for user passwords so it can be sent to them in an email instead of a change password link if i recall correctly).</p>\n<p>I propose the following:</p>\n<ol>\n<li>Replacing all password handling with password_hash() and password_verify() functions, This will increase the minimum version requirement to php5.5.\n1.1 If this minimum version requirement is not acceptable then including the <a href=\"https://github.com/ircmaxell/password_compat\">userland implementation</a> would lower the requirement to \"PHP &gt;= 5.3.7 OR a version that has the $2y fix backported into it (such as RedHat provides)\".</li>\n<li>Use the constant <a href=\"http://php.net/manual/en/password.constants.php\">PASSWORD_DEFAULT</a> in the phplist configuration. This means phplist will automatically use improved algorithms (as the PHP constant changes) without configuration or code changes, currently Blowfish with a work factor of 10.</li>\n<li>deprecate and immediately remove plaintext password storage option for user passwords.</li>\n<li>deprecate and remove at a later date (2 releases?) backwards comparability with passwords stored in the current scheme.</li>\n</ol>\n<p>I have started work in this direction for admin passwords <a href=\"https://github.com/ehuggett/phplist3/commits/passwordhashing\">here</a>. So far this handles upgrading old/current password hashes to the proposed scheme (and upgrading passwords in the proposed scheme to the new value of PASSWORD_HASH if/when it changes in a future php release), but the \"forgot password\" options still write the old/current password hashes into the database and i have not touched user passwords. </p>\n<p>I would suggest we remove the backwards compatibility for old hashes ASAP, if the user has not logged in when both are supported they can use the forgot password option to reset their password (overwriting the unsupported hash).</p>", ["<p>I think it's great to improve on this. Are you going to PR it when you've finished? I do think there may be a need to keep a &lt;5.5 option, for some folks who cannot upgrade their PHP.</p>\n<p>User/subscriber password functionality is hardly used. They effectively login with a token. </p>\n<p>What happens if the algo changes in a PHP Upgrade? That seems to mean all passwords become invalidated. As long as we communicate that clearly, that should be fine, but it may cause some confusion if not handled correctly.</p>", "<p>The constant PASSWORD_DEFAULT changing in newer versions of PHP should not cause any problems as the algorithm to use for the password comparison during login is stored with the password in the database (The proposed changes will result the password [hash/salt/rounds] being stored in <a href=\"https://en.wikipedia.org/wiki/Crypt_(C)\">Crypt</a> format. ).</p>\n<p>Downgrading PHP versions might be more interesting/'broken' for users who have logged in while the installation was running under a newer version with a different value for PASSWORD_DEFAULT as their stored password hash would have been upgraded to it when they logged in. Assumption: PASSWORD_DEFAULT won't be changed to use an algorithm introduced in the same PHP release therefore most 'minor' version downgrades will not be an issue.</p>\n<p>note: The database schema might need updating, from http://php.net/manual/en/password.constants.php \"if you use PASSWORD_DEFAULT you should store the resulting hash in a way that can store more than 60 characters (255 is the recomended width)\"</p>", "<p>Regarding point 3, what is the reason for removing the code for upgrading passwords stored as plain-text? That will affect anyone wanting to upgrade from phplist 2.  To be clear, storing passwords in plain text is not an option, it is just the way it was done in phplist 2. When someone upgrades to phplist 3 the passwords will be stored in the current scheme.</p>\n<p>Similarly on point 4, removing the code for upgrading passwords stored in the current scheme will affect anyone wanting to upgrade from phplist &gt; 2 releases old.</p>", "<p>To be honest, i had not properly considered the implications for installations not being kept up to date or what happens when site admins skip versions (possibly because i never really took advantage of that when phpList was part of my job).</p>\n<p>I'm looking to sacrifice what i perceived to be unnecessary backwards compatibility to make the login process as simple as possible, as this leaves less room for error and makes it easier to audit in the future.</p>\n<p>It should be noted that the deleted block of code is making 3.x users potentially susceptible to something like the pass-the-hash attack <strong>IF</strong> the value of <code>HASH_ALGO</code> is changed to a hash function with a longer output (for example, md5 to sha256) <strong>AND</strong> an admin user has not changed their password since this was done <strong>THEN</strong> the old password hash is now considered to be a plaintext password by <code>validateLogin()</code> and can be used as such in the login form. </p>\n<p>Its not going to bring the sky down, but it shouldn't ever be possible for an attacker to login as a user by obtaining their password hash (ie SQL injection, a lost backup, etc) </p>\n<p>So with that in mind, </p>\n<p><strong>on point 3</strong>\nI still think its time to remove support for plaintext passwords in the database from <code>validateLogin</code>. </p>\n<p>It could be moved into upgrade.php, it looks like it would be possible to make sure it only ever executes once by targetting the release version this change would be included in (which still works if the admin skips that version?).</p>\n<p><strong>on point 4</strong>\n2 releases does now seem quite short now, can anyone give me an idea of how many installations would be affected if we waited longer? (ie how many sites upgrade within 3 days vs 3 months vs 1 year)</p>\n<p>doing the \"right thing\" (storing passwords as best we can) starts to get complicated while maintaining long term backwards comparability (even more-so if we cannot assume all the password hashes in the database are not <code>HASH_ALGO</code>).</p>\n<p>Basically, we would have to put the current password hashes through password_hash() during the upgrade and somehow mark those users as needing special handling the next time they login. something like</p>\n<p><code>for x in $userids:\n   $db_password = mysql(get password for user x)\n   $compat_hash = password_hash($db_password, PASSWORD_DEFAULT)\n   mysql(update user x set password to $compat_hash and special_handling to the best guess at hash ie sha256 )\ndone</code>\nTo check the password they have supplied when they do login we would have do to something like </p>\n<p>```\n$username = id of the user\n$password = POST['password']</p>\n<p>$user = mysql(get record by username)</p>\n<p>$password_hash = $user[password]\n$special_handing =$user[special_handling]</p>\n<p>if $special_handing is md5/sha256/etc\n   $password = hash($special_handling, $password)</p>\n<p>if password_verify($password,$password_hash)\n   if $special_handing OR password_needs_rehash($password_hash, PASSWORD_DEFAULT)\n      mysql(update password to password_hash($password,PASSWORD_DEFAULT) and special_handling to NULL)\n   return LOGIN SUCCESS \nelse\n   return LOGIN FAILED\n```\nBy doing it this way we significantly increase the difficulty of brute forcing the legacy password hashes if they really must be stored long term. To put some numbers on it, according to these <a href=\"https://gist.github.com/epixoip/a83d38f412b4737e99bbef804a270c40\">Hashcat Benchmarks</a> 8x Nvidia GTX 1080's can do around 23 012 100 000 SHA256 hashes per second (password attempts) but only 105 700 bycrpt hashes a second even with a work factor of 5 (i have gone with PHP's default of 10, higher is better / requires more work / takes longer).</p>\n<p>alternatively, would either of these approaches address your concerns?</p>\n<ul>\n<li>\n<p>Could we just ask the site administrator if they wish to send those users a password reset email during the upgrade and/or wipe the old hashes? If we leave the comparability in for a few releases, it will only have to prompt admins who still have users with old hashes when they upgrade to the release that removes it (but it will prompt every admin who skips all the versions that supported both schemes)</p>\n</li>\n<li>\n<p>The version in the initial release supporting both could become a plugin when its removed allowing admins who didn't upgrade fast enough/still have users with old hashes to avoid having to ask users to update their password if they feel its necessary / justifiable in their environment?</p>\n</li>\n</ul>", "<p>Edward, thanks for the explanation, the motivation is a bit clearer to me now. If I understand correctly the concerns are a problem with how plain text passwords are handled, and the relative weakness of md5 and sha256 hashes.  I think that Michiel and Sam will need to comment on what approach they want you to take.</p>\n<p>One comment about the handling of plain text passwords. I think that the test of the password length that allows plain text passwords is incorrect. That should be allowed only when upgrading from phplist 2.x when the code has been upgraded but the database still refers to 2.x. So it should be executed only once before the database is upgraded, and never afterwards. Testing the password length instead of the database version has the right effect but as you said potentially allows a hash to be used instead of the password.</p>", "<p>There are no conditions that i am aware of which can be used differentiate between plaintext passwords and hashes of passwords with 100% accuracy. For example, the md5 checksum of the plaintext password <code>password</code> is <code>5f4dcc3b5aa765d61d8327deb882cf99</code>, which itself would also be a valid plaintext password. </p>\n<p>I would dismiss this as almost completely irrelevant when trying to maintain backwards compatibility with or upgrade plaintext passwords, but there might be users with password generators / managers that create passwords that look like checksums, and there are certainly some people who use utilities like md5(etc) and a \"master password\" to avoid having to remember or keep on record a unique password for every website, it looks something like <code>hash(\"masterpassword\" + $domain_name)</code> (not something i would recommend doing by the way).</p>\n<p>More worryingly, and i was quite surprised when i realised this, it would also be rather unfortunate if someone did actually use <code>5f4dcc3b5aa765d61d8327deb882cf99</code> as their password (or the hash of any common dictionary word or common password) and it was stored in the database without being hashed first, as even the very best we can do in the current situation with the column containing a mix of plaintext and hashes will identify it as a md5 hash, which means their password has been changed to <code>password</code> (or a common dictionary word) since(/as soon as) the system was(/is) upgraded to a version that uses md5 hashing for passwords until that user has their password reset. </p>\n<p>In both cases outlined above, the user would be telling the truth when they tell the system administrator they did not forget their password \ud83d\ude04</p>\n<p>Its obviously safe to assume all the passwords are plaintext when upgrading a database version that would never have contained hashed passwords, but its not clear to me what the correct thing to do is after that point as i can't see a perfect behaviour (and i suspect there is none).</p>\n<p>The same will be true for the subscriber passwords, if anyone has chosen to set one.</p>", "<p>What versions of php are currently supported / known to work and of those which versions does this <em><strong>need</strong></em> to be compatible with? (all of them?)</p>", "<p>Officially PHP 5.4 plus. All newer versions are used for running basic tests via Travis.</p>\n<p>https://resources.phplist.com/system/start\nhttps://github.com/phpList/phplist3/blob/master/.travis.yml</p>", "<p>Don't forget this pull request to continue supporting php 5.3.3 - https://github.com/phpList/phplist3/pull/164</p>", "<p>@bramley Good point -- docs updated: https://resources.phplist.com/system/start</p>", "<p>Could be a problem for this?</p>\n<blockquote>\n<p>1.1 If this minimum version requirement is not acceptable then including the userland implementation would lower the requirement to \"PHP &gt;= 5.3.7 OR a version that has the $2y fix backported into it (such as RedHat provides)\".</p>\n</blockquote>\n<p>https://github.com/ircmaxell/password_compat#requirements</p>\n<blockquote>\n<h1>Requirements</h1>\n<p>This library requires <code>PHP &gt;= 5.3.7</code> OR a version that has the <code>$2y</code> fix backported into it (such as RedHat provides). Note that Debian's 5.3.3 version is <strong>NOT</strong> supported.</p>\n<p>The runtime checks have been removed due to this version issue. To see if password_compat is available for your system, run the included <code>version-test.php</code>. If it outputs \"Pass\", you can safely use the library. If not, you cannot. </p>\n<p>If you attempt to use password-compat on an unsupported version, attempts to create or verify hashes will return <code>false</code>. You have been warned!</p>\n<p>The reason for this is that PHP prior to 5.3.7 contains a <a href=\"http://php.net/security/crypt_blowfish.php\">security issue with its BCRYPT implementation</a>. Therefore, it's highly recommended that you upgrade to a newer version of PHP prior to using this layer.</p>\n</blockquote>\n<p>While the Author of the pull commit would in theory not be affected (assuming EL6 has the <code>$2y</code> fix) attempting to state that php5.3.3 is supported in the documentation would require some explanation if this library was in use.</p>\n<p>It looks like you will eventually want/need the library anyway? If password_compat was included in the next release its check function could be to start advising any users on a system that fails it before it becomes a problem (perhaps buried in the admin area somewhere for now), but I'm not sure if i would claim anything under 5.3.7 is officially \"supported\" just to be on the safe side once its actually in use for passwords</p>", "<p>Before the recent PR, PHP 5.4 was the minimum version for phpList (and previously announced), and we can easily make it so again.</p>", "<ul>\n<li>I have included password_compat</li>\n<li>added setPassword to phpListAdminAuthentication (this brake installations with a custom admin_auth plugin?)</li>\n<li>password reset now uses setPassword</li>\n<li>the config check now uses validateLogin() to check the password is no longer \"phplist\"</li>\n</ul>\n<p>I took the opportunity to play with phplist-docker, so its only been tested under PHP 5.6.30 so far</p>", "<p>That's brilliant. Is is ready for a PR, or are you still tweaking it?\nBy the way, yes, point 3, I can work on the removal of the plain text password option (and move it to upgrade instead). That was an undocumented feature, that should be retired.</p>", "<p>I do have a habit of rebasing (rewriting history) my own branches with master to bring them up to date and i plan to squash all of the commits before the PR, either of which might cause you issues/hassle if you pulled my branch now to start working on the upgrade but I would say its just about ready for admin passwords? </p>\n<p>I still have some minor changes to what i have written any many \"todo check this\" comments in local files to come back to. I have tried to find every location where these changes might be relevant i.e the old function, encryptPassword, is also being used for password verification (and it looks like hash() has been used directly a few times).</p>\n<p>The largest remaining issue is I don't currently have anything setup to test under older (or newer) php versions, but it works in theory (at least until anyone tries it!). I want to try and do this with docker just for the sake of it which will add some delays (perhaps submitting a PR for phplist-docker if what i end up doing is clean enough to make it a configurable \"dev\" feature).</p>\n<p>I also still need to update config/config_extended\n1. hash_algo no longer controls password hashing\n2. there are only 2 options for password hashing, PASSWORD_BCRYPT and PASSWORD_DEAFULT which are currently equivalent,  but a config option would allow \n2.1 manually upgrading to a newer scheme when introduced but before PASSWORD_DEFAULT is changed in PHP\n2.2 force PASSWORD_BYCRYPT to remain in use after PASSWORD_DEFAULT changes (would be an issue for anyone directly integrating with phplist if their crypt() implementation does not support whatever the new scheme is yet)</p>\n<p>for upgrades: I've looked into the md5 and sha256 schemes used in crypt() just to confirm its not possible to \"convert\" the existing hashes into a format that will be <a href=\"https://en.wikipedia.org/wiki/Crypt_(C)#Key_derivation_functions_supported_by_crypt\">\"directly\" useful</a> with password_hash() even with a null/empty salt, so the compatibility fallback to the current scheme would be needed for <em>at least</em> 1 release. Its a dead end because we can't get past step 4 of 22 on https://www.akkadia.org/drepper/SHA-crypt.txt (or step 3 for md5, due to the salt always starting \"$1$\" so it can never be null).</p>", "<p>To extended_config, I'm adding\n- PHPLIST_PASSWORD_ALGO, default: PASSWORD_DEFAULT (which currently selects Bcrypt, but may change in future php versions)\n- PHPLIST_PASSWORD_BCRYPT_COST, default: undefined (password_hash will use the php default of 10 if an array of options is not specified). It did not seem sensible to have a 'generic' cost option, as future algorithms may be significantly more expensive than Bcrypt with the same value for 'cost' (this is an assumption)</p>\n<p>And removing from config.php\n- HASH_ALGO (and marking it as deprecated in config_extended.php)</p>\n<p>We should consider calculating an appropriate value for the bcrypt cost parameter during installation/upgrade and add it to the config check. But I think it would be OK to release without this improvement</p>\n<p>```php</p>\n<h1>http://php.net/manual/en/function.password-hash.php#example-980</h1>\n<?php\n/**\n * This code will benchmark your server to determine how high of a cost you can\n * afford. You want to set the highest cost that you can without slowing down\n * you server too much. 8-10 is a good baseline, and more is good if your servers\n * are fast enough. The code below aims for \u2264 50 milliseconds stretching time,\n * which is a good baseline for systems handling interactive logins.\n */\n$timeTarget = 0.05; // 50 milliseconds \n\n$cost = 8;\ndo {\n    $cost++;\n    $start = microtime(true);\n    password_hash(\"test\", PASSWORD_BCRYPT, [\"cost\" => $cost]);\n    $end = microtime(true);\n} while (($end - $start) < $timeTarget);\n\necho \"Appropriate Cost Found: \" . $cost . \"\\n\";\n?>\n<p>```</p>\n<ul>\n<li>I would start with cost = 10 instead of 8 as above, so as not to use a cost lower than the default</li>\n<li>I think we can get away with adding more than 50ms of delay to authentication, perhaps 100ms? (or more, as a side effect this is the closest thing phpList currently has to rate limiting authentication attempts but its a very 'expensive' way of implementing it)</li>\n</ul>", "<p>I think 100ms is fine as a delay. Depends a bit how much it is delayed by other parts of the process.</p>\n<p>If we default PHPLIST_PASSWORD_ALGO to PASSWORD_DEFAULT what happens if PASSWORD_DEFAULT changes? Doesn't that mean you get locked out?</p>\n<p>Maybe we should store the ALGO used in the DB and fix it, regardless of underlying defaults and then allow updating it with a command (eg delete the DB value, which will re-initialise)</p>", "<blockquote>\n<p>Doesn't that mean you get locked out?</p>\n</blockquote>\n<p>The first login after a change of cost or algorithm will be verified using a hash produced with the old settings, if successful the plaintext password provided by the user to login will be hashed with the new settings and the user record updated.</p>\n<p>https://github.com/ehuggett/phplist3/blob/passwordhashing/public_html/lists/admin/phpListAdminAuthentication.php#L39</p>\n<p>(so no, nobody gets locked out)</p>\n<blockquote>\n<p>If we default PHPLIST_PASSWORD_ALGO to PASSWORD_DEFAULT what happens if PASSWORD_DEFAULT changes?</p>\n</blockquote>\n<p>Then by design the default value of PHPLIST_PASSWORD_ALGO changes. I introduced the config option to allow the administrator to override this behaviour, mainly to allow newly introduced ciphers to be used before the PHP projects recommends them via PASSWORD_DEFAULT.</p>", "<p>Just to clarify</p>\n<blockquote>\n<p>Maybe we should store the ALGO used in the DB </p>\n</blockquote>\n<p>The result of password_hash() includes the algorithm used. It's the $2y$ part in this example http://php.net/manual/en/function.password-hash.php#example-977</p>", "<blockquote>\n<p>The first login after a change of cost or algorithm will be verified using a hash produced with the old settings, if successful the plaintext password provided by the user to login will be hashed with the new settings and the user record updated.</p>\n</blockquote>\n<p>Nice</p>", "<blockquote>\n<p>The result of password_hash() includes the algorithm used. </p>\n</blockquote>\n<p>Ah, thanks</p>", "<p>FYI argon2i was added to php7.2 in https://github.com/php/php-src/pull/1997/files, but PASSWORD_DEFAULT remains unchanged. </p>\n<p>It seems I can't use constants to store part of my configuration under the supported PHP versions, I want it to be possible to configure parameters for hashing algorithms that don't exist (yet) and I think this requires an array of arrays? ie</p>\n<p>```php\n$phplist_password_parameters = array(</p>\n<pre><code>PASSWORD_BCRYPT =&gt; array(\n        'cost' =&gt; PASSWORD_BCRYPT_DEFAULT_COST,\n    ),\n</code></pre>\n<p>// Uncomment the following block if you are running on php7.2+ and wish to configure Argon2i\n/<em>\n*    PASSWORD_ARGON2I =&gt; array(\n*            'memory_cost' =&gt; PASSWORD_ARGON2_DEFAULT_MEMORY_COST,\n*            'time_cost' =&gt; PASSWORD_ARGON2_DEFAULT_TIME_COST,\n*            'threads' =&gt; PASSWORD_ARGON2_DEFAULT_THREADS,\n*        ),\n</em>/\n);\n<code>``\n(</code>define()<code>will accept an array in php =&gt; 7, but this can be done in php =&gt; 5.6 using</code>const` with some restrictions)</p>\n<p>The alternatives i considered\n- Use the database for config, I would have to store and evaluate constant names as I don't think there is a guarantee that their values won't change (they are not documented)\n- Use a constant but write it in such a way that the config does not work on php &lt;= 5.6, but it doesn't brake either (and always uses the default cost for Bcrypt).</p>\n<p>Main changes\n- PHPLIST_PASSWORD_ALGO has become PHPLIST_PASSWORD\n- PHPLIST_PASSWORD_BCRYPT_COST no longer exists, replaced with the global above\n- rebased on master</p>\n<p>TODO / advice please\n1. How should these errors be handled? \n1.1 https://github.com/ehuggett/phplist3/blob/b331779b62e0ff43f58abc7cd13e3cb665f14fd9/public_html/lists/admin/login.php#L79\n1.2 https://github.com/ehuggett/phplist3/blob/b331779b62e0ff43f58abc7cd13e3cb665f14fd9/public_html/lists/admin/phpListAdminAuthentication.php#L99\n2. How long are the old password hashes going to be supported? https://github.com/ehuggett/phplist3/blob/passwordhashing/public_html/lists/admin/phpListAdminAuthentication.php#L53\n3. I have only run this under the phplist-docker images, so it needs to be tested on older (and newer) php versions\n4. general sanity check / readover / are potential errors being caught etc</p>\n<p>PS I did write some simple logging for password hashing time (warnings if too fast or slow) but I've removed it as I'm not sure how well it will age.</p>", "<p>Wow, this is an open issue from 2+ years ago?  </p>\n<p>How are passwords handled in the most recent version of PhpList (I've never used PhpList before); is everything secure and using modern approaches such as https://www.php.net/manual/en/faq.passwords.php?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/182", "title": "Installing on PHP7.1 seems to fail (badly)", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hi,\nI'm trying to run the latest git version from the master branch and the packaged version available for download on the site with Nginx and PHP-FPM 7.1.</p>\n<p>The /admin/index.php page loads correctly, then I click on the \"Initialise Database\" link and I get sent to /admin/?page=initialise&amp;firstinstall=1&amp;tk=623eb2151a1586d89cd12484397a490e, where I get this:\n<code>Database error 1146 while doing query Table 'phplist.phplist_subscribepage' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_subscribepage' doesn't exist\nDatabase error 1146 while doing query Table 'phplist.phplist_subscribepage' doesn't exist\nUnsubscribe from our Newsletters</code>\nThere's nothing in the error log.</p>\n<p>I've tried to debug a little, but honestly I'm a bit lost in your code.</p>\n<p>Why would phplist ask for phplist_subscribepage to exist if it is not installed yet? Any quick solution to this, or should I debug more?</p>", ["<p>That looks more like you loaded the /lists/ page instead of /lists/admin/</p>\n<p>Also, the error indicates a DB issue, not PHP7.1 related.\nphpList seems to work fine on PHP7.1 according to Travis. https://travis-ci.org/phpList/phplist3/builds</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/181", "title": "fix 2 design issues: #18532 and #0018731", "status": "closed", "labels": [], "priority": null, "description": ["<h1>0018532: campaign data does not match width of campaigns 'picture frame'</h1>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/180", "title": "Removed whitespace above transactional email content and at newline start", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=18730</p>\n<p>The whitespace removed was being rendered by mail clients and results in unexpected email formatting.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/179", "title": "Mantis 18729 - modifying a subscriber's email address", "status": "closed", "labels": [], "priority": null, "description": ["<p>This pull request has three commits:</p>\n<ul>\n<li>add validation that an email address has been entered and does not already exist when changing the email address</li>\n<li>remove unused variables</li>\n<li>remove surrounding spaces from the entered email address</li>\n</ul>", ["<p>That's why I made three commits so that each could be viewed separately. But you can view a diff ignoring whitespace changes by adding &amp;w=1 to the url, e.g.\nhttps://github.com/phpList/phplist3/pull/179/files?diff=split&amp;w=1</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/178", "title": "Document that changes to the DB structure need to done in both versions", "status": "open", "labels": [], "priority": null, "description": ["<p>Changes to the DB structure/schema must always be done in both version 3 https://github.com/phpList/phplist3 and version 4 https://github.com/phpList/phpList .</p>", ["<p>How are database changes processed in PL4? </p>\n<p>In PL3, it's simple:</p>\n<ol>\n<li>add to structure.php</li>\n<li>add check and update to upgrade.php</li>\n<li>increase version number</li>\n</ol>", "<p>Currently, PL4 works on the PL3 database. So currently for PL4, we'll need to update <code>phplist4-core/Database/Schema.sql</code> and also update all Model and Repository classes for the changed table (including all tests that use it).</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/177", "title": "Compacted statistics table (removed row)", "status": "closed", "labels": [], "priority": null, "description": ["<p>Added percentages to views, clicks, and bounces columns;\nMoved date into dedicated column</p>", ["<p>What's holding up this PR?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/176", "title": "Mantis 18437 - The domain stats page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Several sets of changes to this page to make the results more consistent:</p>\n<ul>\n<li>rework the sql as described in the mantis issue</li>\n<li>display confirmed, unconfirmed and blacklisted in a similar way to the lists page</li>\n<li>show percentages of the total number of subscribers</li>\n<li>round() percentages instead of truncating</li>\n<li>avoid repetition of the formatting of each column</li>\n<li>use function s() for translations</li>\n</ul>", ["<p>Has any performance testing been done with these changes? E.g. to see if page load increases or decreases when &gt;1 million subscribers are in the system?</p>", "<p>I cannot test with anything like that number of subscribers, but expect that, for the Top 50 domains, the query times of before/after would be similar. Using EXPLAIN you can see that both the old and new queries need full table scans.</p>\n<p>```\n+----+-------------+-------------------+------+---------------+------+---------+------+-------+----------------------------------------------+\n| id | select_type | table             | type | possible_keys | key  | key_len | ref  | rows  | Extra                                        |\n+----+-------------+-------------------+------+---------------+------+---------+------+-------+----------------------------------------------+\n|  1 | SIMPLE      | phplist_user_user | ALL  | NULL          | NULL | NULL    | NULL | 81038 | Using where; Using temporary; Using filesort |\n+----+-------------+-------------------+------+---------------+------+---------+------+-------+----------------------------------------------+</p>\n<p>```</p>\n<p>```\n+----+-------------+-------------------+------+---------------+------+---------+------+-------+----------+---------------------------------+\n| id | select_type | table             | type | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                           |\n+----+-------------+-------------------+------+---------------+------+---------+------+-------+----------+---------------------------------+\n|  1 | SIMPLE      | phplist_user_user | ALL  | NULL          | NULL | NULL    | NULL | 81039 |   100.00 | Using temporary; Using filesort |\n+----+-------------+-------------------+------+---------------+------+---------+------+-------+----------+---------------------------------+</p>\n<p>```</p>", "<p>@bramley Thanks for the additional detail.</p>\n<p>We can test this on a large scale phpList installation; @michield  I propose obtaining those results before merging.</p>", "<p>I tried it on a system with 2.3 million subscribers on my laptop, which is less powerful than the servers, and it loaded fine. It took a little while to load, but not too long. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/175", "title": "Fix bug: https://mantis.phplist.org/view.php?id=18240", "status": "closed", "labels": [], "priority": null, "description": ["<p>@michield and @bramley please check if this change is ok for you. It will show tabs now, when there are no categories and less than 5 lists. This is the easy solution I found to the checkbox missing bug on \"exclude list\" accordion in both themes.</p>\n<p>THis is the issue on github:\nhttps://github.com/phpList/phplist3/issues/171</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/174", "title": "Mantis 18706 - Repeat message processing tries to copy an index", "status": "closed", "labels": [], "priority": null, "description": ["<p>Avoid trying to copy indices when copying a message.\nExplicitly set the finishsending date when copying a message, otherwise eventually a repeated campaign will not be sent because finishsending is in the past.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/173", "title": "Add subject to campaign page and date formatting", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fixed date formatting error in merged 7d065d2</p>", ["<p>that's quite a major bug, shall we release a new version?</p>", "<p>The original commits haven't yet been included in a release.</p>", "<p>ah, good, phew :-)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/172", "title": "Added number formatting to nested table stats", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>Can you rebase? This PR no longer merges.</p>", "<p>Sam, in your earlier changes for number formatting you used number_format() directly, what's the reason for creating intermediate arrays, $viewStats and $viewStatsFormatted? It just seems a bit long winded when the code could be simply</p>\n<pre><code>number_format($msg['viewed'])\n</code></pre>\n<p>either used directly </p>\n<pre><code>  &lt;tr&gt;&lt;td&gt;' .s('Viewed').'&lt;/td&gt;&lt;td&gt;'.number_format($msg['viewed']).'&lt;/td&gt;&lt;/tr&gt;\n</code></pre>\n<p>or assigned to an intermediate variable</p>\n<pre><code>$viewsFormatted = number_format($msg['viewed']);\n\n  &lt;tr&gt;&lt;td&gt;' .s('Viewed').'&lt;/td&gt;&lt;td&gt;'.$viewsFormatted.'&lt;/td&gt;&lt;/tr&gt;\n</code></pre>", "<p>@michield Merged in master; this branch is now ready to merge</p>", "<p>@bramley The reason is to avoid many repeated calls to number_format -- instead of using it 6 times or more the array centralises the formatting. Arguably it is more verbose this way, but to my mind it makes it easier to maintain should we wish to change number formatting in future to e.g. reflect localised formatting customs.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/171", "title": "Exclude list feature is broken.", "status": "closed", "labels": [], "priority": null, "description": ["<p>It is unable to choose a list to exclude. I use latest git master.\n<img alt=\"screenshot from 2017-04-28 21-00-19\" src=\"https://cloud.githubusercontent.com/assets/1597304/25541046/e8d80ec0-2c55-11e7-82c0-72d508646ba7.png\" /></p>", ["<p>I think it is the same as, or related to, the problem reported here https://mantis.phplist.org/view.php?id=18240\nYou can probably workaround the problem by defining a list category and assigning one list to that.</p>", "<p>Thanks for the workaround!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/170", "title": "Added headings to the 'list messages' page tables", "status": "closed", "labels": [], "priority": null, "description": ["<p>Added headings to the 'list messages' table, to clarify that 'text' &amp; 'HTML' refer to processed, not sent. Sometimes sending errors cause the 'Total' and 'HTML' totals to increase indefinitely, resulting in huge numbers. This does not indicate that messages have actually been sent however (the statistics page does that)</p>", ["<p>A couple of minor html errors:\nline 411 - should probably be spanning two columns not three\nline 424 - should be closing tbody</p>", "<p>Right again! Sorry for the noise; both of those now fixed also.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/169", "title": "\"lists\" directory name hardcoded ?", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hello.</p>\n<p>Just downloaded and uploaded phpList3.</p>\n<p>I uploaded \"lists\" directory to www.domain.com/phplist but when clicking in some links in admin, it tries to go to \"www.domain.com/lists\" !</p>\n<p>Is dir. name hardcoded ?</p>", ["<p>No, you need to configure it in your config file. The admin name is hard coded.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/168", "title": "Clarified clicks label", "status": "closed", "labels": [], "priority": null, "description": ["<p>Clarifying use of 'clicks' label -- fixes inconsistent use of this label. E.g. the statsoverview page and the messages page show different statistics under the same label 'clicks'. This commit uses more descriptive labels. The longer labels take more column space/ width, which is not ideal. Improvements on space optimisation welcome.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/167", "title": "Clarified labels", "status": "closed", "labels": [], "priority": null, "description": ["<p>Existing labels are ambiguous; new labels are designed to explicitly state what the numbers show.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/166", "title": "Avoid creating unnecessary temporary file when exporting", "status": "closed", "labels": [], "priority": null, "description": ["<p>After exporting subscribers I noticed some zero length files in the temp directory.  Each time that action/export.php is run it creates a temporary file, when it needs to do that only on the first run, as the name of the temporary file is passed to the second run through the session.</p>\n<p>There are two changes here:</p>\n<ul>\n<li>Move creation of the temporary file to avoid creating a second one.</li>\n<li>Reposition code dealing with the export file name.</li>\n</ul>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/165", "title": "Start output buffering selectively", "status": "closed", "labels": [], "priority": null, "description": ["<p>Currently if output buffering is enabled in php.ini then there are two levels of buffering. </p>\n<p>That causes progress indicators, such as when exporting, to be buffered and not displayed immediately in the browser. So instead of showing progress every 50 subscribers it is shown every 1350.</p>\n<p>With this change, and output buffering enabled in php.ini, the progress indicator shows every 50 subscribers.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/164", "title": "Add backward compatibility support for PHP 5.3.3", "status": "closed", "labels": [], "priority": null, "description": ["<p>As discussed in commit 452a009, I've successfully managed to keep phpList 3.3.1 working on el6 which provides only 5.3.3 via EPEL.</p>", ["<p>Then we also should have it in the .travis.yml again.</p>", "<p>And in the composer.json, too.</p>", "<p>Thanks for the support @oliverklee : I though about Travis after my PR, but I had no idea about the composer before you've mentioned it.</p>", "<p>It appears that hex2bin() is used in only one place, file sendemaillib.php, so creating a general purpose replacement for earlier versions of php looks a bit unnecessary.</p>\n<p>Possibly just replace the one use of hex2bin() by the pack() function.</p>", "<p>Replacing the only use of hex2bin() by the pack() is another way to go indeed.\nSimpler change, but it might be more difficult to read.\nAnd the compatible function can be dropped easily whenever your requirement goes back to &gt; 5.3.3.\nUp to you guys: I can submit another PR changing only that call if you prefer?</p>", "<p>I'm all for having the polyfill (i.e., the way it is in this PR) instead of replacing the hex2bin call.</p>", "<p>Great to see such good teamwork to get this fixed! </p>\n<p>btlogy, could you <a href=\"https://www.phplist.com/cla\">sign the CLA </a> so I can accept the PR? </p>\n<p>Thanks</p>", "<p>Double checking with my employer as I did this in the context of my current position for @digital-me...</p>\n<p>Meanwhile, I'd like your advise(s) on how to handle the <a href=\"http://php.net/manual/en/function.hex2bin.php#113472\">snippet</a> from a <a href=\"http://php.net/manual/en/about.notes.php\">user note</a> of <a href=\"http://php.net/manual/en/copyright.php\">PHP Manual</a> mentioned in commit 0bc3ddf.\nSince the user note are covered by <a href=\"http://creativecommons.org/licenses/by/3.0/\">Creative Commons Attribution 3.0 License</a>, I was wondering if:\n- is this an issue for its integration with the GPL of this project?\n- I should clarify the reference to the author (PHP Documentation Group?)?\n- I should add link the the CC license in an extra commit?</p>\n<p>This is also a nice opportunity for me to learn about those \"details\" BTW.</p>", "<p>Heads up: CLA is coming but I'm waiting a feed back from the original author to make it right with the licensing.</p>", "<p>I think you're covered on that. https://secure.php.net/license/</p>\n<blockquote>\n<p>The PHP manual text and comments are covered by the Creative Commons Attribution 3.0 License, copyright (c) the PHP Documentation Group </p>\n</blockquote>\n<p>Just add some comments in the code where you got it from, and you'll be fine.</p>", "<p>Credit improved and CLA finally signed (just got employer formal agreement per email).\nSorry for the delay.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/163", "title": "Added colons after plugin data labels to make separation clearer", "status": "closed", "labels": [], "priority": null, "description": ["<p>Minor change to make labels on the automatic plugin installation page clearer</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/162", "title": "Mantis 18591 - need to quote user attribute name", "status": "closed", "labels": [], "priority": null, "description": ["<p>This has two commits</p>\n<ul>\n<li>remove obsolete test for using php 5</li>\n<li>quote placeholder name, remove unnecessary strtoupper() calls, allow value of \"0\"</li>\n</ul>", ["<p>I'm assuming that strtoupper(), stripos(), and the /i modifier on regex all have the same understanding of what are the lower case and upper case equivalents. I guess that is only reliable for ascii characters, so if someone uses a non-ascii character in a user attribute name then lower-&gt;upper and vice versa is not going to work. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/161", "title": "Sendtabs: show always maximun number of tabs as posible", "status": "closed", "labels": [], "priority": null, "description": ["<p>this is answering a @samtuke request commented here:\nhttps://github.com/phpList/phplist3/pull/158</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/160", "title": "Mantis 18569 - No theme selected when parse_ini_file has been disabled", "status": "closed", "labels": [], "priority": null, "description": ["<p>Handle the call to parse_ini_file failing by choosing the first theme found.\nA few code fixes in the same area</p>\n<ul>\n<li>remove unnecessary trailing / from theme directory</li>\n<li>remove unnecessary test for duplicate entries in $THEMES</li>\n</ul>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/159", "title": "Constructing url for click tracking, need to escape &", "status": "closed", "labels": [], "priority": null, "description": ["<p>Need to escape &amp; within html</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/158", "title": "replace carouselLite with cycle2 script to manage sendtabs", "status": "closed", "labels": [], "priority": null, "description": ["<p>This is because i like more how cycle2 manage responsive issues. But I don't know if this change will be good for you all. So i ask for feedback on this. @samtuke @michield @bramley </p>", ["<p>The new library seems to work well. The behaviour is slightly different but I don't think that is a problem.</p>", "<p>Please test on mobile devices, including swiping left and right along the buttons, and if possible, prevent buttons from being hidden due to repositioning following a button being clicked.</p>", "<p>About mobile @samtuke: I tested my local copy in a mobile device... it looks ok, works ok, BUT swiping gesture is not respongind, it has same navigation that desktop (just arrow buttons). I will investigate why.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/157", "title": "Update processqueue.php", "status": "closed", "labels": [], "priority": null, "description": ["<p>Add option to use Javascript timeout function instead of php sleep()\nTo use, you just need to add the following line to config/config.php\ndefine('JSLEEPMETHOD', 1);</p>\n<p>NOTES\nThe amended section is only accessed in browser context, not by cron.\nBy using a define, if undeclared, current function is unchanged.\nAllows for further expansion of this functionality by defining other values of JSLEEPMETHOD\nInstead of concurrent connections to same website/server potentially hanging during the sleep() process, new method better allows concurrent operations and ties up less resources</p>", ["<p>thanks</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/156", "title": "Mantis 18553 - external images when run from command line", "status": "closed", "labels": [], "priority": null, "description": ["<p>Use the config website value instead of $_SERVER['SERVER_NAME'] to identify external images. Those are not guaranteed to be the same but should generally work.\nAlso simplified creating the list of image extensions used by the regex patterns.</p>", ["<p>Yes, nice one</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/155", "title": "Email_address_validation should follow RFC6530", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://tools.ietf.org/html/rfc6530</p>\n<p>Chars like spanish accents should be accepted.</p>", ["<p>Is it not doing that then? that's the reason I purchased phpl\u00edst.org (note the i) </p>", "<p>Closing for lack of reply.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/154", "title": "Mantis 18551 Adding absolute resources", "status": "closed", "labels": [], "priority": null, "description": ["<p>Handle image url starting with // by adding only the scheme.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/153", "title": "Mantis 18543 - The selected theme's directory instead of its name is displayed", "status": "closed", "labels": [], "priority": null, "description": ["<p>On the Settings page, for a config setting of type 'select', show the label of the current item instead of the value (e.g. 'Trevelin' instead of 'phplist-ui-bootlist').</p>\n<p>Also restructured that part of the code as a switch statement.</p>", ["<p>nice one :-)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/152", "title": "Add button linking to campaign stats page", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/151", "title": "Changed page title to use campaign title (not subject)", "status": "closed", "labels": [], "priority": null, "description": ["<ul>\n<li>Changed page title to use campaign title (not subject); </li>\n<li>Added campaign 'subject' to data table; </li>\n<li>Added date formatting</li>\n</ul>", ["<p>can you explain what this does?</p>", "<p>It uses the campaign title instead of the campaign subject as the page title. The campaign title may be the same or different to the subject. If it is different, then the campaign subject is not printed anywhere on the page (only the campaign title is). Therefore the campaign subject is printed separately in the table to avoid any ambiguity.</p>", "<p>The calls to formatDateTime for the embargo, finish sending, repeat until, and requeue until fields are incorrect. They display just the current date/time, not the message field.</p>", "<p>@bramley Great catch -- this should be fixed in https://github.com/phpList/phplist3/pull/173</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/150", "title": "Added link from list name to view list page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Removed empty table cell in each table row</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/149", "title": "Added number formatting to stats overview page", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/148", "title": "AWS bounces importing using AWS SNS notifications", "status": "open", "labels": [], "priority": null, "description": ["<p>In case someone is interested in using this - or to adapt it to phplist core i've built a script which checks and marks bounces / blacklists users - parsing AWS SNS notifications which SES sends when mail delivery failed.</p>\n<p>I needed to do this as the standard bounces checking mechanism did not seem to work with SES - i've never received a single bounced email.</p>\n<p>Here it is: https://github.com/miraclebg/phplist3/commit/e2f2f262a3f21b2de055c0c9a8556b8845600388</p>\n<p>:)</p>", ["<p>Interesting. Can you add a little description of what it does and how to use it? And then create a Pull Request, so it can be merged into the main code. </p>\n<p>Thanks</p>", "<p>Hi @miraclebg, can you confirm you still have this script working?  I too find it very interesting as an implementation to PHPLIST, after hours of work trying to normalise an control bounces I am about to give up and this seems like a very effective solution if sending via SES. \nThanks for sharing.</p>", "<p>With a little work this could become a part of phpList 3. Any takers? </p>", "<p>Although I haven't checked / used it in a while - it should still be operational! Unfortunately I don't have the time right now to verify this - feel free to give a hand ;)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/147", "title": "help return 500 error", "status": "closed", "labels": [], "priority": null, "description": ["<p>When entering help AJAX return a 500 error\nurl is example.com/lists/admin/help/?topic=message&amp;ajaxed=true&amp;page=pageaction&amp;action=</p>\n<p>I just upgraded from previous version, I don't know if this error existed before. I checked for error logs but none found.</p>\n<p>Any hint?\nThanks</p>", ["<p>we've had quite a few issues with version 3.3.0, so we have pulled it and will release a new version soon.</p>\n<p>See also https://mantis.phplist.org/view.php?id=18515</p>", "<p>How to downgrade? just uploading the php files?</p>", "<p>yes, that should work. Preferably you have the previous DB as well. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/146", "title": "Mantis 18516 - A message that is repeated is given the same UUID", "status": "closed", "labels": [], "priority": null, "description": ["<p>Generate a new UUID when repeating a message.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/145", "title": "UUID not generated for a new subscriber", "status": "closed", "labels": [], "priority": null, "description": ["<p>A UUID is not being generated when someone subscribes. That seems to be the only place where that is the case. Adding a user through the admin interface does generate the UUID, as does adding a user when sending a test message.</p>", ["<p>this should solve that</p>\n<p>https://github.com/phpList/phplist3/commit/b9c63977c72749d9849d4342debf255984ffcfee</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/144", "title": "[CLEANUP] Drop the StyleCI badge from the README", "status": "closed", "labels": [], "priority": null, "description": ["<p>[ci skip]</p>\n<p>This repository no longer uses StyleCI. So the badge does not work anymore\nand schould go.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/143", "title": "[BUGFIX] Always add slashes to the request parameters", "status": "closed", "labels": [], "priority": null, "description": ["<p>This is a followup to #141.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/142", "title": "Missing commit for release 3.3", "status": "closed", "labels": [], "priority": null, "description": ["<p>The release here https://github.com/phpList/phplist3/releases/tag/phplist-3.3.0 doesn't include the further fix I provided for replacing the '-4' sequences in the UUIDs. Currently links in text emails will be broken due to replacing one character by two.\nThis is the fix I submitted to branch dev33 to replace the single statement at line 630</p>\n<p>```\n                    $masked = $linkUUID . $cached[$messageid]['uuid'] . $userdata['uuid'];\n                    $uuidLength = strlen($linkUUID);\n                    $masked[14] = substr(bin2hex(random_bytes(1)), 0, 1);\n                    $masked[$uuidLength + 14] = substr(bin2hex(random_bytes(1)), 0, 1);\n                    $masked[$uuidLength * 2 + 14] = substr(bin2hex(random_bytes(1)), 0, 1);</p>\n<p>```</p>", ["<p>Do we need a PR for this? Or is it just missing from the release notes?</p>", "<p>Duncan, I must have missed your commit. The branch is gone. Can you re-push it?</p>", "<p>@michield Can you just copy those lines (or amend the existing code to do something equivalent)? This is the existing code that replaces one character by two (bin2hex generates two characters from one random byte). The following hex2bin fails due to an odd length input.</p>\n<p>```\n                    $masked = substr($linkUUID,0,14).bin2hex(random_bytes(1)).substr($linkUUID,15).\n                        substr($cached[$messageid]['uuid'],0,14).bin2hex(random_bytes(1)).substr($cached[$messageid]['uuid'],15).\n                        substr($userdata['uuid'],0,14).bin2hex(random_bytes(1)).substr($userdata['uuid'],15);</p>\n<p>```</p>", "<p>OK, I committed https://github.com/phpList/phplist3/commit/a139f35bece20ef08a22333f3c30d052e7cf7828</p>\n<p>but it works for me either way. I'm not sure why. I think your version is safer though, as it forces the bin2hex into one character. Maybe it's not always the same on all systems. </p>", "<p>With the original code, when sending a test message there was this error reported for each url \n<img alt=\"image\" src=\"https://cloud.githubusercontent.com/assets/3147688/22624593/6a9af18a-eb78-11e6-92c5-6cc0d643bed3.png\" /></p>\n<p>and the tid parameter in links in the text format email was empty\nHere is a link\n<a href=\"http://strontian/lists/lt.php?tid=&amp;hm=5af08ebfceb4eb0da430799e349afe38482f5c727cc547dd21a3c146d5e32f5f\">http://strontian/lists/lt.php?tid=&amp;hm=5af08ebfceb4eb0da430799e349afe38482f5c727cc547dd21a3c146d5e32f5f</a></p>", "<p>strange. That didn't happen for me. I guess some system differences,,,,</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/141", "title": "[TASK] Require PHP >= 5.4", "status": "closed", "labels": [], "priority": null, "description": ["<p>And drop code that is required for lower PHP versions only, including\ncode for magic quotes or safe mode.</p>\n<p>Fixes #137</p>", ["<p>Nice one. phpList started with version 3 :-) Files were even called  .php3 in the beginning. </p>", "<p>This doesn't look correct. Currently the code in magic_quotes.php adds slashes when \"magic_quotes_gpc\" is false, which it always is for &gt;= 5.4.\nThat code might be unnecessary or even wrong (as currently there is double escaping happening, such as a list name including a single quote is stored with a backslash in the database).</p>\n<p>But removing the code needs testing of the fields that allow a single quote.</p>", "<p>Yes, this change needs thorough testing. But it's good to move that way. It will probably require fixing things.</p>", "<p>although, with hindsight, it may have been better to do this on a different branch first... </p>", "<p>I checked and Duncan, you're right, we'll need to put some of that code back. Going through all places that does stripslashes would be too much.</p>", "<p>I'm on it.</p>", "<p>I've just created PR #143 for re-adding the slashes to the request parameters.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/140", "title": "Add a LICENSE file", "status": "closed", "labels": [], "priority": null, "description": ["<p>The LICENSE file with the GPL is currently missing.</p>", ["<p>Yes, how odd. Don't know where it had gone, but back now. https://github.com/phpList/phplist3/commit/c13b941c37c8dedf8494be6db883b3d44d571127</p>", "<p>@michield Thanks! By the way, if you include something like \"Fixes #140\" in the body of the commit message, GitHub will auto-close the issue once the commit is merged. :-)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/139", "title": "Always load the composer autoloader from all entrypoints", "status": "closed", "labels": [], "priority": null, "description": ["<p>This is a blocker for #138.</p>", ["<p>Okay, this probably will not work with the all-in-one-package. Closing.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/138", "title": "Include PHPMailer via Composer", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>Okay, this probably will not work with the all-in-one-package. Closing.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/137", "title": "Drop support for PHP 5.3", "status": "closed", "labels": [], "priority": null, "description": ["<p>This is a \"small version\" of #136.</p>", ["<p>would be nice to change it to an \"Allow failure\" instead of just zapping the version.</p>", "<p>Why? Either it officially supports 5.3 (and then it should work, and the maintainers need to put work into keeping it working with 5.3), or 5.3 is not supported anymore, and then the tests are not needed (and also misleading). Or am I misunderstanding you?</p>", "<p>(The point of dropping support is to reduce the needed maintenance work, and to allow for cleaner code.)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/136", "title": "[TASK] Drop support for PHP < 5.6", "status": "closed", "labels": [], "priority": null, "description": ["<p>PHP 5.4 and PHP 5.5 have reached their end of life and thus are not\nsupported anymore (not even with security updates). So PHPList will\nnot support it anymore, either.</p>\n<p>This will also fix the Travis build which has been broken for PHP 5.3.</p>", ["<ol>\n<li>we discussed this on the list, and for now decided to keep 5.4 and up for a while</li>\n<li>changes to PHPMailer should be contributed to the PHPMailer project. </li>\n</ol>", "<p>By the way, the travis build will resolve once I merge dev33 into master, which will be soon.</p>", "<p>@michield So it would be okay to at least drop support for 5.3? Then I'll create a PR for that.</p>", "<p>@michield And would it make sense to include PHPMailer via composer? Then PhpList could always have the latest version.</p>", "<p>I guess we can drop 5.3. The main reason I kept it for now, is that it only fails on some unused files in PHPMailer, so basically phpList still is fine with 5.3</p>\n<p>PHPMailer via composer is a nice idea. Currently we only use composer for the CI stuff.</p>", "<p>Okay, then I'll take care of that. I've created issues #137, #138 and #139 for this. @michield Thanks for the quick feedback!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/135", "title": "[BUGFIX] Use a HTTPS URL for the \"powered by\" images", "status": "closed", "labels": [], "priority": null, "description": ["<p>This will avoid mixed content warnings for installations that run on HTTPS.</p>\n<p>Fixes #133</p>", ["<p>This could do with being tidied-up as there are loads of hard-coded image URLs in addition to those in this PR. Ideally use PHPLIST_POWEREDBY_URLROOT everywhere.</p>", "<p>I propose to have two separate PRs for this: One for the fix (\"to make it work\"), and another for the cleanup (\"to clean it up\"). Would this be okay with you?</p>", "<p>I suggest that you raise this, and also other changes such as the php version, as discussion points first, rather than pull requests. In particular the php version issue has been discussed recently on the developer mailing list (but I don't know what the plan to remove that support is).</p>", "<p>@bramley Thanks for the advice! (In the case of the HTTPS, I had understood the comments at #133 as approval of this idea.)</p>\n<p>Maybe this then needs to be added to the CONTRIBUTING.md, too.</p>\n<p>I'd like to avoid having to subscribe to the developers list if I only want to provide the occasional PR. How much traffic does the list have?</p>", "<p>I've done it a bit differently, https://github.com/phpList/phplist3/commit/cdabbbddb6aea5dbc58a1e037d4be2ec11498760</p>\n<p>You can set PUBLIC_PROTOCOL to force https \nSee https://resources.phplist.com/system/config/public_protocol</p>", "<p>@michield Is there any reason to not always use the HTTPS image?</p>", "<p>ah, well. True. I like the fact that it's pulled from powered.phplist.com. I guess that's not much of a reason ...</p>", "<p>If it doesn't need to be pulled from an external site, the simplest solution would be to integrate the image into the PhpList package and then link that. What do you think?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/134", "title": "Fixes to PHPMailer", "status": "closed", "labels": [], "priority": null, "description": ["<p>````\n--- public_html/lists/admin/PHPMailer/class.phpmaileroauthgoogle.php    Fri Jan 16 08:56:28 1970\n+++ public_html/lists/admin/PHPMailer/class.phpmaileroauthgoogle.php    Fri Jan 16 08:56:28 1970\n@@ -51,10 +51,10 @@</p>\n<pre><code> private function getProvider()\n {\n</code></pre>\n<ul>\n<li>return new League\\OAuth2\\Client\\Provider\\Google([</li>\n<li>return new League\\OAuth2\\Client\\Provider\\Google(Array(\n             'clientId' =&gt; $this-&gt;oauthClientId,\n             'clientSecret' =&gt; $this-&gt;oauthClientSecret</li>\n<li>]);</li>\n<li>\n<p>));\n     }</p>\n<p>private function getGrant()\n@@ -66,7 +66,7 @@\n {\n     $provider = $this-&gt;getProvider();\n     $grant = $this-&gt;getGrant();\n-        return $provider-&gt;getAccessToken($grant, ['refresh_token' =&gt; $this-&gt;oauthRefreshToken]);\n+        return $provider-&gt;getAccessToken($grant, Array('refresh_token' =&gt; $this-&gt;oauthRefreshToken));\n }</p>\n<p>public function getOauth64()\n--- public_html/lists/admin/PHPMailer/get_oauth_token.php   Fri Jan 16 08:56:28 1970\n+++ public_html/lists/admin/PHPMailer/get_oauth_token.php   Fri Jan 16 08:56:28 1970\n@@ -80,24 +80,24 @@</p>\n<pre><code> $params = array_merge(\n     parent::getAuthorizationParameters($options),\n</code></pre>\n<ul>\n<li>array_filter([</li>\n<li>array_filter(Array(\n             'hd'          =&gt; $this-&gt;hostedDomain,\n             'access_type' =&gt; $this-&gt;accessType,</li>\n<li>'scope'       =&gt; $this-&gt;scope,</li>\n<li>'scope'       =&gt; $this-&gt;scope,\n             // if the user is logged in with more than one account ask which one to use for the login!\n             'authuser'    =&gt; '-1'</li>\n<li>])</li>\n<li>))\n     );\n     return $params;\n }</li>\n</ul>\n<p>protected function getDefaultScopes()\n {\n-        return [\n+        return Array(\n         'email',\n         'openid',\n         'profile',\n-        ];\n+        );\n }</p>\n<p>protected function getScopeSeparator()\n````</p>\n</li>\n</ul>\n<p><a href=\"https://github.com/phpList/phplist3/files/739942/PHPMailer_diff.txt\">PHPMailer_diff.txt</a></p>", ["<p>Please provide Pull Requests, not diff files. We cannot accept contributions without a PR.</p>\n<p>Also, if you want to contribute, please sign the <a href=\"https://www.phplist.com/cla\">CLA</a></p>", "<p>Whilst the first file has been <a href=\"https://github.com/phpList/phplist3/commit/eeee75acdcb0127bde150199a2dcac8b8331ce2d#diff-6cc776b1244c5a8a6a9372f503c725e8\">fixed in a later commit</a>, the second one has been removed from the PHPMailer package as used in this project.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/133", "title": "Provide a HTTPS version of powered.phplist.com and use that for images", "status": "closed", "labels": [], "priority": null, "description": ["<p>On the start page of my PHPList page, there is an image:</p>\n<p>http://powered.phplist.com/images/3.0.5/power-phplist.png</p>\n<p>However, as my site is HTTPS, having this HTTP-served image results in mixed-content warnings. There should either be a HTTPS version of the page/image, and the image src should use that, or the image should be served locally, not from the powered.phplist.com server.</p>\n<p>Mixed-content warnings result in the page not being marked as secure by (at least) Chrome: https://arstechnica.com/information-technology/2015/10/chrome-finally-kills-off-the-http-https-mixed-content-warning/</p>\n<p>This is with PHPList 3.0.5.</p>", ["<p>Yes, good point. The HTTPS one is here https://d3u7tsw7cvar0t.cloudfront.net/images/3.0.5/power-phplist.png</p>", "<p>Put this in your config file: define('PHPLIST_POWEREDBY_URLROOT','https://d3u7tsw7cvar0t.cloudfront.net/images');</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/132", "title": "Mantis 18506 - Problem on preferences page with checkbox for text format", "status": "closed", "labels": [], "priority": null, "description": ["<p>Handle the checkbox for text on the preferences page correctly, in a similar way to the subscribe page.</p>", ["<p>This change seems to have been lost as it is not in version 3.3.3 and does not appear in the history of subscribelib2.php\nhttps://github.com/phpList/phplist3/commits/master/public_html/lists/admin/subscribelib2.php</p>", "<p>@bramley Do you think it was reverted during a merge conflict resolution? Have you tried using git blame to check when the lines were last changed?</p>", "<p>How strange. Must be easy to re-patch though</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/131", "title": "Mantis 18503 - Clearer error message on plugins page when url fopen wrappers are not enabled", "status": "closed", "labels": [], "priority": null, "description": ["<p>This change adds an explicit test for the ini setting. From the php documentation ini_get() should return a string of value either '0' or '1' for a boolean option. I have tested on three systems and that appears to be the case.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/130", "title": "Added date formatting to current server time", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/129", "title": "Removed themeswitcher from menu (now moved to Settings page)", "status": "closed", "labels": [], "priority": null, "description": ["<p>Removed themeswitcher from menu (now moved to Settings page)</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/128", "title": "Dev33 remove themeswitcher from menu", "status": "closed", "labels": [], "priority": null, "description": ["<p>Removed themeswitcher from menu (now moved to Settings page)</p>", ["<p>hmm, branch mixup?</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/127", "title": "Message page text tweaks", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/126", "title": "Added number formatting to eventlog page title", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/125", "title": "Added number formatting to process queue ajax log content", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>did you test that ? Won't the %d turn it back into a plain integer?</p>", "<p>It needs to use %s instead of %d\n<code>php -r 'printf(\"Sending in batches of %d messages\\n\", number_format(12345));'\nSending in batches of 12 messages\nphp -r 'printf(\"Sending in batches of %s messages\\n\", number_format(12345));'\nSending in batches of 12,345 messages</code></p>", "<p>Simple mistake, sorry, will fix.</p>", "<p>I believe the issues have been fixed with the new commits; reopening PR</p>", "<p>Hmm, I try to avoid changes like that, because it requires all translators to re-translate those strings. Some languages are not actively translated and would therefore \"regress\". It's tricky. </p>\n<p>I'll do it this time, but we should be careful changing things too much, if it's not really essential, for the above reason.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/124", "title": "Mantis 18294 Allow a plugin to be responsible for sending emails", "status": "closed", "labels": [], "priority": null, "description": ["<p>This is one part of Mantis 18294, to allow a plugin to be responsible for sending emails, instead of smtp, mail() etc.</p>\n<p>A plugin will need to implement an interface to be recognised as being able to send emails. Similarly to the authentication plugin approach, only one plugin, the first found to implement the interface, will be selected.</p>\n<p>The PHPlistmailer class will now use the approach shown in https://github.com/PHPMailer/PHPMailer/pull/110 so that phpmailer calls a specific method based on the value of $Mailer.</p>\n<p>The existing code for Amazon SES and for local spool has also been changed to fit into this approach.</p>", ["<p>nice one !</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/123", "title": "Added column heading and date formatting", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/122", "title": "Introduced translation of all english strings; Added a column heading", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/121", "title": "Added column headings and removed percentage decimals (narrower table\u2026", "status": "closed", "labels": [], "priority": null, "description": ["<p>\u2026s for mobile view)</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/120", "title": "Added date and number formatting", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/119", "title": "Added column heading for sent campaigns", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/118", "title": "Added custom col heading for campaign title column", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/117", "title": "Added number formatting to subscriber total", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/116", "title": "Mantis 18456 - bootstrap theme not using the updated community rss feed code", "status": "closed", "labels": [], "priority": null, "description": ["<p>This has two commits. One to replace the version of onyx-rss by that used in the dressprow theme, which fixes the response-time problem.\nThe second commit moves the bulk of processing that is in the dressprow rssfeed.php file into core phplist. By itself it doesn't do anything, but needs the themes to include the new file in their footer.inc file\nIn dressprow</p>\n<pre><code>    &lt;div id=\"newsfeed\" class=\"menutableright block\"&gt;\n        &lt;h3&gt;&lt;?php echo s('phpList community news'); ?&gt;&lt;/h3&gt;\n        &lt;?php include 'communityfeed.php'; ?&gt;\n    &lt;/div&gt;\n</code></pre>\n<p>In bootstrap</p>\n<pre><code>            &lt;div id=\"newsfeed\" class=\"menutableright block\"&gt;\n                &lt;h3&gt;&lt;span class=\"glyphicon glyphicon-bullhorn text-danger\"&gt;&lt;/span&gt;&lt;?php echo s('phpList community news'); ?&gt;&lt;/h3&gt;\n                &lt;?php include 'communityfeed.php'; ?&gt;\n            &lt;/div&gt;\n</code></pre>\n<p>Then the rssfeed.php and onyx-rss.php files can be deleted from the themes.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/115", "title": "Improved formatting of about page - structured data into table", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/114", "title": "Added announcements list signup to about page", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/113", "title": "Shortened descriptive text above the announcements signup form", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/112", "title": "Campaign statistics page add link and formatting", "status": "closed", "labels": [], "priority": null, "description": ["<ul>\n<li>Linked campaign subject to view campaign page; </li>\n<li>Changed table heading;</li>\n<li>Formatted dates; </li>\n<li>Moved percentage sign</li>\n</ul>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/111", "title": "Campaign stats page link and formatting", "status": "closed", "labels": [], "priority": null, "description": ["<ul>\n<li>Linked campaign subject to view campaign page; </li>\n<li>Changed table heading; </li>\n<li>Formatted dates; </li>\n<li>Moved percentage sign</li>\n</ul>", ["<p>Closed due to errors in git history</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/110", "title": "Updated announcements form", "status": "closed", "labels": [], "priority": null, "description": ["<p>Shortened descriptive text above the announcements signup form</p>", ["<p>Closed due to bad git history</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/109", "title": "Added announcements form to about page", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>closed due to bad git history</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/108", "title": "About page formatting", "status": "closed", "labels": [], "priority": null, "description": ["<p>Improved formatting - structured data into table</p>", ["<p>Closed due to bad git history</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/107", "title": "Updated content, added links", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/106", "title": "Fixed missing space in anchor text", "status": "closed", "labels": [], "priority": null, "description": ["<p>Changes e.g. \"SetupphpList\" to \"Setup phpList\"</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/105", "title": "Amended loading wait time messages for ajax actions", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fixed initial messages which were just temporary</p>", ["<p>As these messages are reusable between pages, it would be good to centralised them rather than duplicate the content as they are used in an increasing number of pages in future.</p>", "<p>Kind of. In some places they say different things, but yes, I'll make the default to be central and  then allow overriding per page</p>", "<p>there's no point repeating the same message, as you did \"Content loading\". That won't be visible. Then we can just as well not have the message. I also don't like \"Thank you for your patience\", particularly not so early in the process.</p>", "<p>ok, I'm redoing this to use one single function with generic texts. Will be much easier</p>", "<p>It's moved here: https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/lib.php#L2155</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/104", "title": "Added intro message to maillog processing email", "status": "closed", "labels": [], "priority": null, "description": ["<p>Also clarified two system mail subjects (\"Maillist Processing info\" -&gt; \"Subscriber list processing log\") and added comments</p>", ["<p>The new subject sounds a bit unclear. This email is a report of processing the queue, so the subject should be something like \"Queue processing report\" regardless of including errors or info.</p>\n<p>Similarly \"The following events occured during the processing of a subscriber list\" should refer to processing the message queue.</p>", "<p>@bramley Good point, I've now updated those messages. Better?</p>", "<p>Sorry to appear to be picky, but elsewhere the process is called \"sending the queue\" or \"sending the message queue\", not \"the email queue\".</p>", "<p>yes, email is a term to avoid, as it can mean both message and address</p>", "<p>How about \"Message queue processing report\"? I feel \"queue processing report\" might be ambiguous (it could refer to an authorisation or installation queue, or something else).</p>", "<p>+1</p>", "<p>Now updated and ready for merge</p>", "<p>there's a typo in procesing</p>", "<p>Fixed - thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/103", "title": "Fixed unnecessary tab", "status": "closed", "labels": [], "priority": null, "description": ["<p>Removed tab character which starts new email notifications</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/102", "title": "Changed search subscribers col heading", "status": "closed", "labels": [], "priority": null, "description": ["<ul>\n<li>Made col title singular;</li>\n<li>Changed table title to use correct i8n label</li>\n</ul>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/101", "title": "Improving members table layout", "status": "closed", "labels": [], "priority": null, "description": ["<ul>\n<li>Switched to single row layout for subscribers; </li>\n<li>Added number formatting to subscriber count; </li>\n<li>Added column headings to icons; </li>\n<li>Added hover titles to icons; </li>\n<li>Changed subscriber email column heading</li>\n</ul>\n<p>The new columns' contents are not centered -- tips on how to center them (e.g. via WebblerListing) appreciated</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/100", "title": "fix javascript error that collapse other themes.", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>ah, sorry, my bad :-)</p>", "<p>Wow that was fast, thanks :)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/99", "title": "Mantis 18419 - Incorrect reporting when downloading no new bounces", "status": "closed", "labels": [], "priority": null, "description": ["<p>Avoid outputting \"download failed\" when there were no bounces to download.</p>", ["<p>Many thanks for the simple solution</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/98", "title": "add html list styles to \" manage bounces \" page", "status": "closed", "labels": [], "priority": null, "description": ["<p>I need this change to manage styles on other themes.</p>\n<p>Before in dressprow:\n<img alt=\"screenshot from 2016-11-18 18-11-03\" src=\"https://cloud.githubusercontent.com/assets/7660111/20447538/3875e70c-adbe-11e6-8efe-2e2625d4a2eb.png\" /></p>\n<p>After in dressprow: \n<img alt=\"screenshot from 2016-11-18 18-10-31\" src=\"https://cloud.githubusercontent.com/assets/7660111/20447551/4a7b3fba-adbe-11e6-9a92-4fc90867ce74.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/97", "title": "Changed bounces for given list column titles", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/96", "title": "Changed user history bounces table headings", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/95", "title": "Added a title for the first column of the table, distinct from table \u2026", "status": "closed", "labels": [], "priority": null, "description": ["<p>\u2026name; Changed the title of the second column to be clearer</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/94", "title": "Removed symlinks which go to non-existent directories on local machines", "status": "closed", "labels": [], "priority": null, "description": ["<p>Do these symlink serve a purpose? On my local machine, their existence means that real copies of themes are deleted each time changes are stashed and code is pulled. Even using git stash save -u does not prevent real theme files from being deleted, as these symlinks always overwrite the directories.</p>", ["<p>Hmm, this will break our dev server. I understand why you want this, but it's a bit tricky to sort out. Easier is to add the symlinks on your local machine to your repos. The reason for the  symlink is to have the repos outside of each other, and not be git modules.</p>", "<p>If the symlinks are only useful to the dev server, perhaps they could be added locally there, and the .gitignore file could have entries added to ignore those files (that would be useful for prevent unintentional adds or commits of themes on local dev copies also). Thoughts?</p>", "<p>Yes, good point. I've added all of \"ui\" to the ignore, so that it can be set locally</p>", "<p>Great - thanks!</p>", "<p>I guess now I should fix this: http://dev.phplist.com/lists/admin/</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/93", "title": "add <label for=\"\"></label> to all form objects.", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://mantis.phplist.org/view.php?id=18348</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/92", "title": "Made the 'All subscribers' row bold and changed label to 'Total (all \u2026", "status": "closed", "labels": [], "priority": null, "description": ["<p>\u2026subscribers)' to clearly separate this row from other lists</p>\n<p>Please check that changing the value of $desc is correct (unclear to me what this is used for in the context of the conditional).</p>", ["<blockquote>\n<p>I think that ucwords() should not be used because it is not language-aware. The translated text through s() should capitalise words where necessary.</p>\n</blockquote>\n<p>Yes this is an ongoing challenge with phpList as the words are used in various contexts and capitalisation typically suffers. We have the issue with menus and titles also -- frequently titles are not capitalised because the string from translation is used directly without formatting. I agree that ucwords() is problematic due to its insensitivity. We could create two versions of each string, one capitalised and one not, but that would create a huge amount of work for translators and massive duplication. Currently ucwords() seems like the best option to me as it will result in the text appearing correctly for the majority of phpList users, though other options would be appreciated.</p>\n<blockquote>\n<p>The new text of \"Total (All subscribers)\" seems a bit clumsy. Is the current text unclear?</p>\n</blockquote>\n<p>The new text should be \"Total (all subscribers)\". Two users were confused today believing they had two lists when in fact there was only one and the row stating the total. \"All subscribers\" could be the name or a list, and \"Total\" could refer to one list in particular, or the list immediately below. Can you think of a clearer option than those three?</p>", "<p>It would be clearer that \"all subscribers\" is not a list if it was moved out of the table, say into the panel heading or even a separate panel. Currently, on one hand it is not a list, but on the other it has the buttons to import, etc. The buttons for delete and edit aren't applicable anyway and should be removed.</p>\n<p>I'd be inclined to display the subscriber totals as a separate panel without any buttons, so it is for information only and then is clearly not a list.</p>", "<blockquote>\n<p>I'd be inclined to display the subscriber totals as a separate panel without any buttons, so it is for information only and then is clearly not a list.</p>\n</blockquote>\n<p>I agree. I'll leave this PR parked for the time being until someone has time to work on the improvement. Reported on Mantis: https://mantis.phplist.org/view.php?id=18415</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/91", "title": "Added missing column title to table column for campaign title", "status": "closed", "labels": [], "priority": null, "description": ["<p>Simply added a missing column title to label the campaign title in the table. It appears it is not possible to have a different table title to the title of the first column using WebblerListing{}, therefore the table has a new title also, as a side-effect.</p>", ["<p>@bramley Perfect, thanks for the reminder. Now added a new commit which sets only the column (not the table) title.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/90", "title": "Linked list title to 'view list members' page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Added link to list title for convenience. Link points to same place, with same link title as the magnifying glass icon on dressprow theme (\"view members of this list\").</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/89", "title": "Tighten simplified linktrack decoding", "status": "closed", "labels": [], "priority": null, "description": ["<p>Reject inputs with leading zero's as they are never used</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/88", "title": "Mantis 18345 - link tracking in test messages", "status": "closed", "labels": [], "priority": null, "description": ["<p>Three commits\n- correct the assignment of $allowPersonalised. It defaulted to false instead of true.\n- remove validation of whether a campaign has been sent, as there is a scenario where a campaign can be edited after being sent and further test emails sent out. These would fail with a 404 error.\n- use a regular expression to simplify the decoding of the linktrack id</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/87", "title": "Mantis 18344 - make header() calls compatible with fast cgi", "status": "closed", "labels": [], "priority": null, "description": ["<p>Issue explicit http status header for 5xx errors for compatibility with fast-cgi</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/86", "title": "Mantis 18341 - MySQL 5.7 changes the default sql mode", "status": "closed", "labels": [], "priority": null, "description": ["<p>Changes for the userclicks page \"Clicks of a subscriber\".</p>\n<p>Correct query to work with ONLY_FULL_GROUP_BY mode.\nDisplay the ids of all messages that use each url.</p>", ["<p>There's a typo in this line, it should be mclicks not mclick</p>\n<p><code>return PageLink2(\"mclick&amp;id={$matches[0]}\", $matches[0]);</code></p>", "<p>I've fixed the typo</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/85", "title": "Mantis 18341 - MySQL 5.7 changes the default sql mode", "status": "closed", "labels": [], "priority": null, "description": ["<p>Changes to some of the queries in uclicks.php and userclicks.php that use group by.</p>\n<p>Corrections to queries in order to work with ONLY_FULL_GROUP_BY\nCorrect sql so that correct totals are returned</p>", ["<p>Thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/84", "title": "Mantis_18133 - Incorrect parameters to mysqli_connect", "status": "closed", "labels": [], "priority": null, "description": ["<p>Use mysqli_init and mysqli_real_connect instead of mysqli_connect.\nAdd config parameters for the port and socket, which are used by mysqli_real_connect.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/83", "title": "Use $id instead of $_GET['id']", "status": "closed", "labels": [], "priority": null, "description": ["<p>$_GET['id']\u00a0is user-controlled input, since it is not sanitized and printed directly this leads to a reflected XSS vulnerability.</p>\n<p>$id itself is fine since the code above guarantees that it is an integer.</p>\n<p>Fixes https://hackerone.com/reports/153799, this has been reported to the PHPList developers on July 28th. Since no further updates have been coming I decided to create a patch myself.</p>", ["<p>Thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/82", "title": "Mantis 18276 - Improve send rate when using AMAZON SES", "status": "closed", "labels": [], "priority": null, "description": ["<p>This change re-uses the curl handle and sets keep alive headers to improve the sending rate when using amazon ses.\nI don't know whether the handle can be re-used indefinitely so the handle is closed if curl_exec() returns an error. A new handle will then be created on the next call.</p>\n<p>The change also removes redundant and commented-out code.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/81", "title": "Added missing word fixing apparent typo", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fixes: https://mantis.phplist.org/view.php?id=18253</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/80", "title": "Mantis 18198 - copy a message fails when STRICT_TRANS_TABLES is enabled", "status": "closed", "labels": [], "priority": null, "description": ["<p>This change reorders the processing of copying a message so that only those columns that do not use the default value and are not explicitly set are copied.</p>\n<p>So the various count columns, ashtml, astext etc, take their default value of 0, and date fields including \"sent\", which was the original problem, take their default value of null.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/79", "title": "Fix check bounce rules not matching headers", "status": "closed", "labels": [], "priority": null, "description": ["<p>Headers are parsed by bounce rules, but not when you check bounces, see https://mantis.phplist.org/view.php?id=16909 for original change.</p>", ["<p>Already done: https://github.com/phpList/phplist3/commit/c72a35ec0ddbc531debb8053d2629b840e7cb1d7</p>", "<p>This is referring to check bounces, not process bounces. The commit to which you referred appears to be only for process bounces.</p>", "<p>ah, ok, thanks</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/78", "title": "add * to all types of custom attributes required", "status": "closed", "labels": [], "priority": null, "description": ["<p>Not required:\n<img alt=\"screenshot from 2016-07-15 14 09 21\" src=\"https://cloud.githubusercontent.com/assets/7660111/16882663/9af38758-4a96-11e6-915d-761d825af2d3.png\" /></p>\n<p>Required:\n<img alt=\"screenshot from 2016-07-15 13 57 06\" src=\"https://cloud.githubusercontent.com/assets/7660111/16882675/a44ed082-4a96-11e6-8c0b-01c512c712c5.png\" /></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/77", "title": "Capitalised language names; Switched Czech to use local language name", "status": "closed", "labels": [], "priority": null, "description": ["<p>Improving language names as they appear in the phpList interface. Please check that this patch will not conflict with Pootle localisation automation / integration before merging.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/76", "title": "Added number formatting to total subscriber count", "status": "closed", "labels": [], "priority": null, "description": ["<p>Added simple number formatting to total subscriber count</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/75", "title": "Add * to subscribe page required fields -  https://mantis.phplist.org/view.php?id=18206", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/74", "title": "Mantis 18200 - Provide link to plugin's settings", "status": "closed", "labels": [], "priority": null, "description": ["<p>On the Manage Plugins page provide a link to the plugin's configuration settings, only when a plugin is enabled and has configuration settings.</p>", ["<p>Whoops, I didn't realise that this PR had not been merged.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/73", "title": "signature: remove table added to fix outlook bug, because doesnt work\u2026", "status": "closed", "labels": [], "priority": null, "description": ["<p>\u2026ed. Remove percentage width in image because the max-width is not supported by outlook.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/72", "title": "signature: remove table added for outlook because doesnt worked. And \u2026", "status": "closed", "labels": [], "priority": null, "description": ["<p>\u2026remove adaptative width (percentage) in image because there is no way to do this without the bad result in outlook. So image must have always same with, and just will be centered on screen.</p>\n<p>https://mantis.phplist.org/view.php?id=18178</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/71", "title": "Respect table prefix to create user selection", "status": "closed", "labels": [], "priority": null, "description": ["<p>The table name in the <code>userSelect</code> function was hardcoded to the <code>user</code> table.\nThis results in a database error when a table prefix is define.</p>", ["<p>Nice one. Strange that hasn't been found before. </p>", "<p>There is another one: <code>function getEveryoneGroupID()</code> in <code>userlib.php</code>.\nIt's using the <code>group</code> table which not exists in my installation and there is no reference to this function in the whole project... Probably an old function that can be removed?</p>", "<p>yes, groups are part of the CMS that phpList was written as a module of. The CMS no longer exists.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/70", "title": "Added comma separator between statistics", "status": "closed", "labels": [], "priority": null, "description": ["<p>Changed \"Subscriber lists\" page list member stats formatting from:</p>\n<p>List name 1 (2 0)</p>\n<p>To:</p>\n<p>List name 1 (2, 0)</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/69", "title": "fixing outlook problem with poweredby image size", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://discuss.phplist.org/t/powered-by-image-too-large-version-3-2-5/1859</p>\n<p>Problem seems that outlook doesnt support max-width attribute. Puting the image inside a td with a width of 90px should fix this.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/68", "title": "processqueue currently uses sleep() function, why not use meta refresh instead?", "status": "closed", "labels": [], "priority": null, "description": ["<p>php sleep() function keeps the script active and so any simultaneous access to the website from the same computer will likely be very slow. A meta refresh or perhaps another type of scripting for the delay would behave as idle and not remain active, freeing resources.\nSo header would contain something like;\n<code>&lt;META HTTP-EQUIV=\"Refresh\" &lt;?php echo\"CONTENT=\\\"$delay; URL=$site_url/lists/admin/?page=processqueue\\\"; ?&gt;\"&gt;</code></p>", ["<p>can you point to the code location that you are referring to?</p>", "<p>admin/action/processqueue.php line 299\n<code>sleep($delaytime);</code></p>", "<p>the reason it uses sleep is that it may not be in a browser context. In many cases it runs from commandline. https://www.phplist.org/manual/ch035_methods-of-sending-browser-cron-command-line.xhtml</p>", "<p>That line only runs when you are not calling from command line, see the condition on the prior line\n<code>if (empty($GLOBALS['inRemoteCall']) &amp;&amp; empty($GLOBALS['commandline'])) {</code>\nSo I guess I should have been more specific when I raised this issue, but it is still valid. Lots of people complain, particularly on laptops that sleep() will unnecessarily burden the processor, it also (usually) prevents or slows to a crawl any other browsing you are doing on the same computer and browser on that server at the same time.</p>", "<p>https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/actions/processqueue.php#L298</p>\n<p>Ok, true. Fair enough, that can be addressed</p>", "<p>Proposed an alternative approach, using javascript at https://discuss.phplist.org/t/during-browser-send-processqueue-use-javasript-timeout-function-instead-of-php-sleep/2642</p>", "<p>best is to send a PR.</p>", "<p>Thanks, see https://github.com/phpList/phplist3/pull/157</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/67", "title": "Mantis 18124 - Admin attribute placeholder not removed", "status": "closed", "labels": [], "priority": null, "description": ["<p>Ensure admin attribute placeholders are always replaced.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/66", "title": "Made count panel numbers number formatted", "status": "closed", "labels": [], "priority": null, "description": ["", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/65", "title": "Mantis 18132 - System message urls not converted to links correctly", "status": "closed", "labels": [], "priority": null, "description": ["<p>This change corrects the conversion of urls to links.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/64", "title": "Fix Reply-To header support", "status": "closed", "labels": [], "priority": null, "description": ["<p>While there is a function in the GUI to define a Reply-To address it simply is never used, as can be seen in the code path <code>$reply_to</code> is unused and the resulting mails do not contain any header.</p>\n<p>This is not the most elegant fix but does it's work.</p>\n<p>cc @jospoortvliet To what lengths I go for you :-)\ncc @samtuke Howdy \ud83d\ude09 </p>", ["<p>Sounds like a good catch @LukasReschke - thanks! Will get this reviewed shortly.</p>", "<p>At this point in the code $reply_to is always set, so no need for isset().</p>\n<p>But the config value that is used, message_replyto_address at line 478, seems to be intended for system messages not for campaigns as it is in the Transactional settings group not the Campaign settings group on the Settings page. If we want that to be used for campaigns then probably it should be moved or a new value created.</p>", "<p>I agree, this may have undesired effects. If it is an email that is system wide, and it is included in the campaigns then there are many situations where this is not applicable. We would need a Reply-To input field for campaigns and allow changing it.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/63", "title": "performance patch for phplist_usermessage containing millions of rows\u2026", "status": "closed", "labels": [], "priority": null, "description": ["<p>\u2026 http://dba.stackexchange.com/questions/7806/copying-to-tmp-table-extremely-slow</p>\n<p>as explained in phplist-developers mailing list</p>", ["<p>@KenjiBrown I have reworked the sql to avoid the joining of tables. Please can you try this replacement query? It gives the same results for me, but I'm not able to test any improvement in performance with large number rows in the phplist_usermessage table.\n Replace lines 72-76 of the original statsoverview.php</p>\n<p><code>$query = sprintf('\n        SELECT msg.owner,\n        msg.id AS messageid,\n        (\n            SELECT COUNT(viewed)\n            FROM %1$s\n            WHERE messageid = msg.id AND status = \"sent\"\n        ) AS views,\n        (\n            SELECT COUNT(*)\n            FROM %1$s\n            WHERE messageid = msg.id AND status = \"sent\"\n        ) AS total,\n        subject,\n        date_format(sent,\"%%e %%b %%Y\") AS sent,\n        bouncecount AS bounced\n        FROM %2$s msg\n        WHERE EXISTS (\n            SELECT *\n            FROM %1$s\n            WHERE msg.id = messageid AND status = \"sent\"\n        )\n        %3$s %4$s %5$s\n        ORDER BY msg.entered DESC\n        ',\n        $GLOBALS['tables']['usermessage'],\n        $GLOBALS['tables']['message'],\n        $subselect,\n        $timerange,\n        $ownership\n    );</code></p>", "<p>I will merge this to try. I have a system with 32million entries. That will be useful to see if it improves.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/62", "title": "Let's move to Bootstrap & Better UI", "status": "closed", "labels": [], "priority": null, "description": ["<p>How about to use Bootstrap and make UI more friendly ? Personally, I am willing to participate on rebuilding if there is a will. What do you guys think ?</p>\n<p>Let me know... Thanks</p>", ["<p>Sure, you can help out on https://github.com/phpList/phplist-ui-bootstrap</p>", "<p>@petervavro The new theme is available with phpList 3.3-RC4 available on Sourceforge: https://sourceforge.net/projects/phplist/files/phplist-development/</p>\n<p>We'd welcome your feedback and contributions!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/61", "title": "Mantis 17918 - plugins control authentication", "status": "closed", "labels": [], "priority": null, "description": ["<p>These changes fix the problem of admins being read-only on the admins page, and also (I think) simplifies the selection of the admin authentication class.</p>\n<p>admins.php - correct the test of whether authentication is being done externally</p>\n<p>phpListAdminAuthentication.php - change to not be a plugin, just a class.</p>\n<p>pluginlib.php - sets $authenticationplugin only for a \"real\" plugin. Remove code that handles phpListAdminAuthentication as a plugin.</p>\n<p>index.php - now $authenticationplugin is set if a plugin wants to handle authentication, otherwise fallback to the internal class. Use the already-existing instance of the plugin class instead of creating a new one.</p>", ["<p>Thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/60", "title": "SQLite?", "status": "closed", "labels": [], "priority": null, "description": ["<p>Has anyone tried to make this project use SQLite rather than MySQL?</p>\n<p>(And/or, is that a goal of the phplist 4 rewrite?)</p>", ["<p>I guess with PL4 we should be storage neutral/unaware</p>", "<p>Sounds like nobody has tried doing that.</p>", "<p>One of the goals of the phpList 4 rewrite indeed is to have it database-agnostic, i.e., also compatible with SQLite.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/59", "title": "Added new mince configuration file for use with mince minifier", "status": "closed", "labels": [], "priority": null, "description": ["<p>This config file should allow anyone to minify css when the mince command is executed from within the ui directory. All paths are relative. Tested locally successfully.</p>", ["<p>sorry there seems to be duplication in this file</p>", "<p>@samtuke What is the purpose of this new file, as there is already a .minceconf file in the admin directory?</p>", "<p>Yes, I agree. In fact, I'm suspicious this is the cause of the Minified CSS issue. Could that be?</p>", "<p>@bramley I wasn't aware there was already a .minceconf file. If the other one works well then mine is redundant.</p>", "<p>already there</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/58", "title": "Mantis 18088 - Added permission checks for resending campaigns", "status": "closed", "labels": [], "priority": null, "description": ["<p>When resending campaigns, owner permissions were ignored for 'all' and 'allactive' list settings. The queries were changed to respect the constraints.</p>", ["<p>Thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/57", "title": "Add mail processor which inlines CSS before sending", "status": "closed", "labels": [], "priority": null, "description": ["<p>Any meaningful marketing mail sent today is basically forced to inline CSS in order to deliver the expected view experience in the vast variety of mail clients.</p>\n<p>Currently an editor can create a new newsletter in the wysiwyg editor (eg TinyMCE). Even if the template itself already uses proper inlined CSS, the content created by the editor still does not get the inlined CSS of course. (eg headings, hr, etc)</p>\n<p>I would really appreciate if you could include such a functionality. Some possible PHP implementations (looking rather up to date) for inlining are:\n- https://github.com/jjriv/emogrifier\n- https://github.com/christiaan/InlineStyle\n- https://github.com/tijsverkoyen/CssToInlineStyles/</p>\n<p>Looking forward to your feedback on that matter.\nThanks</p>", ["<p>You might want to look at the Content Areas plugin, which supports inlining CSS https://resources.phplist.com/plugin/contentareas#inline_css_styles. The inlining can be done by Premailer https://github.com/crossjoin/PreMailer as well as emogrifier.</p>", "<p>@bramley Thanks for the hint. I'm fine with a plugin. Will check that one out.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/56", "title": "[TASK] Make all .htaccess files Apache 2.4 compatible", "status": "closed", "labels": [], "priority": null, "description": ["<p>mod_access_compat may not be loaded in Apache 2.4, hence\nthe new access control directives must be used.</p>", ["<p>thanks!</p>", "<p>This change to .htaccess caused a problem with the CKEditor plugin, where I had added a .htaccess file to the KCFinder directory to allow its .php files to be accessed. It seems that the new style of directives and the old style cannot both be used, so the php files were not accessible using 3.2.5 RC1.\nI have now changed the .htaccess file and it works with the 3.2.5 RC version, \nhttps://github.com/bramley/phplist-plugin-ckeditor/commit/70a29f614e8f39c10bd567b2e91dbc31050a19db</p>\n<p>@michield please can you ensure that phplist includes the latest version of the plugin (2.1.2)? You might be doing that anyway but I just want to ensure it happens.</p>", "<p>@bramley That could indeed be the case, I never checked that. But hey, version 2.4.x is there since 2012, so it's ok to slowly adjust to the new standards.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/55", "title": "Mantis 18011 - Change \"Messages\" to \"Message\" in user history table", "status": "closed", "labels": [], "priority": null, "description": ["<p>This change adds a field to the WebblerListing class for the heading of the left most column (the element heading). This allows different text to be used for the panel title and the column heading, which currently are the same.</p>\n<p>There are also changes to the userhistory page to use the new field.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/54", "title": "try to make poweredby logo adjustable to screen size.", "status": "closed", "labels": [], "priority": null, "description": ["<p>I could't  test it on my local copy. I want to see it in dev site to access from different screens</p>", ["<p>github did not allow me to merge, but I've done it manually.</p>", "<p>This change seems to have caused  a problem when the image is displayed in Outlook.</p>\n<p>https://discuss.phplist.org/t/powered-by-image-too-large-version-3-2-5/1859</p>", "<p>i will check it</p>", "<p>This should fix that:\nhttps://github.com/phpList/phplist3/pull/69/commits/8cb1bbbebef57c5f50d0c10807ecf049dabc6c3b</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/53", "title": "Mantis 18066 - Not able to install an earlier release of a plugin", "status": "closed", "labels": [], "priority": null, "description": ["<p>This change has two commits. The first makes the indentation consistent. The second change allows any characters to be used in the branch name. As the branch name is not actually used then this should not be a problem. There are also a couple of simplification changes to the code layout.</p>", ["<p>Merged manually</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/52", "title": "Added new table to domain stats page & merged columns", "status": "closed", "labels": [], "priority": null, "description": ["<p>Added table to domain stats page: Domains with most unconfirmed subscribers (descending order).</p>\n<p>Also changed format of columns in other tables to merge the percentage into the preceeding column to save space. Bold formatting added to primary statistic, with percentage in brackets.</p>\n<p>Note: This was completed to meet a deadline, please check stats. Performance of this page is overall quite slow and this merge makes it slower still. Recommend rewriting sql queries in future to execute a single sql call at script start and reuse all stats via PHP processing for all html tables (rather than making multiple separate queries).</p>", ["<p>Updated the PR to filter out domains which have no unconfirmed subscribers</p>", "<p>Fixed issue resulting from use of mysqli which was causing fatal error on some servers</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/51", "title": "Mantis 17893 Some issues with filtering subscribers when sending", "status": "closed", "labels": [], "priority": null, "description": ["<p>This PR covers the part of the Mantis issue concerning the batch limit being compared with the number of subscribers processed instead of the number of subscribers who have actually been sent an email. Currently sending to  a subset of subscribers, for example using the Segment plugin, takes the same length of time as sending to the full list, apart from any throttle. A comment regarding the throttle also being applied was wrong.</p>\n<p>There are three commits. The first and last consist only of making the indentation consistent, the real changes are in the second commit. The approach is to use the number of emails sent for a message when testing whether the batch limit has been reached. If a subscriber is rejected by a plugin then it does not count towards the batch limit, but does count towards the number processed.</p>\n<p>I removed a chunk of code that set a LIMIT (based on the batch size) for the user query, because the main loop has to process an open-ended number of users. The other changes are to use the appropriate counter where needed, and moving some code to the end of the loop.</p>", ["<p>I think we can try this out on the main code. I checked and there's nothing that might stop things from running, so it should be fine.</p>", "<p>That's great. I should have mentioned the testing that I have done -\n- processing a single ready campaign\n- processing two ready campaigns\n- processing two ready campaigns with PROCESSCAMPAIGNS_PARALLEL enabled</p>\n<p>for each of these the Segment Plugin rejected some subscribers and I verified that the batch size was being applied.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/50", "title": "Mantis 17754 - subscriber list information should be maintained when they unsubscribe", "status": "closed", "labels": [], "priority": null, "description": ["<p>One effect of the change to keep list membership when unsubscribing is that the \"confirmed\" counts on the Lists page include those who are also blacklisted. I think it is clearer if the \"confirmed\" count is the number of people who would be sent a campaign.</p>\n<p>This change displays the number blacklisted as a third count for each list, and the confirmed and unconfirmed counts reflect those who are not also blacklisted.</p>", ["<p>Hmm, I think the UI of that is a bit confusing. It wasn't that great already. We should rethink that. But I guess functionality wise it's better.</p>\n<p><img alt=\"membercount\" src=\"https://cloud.githubusercontent.com/assets/569843/13746625/1e681b50-e9ec-11e5-8667-9de7e4c2447d.png\" /></p>", "<p>The current approach looks ok to me except for the green figure not actually being the number of people who would be sent a campaign. If that was fixed then the red figure would be \"unconfirmed\" or \"blacklisted\". The hover text would probably need to change, as would the button on the page showing the list members.</p>\n<p>Alternatively display the unconfirmed figure and the blacklisted figure together in red within brackets\ne.g. 42735 (2, 216) or 1234 (12, 0)</p>\n<p>Somewhere I saw a suggestion of using another word, such as \"active\" to mean confirmed and not blacklisted.</p>", "<p>How about putting the unconfirmed total in Orange, so the numbers are Green, Orange, and Red?</p>\n<p>I like @bramley's suggestion of changing the green number to reflect the total subscribers who are likely recipients (rather than total members of the list). Thoughts @michield ?</p>", "<p>In the past when a subscriber was blacklisted the were automatically removed from lists they were subscribed to. However this was changed in recent months. Before this change the number in green did not include blacklisted subscribers. After the change it does include blacklisted subscribers, who will not in fact receive the message.</p>\n<p>@bramley suggested we merge the 2nd and 3rd numbers into the same parenthesis, e.g. 5000 (100, 200)</p>", "<p>The latest pull request shows the unconfirmed and blacklisted counts in one set of brackets. The blacklisted count is coloured using the css class blacklistedCount, which needs to be defined with an appropriate colour value in the ui file dressprow/css/style.css similarly to the class unconfirmedCount</p>\n<p><code>.unconfirmedCount                                       { color: #C55}</code></p>", "<p>CSS has been added as pull request https://github.com/phpList/phplist-ui-dressprow/pull/20</p>", "<p>I'm not sure that the use of different colours for unconfirmed and for blacklisted looks good. Also I didn't separate the figures with a comma because that is now used as the thousands separator and displaying something like 123,456 followed immediately by a comma looked confusing.</p>\n<p><img alt=\"screenshot from 2016-04-27 08 23 21\" src=\"https://cloud.githubusercontent.com/assets/3147688/14844729/71835c46-0c51-11e6-8c81-40e29cfe6166.png\" /></p>\n<p>Any other ideas on how to format the figures? Perhaps inhibit the display of the figures in brackets if both are 0 (which will I guess often be the case), so that it looks similar to the result in 3.2.4.</p>\n<p>Or revert to displaying only one figure in brackets, the count of subscribers who are either unconfirmed or blacklisted (including both), so that the green figure is the number who will be sent a campaign.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/49", "title": "Add plugin hook before login page for SSO (#0018027)", "status": "closed", "labels": [], "priority": null, "description": ["<p>As discuss in previous pull request https://github.com/phpList/phplist3/pull/25, this one is a proposal of implementation of an hook before login page to handle SSO usage (see <a href=\"https://mantis.phplist.org/view.php?id=18027\">#0018027</a>).</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/48", "title": "Update bouncerule.php", "status": "closed", "labels": [], "priority": null, "description": ["<p>Enlarges input for regex by splitting single row lable and box into two rows and doubling the width of visible input.\nAddresses Mantis Issue ID: 0018022</p>", ["<p>@NYChrisV could you sign the <a href=\"https://www.phplist.com/cla\">CLA</a> so I can merge this? Thanks</p>", "<p>Signed</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/47", "title": "Fix two typos and less strict image matching", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fix two typos and less strict image matching</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/46", "title": "Rewritten EMBEDEXTERNALIMAGES support", "status": "closed", "labels": [], "priority": null, "description": ["<p>Added two new functions <code>external_image_exists</code> &amp; <code>get_external_image</code> and moved <code>EMBEDEXTERNALIMAGES</code> code from <code>filesystem_image_exists</code> &amp; <code>get_filesystem_image</code>.\nAdded defines <code>EXTERNALIMAGE_MAXAGE</code>, <code>EXTERNALIMAGE_TIMEOUT</code> &amp; <code>EXTERNALIMAGE_MAXSIZE</code>.\nAdded <code>EMBEDEXTERNALIMAGES</code> code to <code>find_html_images</code> for more specific external image matching allowing for query strings and path info.</p>", ["<p>would be good to try this out. Will try to find some time.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/45", "title": "Mantis 16707 - admin attribute placeholders", "status": "closed", "labels": [], "priority": null, "description": ["<p>I hadn't realised that my previous change replaced the placeholders only in the message content, not in the template. Using admin attribute placeholders in the template seems preferable.</p>\n<p>This change caches the admin attribute values just once then replaces them in the combined message/template alongside other placeholder replacements.</p>\n<p>It also adds placeholders for the message owner, e.g. [OWNER.Name], which also seems useful and perhaps a bit more intuitive than the list owner.</p>", ["<p>we should write some docs on this</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/44", "title": "Add option to embed images from external domains", "status": "closed", "labels": [], "priority": null, "description": ["<p>Mantis id 0017997</p>", ["<p>While browsing through the Scrutinizer output I noticed a typo on line 18: $destionationemail should be $destinationemail. The rest of the file uses the correct $destinationemail.</p>", "<p>Great, as you put a flag around it \"EMBEDEXTERNALIMAGES\", I will merge and then we can take it from there. I will probably leave it off for the time being and we can see if we can get some feedback from people.</p>", "<p>https://resources.phplist.com/system/config/embedexternalimages</p>", "<p>Great. When it's ready for production use it probably could use some extra configuration parameters and possibly better default values for the following:\n- Max age for cached file (currently 1 day)\n- Max size for cached file (currently 1 MB)</p>\n<p>Also note that in a worst case scenario this could pause sending of the first message for 30 seconds per external image since that's what the HTTP timeout values are set to. Errors are cached so only the first message would be affected.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/43", "title": "Mantis 16707 - admin attribute placeholders", "status": "closed", "labels": [], "priority": null, "description": ["<p>Replace admin attribute placeholders when all lists are owned by the same admin.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/42", "title": "Mantis 16707 - admin attribute placeholders", "status": "closed", "labels": [], "priority": null, "description": ["<p>Replace admin attribute placeholders when all lists are owned by the same admin.\nSee https://mantis.phplist.org/view.php?id=16707</p>", ["<p>By mistake this has included a different reference to the dressprow subproject. That should be ignored.</p>", "<p>can you change the PR and remove the dressprow reference?</p>", "<p>I didn't really understand how to update the subproject so I have deleted that branch, which seems to have removed the pull request, and created a new one.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/41", "title": "Respect SHOW_UNSUBSCRIBELINK in all views", "status": "closed", "labels": [], "priority": null, "description": ["<p><code>SHOW_UNSUBSCRIBELINK</code> was not respected for some views. I've added the check where it was missing</p>", ["<p>great, nice find, thanks</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/40", "title": "Fixed documentation of 'TEST' definition (because true !== 1)", "status": "closed", "labels": [], "priority": null, "description": ["<p>Thanks to issue report by Nigel Morris-Cotterill, via Anna Morris.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/39", "title": "Add config entry to enable smtp debug for test messages", "status": "closed", "labels": [], "priority": null, "description": ["<p>Enable smtp debug in phpmailer to help in diagnosing connection problems. \nOnly for test messages. Format output as html so that it is displayed reasonably.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/38", "title": "Bad html in file send_core.php", "status": "closed", "labels": [], "priority": null, "description": ["<p>At line 400 of admin/send_core.php some bad html. I think that it meant to be either <code>&lt;br/&gt;</code> or <code>&lt;hr/&gt;</code>.</p>\n<p><code>if ($sendtest) {\n      $sendtestresult = '&lt;r/&gt;';\n      if (empty($_SESSION['lasttestsent'])) {\n          $_SESSION['lasttestsent'] = 0;\n      }</code></p>", ["<p>https://github.com/phpList/phplist3/commit/ad5a1b6114e4d0581862acf7a6ba127dd996bea1</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/37", "title": "Styleci", "status": "closed", "labels": [], "priority": null, "description": ["<p>Apply style fixes</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/36", "title": "Applied fixes from StyleCI", "status": "closed", "labels": [], "priority": null, "description": ["<p>This pull request applies code style fixes from an analysis carried out by <a href=\"https://styleci.io\">StyleCI</a>.</p>\n<hr />\n<p>For more information, click <a href=\"https://styleci.io/analyses/XW3E5X\">here</a>.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/35", "title": "how to use p=asubscribe", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://github.com/phpList/phplist3/blob/master/public_html/lists/index.php#L257</p>\n<p>any documentation on how to use it.</p>\n<p>it always return FAIL for me.</p>\n<p>type: POST\nurl: /my-website/lists/?p=asubscribe\nand data: {email: email@example.com, list{\"3\": \"signup\"}}</p>", ["<p>Yes, that's undocumented. It is discussed in <a href=\"https://mantis.phplist.org/view.php?id=17283\">mantis issue 17283</a></p>", "<p>It seems there is no activity on this issue. I am closing it.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/34", "title": "Ajax subscribe 'htmlemail' entry is hardcoded.", "status": "closed", "labels": [], "priority": null, "description": ["<p>https://github.com/phpList/phplist3/blob/master/public_html/lists/index.php#L265</p>", ["<p>yes, doesn't everyone want it to be html nowadays? </p>", "<p>@michield if everyone wanted html, why would <strong>i</strong> be querying?  :)</p>", "<p>sure. Feel free to post a PR. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/33", "title": "feature: [LOGO] placeholder", "status": "closed", "labels": [], "priority": null, "description": ["<p>A new settings value: organisation logo\nThis can hold an image file and be used in templates</p>\n<p>[LOGO] - image up to 500\n[LOGO:XX] - image up to XX wide or high</p>\n<p>requires PHP5.4 or up.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/32", "title": "Attempt to resolve StyleCI issue", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>Hmmmm.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/31", "title": "StyleCI / PHP-CS-Fixer", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fixes #29.</p>\n<p>I added Symfony preset by default + some fixers.</p>\n<p>Feel free to tell me if you want to change that.</p>\n<p>I also fix CS on a separated commit. If you want to do it yourself, I can revert it.</p>\n<p>For StyleCI, just login with github at https://styleci.io/ and enable your repository.</p>\n<p>I'll work on phplist 4 once this PR will be merged.</p>\n<p>Regards.</p>", ["<p>Hmm, I can't really accept a PR this big. That will make it impossible to retrace activity.</p>\n<p>Can you just do a PR with the files for the settings and then how to run it on the code? Then we can gradually apply it over time.</p>", "<p>@michield Done. </p>\n<p>Just run <code>php-cs-fixer fix -v .</code> to get files corrected. More info: http://cs.sensiolabs.org/</p>\n<p>Don't forget to activate StyleCI before merge this PR. :-)</p>\n<p>Oh, and I also optimized your composer.json file BTW. Testing deps should be on <code>require-dev</code> section, not <code>require</code>.</p>", "<p>That's great thanks. I have looked into the cs-fixer myself before, but it's great to have it all configured and ready to go.\nJust to make it easier to merge the PR, could you sign the <a href=\"https://www.phplist.com/cla\">CLA</a> ? </p>\n<p>Thanks</p>", "<blockquote>\n<p>Awesome, you have signed the phpList CLA\nYour github login: Soullivaneuh\nYour name: Sullivan SENECHAL\nDate signed: 2015-10-07</p>\n</blockquote>\n<p>But would not be simpler to put a LICENSE file one the repository? This is the first time I'm asked to do this kind of think.</p>", "<p>Great, thanks. Yes, the license is here: <a href=\"https://github.com/phpList/phplist3/blob/master/COPYING\">COPYING</a> The CLA is to allow more centralised protection of that.</p>", "<p>Hmm, this StyleCI site is failing. Did I merge too early?</p>\n<p>Broken File - public_html/lists/admin/send_core.php</p>\n<p>PHP Parse error: syntax error, unexpected '$messagedata' (T_VARIABLE) in tmpotA1JN on line 197.</p>", "<blockquote>\n<p>Hmm, this StyleCI site is failing. Did I merge too early?</p>\n</blockquote>\n<p>Did you run cs-fixer and pushed after that?</p>\n<p>Can I have the StyleCI link please?</p>", "<p>no didn't run it. Will try on a branch.</p>\n<p>What's the  \"StyleCI like\" ?</p>", "<p>Sorry, I wanted to say \"link\". :-)</p>", "<blockquote>\n<p>no didn't run it. Will try on a branch.</p>\n</blockquote>\n<p>That's why StyleCI does not like your coding style. :-)</p>", "<p>You mean <a href=\"https://styleci.io/repos/32042787\">this link?</a></p>\n<p>How do I exclude paths in the cs-fixer? It doesn't make sense to include PHPMailer and other 3rd party stuff.</p>", "<p>For the parse error, it seems your php file is broken.</p>\n<blockquote>\n<p>How do I exclude paths in the cs-fixer?</p>\n</blockquote>\n<p>On your <code>.styleci.yml</code>:</p>\n<p><code>yaml\nfinder:\n  exclude:\n    - \"somedir\"</code></p>\n<p>See https://styleci.readme.io/docs/configuration</p>", "<blockquote>\n<p>it seems your php file is broken</p>\n</blockquote>\n<p>https://dev.phplist.com/lists/admin/ always runs the latest code, all is fine. It looks like the StyleCI checkout of the code has failed.</p>\n<p>Thanks for the pointer to the config</p>", "<blockquote>\n<blockquote>\n<p>it seems your php file is broken</p>\n</blockquote>\n<p>https://dev.phplist.com/lists/admin/ always runs the latest code, all is fine. It looks like the StyleCI &gt; &gt; &gt; checkout of the code has failed.</p>\n</blockquote>\n<p>@GrahamCampbell what do you think about this? https://styleci.io/analyses/qvRmxq</p>", "<p>@michield Have you tried to run cs-fixer and push modifications on your branch to see StyleCI reaction?</p>", "<p>No need to run php-cs-fixer.</p>", "<p>StyleCI can send you a PR with the fixes. Just click the create fix PR button.</p>", "<p>You seem to have disabled StyleCI on the master branch? You'll need to enable it if you want it to fix your code for you.</p>", "<p>Well, I'd rather not, just verbatim like that. </p>", "<p>Not sure what you mean? No point in having StyleCI if you don't want to use it?</p>", "<p>I'm evaluating, and the parse error doesn't contribute to my confidence</p>", "<p>What parse error?</p>", "<p>That error normally happens when StyleCI checks your own code and finds you already have a syntax error in there before it trys to change anything.</p>", "<p>there is no syntax error there, that's my point</p>", "<p>Well there is no parse error then?</p>", "<p>Can I see please?</p>", "<p>Do you have an analysis ID so I can look it up on our logs?</p>", "<p>read back in this thread, it's all there. </p>", "<p>I've just kicked off a new analysis on our system so I can see what happens for myself.</p>", "<p>I guess the issue here is you're trying to analyse external libraries too, and they need excluding.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/30", "title": "Mantis 17798 - Plugin remains enabled after dependency is not met", "status": "closed", "labels": [], "priority": null, "description": ["<p>When disabling a plugin also disable other plugins that now fail their enabling test, presumably because they have a dependency on the newly-disabled plugin.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/29", "title": "Coding Style conventions", "status": "closed", "labels": [], "priority": null, "description": ["<p>Do you follow some Coding Style conventions?</p>\n<p>I would recommend to follow at least PSR-1/2 and maybe <a href=\"http://symfony.com/doc/current/contributing/code/standards.html\">Symfony</a> conventions.</p>\n<p>I can propose some automatic tools to help with it.</p>\n<p>Tell me if you are interested. :+1: </p>", ["<p>Hmm, yes. That has always been a \"would be nice\" kind of thing. There used to be some style, but it's in general all over the place.</p>\n<p>I'm interested in your tools. </p>", "<p>Okay, shall I propose them on both v3 and v4?</p>", "<p>You mean as a PR? Well, then only v4. On v3, I'd prefer you give me the tools, and I can check myself. Also phpStorm gave me a license, and I think they have it all built in as well. Haven't checked that yet.</p>", "<p>Wells, those tools required some configurations files and subscriptions of your repositories... would be faster with PR proposition.</p>", "<p>Ah, ok, sure, but a full PR on the code after using the tools will be a massive change. That may not be sensible at this stage. I'd prefer to handle that myself.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/28", "title": "Soporte para im\u00e1genes  base64 en l\u00ednea", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>thanks, can you explain what you are trying to achieve? </p>\n<p>Also, if you have a moment, can you sign the <a href=\"https://www.phplist.com/cla\">CLA</a>?\nthat would make it easier to merge the PR. </p>", "<p>It would also be good to open a related Mantis issue https://mantis.phplist.org</p>", "<p>Thanks for signing the CLA. Can you explain what your PR does and why? Thanks</p>", "<p>By the way, fine to explain in spanish :-)</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/27", "title": "Mantis 17847 - Allow plugins to modify the cached message", "status": "closed", "labels": [], "priority": null, "description": ["<p>I have added a hook to sendemaillib.php to allow plugins to modify the cached message.\nThe plugins are called after the message template, content and remote urls have been processed, but prior to some placeholder processing. So you might want to review whether that is the best place.</p>\n<p>Note that the message is passed by reference, so there is no return value from the plugin.</p>", ["<p>my main worry would be performance to do it here. But without implementation that won't be a big issue and I guess the payoff would be what the plugin provides.</p>\n<p>Can you explain a typical use-case?. I'm not entirely sure I understand how useful this can be. If you do it by reference, then you get a very strange effect. The content would be parsed for subscriber 1, and then placeholders would be gone. To then re-parse it for subscriber 2 would be complicated without placeholders. If it's something that is specific for each subscriber, I think it would be better to have this in the part where placeholders are parsed. If it's something that is the same for all subscribers, it would be better to have this in the place where the campaign is loaded into cache, and only run it once. </p>", "<p>ah, I notice you explain the background in the mantis issue https://mantis.phplist.org/view.php?id=17847</p>\n<p>but isn't it better to have this in the placeholder section?</p>", "<p>The plugin doesn't use placeholders to indicate the content sections. Instead it uses additional attributes on the relevant html element, e.g. <code>&lt;div data-edit=\"article1\"&gt;</code></p>\n<p>So, as a one-off operation for the message, the plugin needs to merge the actual content values (which are in the messagedata table) with the annotated elements. It is not specific to each subscriber.\nThe current implementation by the Content Area plugin merges the template with the content area values and sets that as the value of <code>$cached[$messageid][\"content\"]</code></p>\n<p><code>if ($merged = phpList\\plugin\\ContentAreas\\TemplateModel::mergeIfTemplate($cached[$messageid]['template'], $messageid)) {\n        $cached[$messageid][\"content\"] = str_ireplace(\"[CONTENT]\", $cached[$messageid][\"content\"], $merged);\n        $cached[$messageid][\"template\"] = '';\n        $cached[$messageid][\"htmlformatted\"] = true;\n    }</code></p>\n<p>What I would like to do is put that processing  in a plugin method instead.</p>\n<p>While writing this I have realised that it might be better to put the merge result into <code>$cached[$messageid][\"template\"]</code>. That would avoid having to replace the CONTENT placeholder, as it would be done later on.</p>", "<p>ah, I just checked and you're doing this in the pre-cache function. So performance wise that's the best place, and it's only done once. </p>\n<p>Do you want to update the PR to change the template instead. I can wait with the merge until that's done.</p>", "<p>Please ignore that comment, it was to do with the change that I need to make to the plugin.</p>", "<p>ok.</p>\n<p>I'm not sure \"processLoadedMessage\" is a good name for it. Don't you think \"parsePrecachedMessage\" or \"parseCachedCampaign\" is a bit more descriptive and clear for this? I know I haven't been a king in terminology either, but that doesn't mean we can't change that.\nOf these two I think \"parseCachedCampaign\" is probably my pref.</p>", "<p>or maybe \"process\" instead of \"parse\" to be more open minded about what can be done with the data.</p>", "<p>Any of those are fine for me.</p>", "<p>ok, will merge and then rename it to \"processPrecachedCampaign\"</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/26", "title": "Mantis 17830 - php undefined index notice in plugin", "status": "closed", "labels": [], "priority": null, "description": ["<p>The validateSubscriptionPage() method of the Captcha plugin was being called when the captcha field had not been displayed, and then tried to access a non-existent variable.</p>\n<p>This seems to be caused by using subscribelib2.php on all the variations of the preferences page. This change restricts that to only when the preferences form has been submitted, not when the personal location page has been requested.</p>\n<p>Also fixed a few undefined index and variable php notices.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/25", "title": "Add login trigger to plugins", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hello,</p>\n<p>I recently wrote a PhpList plugin to support <a href=\"https://github.com/brenard/phplist-casldap-plugin\">CAS Single-Sign-On / LDAP administors authentification</a> and because SSO signified that PhpList does not have to use it own login form, I need a method to trigger CAS Authentification on login form display.\nI initially use the same method used by <a href=\"https://resources.phplist.com/plugin/cosign\">Cosign SSO plugin</a> but it's not only affect administrators login and also user login (for example, when access subscribe/unsubscribe pages).\nTo implement this triggers, I duplicate the logic of the logout() plugin method to permit plugins, before administrator login form display, to log user by their own method. When plugin login() method return True, I consider that plugin successfully authenticate the user and I refresh the page (using the same called URL).</p>", ["<p>Interesting. Thanks for that. I will review it. It would be important to see that this doesn't open loopholes. I'd be interested for others to join in and give feedback on this.</p>", "<p>You'r right for the possibily of a loop. In my study case, this is not a problem because the plugin make also a redirection to the CAS server before returning True and the redirection of Phplist.\nIn fact, we could remove the return of the plugin login()  method and leave the responsabilty to the method to redirect user in the right page if it's successfully logged the user.</p>", "<p>It might be clearer to put the new plugin call in index.php just before the existing login processing. If a plugin authenticates the admin then the current login processing can be avoided.</p>\n<p>The method name probably needs to reflect what it is meant to do, possibly something like autoLogin(), as I would expect that a login() method would be called after successfully logging-in.</p>\n<p>Also, the plugin could return the id or name of the admin so that core phplist can handle setting of $_SESSION['adminloggedin', $_SESSION['logindetails'], and $_SESSION['privileges'], rather than those being set within your plugin (and the Cosign plugin). Ideally core phplist would also handle unsetting those when logging-out,</p>", "<p>Looking a bit further, phplist already has a mechanism for custom authentication, in config.php</p>\n<p>```</p>\n<h1>admin authentication module.</h1>\n<h1>to validate the login for an administrator, you can define your own authentication module</h1>\n<h1>this is not finished yet, so don't use it unless you're happy to play around with it</h1>\n<h1>if you have modules to contribute, open a tracker issue at http://mantis.phplist.com</h1>\n<h1>the default module is phplist_auth.inc, which you can find in the \"auth\" subdirectory of the</h1>\n<h1>admin directory. It will tell you the functions that need to be defined for phplist to</h1>\n<h1>retrieve it's information.</h1>\n<h1>phplist will look for a file in that directory, or you can enter the full path to the file</h1>\n<h1>eg</h1>\n<h1>$admin_auth_module = 'phplist_auth.inc';</h1>\n<h1>or</h1>\n<h1>$admin_auth_module = '/usr/local/etc/auth.inc';</h1>\n<p>```</p>\n<p>This would need extending to provide an autoLogin method but might be neater if you always want to use SSO/LDAP authentication instead of the normal authentication.</p>", "<p>I'd like to retire this auth.inc mechanism and move it to a plugin instead. So, this could be combined in some way.</p>", "<p>The auth.inc mechanism is not really clear for me and I'm happy to know that it will be replace by plugin feature.</p>\n<p>Initially, I try to put plugin call for login in index.php but I don't know enough PhpList to know where to put this call. I think, It's could be near line 234 or near line 306, but witch page display in case of errors :\n- during forgotpassword process (on line 265).\n- during session IP check (on line 291)\n- during account validation (on line 298)\n- in case of session timeout (on line 312 and 319 if it's and ajax call)</p>\n<p>Futhermore, some check it's done on the current page (relative to login page) to known if some stuff as to be done or displayed (line 376, 404 and 533).</p>\n<p>May be the global process organization of the index.php file have to be rework to permit this call in unique and right place.</p>\n<p>Any ideas ?</p>", "<p>the auth.inc is quite easy. It's just a single class that needs some methods implemented to work. </p>\n<p>I'm not entirely sure how feasible it is to move this functionality to a plugin. I will need to look into that. It depends whether the plugins are available at that stage, or get loaded later on. I'm not entirely sure. \nI can't promise anything on timeline, but it's on the agenda.</p>", "<blockquote>\n<p>the auth.inc is quite easy. It's just a single class that needs some methods implemented to work.</p>\n</blockquote>\n<p>Yes, I saw that but this API is not realy in adequacy with SSO authentication. The main method of this API is validateLogin() use to validate login with a password entered in login form. In SSO authentication, I need a trigger before displaying the login form.</p>\n<p>Do you prefer that I implement this type of trigger in the actual auth.inc or in the plugin API ? Do you have some advise to implement this trigger call in index.php file ?</p>\n<p>Thank you</p>", "<p>I've added a mantis issue for this, to keep it organised.\nhttps://mantis.phplist.org/view.php?id=17918</p>", "<p>could you try this branch https://github.com/phpList/phplist3/tree/mantis17918 </p>\n<p>it allows normal plugins to manage the authentication.</p>\n<p>Some documentation is here https://resources.phplist.com/documentation/errors/adminauthchange</p>", "<p>@michield : Nice ! I will check it ! Thank you</p>", "<p>Hi @michield,</p>\n<p>I look your branch and I perplex : What I need to do, is a auth plugin to handle SSO login. That mean my auth plugin doesn't have to deal with login informations after user submit phpList login form, but it will have to handle automatic user login using SSO service when a user want to access phpList admin area and when is not already logged in.\nThis new branch approach is to merge old <em>admin_auth</em> class with plugin API, and I think is a good idea but is not solve my need to have a trigger to handle automatic login. Do you think is possible to add this type of trigger in plugin API ?</p>\n<p>Thank you !</p>", "<p>@brenard It might help if you can explain in functional terms, not in terms of phplist code, what you need to achieve. </p>\n<p>The Cosign plugin, https://github.com/bradallenfisher/phplist-plugin-cosign, expects that cosign will intercept all access to phplist to force the person to authenticate through cosign. So it is not possible to access phplist without already being authenticated. The plugin then picks up the admin id through the php server REMOTE_USER variable.</p>\n<p>Earlier you wrote</p>\n<blockquote>\n<p>I initially use the same method used by Cosign SSO plugin but it's not only affect administrators login and also user login (for example, when access subscribe/unsubscribe pages).</p>\n</blockquote>\n<p>I don't really understand that. How is what you want to achieve different to what the cosign plugin does?</p>", "<p>@michield : Ok, I will try to explain what I want to do with this auth plugin. This plugin is use to automatically authenticate user access to phpList admin interface using CAS SSO Server. This plugin use the PHP library phpCAS to handle dialog with the CAS SSO Server. The interaction between user's browser, CAS SSO Server and the application (phpList in my case) is pretty simple and explain here : \nhttp://jasig.github.io/cas/4.0.x/protocol/CAS-Protocol.html</p>\n<p>Basically :\n- User try to access to phpList admin but is not already authenticated. My plugin have to intercept this first request to redirect user to CAS SSO Server on URL https://cas.example.com/cas/login?servive=http://phplist.example.com/lists/admin\n- When the user will be authenticated by the CAS SSO Server, it will be redirected to phpList (on the URL pass with the <code>service</code> parameter) with in parameter, a CAS ticket (URL : http://phplist.example.com/lists/admin?ticket=[CAS-Ticket])\n- My plugin handle this request and use phpCAS library to retrieve user login corresponding to the CAS ticket (provided in URL) by using CAS SSO server webservice \n- After that, the user is recognized and we have it's login. My plugin will check if the user already exists in phpList DB and retrieve the user informations to initialized phpList session (<code>$_SESSION['logindetails']</code> variable in particular). If user does not exists in the phpList DB, it will be created.</p>\n<p>To handle this use case, I propose that phpList plugin API, in case of auth plugin, permit to provide a method that will be call when phpList have to authenticate the user (basically, before display the phpList login form). For instance, this method could return <code>True</code> is the user have been authenticated by the plugin or <code>False</code> instead. Of course, if the auth plugin have authenticated the user, phpList will not display the login form and the traditional workflow have to continue.</p>", "<p>Ah, interesting. You want to capture the login form. Yes, I'm not sure that is possible with the current implementation. Maybe we need one more action, before we even try to do anything, and redirect to the SSO Url.</p>\n<p>But maybe you can implement that already, with <a href=\"https://github.com/phpList/phplist3/blob/mantis17918/public_html/lists/admin/phpListAdminAuthentication.php#L78\">validateAccount</a>. You'd have to play with it a bit to see. I'm happy to add another hook if you need it to make that work.</p>\n<p>Also, I envisaged the plugin handling it's own data, ie the list of administrators. But it should be fine to use the phpList tables to store data if you want to, that's up to you.</p>", "<p>Hum, after a tour about validateAccount method, I think it's could not be a solution for my use case without some modifications on core because, this method is only call when login and password is pass by REQUEST or if a session is already initialized. Futhermore, the usage of this method to handle my use case seem to me a little bit twisted. However, I keep this method in mind, because I mean I have to implement it to secure existing user session.</p>\n<p>Finally, I always twink the good way to handle my use case (\"capture the login form\") is to add an hook during login process. What do you think if we add a case in the \"if\" block in <code>index.php</code> file witch check the <code>$_SESSION['adminloggedin']</code> state (beginning at line 253) ? We could call here an auth plugin method to offer it the possibility to capture the login form before display. This method could return a boolean or eventually the futur content of <code>$_SESSION['adminloggedin']</code> variable.</p>", "<blockquote>\n<p>Finally, I always twink the good way to handle my use case (\"capture the login form\") is to add an hook during login process. What do you think if we add a case in the \"if\" block in index.php file witch check the $_SESSION['adminloggedin'] state (beginning at line 253) ?</p>\n</blockquote>\n<p>@bramley @michield What do you think about this suggestion?</p>", "<p>yes, that will be fine. Will try to work on that soon.</p>", "<p>I've added a mantis issue to deal with this: https://mantis.phplist.org/view.php?id=18027</p>\n<p>If someone has a PR for this, that will be helpful, otherwise I will try to find time to do this. In the meantime, I will close this PR, as it is outdated.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/24", "title": "Mantis #0017820 : Adding additional content fields to be used in temp\u2026", "status": "closed", "labels": [], "priority": null, "description": ["<ol>\n<li>Add content1-10 and textcontent1-10 fields to message table.</li>\n<li>On the Content tab under compose message, add text boxes for message 1 - 10. Unfortunately I was unable to use the current gui friendly editor. As soon as I tried to host more than 1 on the same page, the page would not render. So, for now, if you want to use HTML, you have to look at source code.</li>\n<li>In your template, you can use [CONTENT1]-[CONTENT10] to access the values you entered.</li>\n</ol>\n<p>The only part I am not sure about is upgrade.php.  My small block of code that adds the fields may need to be added to the \"version conditional\" to only add the fields for 3.0.12 and later.</p>", ["<p>as long as you store your data in the messagedata table, there won't be a need to change the DB structure. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/20", "title": "Introduce Travis-ci and Behat testing", "status": "closed", "labels": [], "priority": null, "description": ["", ["<p>@michield can you give it a review ?</p>", "<p>ah, nice. Yes, I'll try it out.</p>", "<p>it's all new files isn't it? Then it should be fairly safe to merge so that others can try it out. What do you think?</p>", "<p>There is no integration with core code. It's an external component. Merge shoudn't cause any regression. Maybe I can add some doc to explain how to use it?</p>", "<p>yes, that would be great. </p>", "<p>OK! Dont merge for now I'll add some doc</p>", "<p>@michield I added the doc. PR is ready to merge</p>", "<p>nice!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/19", "title": "Only HTML with no formatting appears after install", "status": "closed", "labels": [], "priority": null, "description": ["<p>I've followed the instructions to install the latest version (checked out using svn)- I successfully installed and logged into the web however there seems to be no CSS formatting whatsoever on the webapp and I just see pure HTML. Not sure if I need to define a theme or something. </p>", ["<p>as you closed it, I presume you found out what to do?</p>\n<p>https://resources.phplist.com/develop/infrastructure</p>", "<p>Yes I did figure it out after I looked at the github dir structure. Thanks</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/18", "title": "Mantis 0017765: Allow plugins to add to the view message page", "status": "closed", "labels": [], "priority": null, "description": ["<p>Added a viewMessage() method to defaultplugin.php\nModified message.php to call each plugin's viewMessage method and include the result in the page. Also, put the sprintf format string into a variable so that it is not repeated.</p>", ["<p>Thanks</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/17", "title": "Updated pull request to fix issue with ip address changing for admin when behind a proxy", "status": "closed", "labels": [], "priority": null, "description": ["<p>Related issues\nhard coded image: https://mantis.phplist.org/view.php?id=17741\nip address changed: https://mantis.phplist.org/view.php?id=17742</p>", ["<p>Great! thanks. </p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/16", "title": "Fix hardcoded link and \"your ip address has changed\" when php server is behind a proxy", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fix to handle x_forwarded_for / x-forwarded-for.  This fixes an issue where you can receive \"Your IP address has changed. For security reasons, please login again\" when running behind an Apache, or any other, web proxy.</p>", ["<p>You can switch that behaviour off in your config file (the IP address check).</p>", "<p>Related issues\nhard coded image:  https://mantis.phplist.org/view.php?id=17741\nip address changed: https://mantis.phplist.org/view.php?id=17742</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/15", "title": "Added checkEmail JS", "status": "closed", "labels": [], "priority": null, "description": ["<p>Adding a regular expression email check on JS before triggering php checks.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/14", "title": "Adding alt tags to images to make some antispam systems happy", "status": "closed", "labels": [], "priority": null, "description": ["<p>Passing my test mails through some antispam check systems complained about missing alt tags even if they should be empty because of the size of usertrack image.\nThis runs in my production system since 3.0.6, does not affect the output in any cosmetic way, but makes antispam systems more happy.</p>", ["<p>But the alts are there already. Now you've duplicated them.</p>", "<p>Maybe the anti-spam check doesn't like that they're empty?</p>", "<p>Well i missed them on 3.0.6. I'll check my code tomorrow :)</p>", "<p>ah, yes, it's always useful to try to run the latest code.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/13", "title": "Is contribution under AGPL license possible?", "status": "closed", "labels": [], "priority": null, "description": ["<p>If I would want to make a contribution, and the contribution is licensed under AGPL (like PHPLiist itself, perhaps even  AGPL 3 or later, not 3 only), would the contribution be possible?</p>\n<p>I ask because I'm not sure if the CLA you have would allow this.</p>", ["<p>stupid hakre double posting.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/12", "title": "Is contribution under AGPL license possible?", "status": "closed", "labels": [], "priority": null, "description": ["<p>If I would like to make a contribution, and the contribution is licensed under AGPL (like PHPLiist itself, perhaps even AGPL 3 or later, not 3 only), would the contribution be possible?</p>\n<p>I ask because I'm not sure if the CLA you have would allow this.</p>\n<p>If you answer, please do a full quote of my question in your answer.</p>", ["<p>If you are the person who made the contribution, then you can decide what to do with it. I'm not sure how the contribution would be AGPL licensed if it is not your code. If it was made by someone else, you need to ask them to sign the CLA. If the contribution is yours, and you sign the CLA, then that's all no problem at all.</p>", "<p>I meant explicitly with no CLA but validly under AGPL and compatible with the license of phplist itself. Like forking phplist under AGPL, doing changes and then contributing back to phpList.</p>\n<p>Just no further rights as those governed by the AGPL license. Like you license the software to everybody else as well.</p>", "<p>At this stage I can't accept contributions to the core of phpList without the CLA. The CLA actually explicitly states that the code will always remain AGPL, so that should be fine. </p>", "<p>That part of the CLA does not have the word <em>\"only\"</em> in it. My question is about whether you're using the CLA because you have intend to re-license the contribution under different licensing terms <em>as well</em>.</p>", "<p>At this moment in time I do not intend to. But learning from other projects like ownCloud, I do not want to close that door either. Also, apart from re-licensing, having a single entity with the core code rights allows for better (more efficient) protection in court, in case of violations. That is the reason that the FSF is <a href=\"https://www.gnu.org/licenses/why-assign.html\">requesting a CLA as well</a></p>\n<p>So, that's two reasons. Possible expansion into new revenue streams that make the project more economically viable and able to survive (re-licensing) and ensuring that the AGPL license most effectively protected (one sole copyright holder).</p>\n<p>If this is important to you, then it may be best to write a plugin instead. The CLA only applies to the core code. Plugins have their own license.</p>", "<p>But of course, send me an absolutely amazing PR, that I will want to merge without any doubts, because it brings me coffee in the morning (or something similar), and tell me you can't sign the CLA and I may change my mind. Eventually, this is a meritocracy.</p>", "<p>Thanks for talking openly. And yeah, cheers. Coffee in the morning is good.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/11", "title": "plugin dependency checking", "status": "closed", "labels": [], "priority": null, "description": ["<p>Use a method for dependency check so that conditions are evaluated by calling the method, instead of using eval.\nOn the plugins page display the (first) reason for dependency check failing</p>", ["<p>ok, let's do it that way.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/10", "title": "fix shortenTextDisplay function", "status": "closed", "labels": [], "priority": null, "description": ["<p>Fixed shortening function (mb_str*)</p>", ["<p>It would be good to add a test on the availability of the mb_ functions. They are not alwasy there.</p>", "<p>instead of this PR, I added a check to make sure the mb_ functions exist.</p>\n<p>https://github.com/phpList/phplist3/commit/932f911b232bf650d3703c13b8772caa9a58e373</p>", "<p>The same test should be added to other files (or add to the requirements for hosting):\nadmin/commonlib/lib/interfacelib.php\nadmin/connect.php\nadmin/index.php\nadmin/PHPMailer/class.phpmailer.php (!)</p>", "<p>phpMailer has the tests. The others are all mb_strtolower which is dealt with (not very elegantly) here https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/index.php#L19</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/9", "title": "please document copyright/license", "status": "closed", "labels": [], "priority": null, "description": ["<p>Please document origin, copyright and license for images in \n- <code>public_html/lists/images/smiley</code>\n- <code>public_html/lists/admin/ui/dressprow/images/*x*</code></p>\n<p>It is unlikely that those icon set and smiles are under AGPL-3...</p>", ["<p>smileys removed, as they are not in use. They did originate from the fckeditor (iirc)</p>", "<p>dressprow is remote repo, with it's own license. Images referred here https://github.com/phpList/phplist-ui-dressprow/blob/master/images/icons.txt</p>", "<p>And links in this file are dead? I can't find any licensing information by following those links.</p>", "<p>I will ask the persons who added the icons. I think they were public domain, but not sure.</p>", "<p>Thanks.</p>", "<p>Hi all,\n@onlyjob you are right liks are dead. Icons were under CC license. \nI found a copy of the archive here https://github.com/nick-desteffen/dev_icons/blob/master/pc.de-duesseldorf-icon-pack.zip. It seem like they renamed it from Munich to duesseldorf.</p>", "<p>Or it's this one: https://github.com/nick-desteffen/dev_icons/blob/master/pc.de-munich-icon-pack.zip</p>", "<p>@michield munich icons are orange. We are using the dark one (those on duesseldorf zip )</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/issues/8", "title": "non-free `progressbar.js`", "status": "closed", "labels": [], "priority": null, "description": ["<p>During packaging of <em>phpList</em> for Debian I've noticed that <code>public_html/lists/admin/js/progressbar.js</code> <sup><a href=\"https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/js/progressbar.js\">1</a></sup> is non-free because its redistribution is prohibited, see\nhttp://www.dynamicdrive.com/notice.htm</p>\n<p>Please consider removing proprietary script. Thanks.</p>", ["<p>will do, thanks for finding that.</p>", "<p>done f3047de9d0db19fda40afd179a9564c24f7b9d9d</p>", "<p>The licensing seems to have changed (July last year) and now redistribution is allowed</p>\n<blockquote>\n<p>As a software developer, use our DHTML scripts within a application/ program as part of its interface, such as a CSS menu being used as the program's navigation interface. The program itself can be distributable.</p>\n</blockquote>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/7", "title": "fix invalid SQL causing database initialisation errors.", "status": "closed", "labels": [], "priority": null, "description": ["<p>Signed-off-by: Dmitry Smirnov onlyjob@member.fsf.org</p>", ["<p>can you explain why that is an improvement? To me, both formats are equivalent:</p>\n<p>https://dev.mysql.com/doc/refman/5.0/en/replace.html</p>", "<p>I'm not sure why but original code is not working on Debian Jessie with MySQL 5.5.42.\nI also fail to see the problem with <code>SET</code> notation but it is just doesn't work -- perhaps Oracle changed some defaults? I've tested the change successfully and I am confident that it fixes the problem.</p>", "<p>Alternatively I may have missed minor syntax error producing invalid SQL but now it fixed...</p>", "<p>Before I can merge, would you mind <a href=\"https://www.phplist.com/cla\">signing the CLA</a> ?</p>", "<p>Odd by the way, I use \"mysql  Ver 14.14 Distrib 5.5.41, for debian-linux-gnu (x86_64) using readline 6.3\" and the original code works fine. I wonder if it's something else.</p>", "<blockquote>\n<p>Before I can merge, would you mind signing the CLA ?</p>\n</blockquote>\n<p>I feel uncomfortable signing any kind of CLA.\nI agree with terms of AGPL-3+ and the very fact of my contribution confirms that AGPL-3+ will be governing my contribution to the project.\nCLA is unnecessary and very unusual for AGPL-3 licensed project. </p>\n<p>AGPL demands that any <em>phpList</em> user should share their improvements to <em>phpList</em>.\nWhy being compliant with license terms is not enough?\nI have a feeling that by asking contributors to sign CLA you create conflict with AGPL-3 spirit and that CLA might dramatically diminish number of contributors and their willingness to help.</p>\n<p>You may find interesting that there are rumors that <em>systemd</em> was made merely because developers could not merge their improvements with <em>upstart</em> due to contribution agreement. It could be that the latter actually defined the destiny of a project...</p>", "<blockquote>\n<p>and the original code works fine. I wonder if it's something else.</p>\n</blockquote>\n<p>very odd indeed. By there is no mistake, original code somehow generated invalid SQL.\nI even picked sample from <code>/tmp/queries.log</code> and tried to run it manually. I couldn't recognise syntax error so I've experimented with quoting for a while but managed to make it work only by using <code>VALUES</code> syntax. Database was initialised with <code>CREATE DATABASE phplistdb DEFAULT CHARACTER SET utf8</code>.</p>", "<blockquote>\n<p>I have a feeling that by asking contributors to sign CLA you create conflict with AGPL-3 spirit and that CLA might dramatically diminish number of contributors and their willingness to help.</p>\n</blockquote>\n<p>Yes, I'm aware of that. But I'm prepared to take that risk. The CLA gives me the flexibility to explore different income streams, which otherwise would not be possible. Finding a good way to run healthy businesses based on Open Source is for everyone's benefit, most importantly the Open Source community. For 15 years I've been looking for this, and a contribution of a few hours tops should not impede that. The CLA guarantees the code to be AGPL, but allows me to close it for potential clients who cannot operate with FOSS as it stands, eg governments and others. </p>", "<p>When I contribute I want guarantees that my contribution will never be closed under any circumstances. (A)GPL is guarantees that and I won't give anyone unfair advantages.</p>\n<p>With all due respect it is not true that governments can not operate FLOSS. As a matter of fact number of governments are beginning to realise that they can not operate non-FLOSS due to all the risks and insecurity, lack of peer review/audit etc. Open source community will not benefit from exceptions. IMHO it would be best if you obey licensing terms just like everyone else.</p>\n<p>Speaking about this particular contribution it is probably not copyright-able since it is very small, changes very little and introduces no new logic whatsoever.</p>", "<p>I was giving the government as example, and maybe a wrong one, but it's the principle of having the flexibility. I have no plans to do so, but I don't want to close the door on it either. If you have a compelling contribution that I would be silly not to include, I may review this position. For now, I have no incentive to change this policy. </p>", "<p>By the way, if you really want this in, you can mark the contribution as MIT licensed without signing the CLA.</p>\n<p>But I'm not entirely convinced that the change is necessary.</p>", "<p>Fair enough. Thank you for being flexible. Please consider my contribution <a href=\"http://opensource.org/licenses/MIT\">MIT</a>-licensed. Would you like me to add statement to commit message?</p>", "<p>Thanks. No, that'll be fine like that. I'll try to find someone to second this change.</p>", "<p>The original statement has now been rewritten but the problem was due to missing a double-quote between single-quotes at the end of the line.</p>\n<p><code>set translation = \"'. $trans. '');</code></p>", "<p>Yeah, it is hard to see through this extraordinary ugly quoting... Thanks, @bramley.</p>", "<p>Ah, so no longer needed I guess.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/6", "title": "Tick all the checkboxes under a category when select all lists is ticked", "status": "closed", "labels": [], "priority": null, "description": ["<p>Hi there,</p>\n<p>I've submitted an enhancement request in mantis https://mantis.phplist.com/view.php?id=17630, it has all the description there. Basically, I modified the phplist slighlty to suit my needs. I thought I might just share what I did and maybe it could help some people. Please let me know what do you think about the patch.</p>\n<p>Thank you,</p>\n<p>Matheus</p>", ["<p>related to https://github.com/phpList/phplist-ui-dressprow/pull/9</p>", "<p>Any news from \"legal\"? Alternatively, you can mark your contribution as  MIT licensed by stating that here.</p>", "<p>Hi Michiel,</p>\n<p>I am really sorry for taking such a long time for this. So I've escalated\nthis issue to the director, I need to get his permission to sign the CLA so\nI won't get into any trouble. I'll get back to you once I have feedback\nfrom my director.  I really apologise for taking too long for making this\ndecision.</p>\n<p>Regards,</p>\n<p>Matheus</p>\n<p>On Tue, Jul 7, 2015 at 4:29 AM, Michiel notifications@github.com wrote:</p>\n<blockquote>\n<p>Any news from \"legal\"? Alternatively, you can mark your contribution as\nMIT licensed by stating that here.</p>\n<p>\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/phpList/phplist3/pull/6#issuecomment-118917638.</p>\n</blockquote>", "<p>the next version is planned for Aug 10 or about. Would be great to have this in.</p>", "<p>Hi there,</p>\n<p>Finally get the green light from the director :). I'll sign the CLA via\ngithub. Sorry it took a while to get this sorted.</p>\n<p>Cheers,</p>\n<p>Matheus</p>\n<p>On Thu, Jul 23, 2015 at 7:18 AM, Michiel notifications@github.com wrote:</p>\n<blockquote>\n<p>the next version is planned for Aug 10 or about. Would be great to have\nthis in.</p>\n<p>\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/phpList/phplist3/pull/6#issuecomment-123832105.</p>\n</blockquote>", "<p>Hi there,</p>\n<p>I've signed the CLA, but it didn't give me any notification where it was\nsuccessful or not after form submit. Could you please check did the\nsignature fail or not?</p>\n<p>Thanks,</p>\n<p>Matheus</p>\n<p>On Tue, Aug 4, 2015 at 10:36 AM, Matheus Hamonangan &lt;matheusgultom@gmail.com</p>\n<blockquote>\n<p>wrote:</p>\n<p>Hi there,</p>\n<p>Finally get the green light from the director :). I'll sign the CLA via\ngithub. Sorry it took a while to get this sorted.</p>\n<p>Cheers,</p>\n<p>Matheus</p>\n<p>On Thu, Jul 23, 2015 at 7:18 AM, Michiel notifications@github.com wrote:</p>\n<blockquote>\n<p>the next version is planned for Aug 10 or about. Would be great to have\nthis in.</p>\n<p>\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/phpList/phplist3/pull/6#issuecomment-123832105.</p>\n</blockquote>\n</blockquote>", "<p>If you go to https://www.phplist.com/cla it should ask you to login with Github and allow the application. When you've done it, it should show you the date you did it.</p>", "<p>Cool, I've signed it. Thanks</p>\n<p>On Wed, Aug 5, 2015 at 12:07 AM, Michiel notifications@github.com wrote:</p>\n<blockquote>\n<p>If you go to https://www.phplist.com/cla it should ask you to login with\nGithub and allow the application. When you've done it, it should show you\nthe date you did it.</p>\n<p>\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/phpList/phplist3/pull/6#issuecomment-127578802.</p>\n</blockquote>", "<p>Great, thanks!</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/5", "title": "Mantis 17615 - Messagedata table has incorrect id field", "status": "closed", "labels": [], "priority": null, "description": ["<p>When copying rows from messagedata when repeating a message, avoid the 'id' row.\nNot sure whether this is better than explicitly setting the value to the new message id, but solves the original problem.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/4", "title": "Mantis 17624 - Subscriber profile page does not update date attribute", "status": "closed", "labels": [], "priority": null, "description": ["<p>Use \"dateattribute[x]\", where x is the attribute id, instead of the attribute name for the html name attribute. The date fields are then referenced as $_POST['dateattribute'][x]['month'] etc, and the novalue field referenced as $_POST['dateattribute'][x]['novalue'].</p>\n<p>Remove hidden field as it does not seem to be needed, and was in an incorrect position in the html.</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/3", "title": "Fixed use of deprecated methods and compatibility with PHP 5.6", "status": "closed", "labels": [], "priority": null, "description": ["<p>This patch is necessary to run on my server and development machine.</p>", ["<p>Re the first file, init.php, are you suggesting that the iconv processing is now not needed for any version of php, not just 5.6? </p>\n<p>There are also some other unrelated changes - I cannot see where $timezone comes from. There is a commented-out define in the config file, SYSTEM_TIMEZONE.</p>\n<p>You might want to correct the title, \"deprecated\" not \"depreciated\"!</p>", "<p>Hey @bramley thanks for the review. Wasn't aware of the timezone setting in the config file - why is this commented out by defult (which cases errors at runtime)? I assumed it wasn't set and hence added it.</p>", "<p>Iconv is only used on the attempt to convert a remote page to UTF8 if it isn't. https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/lib.php#L1069\nThat's actually somewhat untested code, so I'm fine to take it out and drop the iconv dependency. Would be nice to address though at some point. I think there's a mantis for it.</p>\n<p>iconv used to be used on the subject as well, https://github.com/phpList/phplist3/blob/master/public_html/lists/admin/send_core.php#L640 but that is commented out now.</p>", "<p>Using iconv is fine, it is just the iconv_set_encoding() function that is deprecated in php 5.6.\nBut I cannot find any explanation of what effect the function has so it is not clear whether those lines can be removed or whether they need to be surround by a test of the php version, which is what Joomla has done https://github.com/joomla/joomla-cms/pull/5194</p>", "<p>Hmm, yes, and the change in PHP is undocumented</p>\n<p>https://bugs.php.net/bug.php?id=69114</p>", "<p>looks like copying Joomla would be the best solution: https://github.com/joomla/joomla-cms/commit/ebead8274863aeb3598f7ad302d5c670984c608b#diff-6899d92657785065c65f0c4cdf51c574R28</p>", "<p>https://github.com/phpList/phplist3/commit/00fe90148b4aa763218afdc9023225a694f27b36</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/2", "title": "Mantis 17620 - Predictable embargo time when repeating a message", "status": "closed", "labels": [], "priority": null, "description": ["<p>In a similar way to pull request 1, this pull request changes the way that the new embargo is calculated when a message is repeated.</p>\n<p>It adds a multiple of the repeat interval to the current embargo so that the new value is in the future, i.e. greater than the current time. The usual case will be to add the repeat interval once, which is the same as the current processing, but when the queue processing has been delayed then a multiple of the repeat interval will be added.</p>\n<p>The \"repeat exclusion\" processing has been simplified a little and also moved to immediately after calculating the embargo. This avoids creating a new message, which is not fully populated, when more than 15 dates are rejected. That processing had a bug that I think stopped the processing moving beyond two dates. In this line <code>$repeat</code> should have been <code>$repeatinterval</code></p>\n<p><code>$repeat += $msgdata[\"repeatinterval\"];</code></p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/1", "title": "Mantis 17290 - Predictable embargo time when periodically requeuing a message", "status": "closed", "labels": [], "priority": null, "description": ["<p>This pull request changes the way that the new embargo time is calculated when a message is requeued.\nIt adds a multiple of the requeue interval to the current embargo so that the new value is in the future, i.e. greater than the current time. The benefit of this is that the embargo time is then predictable, e.g. every day at 08:00, instead of drifting forward as it now does.</p>\n<p>The sql looks a bit complex but the underlying algorithm is straightforward\n- calculate the number of requeue intervals between the current embargo and now - this will usually be between 0 and 1 unless the queue processing has been delayed\n- truncate to an integer and add 1\n- multiply by the requeue interval\n- add to the current embargo</p>\n<p>This results in the earliest time in the future that is consistent with the current embargo and the requeue interval.</p>\n<p>The online help also needs to be changed (I have a revised version) but I don't know how that is managed.</p>", ["<p>The contents of the help is here: https://github.com/phpList/phplist-lan-help</p>", "<p>So I should just fork that repository in the same way as for the phplist3 respository? If I change some of the English text, how will that get translated into other languages?</p>", "<p>Yes, you can fork that repo and do PRs for it. Translations work the same way (forking and PRs).</p>", "<p>:+1: reading the SQL makes me dazzle :-) but I guess if it works in your setup as you describe, then it'll be great improvement.</p>"]]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/735", "title": "Add Constant For Suppressing Welcome Message Globally and Per Subscribe Page", "status": "open", "labels": [], "priority": null, "description": ["<p>Partial feature implementation for #18433 in Mantis, defined a constant that can disable the welcome message, either globally or per subscribe form</p>\n<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>A fairly simple statement and new constant that allows the welcome message to be suppressed, after a subscriber has confirmed their subscription. This can be done globally or on a per subscription page basis.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>This is a partial fix to an issue on Mantis (https://mantis.phplist.org/view.php?id=18433)</p>", []]}, {"subject": "phplist", "link": "/phpList/phplist3/pull/735", "title": "Add Constant For Suppressing Welcome Message Globally and Per Subscribe Page", "status": "open", "labels": [], "priority": null, "description": ["<p>Partial feature implementation for #18433 in Mantis, defined a constant that can disable the welcome message, either globally or per subscribe form</p>\n<!---Thanks for contributing to phpList!-->\n\n<h2>Description</h2>\n<p>A fairly simple statement and new constant that allows the welcome message to be suppressed, after a subscriber has confirmed their subscription. This can be done globally or on a per subscription page basis.</p>\n<h2>Related Issue</h2>\n<!--- If it fixes an open issue on Mantis (https://mantis.phplist.org), please include a link to the issue here. -->\n<p>This is a partial fix to an issue on Mantis (https://mantis.phplist.org/view.php?id=18433)</p>", []]}]